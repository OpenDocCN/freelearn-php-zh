- en: '20'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '20'
- en: Supporting Multi-Tenancy
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持多租户
- en: 'This chapter discusses different approaches to designing and implementing multi-tenancy
    in Moodle. If any of the following scenarios are of interest, then this chapter
    is for you:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章讨论了在Moodle中设计和实现多租户的不同方法。如果以下任何场景对您感兴趣，那么本章就是为您准备的：
- en: An authority representing multiple schools or colleges in a region or country
    wishes to provide each school or college with a separate Moodle system but needs
    to manage the systems centrally
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个代表一个地区或国家多个学校或学院的权威机构希望为每个学校或学院提供独立的Moodle系统，但需要集中管理这些系统
- en: A private training organization with multiple customers, each needing its own
    walled area
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个拥有多个客户、每个客户都需要自己的封闭区域的私人培训机构
- en: A company that has regional offices, each requiring its own learning space
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个拥有地区办事处、每个办事处都需要自己的学习空间的公司
- en: First, we will provide an overview of what multi-tenancy is and why there isn’t
    a one-size-fits-all solution before we present three different types of implementations.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将概述多租户是什么以及为什么没有一种一刀切解决方案，然后再介绍三种不同的实现类型。
- en: The first approach, multi-tenancy via categories, uses a single Moodle instance
    with specifically tailored course categories and permissions.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 第一种方法，通过分类的多租户，使用一个带有特定定制课程类别和权限的单个Moodle实例。
- en: The second implementation, multi-tenancy via a centralized code base, provides
    separate standalone Moodle instances and delegates all responsibilities to local
    administrators.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种实现方式，通过集中代码库的多租户，提供独立的独立Moodle实例并将所有责任委托给本地管理员。
- en: Lastly, we will describe how multi-tenancy has been implemented in Moodle Workplace.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将描述多租户如何在Moodle Workplace中实现。
- en: 'We will cover the following topics in this chapter:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Understanding Moodle multi-tenancy
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解Moodle多租户
- en: Supporting multi-tenancy via categories
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过分类支持多租户
- en: Supporting multi-tenancy via a centralized code base
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过集中代码库支持多租户
- en: Supporting multi-tenancy in Moodle Workplace
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持Moodle Workplace中的多租户
- en: Understanding Moodle multi-tenancy
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解Moodle多租户
- en: What exactly is multi-tenancy? In a Moodle context, multi-tenancy can be defined
    as follows.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 多租户究竟是什么？在Moodle环境中，多租户可以定义为以下内容。
- en: Important note
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: In a Moodle multi-tenancy setup, separate entities or instances (tenants) are
    administered centrally, where specific features are devolved and managed locally.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在Moodle多租户设置中，独立的实体或实例（租户）被集中管理，其中特定功能被下放并本地管理。
- en: 'The following radial diagram shows a simplistic high-level view of Moodle multi-tenancy:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的径向图展示了Moodle多租户的简化高级视图：
- en: '![Figure 20.1 – Moodle multi-tenancy: a high-level view ](img/Figure_20.01_B18779.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图20.1 – Moodle多租户：高级视图](img/Figure_20.01_B18779.jpg)'
- en: 'Figure 20.1 – Moodle multi-tenancy: a high-level view'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.1 – Moodle多租户：高级视图
- en: 'Two critical high-level questions need answering when it comes to multi-tenancy:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在多租户方面，有两个关键的高级问题需要回答：
- en: Which features are handled **centrally**, and which are delegated – that is,
    dealt with at the **tenant level**?
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪些功能是在**集中**处理的，哪些是委托的 – 即在**租户级别**处理的？
- en: Which elements can be **shared** across tenants (if any)?
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪些元素可以在租户之间**共享**（如果有的话）？
- en: These questions are critical because the answers determine what type of multi-tenancy
    is suitable for your organization.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这些问题至关重要，因为答案决定了哪种类型的多租户适合您的组织。
- en: 'Let’s drill down further to the two dimensions – features and sharing – in
    a Moodle context, as illustrated in the following diagram:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进一步深入到Moodle环境中的两个维度 – 功能和共享 – 如以下图所示：
- en: '![Figure 20.2 – Moodle multi-tenancy: features and sharing ](img/Figure_20.02_B18779.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图20.2 – Moodle多租户：功能和共享](img/Figure_20.02_B18779.jpg)'
- en: 'Figure 20.2 – Moodle multi-tenancy: features and sharing'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.2 – Moodle多租户：功能和共享
- en: 'More questions arise when looking at specific Moodle functionality that is
    potentially impacted by multi-tenancy:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当查看可能受多租户影响的具体Moodle功能时，会引发更多问题：
- en: '**Users**: Are user accounts managed centrally and assigned to tenants or can
    a tenant admin manage users locally? How about authentication? Does each tenant
    have a separate authentication mechanism or are logins managed site-wide? Do user
    names have to be unique across tenants? Can users be in multiple tenants? Does
    every tenant have its own guest account? How about tenant-aware user profile fields?
    Should there be a user quota per tenant? And what about tenant cohorts and tenant
    roles?'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户**：用户账户是集中管理并分配给租户，还是租户管理员可以本地管理用户？关于身份验证呢？每个租户是否有单独的身份验证机制，或者登录是全局管理的？用户名是否必须在所有租户中唯一？用户能否在多个租户中？每个租户是否都有自己的访客账户？租户感知的用户配置文件字段怎么办？是否应该为每个租户设置用户配额？还有租户群体和租户角色呢？'
- en: '**Courses**: Will courses (and categories) be managed centrally, locally, or
    both? Can courses be sharable across tenants? Should users from multiple tenants
    be able to enrol in the same course and, vice versa, can users enrol in courses
    in multiple tenants?'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**课程**：课程（和类别）将集中管理、本地管理还是两者兼而有之？课程能否在租户之间共享？来自多个租户的用户是否能够注册同一课程，反之，用户能否在多个租户中注册课程？'
- en: '**Plugins**: Do all tenants have the same plugins or can they be activated
    and deactivated at the tenant level? Can the configuration of each plugin differ
    for each tenant or is it identical for all?'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**插件**：所有租户都有相同的插件，还是可以在租户级别激活和停用？每个插件的配置是否可以针对每个租户不同，或者对所有租户都是相同的？'
- en: '**Admin settings**: Which site-wide settings can be configured individually
    (if any)? Should the master administrator be able to lock down specific configuration
    settings to prevent individual tenant admins from changing those values?'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理员设置**：哪些全局设置可以单独配置（如果有）？是否应该允许主管理员锁定特定的配置设置，以防止个别租户管理员更改这些值？'
- en: '**Admin features**: Which admin tools, such as reporting and backups, can be
    configured and operated by tenant admins? How about security and privacy setups?
    Will reporting across tenants be allowed?'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理员功能**：哪些管理员工具，如报告和备份，可以被租户管理员配置和操作？关于安全和隐私设置呢？是否允许跨租户报告？'
- en: '**Themes**: Does the main theme apply to all tenants or can each tenant have
    its own design? How about one white-labeled theme that can be branded for each
    tenant?'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主题**：主要主题适用于所有租户，还是每个租户都可以有自己的设计？关于一个可以针对每个租户进行品牌化的白标主题呢？'
- en: '**Moodle code**: Is the code base identical for all tenants or can individual
    tenants have their own code (as in, make modifications)?'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Moodle代码**：代码库对所有租户都是相同的，还是个别租户可以有他们自己的代码（即，进行修改）？'
- en: The list goes on and on. You can see from the questions that there cannot be
    a one-size-fits-all approach to multi-tenancy. When you ask three Moodle consultants
    to come up with a multi-tenancy checklist, you will likely receive four different
    versions.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 列表可以一直继续下去。从问题中可以看出，对于多租户来说，不可能有一种一刀切的方法。当你让三位Moodle顾问提出一个多租户清单时，你很可能会收到四个不同的版本。
- en: Now that we have asked several questions, let us look at three (very) different
    multi-tenancy approaches to hopefully answer some of them.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经提出了几个问题，让我们看看三种（非常）不同的多租户方法，希望能回答其中的一些问题。
- en: Supporting multi-tenancy via categories
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过类别支持多租户
- en: 'The simplest form of multi-tenancy is configuring your Moodle system so that
    a category represents a tenant. The following diagram illustrates this approach:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 多租户最简单的形式是将Moodle系统配置为使一个类别代表一个租户。以下图表说明了这种方法：
- en: '![Figure 20.3 – Multi-tenancy via categories ](img/Figure_20.03_B18779.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![图20.3 – 通过类别实现多租户](img/Figure_20.03_B18779.jpg)'
- en: Figure 20.3 – Multi-tenancy via categories
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.3 – 通过类别实现多租户
- en: A category represents a ring-fenced area (tenant) where courses are managed
    locally. Users can be assigned via category cohorts; that is, users can be members
    of multiple tenants.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 一个类别代表一个隔离区域（租户），在这里课程是本地管理的。用户可以通过类别群体分配；也就是说，用户可以是多个租户的成员。
- en: You can assign a dedicated theme for each category, as we saw in [*Chapter 7*](B18779_07.xhtml#_idTextAnchor140),
    *Enhancing Moodle’s Look and Feel*. However, users won’t see that branding until
    they have logged in. A new category admin role should be created and the appropriate
    permissions granted accordingly – for instance, the ability to add subcategories
    and courses.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以为每个类别分配一个专用主题，就像我们在[*第7章*](B18779_07.xhtml#_idTextAnchor140)中看到的，*增强Moodle的外观和感觉*。然而，用户在登录之前不会看到这个品牌。应该创建一个新的类别管理员角色，并相应地授予适当的权限——例如，添加子类别和课程的权限。
- en: One main drawback of the category-based approach is that plugins can only be
    configured site-wide and not at the tenant (that is, category) level. You can
    bypass this limitation by using the *addinstance* capability for each module,
    which allows you to control which activities can be added to which courses. However,
    this capability only caters to activities, not other plugins, such as authentication,
    enrolment, or plagiarism. *addinstance* can also only be applied at the course
    level and not at the category level.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 基于类别的这种方法的一个主要缺点是插件只能在整个站点范围内配置，而不能在租户（即类别）级别配置。您可以通过使用每个模块的 *addinstance* 能力来绕过这种限制，这允许您控制哪些活动可以添加到哪些课程中。然而，这种能力仅适用于活动，不适用于其他插件，如身份验证、注册或剽窃。*addinstance*
    也只能应用于课程级别，而不能应用于类别级别。
- en: 'The following checklist summarizes this poor man’s approach to multi-tenancy:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 以下清单总结了这种穷人的多租户方法：
- en: '![Figure 20.4 – Checklist: multi-tenancy via categories ](img/Figure_20.04_B18779.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图 20.4 – 清单：通过类别实现的多租户](img/Figure_20.04_B18779.jpg)'
- en: 'Figure 20.4 – Checklist: multi-tenancy via categories'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 20.4 – 清单：通过类别实现的多租户
- en: Multi-tenancy by categories is mainly suitable for sites where users are managed
    centrally and departments, faculties, or other entities only have control over
    course content. The approach is unsuitable for sites where a higher degree of
    autonomy is required at the tenant level. Multi-tenancy via a centralized code
    base overcomes that restriction, as shown in the following section.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 通过类别实现的多租户主要适用于用户集中管理且部门、学院或其他实体仅控制课程内容的网站。这种方法不适用于需要更高程度租户级别自主权的网站。通过集中化代码库实现的多租户克服了这种限制，如下一节所示。
- en: Supporting multi-tenancy via a centralized code base
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过集中化代码库支持多租户
- en: The principal idea of this multi-tenancy approach is to have a single code base
    but multiple separate and standalone Moodle instances.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 这种多租户方法的主要思想是拥有一个单一的代码库，但多个独立的 Moodle 实例。
- en: An example where this kind of model is suitable is where each tenant represents
    a school or college in the region, and each school or college has its own Moodle
    admin, theme, and administration settings for managing users, courses, privacy,
    and grades.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 这种模型适用的一种例子是，每个租户代表该地区的学校或学院，每个学校或学院都有自己的 Moodle 管理员、主题和管理设置，用于管理用户、课程、隐私和成绩。
- en: 'The following diagram illustrates this federated approach:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示说明了这种联邦方法：
- en: '![Figure 20.5 – Multi-tenancy via a centralised code base ](img/Figure_20.05_B18779.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图 20.5 – 通过集中化代码库实现的多租户](img/Figure_20.05_B18779.jpg)'
- en: Figure 20.5 – Multi-tenancy via a centralised code base
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 20.5 – 通过集中化代码库实现的多租户
- en: 'This solution requires two main configuration steps:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 此解决方案需要两个主要配置步骤：
- en: '**Web** **server configuration**:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**Web 服务器配置**：'
- en: For each Moodle instance, a separate virtual host is required where the `ServerName`,
    `ErrorLog`, and `CustomLog` parameters point to the individual instances (tenants),
    but the `DocumentRoot` variable must be identical in all virtual hosts, ensuring
    that the same code base (`CFG->dirroot`) is used. A virtual host can either be
    a separate `vhost` file or a `<VirtualHost>` entry in `httpd.conf`.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个 Moodle 实例，都需要一个单独的虚拟主机，其中 `ServerName`、`ErrorLog` 和 `CustomLog` 参数指向单个实例（租户），但
    `DocumentRoot` 变量必须在所有虚拟主机中保持一致，以确保使用相同的代码库（`CFG->dirroot`）。虚拟主机可以是单独的 `vhost`
    文件，也可以是 `httpd.conf` 中的 `<VirtualHost>` 条目。
- en: '**Moodle setup**:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**Moodle 设置**：'
- en: There is one main `config.php` file that acts as the launch pad for all other
    instances that are represented by individual `config.php` files. These local `config.php`
    files must be stored in separate locations and have to follow a strict naming
    convention (in our example, `<domain name>_config.php`). The installation of these
    config files and their maintenance is usually implemented via scripts to ensure
    consistency.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 存在一个主要的 `config.php` 文件，作为所有其他由单个 `config.php` 文件表示的实例的启动平台。这些本地 `config.php`
    文件必须存储在单独的位置，并必须遵循严格的命名约定（在我们的例子中，为 `<域名>_config.php`）。这些配置文件的安装和维护通常通过脚本实现，以确保一致性。
- en: 'To make this work, the main `config.php` file has to be modified as follows,
    assuming your local `config.php` files are stored in a dedicated `/``tenants`
    folder:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 要使此方案生效，主 `config.php` 文件必须按以下方式修改，假设您的本地 `config.php` 文件存储在专门的 `/tenants` 文件夹中：
- en: '[PRE0]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: In each local `config.php` file, `$CFG->dirroot` must be set to the same value
    specified in `DocumentRoot` in `vhost` here.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个本地 `config.php` 文件中，`$CFG->dirroot` 必须设置为在此 `vhost` 中指定的 `DocumentRoot` 的相同值。
- en: Local config files can be customized further to cater to any idiosyncrasies
    in a particular tenant. For instance, you might want to freeze specific administration
    parameters that the tenant administrator must not modify.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 可以进一步自定义本地配置文件，以适应特定租户的任何特殊需求。例如，您可能希望冻结租户管理员不得修改的特定管理参数。
- en: Using this setup, you only have to maintain a single code base and provide each
    tenant with a separate, standalone Moodle instance. The implementation is also
    suitable for environments where you have to provision Moodle instances on an ad
    hoc basis – for instance, in a training or development environment.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这种设置，您只需维护单个代码库，并为每个租户提供一个独立的、独立的Moodle实例。该实现也适用于您必须根据需要提供Moodle实例的环境，例如在培训或开发环境中。
- en: 'The following checklist summarizes this centralised approach to multi-tenancy:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 以下清单总结了这种集中式的多租户方法：
- en: '![Figure 20.6 – Summary: multi-tenancy via a centralized code base ](img/Figure_20.06_B18779.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图20.6 – 概述：通过集中式代码库实现多租户](img/Figure_20.06_B18779.jpg)'
- en: 'Figure 20.6 – Summary: multi-tenancy via a centralized code base'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.6 – 概述：通过集中式代码库实现多租户
- en: 'The approaches presented so far offer very different solutions to multi-tenancy:
    one uses a single Moodle instance with configured course categories and permissions,
    while the other provides separate standalone instances and delegates all responsibility
    to local administrators. The implementation presented in the following section
    is positioned somewhere between these two: a single Moodle instance with a built-in
    tenant functionality.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 目前提出的方案为多租户提供了非常不同的解决方案：一个方案使用单个Moodle实例，并配置了课程类别和权限，而另一个方案则提供独立的独立实例，并将所有责任委托给本地管理员。以下章节中提出的实现方案位于这两种方案之间：一个具有内置租户功能的单个Moodle实例。
- en: Supporting multi-tenancy in Moodle Workplace
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Moodle Workplace中支持多租户
- en: This book is about Moodle administration and all its content applies to Moodle
    Workplace, too. Since Moodle Workplace provides a unique feature to cater to multi-tenancy,
    we will make an exception and cover a Moodle Workplace-only feature here. Parts
    of the section have been borrowed from the *Tenants, Organizations, and Teams*
    chapter in (advertisement alert!) my book *Corporate Learning with Moodle Workplace*
    by Packt Publishing.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 本书是关于Moodle管理和其所有内容也适用于Moodle Workplace。由于Moodle Workplace提供独特的功能来满足多租户需求，我们将做出例外，并在这里介绍仅适用于Moodle
    Workplace的功能。本节的部分内容来自（广告警告！）Packt Publishing出版的我的书《Moodle Workplace企业学习》中的“租户、组织和团队”章节。
- en: 'There are two critical parts to multi-tenancy in Moodle Workplace:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle Workplace中的多租户有两个关键部分：
- en: '**Tenants**: Tenants are entirely isolated entities with their own look and
    feel, structure, users, and learning entities'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**租户**：租户是完全隔离的实体，拥有自己的外观和感觉、结构、用户和学习实体'
- en: '**Sharing entities**: Sharing courses and certificates across tenants is supported,
    as is sharing data such as programs, reports, or organization structures'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**共享实体**：支持在租户之间共享课程和证书，也支持共享数据，如计划、报告或组织结构'
- en: We will cover both aspects of Moodle Workplace multi-tenancy in the following
    two subsections by describing how they work in general. For implementation details
    about Moodle Workplace’s powerful yet versatile multi-tenancy feature, check out
    [docs.moodle.org/en/Multi-tenancy](http://docs.moodle.org/en/Multi-tenancy), also
    written and maintained by the author.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在以下两个子节中介绍Moodle Workplace多租户的两个方面，通过描述它们的一般工作方式。有关Moodle Workplace强大而通用的多租户功能的实现细节，请参阅[docs.moodle.org/en/Multi-tenancy](http://docs.moodle.org/en/Multi-tenancy)，该文档也由作者编写和维护。
- en: Understanding Moodle Workplace tenants
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解Moodle Workplace租户
- en: In Moodle Workplace, tenants are isolated entities with their own users, hierarchies,
    roles, dynamic rules, theme settings, reports, custom pages, and learning entities
    (courses, programs, and certifications).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在Moodle Workplace中，租户是隔离的实体，拥有自己的用户、层次结构、角色、动态规则、主题设置、报告、自定义页面和学习实体（课程、计划和认证）。
- en: 'All Moodle Workplace tools are multi-tenant-aware – depending on the feature,
    different levels of multi-tenancy are supported. The following diagram shows a
    high-level view of a tenant and multi-tenant-aware elements:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 所有Moodle Workplace工具都支持多租户感知 – 根据功能，支持不同级别的多租户。以下图表展示了租户和多租户感知元素的高级视图：
- en: '![Figure 20.7 – Moodle Workplace multi-tenancy ](img/Figure_20.07_B18779.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![图20.7 – Moodle Workplace多租户](img/Figure_20.07_B18779.jpg)'
- en: Figure 20.7 – Moodle Workplace multi-tenancy
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.7 – Moodle Workplace多租户
- en: 'A single default tenant is created during installation or after upgrading from
    Moodle LMS to Moodle Workplace. Each tenant has the following properties:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装期间或从Moodle LMS升级到Moodle Workplace之后，将创建单个默认租户。每个租户都有以下属性：
- en: '**Tenant name** and **ID number**: Name of the tenant and unique tenant identifier.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**租户名称**和**ID号**：租户的名称和唯一的租户标识符。'
- en: '**Site name** and **Site short name**: These two tenant settings override the
    **Full site name** and the **Short name for the site** settings respectively in
    **Site administration** | **General** | **Site** **home settings**.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**站点名称**和**站点简称**：这两个租户设置分别覆盖**站点管理** | **常规** | **站点** **主页设置**中的**完整站点名称**和**站点简称**设置。'
- en: '`workplace.openumlaut.com?tenant=packt`.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`workplace.openumlaut.com?tenant=packt`。'
- en: '**Course category**: Courses belonging to a particular tenant must be located
    in a tenant category. We will elaborate more on that feature later when we deal
    with sharing content across tenants.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**课程类别**：属于特定租户的课程必须位于租户类别中。我们将在处理跨租户共享内容时详细介绍该功能。'
- en: 'There are two critical rules – some may call them restrictions – when dealing
    with **tenant users** in Workplace:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理Workplace中的**租户用户**时，有两个关键规则——有些人可能称之为限制：
- en: Important note
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: A user is always assigned to a tenant; an account cannot be tenantless.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 用户始终被分配给一个租户；账户不能没有租户。
- en: A user cannot be assigned to more than one tenant; an account always belongs
    to just one single tenant.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 用户不能被分配给超过一个租户；账户始终只属于一个单一租户。
- en: 'When a new user account is created, whether by self-registration, manual entry,
    batch upload, or via web services, it is always attached to the default tenant
    unless specified otherwise. The following diagram illustrates how users are assigned
    to tenants:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 当创建新的用户账户时，无论是通过自我注册、手动输入、批量上传还是通过网络服务，除非另有说明，否则总是附加到默认租户。以下图表说明了用户如何分配给租户：
- en: '![Figure 20.8 – Moodle Workplace: users and tenants ](img/Figure_20.08_B18779.jpg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![图20.8 – Moodle Workplace：用户和租户](img/Figure_20.08_B18779.jpg)'
- en: 'Figure 20.8 – Moodle Workplace: users and tenants'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.8 – Moodle Workplace：用户和租户
- en: Each user belongs to precisely one tenant, although this is likely to change
    in the future. Moodle Workplace supports tenant user quotas and lets you specify
    the maximum number of tenants allowed.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 每个用户恰好属于一个租户，尽管这可能在将来发生变化。Moodle Workplace支持租户用户配额，并允许您指定允许的最大租户数量。
- en: Moodle’s user profile fields have been extended to allow the definition of different
    user profile fields per tenant. When profile fields belong to tenant-specific
    categories, they will only appear in the profile for users in those tenants; this
    also includes sign-up and edit forms.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle的用户配置文件字段已扩展，允许为每个租户定义不同的用户配置文件字段。当配置文件字段属于特定租户的类别时，它们将只出现在该租户用户的配置文件中；这也包括注册和编辑表单。
- en: 'Each tenant can have zero, one, or many **tenant admins** who have devolved
    administration functions that allow you to fine-tune their level of responsibility.
    In addition to handling tenant users, a tenant admin has permission to manage
    tenant roles, configure tenant authentication settings, adjust the tenant branding,
    and create tenant dashboards by default:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 每个租户可以有零个、一个或多个**租户管理员**，他们拥有下放的管理功能，允许您微调他们的责任级别。除了处理租户用户外，租户管理员默认有权管理租户角色、配置租户认证设置、调整租户品牌和创建租户仪表板：
- en: '**Tenant roles**:'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**租户角色**:'
- en: Role assignments to users can be managed separately for each tenant – thus,
    handling a tenant is almost like context.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 可以分别为每个租户独立管理用户角色的分配——因此，处理租户几乎就像是一个上下文。
- en: '**Tenant authentication**:'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**租户认证**：'
- en: Moodle Workplace supports multi-tenancy for authentication; you can configure
    different authentication options for different tenants. At the time of writing,
    supported authentication methods are *manual*, *email-based self-registration*,
    and *OAuth 2*. *SAML* is an explicitly supported, third-party authentication method.
    For more details, check out [docs.moodle.org/en/Multi-tenancy_authentication](http://docs.moodle.org/en/Multi-tenancy_authentication).
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle Workplace支持多租户认证；您可以为不同的租户配置不同的认证选项。在撰写本文时，支持的认证方法有*手动*、*基于电子邮件的自我注册*和*OAuth
    2*。*SAML*是一个明确支持的第三方认证方法。有关更多详细信息，请参阅[docs.moodle.org/en/Multi-tenancy_authentication](http://docs.moodle.org/en/Multi-tenancy_authentication)。
- en: '**Tenant branding**:'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**租户品牌**：'
- en: You can customize the look and feel of the tenant by configuring the multi-tenancy-aware
    Workplace theme. The branding elements, images, colors, custom SCSS, and footer
    are described in detail in the Moodle Docs at [docs.moodle.org/en/Workplace_theme](http://docs.moodle.org/en/Workplace_theme).
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过配置多租户感知的Workplace主题来自定义租户的外观和感觉。品牌元素、图像、颜色、自定义SCSS和页脚在Moodle Docs中有详细描述，请参阅[docs.moodle.org/en/Workplace_theme](http://docs.moodle.org/en/Workplace_theme)。
- en: '**Tenant dashboards**'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**租户仪表板**'
- en: By default, all tenant dashboards are linked to the content defined in the default
    site dashboard, and any modifications to this page will appear for the new users
    in any tenant. Any user with appropriate permissions (site and tenant admins by
    default) can define a tenant-specific dashboard with the same editing capabilities
    as the main dashboard. Tenant admins can manage the dashboards of their tenants
    and reset the configuration for tenant users.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，所有租户仪表板都链接到默认站点仪表板中定义的内容，并且对任何租户的新用户来说，对这一页的任何修改都会显示出来。任何具有适当权限的用户（默认为站点和租户管理员）都可以定义一个具有与主仪表板相同编辑能力的特定租户仪表板。租户管理员可以管理其租户的仪表板并重置租户用户的配置。
- en: All Moodle Workplace tools, such as programs, certifications, custom pages,
    dynamic rules, and organization structures (departments, positions, and jobs),
    are fully multi-tenancy-aware. In addition to defining and managing these features
    per tenant, Moodle Workplace also supports sharing content and data across tenants,
    as described in the following subsection.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 所有Moodle Workplace工具，如程序、认证、自定义页面、动态规则和组织结构（部门、职位和职位），都完全支持多租户。除了按租户定义和管理这些功能外，Moodle
    Workplace还支持在租户之间共享内容和数据，如以下子节所述。
- en: Understanding Moodle Workplace sharing entities
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解Moodle Workplace共享实体
- en: 'Moodle Workplace supports two ways that sharing across tenants can be facilitated:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle Workplace支持两种方式来促进租户之间的共享：
- en: '**Shared content**: Sharing courses and certificates'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**共享内容**：共享课程和证书'
- en: '**Shared space**: Sharing Moodle Workplace data, such as programs or organization
    structures'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**共享空间**：共享Moodle Workplace数据，例如程序或组织结构'
- en: Let’s have a brief look at both options.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们简要看看这两种选项。
- en: Sharing content in Moodle Workplace
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在Moodle Workplace中共享内容
- en: Typically, each tenant has its own course category, and hence, its own courses.
    The manual enrolment method has been modified, so the user picker only displays
    users from the current tenant. However, there are scenarios where you might want
    to share specific courses among tenants, which is achieved by placing courses
    in the *shared* *courses* category.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，每个租户都有自己的课程类别，因此也有自己的课程。手动注册方法已修改，因此用户选择器仅显示当前租户的用户。然而，在某些情况下，您可能希望在不同租户之间共享特定的课程，这可以通过将课程放置在*共享*
    *课程*类别中来实现。
- en: 'Multi-tenancy does not apply to course content, which means that if learners
    or trainers are enrolled in a course, they will see users from other tenants while
    browsing the course. This behavior is intentional: suppose your organization has
    some shared courses. It can be assumed that you want the learners to study together
    and the trainer from one tenant to be a trainer for all learners regardless of
    their tenant.'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 多租户不适用于课程内容，这意味着如果学习者或培训师注册了课程，他们在浏览课程时将看到来自其他租户的用户。这种行为是有意为之的：假设您的组织有一些共享课程。可以假设您希望学习者一起学习，并且来自一个租户的培训师对所有学习者来说都是培训师，无论他们的租户是什么。
- en: If you share courses between different tenants and want users from each tenant
    to learn independently, they must belong to separate groups. Allocation to separate
    groups is done automatically when a shared course is part of a program.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在不同租户之间共享课程，并且希望每个租户的用户独立学习，他们必须属于不同的组。当共享课程是程序的一部分时，自动将分配到不同的组。
- en: The certificates tool we covered in the *Skills and incentives* section in [*Chapter
    9*](B18779_09.xhtml#_idTextAnchor181), *Configuring Educational Features*, uses
    the shared course category feature just described. If a certificate template is
    placed in a tenant course category, it is limited to this particular tenant; otherwise,
    it is shared across all tenants.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在[*第9章*](B18779_09.xhtml#_idTextAnchor181)“配置教育功能”部分中“技能和激励”部分介绍的证书工具，使用了前面描述的共享课程类别功能。如果证书模板放置在租户课程类别中，它仅限于这个特定的租户；否则，它将在所有租户之间共享。
- en: Custom pages enable site and tenant administrators to create personalized experiences
    for different audiences by easily adding new pages to the navigation. The content
    on these pages can be customized using standard Moodle Workplace blocks. While
    tenant custom pages are specific to a single tenant, global custom pages are shared
    across all tenants.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义页面允许站点和租户管理员通过轻松添加新页面到导航中，为不同的受众创建个性化的体验。这些页面上的内容可以使用标准的Moodle Workplace块进行定制。虽然租户自定义页面是针对单个租户的，但全局自定义页面是在所有租户之间共享的。
- en: Sharing data in Moodle Workplace using Shared space
  id: totrans-116
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用共享空间在Moodle Workplace中共享数据
- en: The **Shared space** feature enables the sharing of entities across all tenants.
    It works like a special tenant where users can create supported entities available
    in other tenants.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '**共享空间**功能使得可以在所有租户之间共享实体。它就像一个特殊的租户，用户可以创建在其他租户中可用的受支持实体。'
- en: Important note
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: '**Shared space** is a special tenant to share Moodle Workplace entities among
    **all** tenants.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '**共享空间**是一个特殊的租户，用于在**所有**租户之间共享Moodle Workplace实体。'
- en: 'Currently, the following Workplace tools are supported in **Shared space**:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，以下Workplace工具在**共享空间**中受到支持：
- en: Programs and certifications
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 项目和认证
- en: Organization structure (departments, positions, and jobs)
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 组织结构（部门、职位和职位）
- en: Dynamic rules
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动态规则
- en: Reports
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告
- en: 'In the following screenshot, you can see a list of custom reports to demonstrate
    the **Shared space** feature. Moodle Workplace’s report generator is the same
    as the one described in [*Chapter 12*](B18779_12.xhtml#_idTextAnchor233), *Gaining
    Insights through Moodle Reporting and Analytics*, only with more report sources
    and the support of **Shared space**:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下屏幕截图中，您可以看到一个自定义报告列表，以演示**共享空间**功能。Moodle Workplace的报告生成器与在第[*第12章*](B18779_12.xhtml#_idTextAnchor233)中描述的相同，*通过Moodle报告和分析获得洞察力*，只是有更多的报告来源和**共享空间**的支持：
- en: '![Figure 20.9 – Moodle Workplace: users and tenants ](img/Figure_20.09_B18779.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![图20.9 – Moodle Workplace：用户和租户](img/Figure_20.09_B18779.jpg)'
- en: 'Figure 20.9 – Moodle Workplace: users and tenants'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.9 – Moodle Workplace：用户和租户
- en: Two reports (**Issued certificates** and **New users (all)**) have a little
    mark beside them to indicate that they are shared across tenants, while the other
    two reports are only available in the local tenant.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 两个报告（**已颁发证书**和**新用户（所有）**）旁边有一个小标记，表示它们是在租户之间共享的，而其他两个报告仅在本地租户中可用。
- en: 'This concludes the overview on multi-tenancy in Moodle Workplace, which also
    applies to the Moodle Workplace app. To summarize, we have created a familiar
    checklist as shown in the following figure:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 这就完成了对Moodle Workplace中多租户的概述，这也适用于Moodle Workplace应用程序。为了总结，我们创建了一个熟悉的清单，如下图所示：
- en: '![Figure 20.10 – Summary of multi-tenancy in Moodle Workplace ](img/Figure_20.10_B18779.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![图20.10 – Moodle Workplace中多租户的总结](img/Figure_20.10_B18779.jpg)'
- en: Figure 20.10 – Summary of multi-tenancy in Moodle Workplace
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图20.10 – Moodle Workplace中多租户的总结
- en: For more interesting reading on multi-tenancy in Moodle Workplace, check out
    the article at [moodle.com/news/lms-multi-tenancy](http://moodle.com/news/lms-multi-tenancy).
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解更多关于Moodle Workplace中多租户的有趣阅读，请查看[moodle.com/news/lms-multi-tenancy](http://moodle.com/news/lms-multi-tenancy)上的文章。
- en: Summary
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter discussed different ways to support Moodle multi-tenancy. We first
    defined what multi-tenancy is and showed why there is a need for different types
    of multi-tenancy implementations. We presented three different approaches, one
    of which hopefully matches your requirements.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 本章讨论了支持Moodle多租户的不同方法。我们首先定义了什么是多租户，并说明了为什么需要不同类型的多租户实现。我们介绍了三种不同的方法，其中之一可能符合您的需求。
- en: The first model, multi-tenancy via categories, used a single Moodle instance
    with configured course categories and permissions.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 第一种模型，通过类别实现的多租户，使用了一个配置了课程类别和权限的单个Moodle实例。
- en: The second approach, multi-tenancy via a centralized code base, provided separate
    standalone instances and delegated all responsibilities to local administrators.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种方法，通过集中式代码库实现的多租户，提供了独立的独立实例，并将所有责任委托给本地管理员。
- en: Lastly, we presented multi-tenancy in Moodle Workplace, the most versatile out-of-the-box
    implementation currently available.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们介绍了Moodle Workplace中的多租户功能，这是目前可用的最灵活的即装即用实现。
- en: We covered three representative implementations to facilitate multi-tenancy
    in Moodle. These solutions can, of course, be extended or further modified to
    cater to your individual requirements. While some aspects of implementing multi-tenancy
    might look technical, daunting, and labor-intensive, it will be a relatively pain-free
    exercise if a solid strategy is followed, possibly assisted by a professional
    and experienced Moodle Partner.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 我们介绍了三种代表性的实现，以促进 Moodle 的多租户功能。当然，这些解决方案可以根据您的个别需求进行扩展或进一步修改。
- en: Appendix
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 我们感兴趣的 `config.php` 值是以美元符号开头的。每个参数都有以下信息格式：
- en: Configuration Settings
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 我们将首先检查 `config.php` 并探讨 Moodle 支持哪些类型的参数。在提供这个概述之后，我们将查看两种类型的配置设置：
- en: This appendix on configuration settings aims to provide you with a list of parameters
    that can be modified in `config.php` and the impact each value will have.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/Figure_A.01_B18779.jpg)'
- en: 'We will first examine `config.php` and explore what types of parameters are
    supported by Moodle. After providing this overview, we will look at two types
    of configuration settings:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '`<value>` 参数必须是参数接受的类型，这取决于设置的类型。以下表格提供了每种类型的详细信息：'
- en: '`config.php`.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置设置
- en: '**System settings**: We distinguish between default and supplementary configuration
    values. The former will have been created by the installer and are mostly required
    for Moodle to function; the latter are parameters that change various Moodle behaviors.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重要提示
- en: Configuration reference – an overview
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本附录旨在提供您可以在 `config.php` 中修改的参数列表以及每个值将产生的影响。
- en: The `config.php` configuration file contains several settings and variables
    that heavily influence how Moodle operates. It is located in the main directory
    of your Moodle system (`$CFG->dirroot`) and can be edited with any text editor.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '`config.php` 配置文件包含多个设置和变量，这些变量极大地影响了 Moodle 的运行方式。它位于您的 Moodle 系统主目录中 (`$CFG->dirroot`)，可以使用任何文本编辑器进行编辑。'
- en: Important note
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 修改 `config.php` 时请小心！Moodle 严重依赖于其内容，任何错误都可能导致软件故障。
- en: Be careful when modifying `config.php`! Moodle depends heavily on its content,
    and any faults can cause the software to malfunction.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/Figure_A.02_B18779.jpg)'
- en: 'You should create a backup of the config file before modifying it, so you can
    roll back to it in case of problems. Also, ensure the file permissions are correctly
    set, as the file contains the plain-text database username and password. In a
    Linux environment, the owner should be `root`, the group also `root`, and the
    permissions set to `644`. A sample configuration file is shown in the following
    screenshot:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在修改配置文件之前，您应该创建其备份，以便在出现问题时可以回滚到它。此外，请确保文件权限设置正确，因为该文件包含纯文本数据库用户名和密码。在 Linux
    环境中，所有者应为 `root`，组也应该是 `root`，权限设置为 `644`。以下截图显示了示例配置文件：
- en: '![](img/Figure_A.01_B18779.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '`config.php`。'
- en: Figure A.1 – Sample config.php file
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.1 – 示例 config.php 文件
- en: 'The `config.php` values we are interested in are the ones that start with a
    dollar symbol. Each parameter has the following information format:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '`<parameter>` 是配置设置的名称。每个设置都有一个唯一的标识符。'
- en: '[PRE1]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `<object>` parameter is the part of Moodle in which the parameter is used
    (`$CFG` or `$THEME`). Third-party modules or custom distributions might have introduced
    their own objects—for example, `$TOTARA`. We will focus on `$CFG` objects as these
    are most relevant to administrators.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 图 A.2 – 配置设置中支持的数据类型
- en: '`<parameter>` is the name of the configuration setting. Each setting has a
    unique identifier.'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 配置参考——概述
- en: 'The `<value>` parameter must be of the type the parameter accepts, which depends
    on the type of the setting. The following table provides information for each
    of the types:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '**系统设置**：我们区分默认和补充配置值。前者将由安装程序创建，对于 Moodle 的运行通常是必需的；后者是改变 Moodle 行为的参数。'
- en: '![](img/Figure_A.02_B18779.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '`<object>` 参数是 Moodle 中使用该参数的部分 (`$CFG` 或 `$THEME`)。第三方模块或自定义发行版可能引入了它们自己的对象——例如，`$TOTARA`。我们将重点关注
    `$CFG` 对象，因为这些与管理员最相关。'
- en: Figure A.2 – Data types supported in configuration settings
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 每个参数都必须以分号结尾。要注释掉一个参数，请在其前面加上两个反斜杠。
- en: Each parameter has to be terminated by a semi-colon. To comment out a parameter,
    precede it with two forward slashes.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 实现多租户的一些方面可能看起来技术性强、令人畏惧且劳动密集，但如果遵循一个稳固的策略，可能还需要专业和经验丰富的 Moodle 合作伙伴的帮助，那么这将是一个相对无痛苦的过程。
- en: 'Before we deal with the different settings, we’ll discuss some tools that might
    come in useful. As there is no list of available settings, you have to generate
    your own. To do so, execute the following shell command in your `$CFG->dirroot`:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们处理不同的设置之前，我们将讨论一些可能有用的工具。由于没有可用的设置列表，你必须自己生成。为此，请在你的 `$CFG->dirroot` 中执行以下shell命令：
- en: '[PRE2]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This concatenated set of commands will generate a list of all available `$CFG`
    variables in alphabetical order. The `moosh config-get` command (see [*Chapter
    17*](B18779_17.xhtml#_idTextAnchor325), *Working with Moodle Admin Tools*) only
    provides you with a list of all config variables that can be set via Moodle’s
    admin interface and are stored in `mdl_config`; it excludes the *hidden* variables
    we are interested in here.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 这一系列连接的命令将生成一个按字母顺序排列的所有可用 `$CFG` 变量的列表。`moosh config-get` 命令（见[*第17章*](B18779_17.xhtml#_idTextAnchor325)，*使用Moodle管理工具*）仅提供给你可以通过Moodle管理界面设置并存储在
    `mdl_config` 中的所有配置变量列表；它排除了我们感兴趣的 *隐藏* 变量。
- en: Moodle provides a report that lets you monitor all changes to any config settings
    via the administration interface. You can find the report at **Site administration**
    | **Reports** |**Config changes**.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle提供了一个报告，允许你通过管理界面监控任何配置设置的所有更改。你可以在 **网站管理** | **报告** | **配置更改** 中找到该报告。
- en: '![](img/Figure_A.03_B18779.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_A.03_B18779.jpg)'
- en: Figure A.3 – Config changes report
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.3 – 配置更改报告
- en: The table shows any changes made to settings in the **Site administration**
    section. For each modification, **Date**, **First name / Surname**, **Plugin**,
    **Setting**, **New value**, and **Original value** are shown.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 表格显示了在 **网站管理** 部分对设置所做的任何更改。对于每个修改，**日期**、**名字/姓氏**、**插件**、**设置**、**新值**和**原始值**都会显示。
- en: If you are experimenting with configuration variables, consider using the site
    admin presets we discussed in [*Chapter 17*](B18779_17.xhtml#_idTextAnchor325),
    *Working with Moodle Admin Tools*. The tool lets you create backups of site settings,
    which can then be rolled back if something goes wrong.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在尝试配置变量，请考虑使用我们在[*第17章*](B18779_17.xhtml#_idTextAnchor325)，*使用Moodle管理工具*中讨论的网站管理员预设。该工具允许你创建网站设置的备份，如果出现问题，可以回滚。
- en: Configuration reference – administration settings
  id: totrans-168
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置参考 – 管理设置
- en: Each parameter in the `config.php`. If a value has been set via this method,
    it is effectively hardcoded and cannot be changed via the Moodle interface, not
    even by the administrator.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '`config.php` 中的每个参数。如果值已通过此方法设置，则它实际上是硬编码的，无法通过Moodle界面更改，即使是管理员也无法更改。'
- en: 'For example, you might want to ensure that an administrator does not turn on
    HTTPS for logins on an internal site, even by accident. Activating this would
    lock everybody out of the site if no SSL certificate is installed. To do this,
    enter the following line in `config.php`:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你可能想确保管理员不会在内部网站上打开HTTPS登录，即使是不小心。如果没有安装SSL证书，激活此设置将使所有人无法访问网站。为此，请在 `config.php`
    中输入以下行：
- en: '[PRE3]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: How do you know what the parameter is called? Go to the respective setting in
    Moodle (in this case, **Site administration** | **Security** | **HTTP security**),
    and you will see the parameter’s name underneath the label.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 你如何知道参数的名称？前往Moodle中相应的设置（在这种情况下，**网站管理** | **安全** | **HTTP安全**），你将在标签下方看到参数的名称。
- en: Tip
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can search for any parameter in the search box of the administration menu.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在管理菜单的搜索框中搜索任何参数。
- en: 'If the value is specified in `config.php`, Moodle will display **Defined in
    config.php** beside the parameter, which indicates that the setting cannot be
    changed via the admin interface. Invalid values are also shown for these hardcoded
    settings. In the following screenshot, the **Debug messages** value is incorrect
    while the **Display debug messages** value is correct:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 如果值在 `config.php` 中指定，Moodle将在参数旁边显示 **定义在config.php中**，这表明该设置不能通过管理界面更改。对于这些固定设置，也会显示无效值。在以下屏幕截图中，**调试消息**的值是不正确的，而**显示调试消息**的值是正确的：
- en: '![](img/Figure_A.04_B18779.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_A.04_B18779.jpg)'
- en: Figure A.4 – Hardcoded configuration settings
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.4 – 固定配置设置
- en: If you wish to force plugin settings, you must put them in a special array called
    `forced_plugin_settings` (see the reference to optional parameters later).
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你希望强制插件设置，你必须将它们放入一个名为 `forced_plugin_settings` 的特殊数组中（稍后参考可选参数的说明）。
- en: Configuration reference – system settings
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置参考 – 系统设置
- en: This section contains the actual reference for configuration settings; the explanations
    have been taken from help pages, forum posts, and comments in the source code.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 本节包含配置设置的实际情况；解释来自帮助页面、论坛帖子以及源代码中的注释。
- en: Default parameters
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 默认参数
- en: 'Default parameters are settings created by the installer, derived from `config-dist.php`.
    Most settings are compulsory for Moodle to operate, so be careful when modifying
    them. The parameters are listed in the order in which they appear by default in
    `config.php`:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 默认参数是由安装程序创建的设置，来源于`config-dist.php`。大多数设置对于Moodle的运行是必需的，因此修改它们时要小心。参数按它们在`config.php`中默认出现的顺序列出：
- en: '![](img/Figure_A.05_B18779.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Figure_A.05_B18779.jpg)'
- en: Figure A.5 – config.php default parameters
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 图A.5 – config.php默认参数
- en: In addition to the default parameters, there are hundreds of optional parameters,
    some of which we will deal with in the following subsection.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 除了默认参数外，还有数百个可选参数，其中一些我们将在以下小节中处理。
- en: Optional parameters
  id: totrans-186
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可选参数
- en: There are over 300 `config.php` parameters that cannot be modified via the Moodle
    administrator interface. These hidden settings allow you to modify the behavior
    of Moodle without the requirement to change any code.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 有超过300个`config.php`参数不能通过Moodle管理员界面进行修改。这些隐藏设置允许您在不更改任何代码的情况下修改Moodle的行为。
- en: We only cover a representative list of settings, ignoring those that are only
    relevant to developers and designers. We have also disregarded obsolete and obscure
    parameters and ones that have a counterpart in the admin settings. Parameters
    have been listed in alphabetical order, and some have been grouped for simplicity.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 我们只涵盖了一组代表性的设置，忽略了那些仅与开发人员和设计师相关的设置。我们还忽略了过时和晦涩的参数以及与管理员设置中相对应的参数。参数已按字母顺序列出，并且为了简化，一些参数已被分组。
- en: 'Available types are **A**rray, **B**inary, **N**umeric, **L**ist, and **S**tring:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 可用的类型是**数组**、**二进制**、**数字**、**列表**和**字符串**：
- en: '| **Name** | **Type** | **Description** |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| **名称** | **类型** | **描述** |'
- en: '| adhoctaskageerroradhoctaskagewarn | N | Moodle checks how old tasks are in
    the ad hoc queue and warns at 10 minutes and errors at 4 hours. |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| adhoctaskageerroradhoctaskagewarn | N | Moodle检查临时队列中任务有多久，在10分钟时警告，在4小时时出错。
    |'
- en: '| admineditalways | B | When set to true, enables admins to edit any post at
    any time. |'
  id: totrans-192
  prefs: []
  type: TYPE_TB
  zh: '| admineditalways | B | 当设置为true时，允许管理员在任何时候编辑任何帖子。 |'
- en: '| apacheloguser | N | Logging Apache: `0` = off, `1` = user id, `2` = full
    name, `3` = username. |'
  id: totrans-193
  prefs: []
  type: TYPE_TB
  zh: '| apacheloguser | N | 记录Apache日志：`0` = 关闭，`1` = 用户ID，`2` = 全名，`3` = 用户名。 |'
- en: '| apachemaxmem | N | Memory threshold over which Apache children will be reaped
    after they complete serving the request. |'
  id: totrans-194
  prefs: []
  type: TYPE_TB
  zh: '| apachemaxmem | N | Apache子进程在完成请求服务后，超过此内存阈值将被回收。 |'
- en: '| backuptempdir | S | It is possible to specify a different backup temp directory.
    Use a local (fast) filesystem for normal web servers. Server clusters must use
    a shared filesystem for `backuptempdir`. The directory must not be accessible
    via the web. |'
  id: totrans-195
  prefs: []
  type: TYPE_TB
  zh: '| backuptempdir | S | 可以指定不同的备份临时目录。对于普通Web服务器，请使用本地（快速）文件系统。服务器集群必须使用共享文件系统进行`backuptempdir`。目录不得通过Web访问。
    |'
- en: '| bounceratio | N | The default is `20`. See `$CFG->handlebounces`. |'
  id: totrans-196
  prefs: []
  type: TYPE_TB
  zh: '| bounceratio | N | 默认值为`20`。参见`$CFG->handlebounces`。 |'
- en: '| customfiletypes | A | Adding entries to **Site administration** &#124; **Server**
    &#124; **File types**, for instance.'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '| customfiletypes | A | 在**站点管理** &#124; **服务器** &#124; **文件类型**中添加条目，例如。'
- en: '&#124;'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE4]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '&#124;'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '&#124;'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE5]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '&#124;'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '&#124;'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE6]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '&#124;'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '&#124;'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE7]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '&#124;'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '&#124;'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE8]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '&#124;'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '&#124;'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE9]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '&#124;'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '&#124;'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE10]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '&#124;'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '&#124;'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '[PRE11]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '&#124;'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '&#124;'
- en: '|'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| customfrontpageinclude | S | You can replace the home page with your own
    version. [moodle.org](http://moodle.org) uses this approach. Only the center area
    will be replaced, not the header, footer, or blocks. |'
  id: totrans-223
  prefs: []
  type: TYPE_TB
  zh: '| customfrontpageinclude | S | 您可以用自己的版本替换主页。[moodle.org](http://moodle.org)使用这种方法。只有中心区域将被替换，不包括页眉、页脚或块。
    |'
- en: '| **Name** | **Type** | **Description** |'
  id: totrans-224
  prefs: []
  type: TYPE_TB
  zh: '| **名称** | **类型** | **描述** |'
- en: '| customscripts | S | Enabling this will allow custom scripts (to be specified
    with the full path name) to replace existing moodle scripts. For example, if `$CFG->customscripts/course/view.php`
    exists, then it will be used instead of `$CFG->wwwroot/course/view.php`. Currently,
    this will only work for files that include `config.php` and are called as part
    of the URL (`index.php` is implied). Custom scripts should not include `config.php`.Warning:
    Replacing standard Moodle scripts may pose a security risk and/or may not be compatible
    with upgrades. However, this is useful when having to patch a particular page
    without actually overwriting the core code. |'
  id: totrans-225
  prefs: []
  type: TYPE_TB
  zh: '| customscripts | S | 启用此设置将允许自定义脚本（通过完整路径名指定）替换现有的 moodle 脚本。例如，如果 `$CFG->customscripts/course/view.php`
    存在，则将使用它而不是 `$CFG->wwwroot/course/view.php`。目前，这仅适用于包含 `config.php` 并作为 URL 部分调用（`index.php`
    是隐含的）的文件。自定义脚本不应包含 `config.php`。警告：替换标准 Moodle 脚本可能存在安全风险，并且可能不与升级兼容。然而，当需要修补特定页面而不实际覆盖核心代码时，这很有用。
    |'
- en: '| debugimapdebugsmtp | B | Enable verbose debug information while sending email
    messages to the IMAP/SMTP server (requires `$CFG->debug` to be set to `DEBUG_DEVELOPER`).
    |'
  id: totrans-226
  prefs: []
  type: TYPE_TB
  zh: '| debugimapdebugsmtp | B | 在向 IMAP/SMTP 服务器发送电子邮件消息时启用详细调试信息（需要 `$CFG->debug`
    设置为 `DEBUG_DEVELOPER`）。 |'
- en: '| debugusers | S | Comma-separated list of user IDs that always see debug messages.
    |'
  id: totrans-227
  prefs: []
  type: TYPE_TB
  zh: '| debugusers | S | 以逗号分隔的用户 ID 列表，这些用户总是看到调试消息。 |'
- en: '| defaultblocks | A | Default block variables for new courses, for instance,
    `participants`, `activity_modules`, `search_forums`, `admin`, `course_list`, `news_items`,
    `calendar_upcoming`, `recent_activity`. This setting can be overridden for different
    course types, such as `defaultblocks_social`, `defaultblocks_weeks`, and `defaultblocks_topics`.
    |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '| defaultblocks | A | 新课程的默认块变量，例如，`participants`、`activity_modules`、`search_forums`、`admin`、`course_list`、`news_items`、`calendar_upcoming`、`recent_activity`。此设置可以针对不同课程类型进行覆盖，例如
    `defaultblocks_social`、`defaultblocks_weeks` 和 `defaultblocks_topics`。 |'
- en: '| disablemycourses | B | This setting will prevent the My Courses page from
    being displayed when users log in. The home page will always show the same (logged-out)
    view. |'
  id: totrans-229
  prefs: []
  type: TYPE_TB
  zh: '| disablemycourses | B | 此设置将防止在用户登录时显示“我的课程”页面。主页将始终显示相同的（未登录）视图。 |'
- en: '| disableonclickaddoninstall | B | Disable the plugin installation feature
    and hide it from the server administration user interface. |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| disableonclickaddoninstall | B | 禁用插件安装功能，并从服务器管理用户界面中隐藏它。 |'
- en: '| disablestatsprocessing | B | Prevent stats processing and hide the GUI. |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| disablestatsprocessing | B | 阻止统计处理并隐藏 GUI。 |'
- en: '| disableupdateautodeploy | B | Disables update deployment. Useful when deployment
    is done via Git checkouts. |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '| disableupdateautodeploy | B | 禁用更新部署。当通过 Git 检出进行部署时很有用。 |'
- en: '| disableupdatenotifications | B | Disables update notifications. Useful when
    deployment is done via Git checkouts. |'
  id: totrans-233
  prefs: []
  type: TYPE_TB
  zh: '| disableupdatenotifications | B | 禁用更新通知。当通过 Git 检出进行部署时很有用。 |'
- en: '| **Name** | **Type** | **Description** |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '| **名称** | **类型** | **描述** |'
- en: '| disableusercreationonrestore | B | Completely disable user creation when
    restoring a course. Enabling this setting results in the restore process stopping
    when a user attempts to restore a course requiring users to be created. |'
  id: totrans-235
  prefs: []
  type: TYPE_TB
  zh: '| disableusercreationonrestore | B | 在恢复课程时完全禁用用户创建。启用此设置会导致在尝试恢复需要创建用户的课程时，恢复过程停止。
    |'
- en: '| divertallemailsto | S | Divert all outgoing emails to this address to test
    and debug emailing features. |'
  id: totrans-236
  prefs: []
  type: TYPE_TB
  zh: '| divertallemailsto | S | 将所有发出的电子邮件重定向到此地址以测试和调试电子邮件功能。 |'
- en: '| emailconnectionerrorsto | S | Email database connection errors to someone.
    If Moodle cannot connect to the database, email this address with a notice. |'
  id: totrans-237
  prefs: []
  type: TYPE_TB
  zh: '| emailconnectionerrorsto | S | 将数据库连接错误发送给某人。如果 Moodle 无法连接到数据库，请将通知发送到此地址的电子邮件。
    |'
- en: '| expectedcronfrequency | N | Moodle checks that the cron is running frequently.
    If the time between cron runs exceeds this value (in seconds), you get a warning
    on the admin page. This setting only controls whether or not the warning appears;
    it has no other effect. |'
  id: totrans-238
  prefs: []
  type: TYPE_TB
  zh: '| expectedcronfrequency | N | Moodle 检查 cron 是否频繁运行。如果 cron 运行之间的时间超过此值（以秒为单位），则在管理页面上会显示警告。此设置仅控制是否显示警告；没有其他效果。
    |'
- en: '| filedir | S | You can specify an alternative to `dataroot`. |'
  id: totrans-239
  prefs: []
  type: TYPE_TB
  zh: '| filedir | S | 你可以指定 `dataroot` 的替代路径。 |'
- en: '| filelifetime | N | Seconds for files to remain in caches (default is `86400`,
    which equals 24 hours). Decrease this if you are worried about students being
    served outdated versions of uploaded files. |'
  id: totrans-240
  prefs: []
  type: TYPE_TB
  zh: '| filelifetime | N | 文件在缓存中保留的时间（默认为 `86400`，即24小时）。如果你担心学生被服务到过时的上传文件版本，请减少此值。
    |'
- en: '| filepermissions |  | Same as `directorypermissions` in the default parameters,
    but for created files. |'
  id: totrans-241
  prefs: []
  type: TYPE_TB
  zh: '| filepermissions |  | 与默认参数中的`directorypermissions`相同，但用于创建的文件。|'
- en: '| forced_plugin_settings | A | Plugin settings have to be specified as an array
    of arrays:`array(''plugin1'' => array(''param1'' => ''value1'', (''param2'' =>
    ''value2'', …), (''plugin2'' => array(''param1'' => ''value1'', (''param2'' =>
    ''value2'', …), …);` |'
  id: totrans-242
  prefs: []
  type: TYPE_TB
  zh: '| forced_plugin_settings | A | 插件设置必须指定为一个数组数组：`array(''plugin1'' => array(''param1''
    => ''value1'', (''param2'' => ''value2'', …), (''plugin2'' => array(''param1''
    => ''value1'', (''param2'' => ''value2'', …), …);` |'
- en: '| forcedefaultmymoodle | B | If set, the My Moodle page cannot be customized
    by users. |'
  id: totrans-243
  prefs: []
  type: TYPE_TB
  zh: '| forcedefaultmymoodle | B | 如果设置，则My Moodle页面不能由用户自定义。|'
- en: '| forcefirstnameforcelastname | S | To anonymize usernames for all students.
    If set, then all non-teachers will always see this for every person. |'
  id: totrans-244
  prefs: []
  type: TYPE_TB
  zh: '| forcefirstnameforcelastname | S | 为了匿名化所有学生的用户名。如果设置，则所有非教师将始终看到每个人的此信息。|'
- en: '| gradeoverhundredprocentmax | N | If `unlimitedgrades` is set, you can specify
    a maximum value (`1` = 100%, default = `10`). |'
  id: totrans-245
  prefs: []
  type: TYPE_TB
  zh: '| gradeoverhundredprocentmax | N | 如果`unlimitedgrades`被设置，可以指定一个最大值（`1` = 100%，默认
    = `10`）。|'
- en: '| handlebounces | B | This is for handling email bounces. Used in conjunction
    with `minbounces` and `bounceratio`. |'
  id: totrans-246
  prefs: []
  type: TYPE_TB
  zh: '| handlebounces | B | 用于处理邮件退信。与`minbounces`和`bounceratio`一起使用。|'
- en: '| httpswwwroot | S | `wwwroot` for SSL pages. |'
  id: totrans-247
  prefs: []
  type: TYPE_TB
  zh: '| httpswwwroot | S | SSL页面的`wwwroot`。|'
- en: '| **Name** | **Type** | **Description** |'
  id: totrans-248
  prefs: []
  type: TYPE_TB
  zh: '| **名称** | **类型** | **描述** |'
- en: '| includeuserpasswordsinbackup | B | Allow user passwords to be included in
    backup files. Use only if you can guarantee that all your backup files remain
    private, as password hashes can be unencrypted. |'
  id: totrans-249
  prefs: []
  type: TYPE_TB
  zh: '| includeuserpasswordsinbackup | B | 允许在备份文件中包含用户密码。只有在你能够保证所有备份文件保持私密的情况下使用，因为密码散列可以是未加密的。|'
- en: '| keeptempdirectoriesonbackup | B | Keep the temporary directories used by
    backup and restore without being deleted at the end of the process. See also the
    *Managing courses in bulk* section in [*Chapter 4*](B18779_04.xhtml#_idTextAnchor074)*,
    Managing Courses* *and Enrolments*. |'
  id: totrans-250
  prefs: []
  type: TYPE_TB
  zh: '| keeptempdirectoriesonbackup | B | 在备份和恢复过程中保留临时目录，直到过程结束时才删除。有关详细信息，请参阅[*第4章*](B18779_04.xhtml#_idTextAnchor074)*，批量管理课程*和*注册*中的*批量管理课程*部分。|'
- en: '| langlocalroot | S | Alternative directory to `$CFG->dataroot/lang`. |'
  id: totrans-251
  prefs: []
  type: TYPE_TB
  zh: '| langlocalroot | S | `$CFG->dataroot/lang`的替代目录。|'
- en: '| localcachedir | S | It is possible to specify different cache and temp directories.
    Use local (fast) filesystem for normal web servers. Server clusters must use a
    shared filesystem for `cachedir`. `localcachedir` is intended for server clusters;
    it does not have to be shared by cluster nodes. The directories must not be accessible
    via the web. |'
  id: totrans-252
  prefs: []
  type: TYPE_TB
  zh: '| localcachedir | S | 可以指定不同的缓存和临时目录。对于普通Web服务器，使用本地（快速）文件系统。服务器集群必须使用共享文件系统作为`cachedir`。`localcachedir`是为服务器集群设计的；集群节点不需要共享。这些目录不能通过Web访问。|'
- en: '| maildomain | S | Your email domain. |'
  id: totrans-253
  prefs: []
  type: TYPE_TB
  zh: '| maildomain | S | 您的电子邮件域名。|'
- en: '| mailprefix | S | `mdl+` is the separator for Exim and Postfix, `mdl-` is
    the separator for qmail. |'
  id: totrans-254
  prefs: []
  type: TYPE_TB
  zh: '| mailprefix | S | `mdl+`是Exim和Postfix的分隔符，`mdl-`是qmail的分隔符。|'
- en: '| minbounces | N | The default is `10`. See `$CFG->handlebounces`. |'
  id: totrans-255
  prefs: []
  type: TYPE_TB
  zh: '| minbounces | N | 默认为`10`。有关详细信息，请参阅`$CFG->handlebounces`。|'
- en: '| mnetkeylifetime | N | The number of days until the networking key expires.
    See [*Chapter 19*](B18779_19.xhtml#_idTextAnchor344)*, Setting Up Moodle Networking*,
    for details. |'
  id: totrans-256
  prefs: []
  type: TYPE_TB
  zh: '| mnetkeylifetime | N | 网络密钥到期前的天数。有关详细信息，请参阅[*第19章*](B18779_19.xhtml#_idTextAnchor344)*，设置Moodle网络*。|'
- en: '| noemailever | B | When working with production data on test servers, no emails
    or other messages should ever be sent to real users. |'
  id: totrans-257
  prefs: []
  type: TYPE_TB
  zh: '| noemailever | B | 当在测试服务器上处理生产数据时，不应向真实用户发送任何电子邮件或其他消息。|'
- en: '| opensslcnf | S | Location of the `openssl.cnf` file. |'
  id: totrans-258
  prefs: []
  type: TYPE_TB
  zh: '| opensslcnf | S | `openssl.cnf` 文件的位置。|'
- en: '| passwordsaltmain | S | Random string added to the md5 password hash. See
    [*Chapter 13*](B18779_13.xhtml#_idTextAnchor251)*, Ensuring Moodle Security*,
    for details. |'
  id: totrans-259
  prefs: []
  type: TYPE_TB
  zh: '| passwordsaltmain | S | 添加到md5密码散列中的随机字符串。有关详细信息，请参阅[*第13章*](B18779_13.xhtml#_idTextAnchor251)*，确保Moodle安全*。|'
- en: '| pdfexportfont | S | The font used in exported PDF files. When generating
    a PDF, Moodle embeds a subset of the font in the PDF file so it will be readable
    on the widest range of devices (the default is `freesans`). |'
  id: totrans-260
  prefs: []
  type: TYPE_TB
  zh: '| pdfexportfont | S | 导出PDF文件中使用的字体。在生成PDF时，Moodle将字体子集嵌入到PDF文件中，以便在广泛的设备上可读（默认为`freesans`）。|'
- en: '| preferlinegraphs | B | This setting will make some graphs (for instance,
    user logs) use lines instead of bars. |'
  id: totrans-261
  prefs: []
  type: TYPE_TB
  zh: '| preferlinegraphs | B | 此设置将使某些图表（例如，用户日志）使用线条而不是条形图。|'
- en: '| preventscheduledtaskchanges | B | Disable editing of tasks in **Site administration**
    **&#124;** **Server** **&#124;** **Scheduled tasks**. |'
  id: totrans-262
  prefs: []
  type: TYPE_TB
  zh: '| preventscheduledtaskchanges | B | 禁止在**站点管理** **&#124;** **服务器** **&#124;**
    **计划任务**中编辑任务。|'
- en: '| reverseproxy | B | Enable when setting up advanced reverse proxy load balancing
    configurations and port forwarding. |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
  zh: '| reverseproxy | B | 在设置高级反向代理负载均衡配置和端口转发时启用。|'
- en: '| showcrondebugging | B | Add debug info to cron output. |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '| showcrondebugging | B | 将调试信息添加到cron输出。|'
- en: '| showcronsql | B | Show executed SQL queries during cron execution. |'
  id: totrans-265
  prefs: []
  type: TYPE_TB
  zh: '| showcronsql | B | 在cron执行期间显示执行的SQL查询。|'
- en: '| **Name** | **Type** | **Description** |'
  id: totrans-266
  prefs: []
  type: TYPE_TB
  zh: '| **名称** | **类型** | **描述** |'
- en: '| skiplangupgrade | B | Disables automatic language update and lets translators
    (lang pack maintainers) keep their `moodledata/lang/*` to update manually. |'
  id: totrans-267
  prefs: []
  type: TYPE_TB
  zh: '| skiplangupgrade | B | 禁用自动语言更新，并允许翻译者（语言包维护者）保留其`moodledata/lang/*`以手动更新。|'
- en: '| sslproxy | B | Enable when using an external SSL appliance for performance
    reasons. |'
  id: totrans-268
  prefs: []
  type: TYPE_TB
  zh: '| sslproxy | B | 在出于性能原因使用外部SSL设备时启用。|'
- en: '| supportuserid | N | Emails to support can be redirected to another user.
    |'
  id: totrans-269
  prefs: []
  type: TYPE_TB
  zh: '| supportuserid | N | 支持的电子邮件可以重定向到另一个用户。|'
- en: '| tagsort | S | Sort tags in tag cloud by specified field; default = `name`.
    |'
  id: totrans-270
  prefs: []
  type: TYPE_TB
  zh: '| tagsort | S | 按指定字段对标签云中的标签进行排序；默认为`name`。|'
- en: '| themedir | S | Add an extra themes directory outside of `$CFG->dirroot`.
    |'
  id: totrans-271
  prefs: []
  type: TYPE_TB
  zh: '| themedir | S | 在`$CFG->dirroot`之外添加额外的主题目录。|'
- en: '| themeorder | A | Priority of themes from highest to lowest. The default is
    `array(''course'', ''category'', ''session'', ''``user'', ''site'')`. |'
  id: totrans-272
  prefs: []
  type: TYPE_TB
  zh: '| themeorder | A | 从最高到最低的主题优先级。默认为`array(''course'', ''category'', ''session'',
    ''``user'', ''site'')`。|'
- en: '| themerev | B | Prevent theme caching. |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
  zh: '| themerev | B | 防止主题缓存。|'
- en: '| tracksessionip | B | Moodle will track the current user’s IP to ensure it
    hasn’t changed during a session. This will prevent the possibility of sessions
    being hijacked via XSS, but it may break things for users using proxies that change
    frequently. |'
  id: totrans-274
  prefs: []
  type: TYPE_TB
  zh: '| tracksessionip | B | Moodle将跟踪当前用户的IP地址，以确保在会话期间没有发生变化。这将防止通过XSS攻击劫持会话的可能性，但可能会破坏使用频繁更改代理的用户。|'
- en: '| trashdir | S | Alternative location for `$CFG->dirroot/trashdir`. |'
  id: totrans-275
  prefs: []
  type: TYPE_TB
  zh: '| trashdir | S | `$CFG->dirroot/trashdir`的替代位置。|'
- en: '| undeletableblocktypes | A | The blocks in this list are protected from deletion,
    for example, `navigation,settings`. |'
  id: totrans-276
  prefs: []
  type: TYPE_TB
  zh: '| undeletableblocktypes | A | 此列表中的块受到删除保护，例如，`navigation,settings`。|'
- en: '| uninstallclionly | B | This stops admins from uninstalling plugins from the
    admin user interface and forces plugins to be uninstalled from the command-line
    tool only, found at `admin/cli/plugin_uninstall.php`. |'
  id: totrans-277
  prefs: []
  type: TYPE_TB
  zh: '| uninstallclionly | B | 这将阻止管理员从管理用户界面卸载插件，并强制仅通过命令行工具（位于`admin/cli/plugin_uninstall.php`）卸载插件。|'
- en: '| upgradekey | S | Password protection during the upgrade process. See [docs.moodle.org/en/Upgrade_key](http://docs.moodle.org/en/Upgrade_key)
    for details. |'
  id: totrans-278
  prefs: []
  type: TYPE_TB
  zh: '| upgradekey | S | 升级过程中的密码保护。有关详细信息，请参阅[docs.moodle.org/en/Upgrade_key](http://docs.moodle.org/en/Upgrade_key)。|'
- en: '| upgraderunning | B | Pretend Moodle update is running. |'
  id: totrans-279
  prefs: []
  type: TYPE_TB
  zh: '| upgraderunning | B | 假装Moodle更新正在运行。|'
- en: '| upgradeshowsql | B | Show executed SQL queries during upgrades. |'
  id: totrans-280
  prefs: []
  type: TYPE_TB
  zh: '| upgradeshowsql | B | 在升级期间显示执行的SQL查询。|'
- en: '| usezipbackups | B | Use ZIP compression in backups instead of default TGZ.
    |'
  id: totrans-281
  prefs: []
  type: TYPE_TB
  zh: '| usezipbackups | B | 在备份中使用ZIP压缩而不是默认的TGZ。|'
- en: '| wordlist | S | List words used by Moodle’s Word censorship filter. |'
  id: totrans-282
  prefs: []
  type: TYPE_TB
  zh: '| wordlist | S | Moodle的单词审查过滤器使用的单词列表。|'
