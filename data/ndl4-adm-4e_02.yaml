- en: '2'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '2'
- en: Exploring the Moodle System
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索Moodle系统
- en: Now that your Moodle system is up and running, we will look at the components
    that make up the learning platform. Think of these as the foundation on which
    Moodle is built.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您的Moodle系统已经启动并运行，我们将查看构成学习平台的组件。将这些视为Moodle构建的基础。
- en: In this chapter, you will learn about the architecture of Moodle, what the main
    components of Moodle are, and where its data is stored. Moodle has a modern and
    intuitive user interface that takes a little bit of time to get used to. You will
    learn about its main navigation and where to find help if required. Dealing with
    files in web-based applications is not always straightforward. Therefore, you
    will learn how Moodle’s file management works and how to configure the recycle
    bin.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将了解Moodle的架构，Moodle的主要组件是什么，以及其数据存储在哪里。Moodle拥有现代直观的用户界面，需要一点时间来适应。您将了解其主要导航以及需要帮助时如何找到帮助。在基于Web的应用程序中处理文件并不总是直接的。因此，您将学习Moodle的文件管理机制以及如何配置回收站。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Understanding the Moodle architecture
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解Moodle架构
- en: Navigating Moodle as an administrator
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以管理员身份导航Moodle
- en: File management in Moodle
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Moodle中的文件管理
- en: Recycle bin
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 回收站
- en: By the end of this chapter, you will know more about how Moodle is structured
    internally, how to work with it as an admin, and how files are managed.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，您将更多地了解Moodle的内部结构，如何作为管理员与之协作，以及文件是如何管理的。
- en: Understanding the Moodle architecture
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解Moodle架构
- en: First, we will look at the overall architecture on which Moodle is based before
    we cover the internal components of the LMS’s application layer.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，在介绍LMS应用层的内部组件之前，我们将查看Moodle所基于的整体架构。
- en: We will take a top-down approach and look at the overall architecture first
    before zooming into how Moodle Core is structured. We will conclude at the lowest
    level, where we will be dealing with files and the management thereof.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将采取自上而下的方法，首先查看整体架构，然后再深入探讨Moodle核心的结构。我们将从最低级别开始，那里我们将处理文件及其管理。
- en: The LAMP architecture
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: LAMP架构
- en: Moodle has been developed on the open-source LAMP framework, which consists
    of Linux (operating system), Apache (web server), MySQL (database), and PHP (programming
    language). Due to the portability of these components and the modularity of Moodle
    itself (that’s what the “M” stands for), a wide range of operating systems, database
    systems, and web servers are supported. However, while Moodle runs on other technology
    stacks, we will focus on LAMP since it has proven the most popular setup among
    Moodle administrators.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle是在开源的LAMP框架上开发的，该框架由Linux（操作系统）、Apache（Web服务器）、MySQL（数据库）和PHP（编程语言）组成。由于这些组件的可移植性和Moodle本身的模块化（这就是“M”的含义），支持广泛的操作系统、数据库系统和Web服务器。然而，尽管Moodle可以在其他技术堆栈上运行，但我们将专注于LAMP，因为它在Moodle管理员中证明是最受欢迎的设置。
- en: 'The following diagram shows a simple overview of the overall architecture:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图表展示了整体架构的简单概述：
- en: '![Figure 2.1 – Moodle’s overall architecture ](img/Figure_2.01_B18779.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![图2.1 – Moodle的整体架构](img/Figure_2.01_B18779.jpg)'
- en: Figure 2.1 – Moodle’s overall architecture
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.1 – Moodle的整体架构
- en: 'Let’s have a closer look at the components of Moodle’s overall architecture:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更详细地看看Moodle整体架构的组件：
- en: '**Moodle Core** is what is often referred to when people talk about Moodle.
    This is also what we installed in the previous chapter and will be covered in
    this book.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Moodle核心**是人们谈论Moodle时经常提到的内容。这也是我们在上一章中安装的，并将在本章中介绍。'
- en: '**Moodle plugins**: While Moodle Core is a powerful and comprehensive LMS,
    few sites solely rely on the base system. Instead, add-on modules supplement the
    feature set of standard Moodle to customize the platform to individual requirements.
    These add-ons are called Moodle plugins and are mostly community-contributed additions
    to standard Moodle, extending its functionality for a specific use case. At the
    time of writing, there are almost 2,000 (!) entries in the official Moodle plugins
    database at [moodle.org/plugins](http://moodle.org/plugins).'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Moodle插件**：虽然Moodle核心是一个强大而全面的LMS，但很少有网站仅依赖于基本系统。相反，附加模块补充了标准Moodle的功能集，以定制平台以满足个别需求。这些附加模块被称为Moodle插件，它们主要是社区贡献的，是对标准Moodle的扩展，以适应特定的用例。在撰写本文时，官方Moodle插件数据库中有近2000个(!)条记录，在[moodle.org/plugins](http://moodle.org/plugins)。'
- en: Important note
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: '**Moodle LMS** is effectively standard Moodle plus – optionally – one or many
    Moodle plugins.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**Moodle LMS** 是有效的标准Moodle加上 – 可选地 – 一个或多个Moodle插件。'
- en: An exciting set of plugins has been made available by Moodle HQ. **Moodle Workplace**
    is a commercial offering designed for corporate and organizational training, resulting
    in a powerful and flexible platform for workplace learning. More information on
    Moodle Workplace can be found at [moodle.com/workplace](http://moodle.com/workplace)
    or in the title *Corporate Learning with Moodle Workplace*, by Packt Publishing.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle HQ提供了一系列令人兴奋的插件。**Moodle Workplace** 是为企业和组织培训设计的商业产品，结果是一个强大且灵活的工作场所学习平台。有关Moodle
    Workplace的更多信息，请访问 [moodle.com/workplace](http://moodle.com/workplace) 或阅读Packt
    Publishing出版的《使用Moodle Workplace的企业学习》。
- en: '**PHP** is the programming language in which Moodle is written (accompanied
    by HTML, JavaScript, and CSS files). It is the only component that cannot be replaced
    with any other counterpart. Specific PHP libraries must be installed – see [*Chapter
    1*](B18779_01.xhtml#_idTextAnchor020), *Installing Moodle*.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PHP** 是Moodle所使用的编程语言（伴随HTML、JavaScript和CSS文件）。它是唯一不能被任何其他替代品替换的组件。必须安装特定的PHP库
    – 请参阅[*第1章*](B18779_01.xhtml#_idTextAnchor020)，*安装Moodle*。'
- en: '**MySQL** is the database of choice for most opensource applications, but other
    systems, such as Microsoft SQL Server, Oracle, and PostgreSQL, are fully supported.
    MariaDB, a MySQL fork, has become very popular among Moodle administrators after
    Oracle acquired MySQL.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MySQL** 是大多数开源应用的首选数据库，但其他系统，如Microsoft SQL Server、Oracle和PostgreSQL，也完全得到支持。在Oracle收购MySQL之后，MySQL的分支MariaDB在Moodle管理员中变得非常流行。'
- en: '**Apache** has become the de facto standard for large-scale web applications,
    closely followed by Microsoft IIS. Both web servers are supported like any other
    that supports PHP, such as nginx. This book will focus on Apache, the most popular
    option for Moodle setups.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Apache** 已成为大型Web应用的默认标准，紧随其后的是Microsoft IIS。这两个Web服务器都像支持PHP的其他服务器一样得到支持，例如nginx。本书将专注于Apache，这是Moodle设置中最受欢迎的选项。'
- en: '**Operating system**: The lowest level is the operating system. While **Linux**
    is the preferred platform – since this is where all code is developed and tested
    –other operating systems are also supported, such as Windows, Mac OS X, and various
    Unix derivatives.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作系统**：最低级别是操作系统。虽然**Linux**是首选平台 – 因为所有代码都在这里开发和测试 – 但也支持其他操作系统，如Windows、Mac
    OS X和各种Unix衍生品。'
- en: 'The following diagram shows the interaction among the elements in the Moodle
    architecture:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的图示展示了Moodle架构中各元素之间的交互：
- en: '![Figure 2.2 – Moodle’s interaction among underlying components ](img/Figure_2.02_B18779.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![图2.2 – Moodle底层组件之间的交互](img/Figure_2.02_B18779.jpg)'
- en: Figure 2.2 – Moodle’s interaction among underlying components
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.2 – Moodle底层组件之间的交互
- en: The user makes requests via the web browser interface or a mobile Moodle application.
    The web browser passes the request to the web server(s), which calls the PHP module
    responsible for the call. The PHP module calls the database(s) with an action
    (a query, update, insert, or delete operation) that returns the requested data.
    Based on this information, the PHP module returns data (usually in HTML or JavaScript)
    to the web server(s), which passes the information to be displayed back to the
    user’s browser or application.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 用户通过网页浏览器界面或移动Moodle应用程序发出请求。网页浏览器将请求传递给网页服务器（们），然后调用负责该请求的PHP模块。PHP模块通过一个动作（查询、更新、插入或删除操作）调用数据库（们），返回所需的数据。基于这些信息，PHP模块将数据（通常是HTML或JavaScript）返回给网页服务器（们），然后传递要显示的信息回用户的浏览器或应用程序。
- en: The component of most interest to us is Moodle Core, which we will dive into
    in more detail next.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最感兴趣的组件是Moodle核心，我们将在下一部分更详细地探讨。
- en: Moodle Core
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Moodle核心
- en: 'Now, let’s look at the Moodle Core layer in more detail. Moodle’s main building
    blocks are shown in the following diagram:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们更详细地看看Moodle核心层。以下图示展示了Moodle的主要构建块：
- en: '![Figure 2.3 – Moodle’s building blocks ](img/Figure_2.03_B18779.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图2.3 – Moodle的构建块](img/Figure_2.03_B18779.jpg)'
- en: Figure 2.3 – Moodle’s building blocks
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.3 – Moodle的构建块
- en: Moodle distinguishes between code (primarily written in PHP, HTML, and CSS)
    and data (mostly values and files added via the Moodle interface).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle区分代码（主要用PHP、HTML和CSS编写）和数据（主要通过Moodle界面添加的值和文件）。
- en: Moodle libraries, modules (such as resources and activities), blocks, plugins,
    admin tools, and other entities are represented in code. It is always stored in
    the filesystem in a Moodle directory referred to as `dirroot`, which was specified
    during the installation process in the previous chapter. The code includes all
    the elements that deal with the backend (server) and frontend (user interface)
    operations.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 库、模块（如资源和活动）、块、插件、管理工具和其他实体在代码中表示。它始终存储在称为 `dirroot` 的 Moodle 目录中，该目录在上一章的安装过程中指定。代码包括处理后端（服务器）和前端（用户界面）操作的所有元素。
- en: Moodle courses, users, roles, groups, competencies, learning plans, grades,
    and other data, such as learning resources added by educators, forum posts added
    by learners, and system settings added by the administrator, are mostly stored
    in the Moodle database. However, files such as user pictures or uploaded assignments
    are stored in another Moodle directory, known as `moodledata`, located in a directory
    called `dataroot`. Information about files (metadata such as the name, location,
    last modification, license, and size) is stored in the database, referencing the
    respective files.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 课程、用户、角色、组、能力、学习计划、成绩以及其他数据，例如教育者添加的学习资源、学习者添加的论坛帖子以及管理员添加的系统设置，主要存储在
    Moodle 数据库中。然而，如用户图片或上传的作业等文件存储在另一个称为 `moodledata` 的 Moodle 目录中，位于名为 `dataroot`
    的目录中。有关文件的信息（如名称、位置、最后修改时间、许可证和大小等元数据）存储在数据库中，并引用相应的文件。
- en: Important note
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Moodle manages its files internally, and it is important to stress that interfering
    with any files in `moodledata` will break the application.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 在内部管理其文件，重要的是要强调，干扰 `moodledata` 中的任何文件都将破坏应用程序。
- en: Even copying a file from one folder to another or adding a file manually will
    break the consistency of your system, which means that further behavior cannot
    be predicted. Internally, Moodle uses a mechanism called SHA1 hashing. Moodle
    fully supports Unicode filenames and avoids redundant storage when the same file
    is used twice (even by different users). Again, you must not modify any Moodle
    files at the system level!
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 即使是将文件从一个文件夹复制到另一个文件夹或手动添加文件，也会破坏您系统的完整性，这意味着无法预测后续行为。内部，Moodle 使用称为 SHA1 哈希的机制。Moodle
    完全支持 Unicode 文件名，并在同一文件被两次使用（即使是由不同的用户使用）时避免冗余存储。再次强调，您不得在系统级别修改任何 Moodle 文件！
- en: Now, let’s have a closer look at how the Moodle files area – the directory structure
    – is organized.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们更详细地看看 Moodle 文件区域 – 目录结构 – 是如何组织的。
- en: Code and data locations
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 代码和数据位置
- en: Though Moodle takes care of organizing its code and data, it is usually good
    to know where a file is located in your learning system, for example, when installing
    add-ons or manually applying patches.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管Moodle负责组织其代码和数据，但通常了解文件在您的学习系统中的位置是有益的，例如在安装附加组件或手动应用补丁时。
- en: 'System files – files required to run Moodle – are located in several directories
    under `dirroot` (the root directory of your Moodle installation). The following
    table shows the folder name, a brief description, and the chapter in which the
    topic is covered in this book:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 系统文件 – 运行 Moodle 所需的文件 – 位于 `dirroot`（您的 Moodle 安装根目录）下的几个目录中。以下表格显示了文件夹名称、简要描述以及本书中涵盖该主题的章节：
- en: '![Figure 2.4 – Code and data locations ](img/Figure_2.04_B18779.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.4 – 代码和数据位置](img/Figure_2.04_B18779.jpg)'
- en: Figure 2.4 – Code and data locations
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.4 – 代码和数据位置
- en: 'The `moodledata` directory (`dataroot`) is organized as follows:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '`moodledata` 目录（`dataroot`）的组织结构如下：'
- en: '![Figure 2.5 – moodledata directories ](img/Figure_2.05_B18779.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.5 – moodledata 目录](img/Figure_2.05_B18779.jpg)'
- en: Figure 2.5 – moodledata directories
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.5 – moodledata 目录
- en: If problems occur before carrying out an update, it is sometimes necessary to
    delete caching data and any temporary information Moodle has created. This data
    is located in the respective directories in the structure shown in the preceding
    table. In other words, once everybody has logged out, you can safely delete any
    files in the directories named `cache`, `filter`, `localcache`, `lock`, `models`,
    `muc`, `sessions`, `temp`, and `trashdir`. Purging can either be done manually
    or, better, via **Site administration** | **Development** | **Purge caches** |
    **Purge all caches** in the Moodle interface.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行更新之前出现问题时，有时需要删除缓存数据和Moodle创建的任何临时信息。这些数据位于前表中所示结构中的相应目录中。换句话说，一旦所有人都登出，您就可以安全地删除名为`cache`、`filter`、`localcache`、`lock`、`models`、`muc`、`sessions`、`temp`和`trashdir`的目录中的任何文件。清除可以通过手动完成，或者更好的是通过Moodle界面中的**网站管理**
    | **开发** | **清除缓存** | **清除所有缓存**来完成。
- en: This concludes this section on the Moodle architecture, which dealt with the
    LAMP framework and Moodle’s main components before we drilled down to Moodle Core
    and the location of code and data files.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分关于Moodle架构的介绍到此结束，它处理了LAMP框架和Moodle的主要组件，然后我们深入到Moodle核心和代码和数据文件的位置。
- en: Navigating Moodle as an administrator
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 作为管理员导航Moodle
- en: In this section, you will learn how to work with Moodle, which covers the horizontal
    navigation of the site administration section and handy tools such as admin search,
    bookmarks, and access to various help and support sites and channels.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将学习如何使用Moodle，包括网站管理部分的横向导航以及如管理员搜索、书签以及访问各种帮助和支持网站和渠道的实用工具。
- en: 'The essential navigational items for administrators are as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 管理员的基本导航项如下：
- en: '**Site menu**: The main menu across all pages; the **Site administration**
    item opens up the admin menu.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网站菜单**：贯穿所有页面的主菜单；**网站管理**项将打开管理员菜单。'
- en: '**Admin menu**: Access to all admin sections and subsections. As an administrator,
    you will be performing most tasks from here. We will cover all aspects of these
    menus and sub-menus throughout the remainder of this book.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理员菜单**：访问所有管理员部分和子部分。作为管理员，您将在这里执行大多数任务。我们将在本书的剩余部分介绍这些菜单和子菜单的所有方面。'
- en: '**User menu**: Access to personal settings, such as the user profile, preferences,
    or the selected language.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户菜单**：访问个人设置，例如用户资料、偏好设置或选定的语言。'
- en: '**Admin search**: Search facility, which we will cover later.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理员搜索**：搜索功能，我们将在后面介绍。'
- en: '**Edit mode toggle**: Switch between editing mode and non-editing mode.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**编辑模式切换**：在编辑模式和非编辑模式之间切换。'
- en: '**Block drawer**: Moodle blocks are placed here; edit mode must be activated
    to make changes to the block drawer.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**块抽屉**：Moodle块放置于此；要更改块抽屉，必须激活编辑模式。'
- en: 'These navigation elements have been highlighted in the following screenshot:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图突出了以下导航元素：
- en: '![Figure 2.6 – Moodle navigation ](img/Figure_2.06_B18779.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图2.6 – Moodle导航](img/Figure_2.06_B18779.jpg)'
- en: Figure 2.6 – Moodle navigation
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.6 – Moodle导航
- en: The items displayed in the preceding screenshot might be different on your system.
    Depending on which features have been activated, the theme used, and your screen
    size, some admin menu items might move to the **More** dropdown, or the **Language**
    setting might appear in the user menu.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 前一张截图显示的项目可能因您的系统而异。根据激活的功能、使用的主题和屏幕大小，一些管理员菜单项可能移动到**更多**下拉菜单，或者**语言**设置可能出现在用户菜单中。
- en: Moodle’s user interface has been built from the ground up in version 4 – gone
    is the breadcrumb trail, and previously omnipresent blocks have been downgraded
    to the block drawer. This redevelopment also impacts the navigational admin facilities,
    which we will cover next.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle的用户界面是从版本4开始从头构建的——导航路径已消失，之前无处不在的块已降级为块抽屉。这次重新开发也影响了导航管理功能，我们将在下一节中介绍。
- en: Administrator search facility
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 管理员搜索功能
- en: A search facility is provided to help you identify any setting in the administration
    section, which is located above the **Site administration** menu (encircled in
    the previous screenshot).
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 提供了一个搜索功能，帮助您识别位于“**网站管理**”菜单（如前一张截图所示，已圈出）上方的管理部分中的任何设置。
- en: Moodle displays the results in an expanded form when searching for any term
    that allows you to change settings immediately. For example, when searching for
    “calendar,” numerous sections appear as a result, which can be changed in each
    section straight away, rather than having to navigate to each separate section
    to make changes.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 当搜索任何允许您立即更改设置的术语时，Moodle会以展开的形式显示结果。例如，当搜索“日历”时，会出现多个部分作为结果，您可以直接在每个部分中更改，而无需导航到每个单独的部分进行更改。
- en: The search facility is also highly beneficial when upgrading from older versions
    of Moodle, where configuration settings have been reorganized, and their location
    is sometimes difficult to trace.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在升级到较旧版本的Moodle时，配置设置已被重新组织，其位置有时难以追踪，此时搜索功能也非常有益。
- en: Next up are admin bookmarks, which can potentially reduce the usage of the admin
    search facility.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是管理员书签，这可能会减少对管理员搜索功能的使用。
- en: Admin bookmarks
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 管理员书签
- en: 'Bookmarks are shown in the **Admin bookmarks** block, which can be added by
    turning on **Edit mode**, opening the block drawer, and selecting the block from
    the **Add a block** list. They allow you to bookmark any admin menu to access
    regularly required pages easily. Select **Bookmark this page** to add a bookmark
    and **Unbookmark this page** to delete it. Moodle automatically displays the latter
    option when you are on a bookmarked page:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 书签显示在**管理员书签**块中，可以通过开启**编辑模式**，打开块抽屉，并从**添加一个块**列表中选择该块来添加。它们允许您将任何管理员菜单添加为书签，以便轻松访问经常需要的页面。选择**添加此页书签**来添加书签，选择**取消此页书签**来删除它。当您在书签页面上时，Moodle会自动显示后者选项：
- en: '![Figure 2.7 – Admin bookmarks ](img/Figure_2.07_B18779.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图2.7 – 管理员书签](img/Figure_2.07_B18779.jpg)'
- en: Figure 2.7 – Admin bookmarks
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.7 – 管理员书签
- en: In the preceding screenshot, two pages have already been bookmarked (**Browse
    list of users** and **Custom reports**), and the mentioned link is provided to
    unbookmark the current marker.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的屏幕截图中，已经有两个页面被添加为书签（**浏览用户列表**和**自定义报告**），并提供提到的链接来取消当前标记。
- en: Admin search and bookmarks are useful when you know what you are looking for.
    Next up is Moodle Docs, which assists you when you are stuck with a feature or
    require further support.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 当您知道您要找什么时，管理员搜索和书签非常有用。接下来是Moodle文档，当您在使用功能或需要进一步支持时，它将为您提供帮助。
- en: Moodle Docs and help
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Moodle文档和帮助
- en: The entire Moodle documentation is online at [docs.moodle.org](http://docs.moodle.org).
    If you wish to provide your own documentation, modify the **Moodle Docs document
    root** setting by going to **Site administration** | **Appearance** | **Moodle
    Docs**. You can also select the **Language for docs used** option in links for
    the documentation pages and enable the **Open in new window** option on this screen.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 整个Moodle文档都在线，可在[docs.moodle.org](http://docs.moodle.org)找到。如果您想提供自己的文档，请通过访问**站点管理**
    | **外观** | **Moodle文档**来修改**Moodle文档根目录**设置。您还可以在文档页面链接中选择**文档使用的语言**选项，并在该屏幕上启用**在新窗口中打开**选项。
- en: 'At the bottom of each page, you will see a **Support icon**. Once selected,
    it will display the following help-related links:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个页面的底部，您将看到一个**支持图标**。一旦选择，它将显示以下帮助相关链接：
- en: '**Help and documentation**: Reference to the relevant page in Moodle Docs.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**帮助和文档**：参考Moodle文档中的相关页面。'
- en: '**Services and support**: Link to [moodle.com/help](http://moodle.com/help),
    where professional services from Moodle Certified Service Providers are offered.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**服务和支持**：链接到[moodle.com/help](http://moodle.com/help)，在那里提供来自Moodle认证服务提供商的专业服务。'
- en: '**Contact site support**: The standard email client will be opened, and the
    recipient of the support contact will be filled in. You can change the support
    email address by going to **Site administration** | **Server** | **Support contact**.
    This feature is more relevant to your users rather than to you as an administrator.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**联系站点支持**：将打开标准电子邮件客户端，并将支持联系人的收件人填写好。您可以通过访问**站点管理** | **服务器** | **支持联系人**来更改支持电子邮件地址。此功能对您的用户来说更为相关，而不是作为管理员您自己。'
- en: 'In addition to the online documentation, some features provide inline help,
    indicated by a question mark symbol. When clicked, a help window will appear to
    provide assistance that’s relevant to the respective topic or setting:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 除了在线文档外，一些功能还提供内联帮助，以问号符号表示。点击后，将出现一个帮助窗口，提供与相应主题或设置相关的帮助：
- en: '![Figure 2.8 – Moodle help ](img/Figure_2.08_B18779.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![图2.8 – Moodle帮助](img/Figure_2.08_B18779.jpg)'
- en: Figure 2.8 – Moodle help
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.8 – Moodle帮助
- en: 'For instance, when clicking on the **Help and documentation** link in the **Upload
    users** section, the following article will be opened: [docs.moodle.org/400/en/Upload_users](http://docs.moodle.org/400/en/Upload_users).
    For each version of Moodle, separate Moodle Docs are published. The preceding
    link is from version 4.0, where documentation for most pages exists in different
    languages.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，当在**上传用户**部分点击**帮助和文档**链接时，以下文章将被打开：[docs.moodle.org/400/en/Upload_users](http://docs.moodle.org/400/en/Upload_users)。对于Moodle的每个版本，都会发布单独的Moodle文档。上述链接来自4.0版本，其中大多数页面的文档存在多种语言。
- en: 'When you access certain pages for the first time, Moodle will display a so-called
    user tour. For example, when you navigate to **My courses**, the following popup
    will be displayed:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 当您首次访问某些页面时，Moodle将显示所谓的用户导游。例如，当您导航到**我的课程**时，以下弹出窗口将显示：
- en: '![Figure 2.9 – User tour ](img/Figure_2.09_B18779.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图2.9 – 用户导游](img/Figure_2.09_B18779.jpg)'
- en: Figure 2.9 – User tour
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.9 – 用户导游
- en: We will cover user tours in detail in [*Chapter 7*](B18779_07.xhtml#_idTextAnchor140),
    *Enhancing Moodle’s Look* *and Feel*.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在[*第7章*](B18779_07.xhtml#_idTextAnchor140)中详细介绍用户导游，*增强Moodle的外观和感觉*。
- en: The Moodle community is growing continuously and, at the time of writing, has
    well over 1 million registered users (yes, that’s 1 million!), of which over 5%
    are active. If you cannot find a solution to your Moodle problems in Moodle Docs,
    use the **Search** functionality at the top of the screen at [moodle.org](http://moodle.org).
    In order of priority, the search brings forth the already mentioned Moodle Docs,
    the most active user forums, and the Moodle Tracker, which keeps track of all
    issues and feature requests ([tracker.moodle.org](http://tracker.moodle.org)).
    A search in Moodle forums can often result in a large number of links. Use the
    **Advanced search** area in the **Search forums** block to narrow the search space.
    If you still cannot find the solution to your problem, which is relatively rare,
    post a question on the relevant forum; somebody is likely to assist you further.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle社区正在持续增长，在撰写本文时，已有超过100万注册用户（是的，是100万！），其中超过5%是活跃的。如果您在Moodle文档中找不到Moodle问题的解决方案，请使用屏幕顶部的**搜索**功能在[moodle.org](http://moodle.org)。按照优先级顺序，搜索将提供已提到的Moodle文档、最活跃的用户论坛和Moodle
    Tracker，它跟踪所有问题和功能请求([tracker.moodle.org](http://tracker.moodle.org))。在Moodle论坛中进行搜索通常会得到大量的链接。使用**搜索论坛**块中的**高级搜索**区域来缩小搜索范围。如果您仍然找不到问题的解决方案，这种情况相对较少，请在相关论坛上发帖提问；很可能有人会进一步帮助您。
- en: A popular site that might also be of interest is Moodle Academy ([moodle.academy](http://moodle.academy)),
    which includes an administrator learning pathway covering short, self-paced courses
    on basic Moodle administration.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 一个可能也感兴趣的流行网站是Moodle学院([moodle.academy](http://moodle.academy))，它包括一个管理员学习路径，涵盖关于基本Moodle管理的短小、自定步调的课程。
- en: This concludes this section on navigating Moodle, which introduced you to the
    site administration menu and various helpful tools such as admin search, admin
    bookmarks, and Moodle Docs.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分内容介绍了Moodle的导航，其中包括了网站管理菜单和各种有用的工具，如管理员搜索、管理员书签和Moodle文档。
- en: File management in Moodle
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Moodle文件管理
- en: 'This section is all about files: how to access them, how they are organized
    in folders, how to upload them, how to configure private files, the difference
    between copying and linking, file types, increasing the upload file limit, and
    how to deal with deleted files via the recycle bin. This is a lot to take in,
    so let’s get started.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分内容全部关于文件：如何访问它们，它们如何在文件夹中组织，如何上传它们，如何配置私有文件，复制和链接之间的区别，文件类型，增加上传文件限制，以及如何通过回收站处理已删除的文件。这需要很多内容，所以让我们开始吧。
- en: Dealing with files in web-based applications is not always straightforward.
    While Moodle provides a user interface to perform this task, it is sometimes necessary
    that, as the administrator, you will have to bypass this mechanism and use other
    means. First, let’s look at the built-in file handling that students and teachers
    also use.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在基于网络的程序中处理文件并不总是直接的。虽然Moodle提供了一个用户界面来执行此任务，但有时作为管理员，您可能需要绕过此机制并使用其他方法。首先，让我们看看内置的文件处理，这是学生和教师也会使用的。
- en: Moodle file management interface
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Moodle文件管理界面
- en: Moodle offers a basic file management interface that lets you upload, move,
    delete, and rename files and directories. It is also possible to copy or link
    to files from third-party services such as Dropbox; on the same note, Moodle isn’t
    a content management system.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 提供了一个基本的文件管理界面，允许您上传、移动、删除和重命名文件和目录。您还可以从 Dropbox 等第三方服务复制或链接到文件；同样，Moodle
    不是一个内容管理系统。
- en: 'We have already talked about how Moodle stores files at the system level—the
    ones we shouldn’t touch! At the application level, it arranges files according
    to Moodle’s structure:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经讨论了 Moodle 在系统级别上存储文件的方式——那些我们不应该触碰的文件！在应用级别上，它根据 Moodle 的结构来组织文件：
- en: Important note
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: In Moodle, a file is always connected to the particular bit of Moodle that uses
    it.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Moodle 中，一个文件始终与使用它的特定 Moodle 内容相关联。
- en: '![Figure 2.10 – Moodle files ](img/Figure_2.10_B18779.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.10 – Moodle 文件](img/Figure_2.10_B18779.jpg)'
- en: Figure 2.10 – Moodle files
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.10 – Moodle 文件
- en: 'Files are organized in a tree-like structure, which has three types of main
    branches:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 文件以树状结构组织，主要有三种主要分支：
- en: Categories/Courses/Activities and Resources
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分类/课程/活动和资源
- en: Users (private files and personal backups)
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户（私有文件和个人备份）
- en: Site home (Moodle’s front page)
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站首页（Moodle 的首页）
- en: We will be dealing with all those concepts at later stages, so, for now, let’s
    just take them for granted. Courses are arranged in categories (and subcategories)
    and consist of activities and resources, and there are usually further subdirectories
    inside activities and resources.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在后续阶段处理所有这些概念，所以现在，让我们先假定它们是正确的。课程按类别（和子类别）排列，包括活动和资源，通常在活动和资源内部还有进一步的子目录。
- en: 'There are multiple users on your system, each with a dedicated file area that
    can be accessed from anywhere in Moodle, but there is only a single Site Home.
    Remember, a file is always connected to the particular bit of Moodle content that
    uses it, reflected by the directory-like structure:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的系统中有多位用户，每位用户都有一个专用的文件区域，可以从 Moodle 的任何地方访问，但只有一个网站首页。记住，一个文件始终与使用它的特定 Moodle
    内容相关联，这体现在类似目录的结构中：
- en: '![Figure 2.11 – Moodle folders ](img/Figure_2.11_B18779.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.11 – Moodle 文件夹](img/Figure_2.11_B18779.jpg)'
- en: Figure 2.11 – Moodle folders
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.11 – Moodle 文件夹
- en: Now that we know how files and folders are organized, let’s look at how to upload
    data and create directories.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了文件和文件夹的组织方式，让我们看看如何上传数据和创建目录。
- en: Uploading files
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 上传文件
- en: Uploading files usually takes place via drag and drop. While this feature is
    vital for learners and trainers, as an administrator, you will also have to upload
    files from time to time, for instance, uploading users in batch mode via a CSV
    file.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 文件的上传通常通过拖放完成。虽然这个功能对于学习和培训人员至关重要，但作为管理员，您也必须不时上传文件，例如，通过 CSV 文件批量上传用户。
- en: 'Adding single or multiple files is straightforward: simply select the files
    in your Explorer (Windows) or Finder (Mac) and drag them onto the provided area
    inside the dotted lines shown in the following screenshot:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 添加单个或多个文件非常简单：只需在您的资源管理器（Windows）或Finder（Mac）中选择文件，然后将它们拖放到以下截图所示虚线框内的指定区域：
- en: '![Figure 2.12 – Moodle files and folders ](img/Figure_2.12_B18779.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.12 – Moodle 文件和文件夹](img/Figure_2.12_B18779.jpg)'
- en: Figure 2.12 – Moodle files and folders
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.12 – Moodle 文件和文件夹
- en: 'When you click on a file once it has been uploaded, you have the option to
    **Download** or **Delete** the file. If the selected file is a compressed archive,
    you have the option to **Unzip** it. Additionally, meta-information about the
    file (name, author, license, path, icon, last modified, created, and size) is
    displayed at the bottom of the window, as shown in the following screenshot:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 当文件上传后，点击一次，您可以选择**下载**或**删除**文件。如果选中的文件是压缩归档，您可以选择**解压**它。此外，文件的相关元信息（名称、作者、许可、路径、图标、最后修改时间、创建时间和大小）将在窗口底部显示，如下截图所示：
- en: '![Figure 2.13 – Moodle file details ](img/Figure_2.13_B18779.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.13 – Moodle 文件详情](img/Figure_2.13_B18779.jpg)'
- en: Figure 2.13 – Moodle file details
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.13 – Moodle 文件详情
- en: For some file operations, it is necessary to use the **File picker**, a tool
    utilized whenever files have to be added to a particular object in Moodle. A user
    can choose from multiple file sources, known as repositories. The File picker
    can be accessed using the **Add…** button at the top left of the files area. We
    will be dealing with repositories in [*Chapter 10*](B18779_10.xhtml#_idTextAnchor204),
    *Configuring* *Technical Features*.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某些文件操作，必须使用**文件选择器**，这是一个在需要将文件添加到 Moodle 中特定对象时使用的工具。用户可以从多个文件源中选择，这些文件源被称为存储库。可以通过文件区域左上角的**添加…**按钮访问文件选择器。我们将在[*第
    10 章*](B18779_10.xhtml#_idTextAnchor204) *配置* *技术功能* 中处理存储库。
- en: Closely related to uploading files is configuring the upload limit.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 与上传文件密切相关的是配置上传限制。
- en: Upload limit
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 上传限制
- en: Your site has a file upload limit set to 2 MB by default. If you need to support
    files larger than the 2 MB threshold, you will have to increase the limit.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 您的网站默认设置了 2 MB 的文件上传限制。如果您需要支持大于 2 MB 阈值的文件，您必须提高限制。
- en: 'In your `php.ini` file (find its location using the `php -i` command and locate
    the `Loaded Configuration File` entry), modify the following two lines; `<value>`
    represents the maximum limit (multiple input formats are supported, for example,
    20M or 20971520):'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的 `php.ini` 文件中（使用 `php -i` 命令找到其位置，并定位到 `Loaded Configuration File` 条目），修改以下两行；`<value>`
    表示最大限制（支持多种输入格式，例如，20M 或 20971520）：
- en: '`upload_max_filesize = <``value>`'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`upload_max_filesize = <``value>`'
- en: '`post_max_size = <``value>`'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`post_max_size = <``value>`'
- en: 'If you don’t have access to the `php.ini` file, create a `.htaccess` file in
    your main Moodle directory and add the following two lines:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您无法访问 `php.ini` 文件，请在您的 Moodle 主目录中创建一个 `.htaccess` 文件，并添加以下两行：
- en: '`php_value upload_max_filesize = <``value>`'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`php_value upload_max_filesize = <``value>`'
- en: '`php_value post_max_size = <``value>`'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`php_value post_max_size = <``value>`'
- en: 'You will also have to increase the `LimitRequestBody` parameter on some systems,
    usually found in the Apache `httpd.conf` configuration file. You may also need
    to modify your database configuration, such as the `max_allowed_packet` size:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 您还必须在某些系统上增加 `LimitRequestBody` 参数，通常在 Apache `httpd.conf` 配置文件中找到。您可能还需要修改数据库配置，例如
    `max_allowed_packet` 的大小：
- en: '![Figure 2.14 – Moodle upload limit ](img/Figure_2.14_B18779.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.14 – Moodle 上传限制](img/Figure_2.14_B18779.jpg)'
- en: Figure 2.14 – Moodle upload limit
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.14 – Moodle 上传限制
- en: Once these changes have been applied, ensure the **Maximum upload file size**
    parameter under **Site administration** | **Security** | **Site security settings**
    has been set to **Site upload limit**. You can also change the user quota for
    private files via the **Private file space** parameter. When changing these two
    values, bear in mind that they will potentially impact the bandwidth and disk
    space, respectively.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦应用了这些更改，请确保在 **站点管理** | **安全** | **站点安全设置** 下的 **最大上传文件大小** 参数已设置为 **站点上传限制**。您还可以通过
    **私有文件空间** 参数更改私有文件的配额。在更改这两个值时，请记住，它们可能会分别影响带宽和磁盘空间。
- en: For very large files such as high-quality learning resources, it would be helpful
    to be able to upload the content via (secure) FTP and then use the built-in unzip
    functionality in the File picker. However, it is not possible to upload files
    directly via FTP. Instead, you have to make use of the filesystem repository,
    which will be discussed in detail in [*Chapter 10*](B18779_10.xhtml#_idTextAnchor204),
    *Configuring* *Technical Features*.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 对于像高质量学习资源这样的非常大的文件，能够通过（安全）FTP 上传内容然后使用文件选择器内置的解压缩功能将非常有帮助。然而，无法直接通过 FTP 上传文件。相反，您必须使用文件系统存储库，这将在[*第
    10 章*](B18779_10.xhtml#_idTextAnchor204) *配置* *技术功能* 中详细讨论。
- en: Now that you are familiar with uploading files, let’s deal with personal files
    that belong to individual users.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经熟悉了上传文件，让我们来处理属于个人用户个人的个人文件。
- en: Private files
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 私有文件
- en: 'Every user has an area where personal files can be stored and managed. These
    are only visible to the user to whom the private files belong. Any item stored
    in this protected area can be used throughout the site. Private files can be accessed
    via the File picker, the **Private files** block, or directly via the **Private
    files** link in the user menu:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 每个用户都有一个区域，可以在此处存储和管理个人文件。这些文件只对拥有私有文件的用户可见。在此受保护区域中存储的任何项目都可以在整个网站上使用。私有文件可以通过文件选择器、**私有文件**块或通过用户菜单中的**私有文件**链接直接访问：
- en: '![Figure 2.15 – Moodle File picker ](img/Figure_2.15_B18779.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.15 – Moodle 文件选择器](img/Figure_2.15_B18779.jpg)'
- en: Figure 2.15 – Moodle File picker
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.15 – Moodle 文件选择器
- en: Handling files and directories is identical to handling other files. However,
    you might have spotted the **Link** icon in the PDF file in the preceding screenshot,
    which leads us nicely to the following subsection.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 处理文件和目录与其他文件的处理方式相同。然而，您可能已经在前面的屏幕截图中的PDF文件中注意到了**链接**图标，这很自然地引出了以下小节。
- en: To link or to copy?
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 链接还是复制？
- en: By default, files in Moodle are copied. When you add a file from a source (for
    instance, your computer or your private files), it will be copied, which means
    that the source and the resulting file will be logically separated. For example,
    if you have stored an image in your private files and you use this in three different
    courses, there are three logical copies. The three images will not be affected
    if you change the source in your private files.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Moodle中的文件会被复制。当您从源（例如，您的计算机或您的私人文件）添加文件时，它将被复制，这意味着源文件和结果文件在逻辑上会被分离。例如，如果您在您的私人文件中存储了一个图像，并在三个不同的课程中使用它，那么这三个图像在逻辑上会有三个副本。如果您更改私人文件中的源文件，这三个图像将不会受到影响。
- en: Moodle also supports linking files, also known as file aliases. Let’s stick
    to the same example, but this time round, the three images are linked. If the
    source is changed, the three files in the courses will also have changed. Beware
    that there are some access restrictions with linked files; for example, instructor
    A might not be able to link to instructor B’s file.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle还支持链接文件，也称为文件别名。让我们继续使用相同的例子，但这次是三个图像被链接。如果源文件被更改，课程中的三个文件也会相应更改。请注意，链接文件有一些访问限制；例如，讲师A可能无法链接到讲师B的文件。
- en: 'When you select a file from a source (repository) that supports linking, an
    option is provided to **Link to** **the file**:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 当您从一个支持链接的源（存储库）中选择文件时，会提供一个选项来**链接到****该文件**：
- en: '![Figure 2.16 – Moodle files – copy and link ](img/Figure_2.16_B18779.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图2.16 – Moodle文件 – 复制和链接](img/Figure_2.16_B18779.jpg)'
- en: Figure 2.16 – Moodle files – copy and link
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.16 – Moodle文件 – 复制和链接
- en: 'Moodle keeps track of linked files and guarantees that inconsistencies cannot
    occur:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle会跟踪链接文件，并保证不会出现不一致的情况：
- en: When deleting a linked file, copies of the file will be created for each link
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当删除链接文件时，每个链接都会创建文件副本
- en: When a linked file is overwritten, all links are updated
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当链接文件被覆盖时，所有链接都会更新
- en: When a file overwrites a link, the files are “separated”
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当文件覆盖链接时，文件会被“分离”
- en: Linking and copying are about how files are being dealt with internally; next
    up are file types, which dictate how they are dealt with when users download them.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 链接和复制是关于文件内部处理方式的问题；接下来是文件类型，它决定了用户下载文件时的处理方式。
- en: File types
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 文件类型
- en: 'Moodle does not restrict which types of files users can upload, for instance,
    an assignment in a course. Moodle comes with predefined values for the most popular
    file types in terms of the icon displayed and the program that will be opened,
    for example, PDF files or PowerPoint documents. However, as depicted in the following
    screenshot, you can add new file types and view, modify, and delete existing file
    types by going to **Site administration** | **Server** | **File types**:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle不限制用户可以上传的文件类型，例如，课程中的作业。Moodle为最常见的文件类型预定义了图标显示和将打开的程序，例如PDF文件或PowerPoint文档。然而，如以下屏幕截图所示，您可以通过访问**站点管理**
    | **服务器** | **文件类型**来添加新的文件类型并查看、修改和删除现有文件类型：
- en: '![Figure 2.17 – Moodle file types ](img/Figure_2.17_B18779.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![图2.17 – Moodle文件类型](img/Figure_2.17_B18779.jpg)'
- en: Figure 2.17 – Moodle file types
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.17 – Moodle文件类型
- en: When you add a new file type via the button at the bottom of the screen, you
    must provide the file’s **Extension** and its **MIME type**. Furthermore, you
    have the option to select **File icon**, **Type groups** (such as image or document),
    **Description type**, **Custom description** (if **Description type** is **Custom
    description specified in this form**), **Alternative language string** (if selected
    in **Description type**) and **Default icon for** **MIME type**.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 当您通过屏幕底部的按钮添加新的文件类型时，您必须提供文件的**扩展名**和其**MIME类型**。此外，您可以选择选择**文件图标**、**类型组**（例如图像或文档）、**描述类型**、**自定义描述**（如果**描述类型**是**在此表单中指定的自定义描述**）、**替代语言字符串**（如果选中**描述类型**）和**MIME类型的默认图标**。
- en: So far, we have covered how files are stored, organized, and added to Moodle.
    Now, let’s look at what happens when files are deleted (by accident).
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经介绍了文件在Moodle中的存储、组织和添加方式。现在，让我们看看当文件被删除（意外删除）时会发生什么。
- en: Recycle bin
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 回收站
- en: 'As an administrator, we have all been there: a user has deleted a file, an
    assignment with all its submissions, or even an entire course – all by accident,
    of course, and usually very close to an urgent deadline. Recovering the lost data
    is, as always, the highest priority, and you will spend the next hour or so trawling
    through last night’s backup to help out your panicking colleague.'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 作为管理员，我们都有过这样的经历：用户意外删除了一个文件、一个包含所有提交的作业，甚至是一个完整的课程——当然，通常是在紧急截止日期附近。恢复丢失的数据始终是最高优先级，您将在接下来的一个小时内或更长时间内翻阅昨晚的备份，以帮助您的惊慌失措的同事。
- en: To avoid scenarios like the ones described, Moodle provides a recycle bin, allowing
    users to retrieve course elements and courses that were mistakenly deleted. The
    feature is turned on by default, but you have a range of options to configure
    the tool’s behavior as an administrator.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免类似描述的场景，Moodle提供了一个回收站，允许用户恢复误删除的课程元素和课程。该功能默认开启，但作为管理员，您有一系列选项来配置工具的行为。
- en: 'To access the **Recycle bin** configuration, navigate to **Site administration**
    | **Plugins** | **Admin tools** | **Recycle bin**, where you will see three groups
    of settings:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问**回收站**配置，请转到**网站管理** | **插件** | **管理工具** | **回收站**，您将看到三组设置：
- en: '![Figure 2.18 – Moodle’s Recycle bin settings ](img/Figure_2.18_B18779.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![图2.18 – Moodle的回收站设置](img/Figure_2.18_B18779.jpg)'
- en: Figure 2.18 – Moodle’s Recycle bin settings
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.18 – Moodle的回收站设置
- en: 'The **Recycle bin** options are as follows:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '**回收站**选项如下：'
- en: The **Enable course recycle bin** option collects any deleted resources and
    activities inside a course. The items will be kept for the period set in the **Item**
    **lifetime** parameter.
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**启用课程回收站**选项收集课程内删除的任何资源和活动。这些项目将保留在**项目****生命周期**参数设置的时间内。'
- en: The **Enable category recycle bin** option collects any deleted courses inside
    a category. The courses will be kept for the period set in the **Course** **lifetime**
    parameter.
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**启用分类回收站**选项收集分类内删除的任何课程。这些课程将保留在**课程****生命周期**参数设置的时间内。'
- en: When the **Auto hide** checkbox is selected, the corresponding menu item will
    only be shown if the user’s bin contains any elements; otherwise, it will be hidden
    from the **More** menu in the course or category.
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当选择**自动隐藏**复选框时，相应的菜单项只有在用户的回收站包含任何元素时才会显示；否则，它将从课程或类别的**更多**菜单中隐藏。
- en: 'Items and courses will be purged permanently from the recycle bin when the
    respective lifetime expiry dates have passed. The life cycle of a deleted course
    item or a course category is depicted in the following diagram:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 当相应的生命周期到期日期过去后，项目和课程将从回收站永久删除。删除的课程项目或课程类别的生命周期在以下图中表示：
- en: '![Figure 2.19 – Moodle Recycle bin ](img/Figure_2.19_B18779.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![图2.19 – Moodle回收站](img/Figure_2.19_B18779.jpg)'
- en: Figure 2.19 – Moodle Recycle bin
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.19 – Moodle回收站
- en: Initially, the recycle bin is empty or may already contain removed items or
    courses (in our example, two). When an element is deleted, it is moved to the
    user’s recycle bin, which can either be restored or purged permanently. Suppose,
    in the meantime, the specified lifetime of the element has expired. In that case,
    the file or course will be deleted permanently, alongside any other elements where
    the expiry date has also been reached.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 初始时，回收站可能是空的，或者可能已经包含已删除的项目或课程（在我们的例子中，有两个）。当一个元素被删除时，它会被移动到用户的回收站，可以恢复或永久删除。假设在此期间，元素的指定生命周期已过期。在这种情况下，文件或课程将被永久删除，以及其他任何到期日期已达到的元素。
- en: 'As mentioned previously, the recycle bin works out of the box; if yours doesn’t
    function as expected, double-check the following three configurations:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，回收站是即插即用的；如果您的回收站没有按预期工作，请检查以下三个配置：
- en: Most processes of the recycle bin are kicked off by the cron process, for example,
    the regular purging mechanism we just mentioned. Therefore, it is crucial that
    the cron process is set up correctly and runs every minute (see the dedicated
    *Setting up the cron process* section in [*Chapter 1*](B18779_01.xhtml#_idTextAnchor020),
    *Installing Moodle*).
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 回收站的大多数流程都是由cron进程触发的，例如，我们刚才提到的常规清除机制。因此，确保cron进程正确设置并且每分钟运行一次至关重要（请参阅[*第1章*](B18779_01.xhtml#_idTextAnchor020)，*安装Moodle*中专门的*设置cron进程*部分）。
- en: Internally, the recycle bin uses Moodle’s backup and restore functionality.
    In particular, the following two settings have to be enabled on the `backup_auto_activities`)
    and `backup_auto_users`). Additionally, `restore_general_users`) must be ticked
    on the **General restore** defaults page. You can find more detailed information
    on these settings in [*Chapter 16*](B18779_16.xhtml#_idTextAnchor308), *Avoiding
    Sleepless Nights – Moodle Backup* *and Restore*.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内部，回收站使用Moodle的备份和恢复功能。特别是，必须在`backup_auto_activities`)和`backup_auto_users`)上启用以下两个设置。此外，在**通用恢复**默认页面必须勾选`restore_general_users`)。关于这些设置的更详细信息，请参阅[*第16章*](B18779_16.xhtml#_idTextAnchor308)，*避免失眠之夜
    – Moodle备份* *和恢复*。
- en: If your users experience difficulties working with the recycle bin, ensure none
    of the required capabilities have been revoked from their roles. These are **tool/recyclebin:viewitems**,
    **tool/recyclebin:restoreitems**, and **tool/recyclebin:deleteitems**. More on
    roles and capabilities will be provided in [*Chapter 6*](B18779_06.xhtml#_idTextAnchor116),
    *Managing Permissions, Roles,* *and Capabilities*.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您的用户在使用回收站时遇到困难，请确保他们的角色中未撤销任何必需的能力。这些是**tool/recyclebin:viewitems**、**tool/recyclebin:restoreitems**和**tool/recyclebin:deleteitems**。关于角色和能力的内容将在[*第6章*](B18779_06.xhtml#_idTextAnchor116)，*管理权限、角色*
    *和能力*中提供。
- en: Learning how to use the recycle bin concludes this section on files and the
    management thereof.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 学习如何使用回收站结束了关于文件及其管理的这一节。
- en: Summary
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned what the building blocks of Moodle Core look like
    and where they are located. Furthermore, we looked at the new intuitive user interface
    in an administrator’s context. Lastly, we dealt with files, folders, and the recycle
    bin.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了Moodle核心的构建块看起来是什么样子以及它们的位置。此外，我们还从管理员的角度探讨了新的直观用户界面。最后，我们处理了文件、文件夹和回收站。
- en: As we learned in the previous chapter, Moodle can be installed on multiple operating
    systems, supports a wide range of databases, and can be used with different web
    servers. Due to the openness of Moodle, all its components can be accessed without
    any restrictions. Similarly, any type of file can be handled in Moodle, regardless
    of its type or size. An intuitive and modern user interface accompanies this setup
    for learners, educators, and administrators.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们在上一章所学，Moodle可以安装在多种操作系统上，支持广泛的数据库，并且可以与不同的Web服务器一起使用。由于Moodle的开放性，其所有组件都可以无限制地访问。同样，Moodle可以处理任何类型的文件，无论其类型或大小。为学习者、教育者和管理员提供直观且现代的用户界面。
- en: Now that your system is up and running and you know what its insides look like,
    it’s time to deal with courses, users, and roles in the next chapter.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您的系统已经启动并运行，您也知道了它的内部结构，是时候在下一章处理课程、用户和角色了。
