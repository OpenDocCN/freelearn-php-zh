- en: Managing Users
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理用户
- en: In [Chapter 2](54597f65-23c0-4749-a7e6-aa5086ca1d47.xhtml), *Structuring Content
    Types*, we learned how content is stored as a type, about content types, the fields
    that comprise them, and how to create a custom content type.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第2章](54597f65-23c0-4749-a7e6-aa5086ca1d47.xhtml)《结构化内容类型》中，我们学习了内容是如何以类型存储的，关于内容类型，构成它们的字段，以及如何创建自定义内容类型。
- en: 'This chapter is all about the reason for having a Drupal site, or any website
    for that matter: users.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这章全部关于拥有Drupal网站，或者任何网站的原因：用户。
- en: 'If no one were accessing the site''s content, there would be little reason
    for having the site, right? However, not all access is alike. You''re going to
    learn about user types and how Drupal provides a way for you to ensure that no
    one has more access than they require. More specifically, this chapter covers
    the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有人访问网站的内容，那么拥有这个网站的理由就很少了，对吧？然而，并非所有的访问都是一样的。你将了解用户类型以及Drupal如何为你提供一种确保没有人拥有超过他们所需访问权限的方法。更具体地说，本章涵盖了以下主题：
- en: User types
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户类型
- en: User roles
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户角色
- en: User permissions
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户权限
- en: Creating a user
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建用户
- en: User types
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户类型
- en: In the context of a **Content Management System** (**CMS**), a user is simply
    someone who uses the site. If that were all there is to it, if everyone were always
    the same in the *eyes* of Drupal, we could stop right here. So, you won't be surprised
    to read that all users are not necessarily the same. Of course, I'm not referring
    to the personal aspects of the users when I write that; I mean that users are
    not necessarily all the same in terms of their reason for accessing the site and
    what ability they are given to do so.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在**内容管理系统**（**CMS**）的背景下，用户仅仅是使用网站的人。如果这就是全部，如果每个人在Drupal的**眼中**都是一样的，我们就可以在这里停止了。所以，你读到所有用户并不一定相同，你不会感到惊讶。当然，当我写那句话时，我并不是指用户的个人方面；我的意思是，用户在访问网站的原因以及他们被赋予的能力方面并不一定相同。
- en: 'If we look at USERS as a top-level classification with the thought of further
    classifying them, doing so depends on a choice: are we classifying them in a real-world
    sort of way, or as Drupal does? In the following table we see them compared:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们将用户视为一个顶级分类，并考虑进一步对他们进行分类，那么这样做取决于一个选择：我们是按照现实世界的某种方式对他们进行分类，还是像Drupal那样？在下表中，我们可以看到它们的比较：
- en: '| **USERS** |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| **用户** |'
- en: '| **Administrative** | **Creative** | **Consumer** |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| **管理** | **创意** | **消费者** |'
- en: '| Focus on the configuration and settings of the site rather than site content.
    | Focus on site content | Availers of site content |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| 专注于网站的配置和设置，而不是网站内容。 | 专注于网站内容 | 网站内容的获取者 |'
- en: 'From the real-world point of view, we tend to categorize users based on their
    functional relationship with the site. If you think of these relationships in
    the context of a home, some might simply live there and consume food (think teenagers),
    some will contribute to the look and contents of the home, and others will be
    responsible for maintaining it. Yes, a user can appear in more than one category,
    as shown in the following table:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 从现实世界的角度来看，我们倾向于根据用户与网站的功能关系来对用户进行分类。如果你从家庭的角度来考虑这些关系，有些人可能只是住在那里并消费食物（想想青少年），有些人会为家庭的外观和内容做出贡献，而其他人则负责维护它。是的，用户可以出现在多个类别中，如下表所示：
- en: '| **USERS** |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| **用户** |'
- en: '| **Administrative** | **Authenticated** | **Anonymous** |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| **管理** | **认证** | **匿名** |'
- en: '| Authenticated + permission to perform higher level activities. | Anonymous
    + a login to access privileged functionality or content. | Some access to the
    account as an unknown site visitor. |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| 认证并拥有执行高级活动权限。 | 匿名用户，需要登录以访问受保护的功能或内容。 | 作为未知网站访客对账户拥有一些访问权限。 |'
- en: From the Drupal point of view, it pretty much comes down to what you will be
    allowed to do on the site and whether you require an account to do so. For example,
    some sites allow unknown site visitors to read the content and comment on it.
    Others only allow access to the content for them without commenting, and others
    do not allow anonymous access at all. Returning to the analogy of a home, those
    who can do whatever they like to it have administrative access; those who are
    allowed to enter have authenticated access, albeit with different "roles", such
    as friends versus residents; and those who come to the front door (if there is
    no gatekeeper or doorman preventing that) who are unknown are anonymous.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 从Drupal的角度来看，这基本上取决于你将在网站上允许做什么，以及你是否需要账户来做这些事情。例如，一些网站允许未知访客阅读内容并对其进行评论。其他网站只允许他们阅读内容而不允许评论，还有一些网站根本不允许匿名访问。回到家的类比，那些可以随意对其做任何事情的人拥有管理访问权限；那些被允许进入的人拥有经过验证的访问权限，尽管有不同的“角色”，比如朋友与居民；那些来到前门（如果没有守门人或门卫阻止）而身份不为人知的人是匿名的。
- en: For the most part, *Consumer* users are *Anonymous*, with some premium or secure
    content requiring them to be *Authenticated*. *Creative* users are typically *Authenticated*.
    And *Administrators* are usually always, *Administrative*. The takeaway is this: sites
    vary, and so does the segregation, if any, of user types.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，*消费者*用户是*匿名*的，一些高级或安全内容要求他们必须是*认证*的。*创意*用户通常是*认证*的。*管理员*通常总是拥有*管理*权限。要点是：网站各不相同，因此用户类型的隔离（如果有的话）也各不相同。
- en: User roles
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户角色
- en: 'To Drupal, a *role* has the same meaning as it does outside of Drupal: the
    functional aspect of the user, sometimes considered a *persona*. It''s worth mentioning
    that Drupal does blur the line a bit between a role and a user type, because it
    comes with three roles predefined, and they are the user types mentioned earlier.
    While *administrator* makes sense as a role, *authenticated* and *anonymous* are
    not really roles, but appear there to simplify things, for administrators, at
    least.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Drupal来说，*角色*的含义与Drupal之外的含义相同：用户的职能方面，有时被认为是一个*角色扮演者*。值得一提的是，Drupal在角色和用户类型之间稍微模糊了界限，因为它预定义了三个角色，它们就是之前提到的用户类型。虽然*管理员*作为一个角色是有意义的，但*认证*和*匿名*并不是真正的角色，但它们出现在那里是为了简化事情，至少对于管理员来说是这样。
- en: 'So, let''s take a look at the default user roles inside of Drupal before we
    move on to discussing why you would want additional ones. If you are using the
    menus, click *People* in the Admin menu (`admin/people`), and then click the tab
    labeled *Roles*, as in the following:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在我们继续讨论为什么你需要额外的角色之前，让我们先看看Drupal中的默认用户角色。如果你在使用菜单，点击管理菜单中的*人员*（`admin/people`），然后点击标签页上标有*角色*的选项，如下所示：
- en: '![](img/7487d629-2b0f-42e8-8300-24d1211518a6.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7487d629-2b0f-42e8-8300-24d1211518a6.png)'
- en: The preceding screenshot shows the roles that are predefined in Drupal. I disagree
    with the given description of a role, because it is unclear. The order of operation
    in Drupal is that privileges are assigned to roles, and roles are assigned to
    users. We'll discuss that more when we add a user and when we assign some permissions,
    later in this chapter.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 上述截图显示了Drupal中预定义的角色。我不同意对角色的给定描述，因为它不够明确。Drupal的操作顺序是先给角色分配权限，然后给用户分配角色。我们将在添加用户和分配一些权限时，在本章的后面部分进一步讨论这个问题。
- en: For now, let's focus on the default Drupal roles themselves. As I mentioned
    earlier, *anonymous* and *authenticated* are actually more user types than roles,
    but in Drupal they are referred to as roles. When would these three roles, alone,
    be sufficient? One example would be a site where all users with logins can create
    content, and all users that have no login can only view that content. If those
    are the limits to your organizational and site complexity, you can jump ahead
    to the section on *User Creation* if you'd like.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们先关注默认的Drupal角色本身。正如我之前提到的，*匿名*和*认证*实际上是比角色更多的用户类型，但在Drupal中它们被称为角色。这三个角色单独就足够了吗？一个例子是，所有登录用户都可以创建内容，而没有登录的所有用户只能查看该内容。如果这些就是你的组织和网站复杂性的限制，那么如果你想的话，可以跳到关于*用户创建*的部分。
- en: Let us consider. The anonymous role stands on its own. Why? Because it is defined
    as a user with no account or login, which is to say, a user that is not identified.
    We would not assign the role of *Anonymous* to a user account, because if there
    is an account, the user of it is no longer anonymous. There would be no sense
    in creating different roles for anonymous users, because there would be no user
    accounts to assign those roles. So, that leaves us with the other two roles, and
    we can use those to derive examples.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑一下。匿名角色是独立的。为什么？因为它被定义为没有账户或登录的用户，也就是说，一个未识别的用户。我们不会将 *匿名* 角色分配给用户账户，因为如果有账户，使用该账户的用户就不再是匿名的。为匿名用户创建不同角色的做法是没有意义的，因为没有用户账户可以分配这些角色。因此，这就留下了其他两个角色，我们可以使用它们来推导示例。
- en: On our site, we will have four types of non-administrative authenticated users.
    The first will be authenticated users in general. That is, users with this role
    will be able to login, and in addition to being able to see the Article and Page
    site content that Anonymous and all users can see, they will be able to see content
    of the Appointment type we defined, as well.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的网站上，我们将有四种非管理认证用户类型。第一种是一般认证用户。也就是说，具有此角色的用户将能够登录，并且除了能够看到匿名用户和所有用户都能看到的文章和页面网站内容之外，他们还能够看到我们定义的预约类型的内容。
- en: This could be our use of the Authenticated role, since all users logging in
    will have those capabilities at a minimum, but we won't use that role for it.
    Why? Because we have to account for the possibility that later there might be
    the need to have some users who can log in but cannot access appointment data.
    In general, I prefer to leave the predefined roles  unchanged for that reason...use
    them as a model instead, or as is. So, we will call the new role Client.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能是我们使用认证角色的用途，因为所有登录的用户至少都将具备这些能力，但我们不会为此使用该角色。为什么？因为我们必须考虑到将来可能会有一些用户可以登录但不能访问预约数据的情况。一般来说，我更喜欢为了这个原因保持预定义的角色不变……用作模型，或者保持原样。因此，我们将新角色称为客户端。
- en: One thing to keep in mind when creating new roles for a logged-in user is that
    because the user is logged in, and thus also an authenticated user, the user will
    receive all the permissions assigned to the Authenticated role, too.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在为登录用户创建新角色时需要记住的一件事是，由于用户已登录，因此也是一个认证用户，该用户将接收到分配给认证角色的所有权限。
- en: 'There will be three additional roles for authenticated users on our site:  Client,
    who is able to view appointments; Consultant, who is able to create and edit appointments;
    and Editor, who is able to create and edit content other than appointments. The
    complete list of our user roles and their use are given in this table:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的网站上，将有三类认证用户角色：能够查看预约的客户端；能够创建和编辑预约的顾问；以及能够创建和编辑除预约之外内容的编辑。我们用户角色的完整列表及其用途如下表所示：
- en: '| Role | Use |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| 角色 | 用途 |'
- en: '| Anonymous | Unknown users. Able to read *Article* and *Page* content. |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| 匿名 | 未知用户。能够阅读 *文章* 和 *页面* 内容。 |'
- en: '| Authenticated | Users with accounts. Able to comment on *Article* content.
    |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| 认证 | 有账户的用户。能够对 *文章* 内容进行评论。 |'
- en: '| Client | Authenticated + able to view *Appointment* content |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| 客户端 | 认证 + 能够查看 *预约* 内容 |'
- en: '| Consultant | Authenticated + able to perform *Appointment* CRUD^* |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| 顾问 | 认证 + 能够执行 *预约* CRUD^* |'
- en: '| Editor | Authenticated + able to perform *Article* and *Page* CRUD^* |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| 编辑 | 认证 + 能够执行 *文章* 和 *页面* CRUD^* |'
- en: '| Administrator | Authenticated + able to access Drupal admin functions and
    manage user accounts |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| 管理员 | 认证 + 能够访问 Drupal 管理功能和管理用户账户 |'
- en: '* **CRUD** = **Create/Read/Update/Delete **'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '* **CRUD** = **创建/读取/更新/删除**'
- en: 'Follow these steps to add the Client role:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤添加客户端角色：
- en: Click the +Add role button, which leads to the page `admin/people/roles/add`
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 + **添加角色** 按钮，这将带您进入页面 `admin/people/roles/add`
- en: Enter the *role name*, `Client`
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入 *角色名称*，`Client`
- en: Click Sav*e*
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **保存**
- en: 'Notice that the role list now includes Client. Follow the steps above for the
    Consultant and Editor roles as well. The role list should now appear as shown
    in the following screenshot:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，角色列表现在包括 Client。按照上述步骤为顾问和编辑角色也执行操作。角色列表现在应如图所示：
- en: '![](img/d291a3dc-5060-4384-9fd0-4dc6d4370d49.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d291a3dc-5060-4384-9fd0-4dc6d4370d49.png)'
- en: All roles are now available for use. However, their capabilities have not yet
    been defined. Since we've covered all that we need to regarding the creation of
    roles, let's move on to the topic of permissions.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 所有角色现在都可以使用。然而，它们的权限尚未定义。既然我们已经涵盖了有关创建角色的所有必要内容，让我们继续讨论权限的话题。
- en: Managing permissions
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理权限
- en: Any page element that a user can view or hear or otherwise interact with, such
    as a menu link, is available for doing so because the user, via a role, has been
    given permission to do so. This is a very important concept, so I will give an
    example. You have no doubt seen a *Terms and Conditions* link on most sites.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以查看、收听或以其他方式与之交互的任何页面元素，例如菜单链接，都可供使用，因为用户通过角色已被授予这样做权限。这是一个非常重要的概念，所以我会给出一个例子。您无疑在大多数网站上看到过“条款和条件”链接。
- en: On a Drupal site, if you see such a link, it is because your user role has been
    granted permission to access that content (the Terms and Conditions page). Were
    that permission not granted for your user, the link would probably not be visible.
    Were it still visible, or were you to enter the URL for the page in your browser,
    you would receive a message stating that you have not been granted access to that
    content.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在Drupal网站上，如果您看到这样的链接，那是因为您的用户角色已被授予访问该内容（条款和条件页面）的权限。如果未为您的用户授予该权限，链接可能不会可见。如果它仍然可见，或者您在浏览器中输入该页面的URL，您将收到一条消息，表明您未被授予访问该内容。
- en: Because permissions can be granular and detailed, there are a lot of them, and
    adding modules will typically add more to the list. We're going to focus on a
    subset of them to keep things simple.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 由于权限可以是细粒度和详细的，因此有很多权限，添加模块通常会向列表中添加更多。我们将关注其中的一小部分以保持简单。
- en: With that warning, let's take a look by clicking the Permissions tab at the
    top of the page, which will take us to `admin/people/permissions`.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 提醒大家注意，点击页面顶部的“权限”标签页，这将带我们到`admin/people/permissions`。
- en: The structure of the permissions page is all permissions provided in a scrollable
    table. Across the top of the table are the roles defined on the site. You'll see
    that they are the same as those that were listed earlier. Down the left-most column
    of the table is the list of permissions for actions categorized by alphabetical
    topic and/or name of the module that defines them.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 权限页面的结构是一个可滚动的表格，其中包含了所有提供的权限。表格顶部列出了网站上定义的角色。您会发现它们与之前列出的相同。表格最左侧列出了按字母顺序主题和/或定义它们的模块名称分类的权限列表。
- en: The manner of management is quite simple. If a box is checked, that column's
    role has the listed permission. For example, looking at the first permission,
    which is associated with the *Block* module, the ability to *Administer blocks*
    has been granted only to those users having the Administrator role.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 管理方式相当简单。如果复选框被勾选，则该列的角色拥有列出的权限。例如，查看第一个权限，它与*Block*模块相关联，只有拥有管理员角色的用户被授予了*管理块*的能力。
- en: Rather than scroll down and up for each of the roles, we'll approach this by
    permission, so that we only have to scroll once. In the following table, I will
    provide each of the categories and permissions within it that require our attention,
    as well as what the checkboxes should look like after you have checked the appropriate
    ones to accomplish the grants we defined earlier for our roles.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免为每个角色上下滚动，我们将通过权限来处理，这样我们只需滚动一次。在下面的表格中，我将提供需要我们注意的每个类别及其内的权限，以及您检查适当的复选框后，应该看起来像什么，以完成我们为角色定义的早期权限。
- en: We will not be changing any of the settings in the Administrator column, but
    I have included it so that the relative position of each role is as you see it
    on your screen.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会更改管理员列中的任何设置，但我包括它，以便每个角色的相对位置与您在屏幕上看到的一致。
- en: 'I will only provide rows for those permissions that require a setting change. For
    example, you will notice under the category of Comment that already all authenticated
    user types have the ability to post comments, while Anonymous users have the ability
    to view comments, so no changes are needed, which is why that row won''t appear
    in this table:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 我只为需要更改设置的权限提供行。例如，您会在“评论”类别下注意到，所有经过身份验证的用户类型都已经具有发布评论的能力，而匿名用户具有查看评论的能力，因此不需要更改，这就是为什么该行不会出现在这个表格中的原因：
- en: '| **Category/Permission** | **Anonymous****User** | **Authenticated****User**
    | **Administrator** | **Client** | **Consultant** | **Editor** |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| **类别/权限** | **匿名用户** | **认证用户** | **管理员** | **客户** | **顾问** | **编辑** |'
- en: '| NODE |  |  |  |  |  |  |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| NODE |  |  |  |  |  |  |'
- en: '|     *Appointment*: Create new content |  |  | x |  | x |  |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '|     *预约*: 创建新内容 |  |  | x |  | x |  |'
- en: '|     *Article*: Create new content |  |  | x |  |  | x |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '|     *文章*: 创建新内容 |  |  | x |  |  | x |'
- en: '| *    Appointment*: Delete own content |  |  | x |  | x |  |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| *    预约*: 删除自己的内容 |  |  | x |  | x |  |'
- en: '| *    Article*: Delete own content |  |  | x |  |  | x |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| *    文章*: 删除自己的内容 |  |  | x |  | x |  |'
- en: '| *    Article*: Edit any content |  |  | x |  |  | x |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| *    文章*: 编辑任何内容 |  |  | x |  | x |  |'
- en: '| *    Appointment:* Edit own content |  |  | x |  | x |  |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| *    预约*: 编辑自己的内容 |  |  | x |  | x |  |'
- en: '| *    Article*: Edit own content |  |  | x |  |  | x |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| *    文章*: 编辑自己的内容 |  |  | x |  | x |  |'
- en: '| Access the Content overview page |  |  | x |  | x | x |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| 访问内容概览页面 |  |  | x |  | x | x |'
- en: '|  View own unpublished content |  |  | x |  | x | x |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '|  查看自己的未发布内容 |  |  | x |  | x | x |'
- en: Most of the permissions in the preceding table relate to CRUD operations on
    specific content types. That is, being able to create (add), edit (update) and
    delete content of a specific type, such as the *Appointment* type that we created.
    You can see that we granted permission to perform such operations to Consultants,
    but not to Editors, whereas we granted permission to perform those same operations
    on *Article* content to Editors, but not to Consultants.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 前表中的大多数权限都与特定内容类型的CRUD操作相关。也就是说，能够创建（添加）、编辑（更新）和删除特定类型的内容，例如我们创建的*预约*类型。你可以看到，我们授予了顾问执行此类操作的权限，但没有授予编辑者权限，而我们对*文章*内容授予了执行相同操作的权限，但没有授予顾问权限。
- en: Access rights, permissions, take effect immediately. That is, even if you have
    permission to perform a certain action or access a type of content, were that
    permission to be removed from your role, your access to that action/content would
    then be gone, unless and until it is reinstated.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 访问权限、权限立即生效。也就是说，即使你有执行特定动作或访问特定类型内容的权限，如果从你的角色中移除该权限，你对该动作/内容的访问就会消失，除非和直到它被恢复。
- en: 'You will notice that some of the permission descriptions look very similar,
    such as:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 你会注意到，一些权限描述看起来非常相似，例如：
- en: 'Appointment: Edit own content'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预约：编辑自己的内容
- en: 'Appointment: Edit any content'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预约：编辑任何内容
- en: The difference between the two is that with the second, the user is able to
    edit Appointment content regardless of who created it, whereas with the first,
    the user needs to have created it.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 两者之间的区别在于，使用第二种权限时，用户可以编辑无论谁创建的预约内容，而使用第一种权限时，用户需要自己创建它。
- en: The final permission, *View own unpublished content*, is worth noting as well.
    Unless this permission is granted, if a new piece of content is saved as *unpublished*,
    its author can no longer access it, only being able to access content marked *published*.
    With this permission, the user can also access his unpublished content, which
    is necessary for working with drafts.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个权限，*查看自己的未发布内容*，也值得关注。除非授予此权限，否则如果新内容保存为*未发布*，其作者将无法访问它，只能访问标记为*已发布*的内容。拥有此权限的用户还可以访问自己的未发布内容，这对于处理草稿是必要的。
- en: You might also notice that permissions for reading/viewing specific content
    types were not present. That is because, while there is a permission for viewing
    published content, that is as granular as the permissions get for viewing content;
    there are no permissions regarding viewing a particular content type. There is,
    however a module that provides those permissions, which we will add in [Chapter
    5](1787223e-41c7-44c4-9ab3-fc0f2cee3fa5.xhtml), *Making Drupal Even More Useful*.
    Once we have those permissions available to grant, we can ensure that only the
    roles we select can comment on a specific content type, because if you can't view
    the content, you can't comment on it!
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能还会注意到，没有特定内容类型的阅读/查看权限。这是因为，虽然存在查看已发布内容的权限，但这已经是查看内容权限的最细粒度；没有关于查看特定内容类型的权限。然而，有一个模块提供了这些权限，我们将在[第5章](1787223e-41c7-44c4-9ab3-fc0f2cee3fa5.xhtml)，*使Drupal更加有用*中添加。一旦我们有这些可授予的权限，我们就可以确保只有我们选择的角色可以评论特定内容类型，因为如果你不能查看内容，你就不能评论它！
- en: Users
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户
- en: We've created the roles specific to our site and assigned to them the permissions
    that grant them the access that they need. The only thing we're missing now...are
    users. Each user needs an account. Where do they come from?
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经为我们的网站创建了特定的角色，并为他们分配了授予他们所需访问权限的权限。我们现在唯一缺少的是...用户。每个用户都需要一个账户。他们从哪里来？
- en: 'There are three ways that most users obtain a Drupal account:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数用户获取Drupal账户的方式有三种：
- en: A user with permissions to create a user account does so on the user's behalf
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有创建用户账户权限的用户代表用户创建账户
- en: The user registers for an account
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户注册账户
- en: The user obtains an account via **single sign-on** (**SSO**), such as through
    a Facebook account
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户通过**单点登录**（**SSO**），例如通过Facebook账户获得账户
- en: Of these, the latter method is out of scope for this book, as it is a more in-depth
    administrative topic. Let's take a look at the other two.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些方法中，后者超出了本书的范围，因为它是一个更深入的行政主题。让我们看看其他两种方法。
- en: Creating a user account
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建用户账户
- en: We're going to learn how to create a user account. Some sites choose to allow
    users to create an account that immediately becomes active with no review, some
    choose to require the account to stay inactive until an administrative user approves
    it, which is what we will emulate here, and some create all user accounts administratively
    and do not allow users to register.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将学习如何创建用户账户。一些网站选择允许用户创建一个立即激活的账户，无需审查，一些网站选择要求账户保持不活跃状态，直到管理员批准，这正是我们将在这里模拟的，还有一些网站创建所有用户账户都是行政性的，不允许用户注册。
- en: 'Let''s create an account for an editor, one of the roles we created. If you
    still have a page up with the tabs for List, Permissions, and Roles at the top,
    click List. Otherwise, you can either click People in the Admin menu, or navigate
    to `admin/people`. Here is how we create an account:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们为编辑角色创建一个账户，这是我们创建的角色之一。如果你顶部还有带有列表、权限和角色标签页的页面，请点击列表。否则，你可以点击管理菜单中的“人员”，或者导航到`admin/people`。以下是创建账户的方法：
- en: Click the + Add user button, which will bring you to the Add user page, `admin/people/create`.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“+添加用户”按钮，这将带您到添加用户页面，`admin/people/create`。
- en: For Email address, you can enter a real one if you have it, or a fake one (`@example.com`
    is a good domain to use for fake email addresses and URLs).
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于电子邮件地址，如果您有，可以输入真实的电子邮件地址，或者一个假的（`@example.com`是用于假电子邮件地址和URL的好域名）。
- en: The Username can be anything. Our editor will be *Edie Editor*, so I'll make
    her username `Edie`.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户名可以是任何东西。我们的编辑将是*埃迪编辑*，所以我将她的用户名设置为`Edie`。
- en: Choose something you'll remember for a password. The user can change the password
    once logged in. To get a green bar (strong password) try `Password123`. Enter
    your choice again in the Confirm password field.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个你记得的密码。用户登录后可以更改密码。要获得绿色条（强密码），尝试使用`Password123`。在确认密码字段中再次输入你的选择。
- en: For Status, leave the setting at Active. If you ever want to create a user account
    in advance but not make it immediately active, you would select Blocked.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于状态，保持设置为“活动”。如果您想提前创建用户账户但不想立即激活，请选择“阻止”。
- en: Under Roles, check the box for Editor to give this user that role.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在角色下，勾选“编辑”以赋予此用户该角色。
- en: You'll notice that Roles has Authenticated selected and that it cannot be unselected.
    That is because all users with accounts are authenticated, by definition.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 你会注意到“角色”已选择“认证”，并且不能取消选择。这是因为所有有账户的用户都是按定义认证的。
- en: We're going to leave Notify users of new account unchecked. Normally, you would
    check this so that an email would be sent to the new user, but we do not want
    an email sent in this case.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将不勾选“通知新账户用户”。通常情况下，你会勾选这个选项，以便向新用户发送电子邮件，但在此情况下我们不希望发送电子邮件。
- en: The Picture is nice when there will be something akin to blog articles, where
    the author has a photo, but we won't use one.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当有类似博客文章的内容，作者附有照片时，这幅图片看起来很漂亮，但我们不会使用照片。
- en: Will your content editors want to be contacted via the website? If so, leave
    the next check box for Personal contact form selected.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你的内容编辑员是否希望通过网站联系？如果是，请勾选下一个复选框以选择“个人联系表单”。
- en: The Time zone selection assures that the user sees times displayed based on
    their time zone, rather than the time zone in which the web server is located.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 时区选择确保用户看到基于他们时区显示的时间，而不是位于网站服务器所在时区的时间。
- en: 'Having addressed all the fields, click Create new account. You will stay on
    the Add user page, with a message similar to the following screenshot at the top:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理完所有字段后，点击创建新账户。您将停留在添加用户页面，顶部将显示类似于以下截图的消息：
- en: '![](img/467c8dbe-93de-4900-a122-1d33a6546453.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/467c8dbe-93de-4900-a122-1d33a6546453.png)'
- en: 'When users are allowed to request an account by registering, there are typically
    two ways it can be handled, depending on your site configuration: the registration
    can result in an immediately active account, or the user account will be created
    as Blocked to Inactive, until it is approved.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户被允许通过注册请求账户时，通常有两种处理方式，这取决于您的网站配置：注册可以导致立即激活的账户，或者用户账户将被创建为已阻止到非活动状态，直到它被批准。
- en: User registration is configured at Configuration | People | Account settings
    (`/admin/config/people/accounts`). Learn more at: [https://www.drupal.org/docs/user_guide/en/config-user.html](https://www.drupal.org/docs/user_guide/en/config-user.html).
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 用户注册在配置 | 人员 | 账户设置（`/admin/config/people/accounts`）中进行配置。了解更多信息请访问：[https://www.drupal.org/docs/user_guide/en/config-user.html](https://www.drupal.org/docs/user_guide/en/config-user.html)。
- en: To approve it, you would edit the account from the user list, change the status
    from Blocked to Active, and assign the user whichever roles are needed. The only
    role that will be preselected is Authenticated, just as when we created a user.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 要批准它，您需要从用户列表中编辑账户，将状态从已阻止更改为活动状态，并分配用户所需的任何角色。唯一将预先选择的角色是认证用户，就像我们创建用户时一样。
- en: Summary
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: We've looked at the major facets of managing users, including roles and permissions.
    Ensuring that users have the proper roles and that those roles give them access
    to only the functionality they should have is essential for the security of your
    content and the site.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经探讨了管理用户的主要方面，包括角色和权限。确保用户拥有适当的角色，并且这些角色只授予他们应有的功能访问权限，对于您的内容和网站的安全性至关重要。
- en: 'Now that we have a site, some content types, and an editor with the proper
    permissions for working with content, it''s time to spend some time on the topic
    most central to a Content Management System: the content, and that''s just what
    we''ll do in [Chapter 4](5dc26faf-5b24-463c-9587-e06ec89742a7.xhtml), *Creating
    and Editing Content*.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经拥有了一个网站，一些内容类型，以及具有适当权限处理内容的编辑器，是时候花些时间在内容管理系统最核心的主题上了：内容，这正是我们将在[第4章](5dc26faf-5b24-463c-9587-e06ec89742a7.xhtml)，“创建和编辑内容”中要做的。
