- en: Chapter 10. Running Your Website
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章。运行您的网站
- en: By now, the vast majority of the development for the new site is complete! You
    should also feel confident that, from a development perspective, you can respond
    to whatever demands the site throws at you and work with Drupal with a high degree
    of proficiency. Like all things in the computing world, however, it is never sufficient
    to build something and then leave your creation to run by itself. There is always
    work to be done to ensure that everything runs smoothly.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 到现在为止，新网站的开发工作已经基本完成！你也应该有信心，从开发角度来看，你可以应对网站提出的任何要求，并且能够熟练地与Drupal一起工作。然而，就像计算世界中的所有事物一样，仅仅构建某物然后让创造物自行运行是远远不够的。总有工作要做，以确保一切运行顺畅。
- en: Often, you will find that there are certain jobs that need to be performed every
    now and then that are not specifically related to Drupal, but are intrinsic to
    working with websites in general. These tasks can vary greatly in nature, but
    all those discussed here will be useful at some stage during the life of your
    website, even if you don't need them right now.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，你会发现有些工作需要不时进行，这些工作与Drupal没有直接关系，但与一般网站工作本质上是相关的。这些任务在性质上可能有很大的不同，但这里讨论的所有任务都将在你网站的某个阶段变得有用，即使你现在不需要它们。
- en: One of the problems with presenting a chapter like this is that we can't possibly
    hope to cover each and every nuance of the huge array of different platforms on
    which Drupal can be run. Internet Service Providers (ISPs) offer wildly varying
    packages, which can either be totally bereft of any type of helpful functionality,
    or packed full with all the latest gadgets—most ISPs offer a large variety of
    packages under one roof.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在展示这样一章时，我们不可能希望涵盖Drupal可以运行的庞大平台阵列中的每一个细微差别。互联网服务提供商（ISPs）提供的服务包差异很大，可能完全缺乏任何有用的功能，或者装满了所有最新的小工具——大多数ISPs在同一个屋檐下提供大量不同的服务包。
- en: Because of this, we will look at functionality that is in common use and that,
    in the event you do not have access to the same software, will clearly demonstrate
    the tasks you need to perform so that you can still successfully operate with
    the software you *do have access to*. For example, by using the Apache2Triad package,
    we already have certain useful technologies that we can make use of on the development
    machine, such as phpMyAdmin.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们将查看常用的功能，并在你无法访问相同软件的情况下，清楚地展示你需要执行的任务，以便你仍然可以使用你拥有的软件成功操作。例如，通过使用Apache2Triad包，我们已经在开发机器上拥有某些有用的技术，例如phpMyAdmin。
- en: Note
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: It may be helpful to read through this chapter before selecting a hosting package
    (assuming you haven't already) so that you can get a feel for the type of functionality
    that you will need in the future.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择托管套餐之前（假设您还没有）阅读本章可能会有所帮助，这样您可以了解未来需要的功能类型。
- en: 'There are also a few other web-related activities inherent to Drupal that we
    should take the time to look over quickly. As a result, this chapter will talk
    about:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal还有一些其他与网络相关的活动是固有的，我们应该花时间快速浏览一下。因此，本章将讨论：
- en: Making backups
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 制作备份
- en: Cron and scheduled tasks
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cron和计划任务
- en: Throttling
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 节流
- en: Patching
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 补丁
- en: Website activities—including search engine optimization and user maintenance
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站活动——包括搜索引擎优化和用户维护
- en: Armed with the information presented in this the final chapter, you will be
    a fully equipped Drupal-website administrator. However, the experience you gain
    from running a live website in itself should prove to be far more valuable than
    this humble book. Hopefully, you will find the entire experience richly rewarding
    and share your hard-won knowledge with the rest of the community in the future.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有本最终章节所提供的信息，你将是一名完全装备的Drupal网站管理员。然而，从运营一个真实网站中获得的经验本身应该比这本谦逊的书籍更有价值。希望你能发现整个经历非常有益，并在未来与社区分享你辛苦获得的知识。
- en: We're on the home straight, so let's get on with it.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经接近终点，所以让我们继续前进。
- en: Backups
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 备份
- en: There are plenty of reasons to make backups of both the file system and database.
    As mentioned several times throughout the course of the book, you should back
    up anything that is at risk of being damaged whenever you modify code, or add
    a new module, or even upgrade versions of Drupal. It sounds like a real pain to
    do this because the vast majority of the time, nothing goes wrong with the application.
    However, sooner or later, for some unfathomable reason, if you don't make backups,
    you *will* get stung in precisely the most painful spot.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 备份文件系统和数据库有很多原因。正如本书中多次提到的，每次修改代码、添加新模块或升级 Drupal 版本时，都应该备份任何可能受损的内容。听起来做这件事真的很痛苦，因为绝大多数时候，应用程序都没有问题。然而，迟早，由于某种无法理解的原因，如果你不做备份，你
    *确实* 会在这个最痛苦的地方受到打击。
- en: Most especially, corrupting or breaking a database, which in turn leads to a
    loss of precious data, can be a real pain in the… back end of your application!
    So, while it is fairly easy to back up the files on the file system by simply
    making copies of the directories in question, or indeed copying the entire `drupal`
    folder (whatever you have named it), it is of paramount importance that you learn
    how to back up the database too, because this is not as trivial—it will become
    easy with practice, though.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 尤其是损坏或破坏数据库，这反过来又导致宝贵数据的丢失，可能会在应用程序的后端造成真正的痛苦！所以，虽然通过简单地复制相关目录或确实复制整个 `drupal`
    文件夹（无论你给它取了什么名字）来备份文件系统相对容易，但学习如何备份数据库至关重要，因为这并不简单——虽然随着练习会变得容易。
- en: Before continuing, it is important to have a *strategy* for backing up files,
    folders, and data. It is good idea to back up the entire site at regular intervals,
    as well as backing up the database even more frequently. These backups should
    be clearly marked so that you know when they were made, making it easy to determine
    which one to use in the event of some sort of disaster. You might also consider
    holding these backups away from the main file system, perhaps on a CD, so that
    if something really bad happens, you don't have to rely on your host's disaster-recovery
    policy; you have your own.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，制定一个备份文件、文件夹和数据的 *策略* 非常重要。定期备份整个站点以及更频繁地备份数据库是个好主意。这些备份应该有清晰的标记，以便你知道它们是在何时制作的，这样在发生某种灾难时可以轻松确定使用哪一个。你也可以考虑将这些备份放在主文件系统之外，比如在
    CD 上，这样如果发生真正糟糕的事情，你不必依赖托管商的灾难恢复策略；你拥有自己的备份。
- en: There are two ways of backing up your database (or any part of it) that we will
    consider here. One way is to make use of phpMyAdmin, which comes as part of the
    Apache2Triad package. Let's start with that.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将考虑两种备份数据库（或其任何部分）的方法。一种方法是利用 phpMyAdmin，它是 Apache2Triad 包的一部分。让我们从那开始。
- en: phpMyAdmin
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: phpMyAdmin
- en: phpMyAdmin is an exceptionally popular and commonplace tool for interacting
    with MySQL via the Web. Instead of having to learn how to use the MySQL command-line
    client, phpMyAdmin provides us with a graphical interface, which makes it a lot
    easier to view and maintain databases tables and content. Issuing commands is
    also made easier with the interface for many of the most commonplace data-related
    tasks.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: phpMyAdmin 是一个特别受欢迎且常见的工具，通过 Web 与 MySQL 进行交互。它不需要我们学习如何使用 MySQL 命令行客户端，phpMyAdmin
    为我们提供了一个图形界面，这使得查看和维护数据库表和内容变得容易得多。通过界面执行命令也使得许多常见的数据相关任务变得简单。
- en: 'The following steps can be followed in order to create a backup with phpMyAdmin:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 可以按照以下步骤使用 phpMyAdmin 创建备份：
- en: Log into phpMyAdmin and select the relevant Drupal database.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录 phpMyAdmin 并选择相关的 Drupal 数据库。
- en: Click on the **Export** tab along the top of the page, and set up the options
    as shown here:![phpMyAdmin](img/1800_10_01.jpg)
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击页面顶部的 **导出** 选项卡，并设置选项，如这里所示：![phpMyAdmin](img/1800_10_01.jpg)
- en: In the screenshot, all the tables were selected for backup, all the Structure
    checkboxes were selected in order to prevent us having to manually drop a corrupted
    database, and a useful name (which automatically contains the database name once
    the backup file is generated) was provided—appending the date as shown is a good
    idea as it will help you to keep track of which backup is which.
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在屏幕截图中，选择了所有要备份的表，为了防止我们手动删除损坏的数据库，所有结构复选框都被选中，并提供了一个有用的名称（一旦生成备份文件，它将自动包含数据库名称）——像这样附加日期是个好主意，因为它将帮助你跟踪哪个备份是哪个。
- en: Click **Go** once you are satisfied with your options, and this will then create
    a SQL file (although there are other formats to choose from such as LaTeX or XML)
    from which you can recreate the database if needed.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你对选项满意，点击**Go**，这将创建一个SQL文件（尽管还有其他格式可供选择，如LaTeX或XML），如果需要，你可以从该文件重新创建数据库。
- en: 'Once you have a backup file, it is a simply matter of causing MySQL to run
    its contents in order to recreate the database. In order to do this, click on
    the **SQL** tab at the top of the page, and enter the name of the `.sql` file
    you would like to run against the database, as shown here:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你有了备份文件，只需让MySQL运行其内容即可重新创建数据库。为了做到这一点，点击页面顶部的**SQL**标签，并输入你想要在数据库上运行的`.sql`文件名，如下所示：
- en: '![phpMyAdmin](img/1800_10_02.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![phpMyAdmin](img/1800_10_02.jpg)'
- en: 'That makes life fairly simple, but it isn''t the only way. If you have gotten
    used to using the command line, or simply prefer it, then we have already seen
    how it is done, when we issued the command to load the original database:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得生活相当简单，但并非只有这一种方法。如果你已经习惯了使用命令行，或者只是更喜欢它，那么我们已经看到了如何做到这一点，当我们发出加载原始数据库的命令时：
- en: '[PRE0]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You would simply modify the path and filename to reflect the specifics of your
    new backup file, like so:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 你只需修改路径和文件名以反映你新的备份文件的详细信息，如下所示：
- en: '[PRE1]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Another way of creating backups is by using the `mysqldump` utility from the
    command line.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 创建备份的另一种方法是使用命令行中的`mysqldump`工具。
- en: The mysqldump Utility
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: mysqldump工具
- en: It is probably worthwhile spending some time using this because it provides
    greater flexibility should you ever need to perform anything out of the ordinary.
    I will confess, though, that for most database‑related tasks phpMyAdmin will perform
    admirably. If you don't have access to phpMyAdmin on your hosted site, or if you
    are keen to get to know `mysqldump`, then by all means continue…
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 花些时间使用这个工具可能是值得的，因为它提供了更大的灵活性，以防你将来需要执行任何非同寻常的操作。然而，我必须承认，对于大多数数据库相关任务，phpMyAdmin的表现都非常出色。如果你无法访问托管网站上的phpMyAdmin，或者你热衷于了解`mysqldump`，那么请继续使用它……
- en: 'To create a backup, simply type in something like the following at the command
    line:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个备份，只需在命令行中输入类似以下的内容：
- en: '[PRE2]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This will create a backup file called `drupal_06_11_05.sql` in the current
    directory. You can then ensure that this has worked by viewing the contents of
    the file, which will contain reams and reams of SQL statements. There are plenty
    of different options that you can use to get a variety of different types of backup
    file; you can simply type in:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在当前目录中创建一个名为`drupal_06_11_05.sql`的备份文件。然后你可以通过查看文件内容来确保备份成功，文件将包含大量的SQL语句。你可以使用多种不同的选项来获取不同类型的备份文件；你可以简单地输入：
- en: '[PRE3]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: in order to obtain a list of what's available. `mysqldump` is a powerful and
    flexible tool, and knowing how it works will benefit you in the long run if you
    are going to attempt some more advanced backup options.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获得可用列表。`mysqldump`是一个强大且灵活的工具，了解它是如何工作的，如果你打算尝试一些更高级的备份选项，这将对你长期有益。
- en: To reiterate, it is good practice to back up your database on a regular basis,
    regardless of whether your need to do so for upgrading purposes as doing this
    will protect you from a total loss of data in the event that some sort of disaster
    destroys the database or loses its information.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，定期备份数据库是一个好的做法，无论你是否需要这样做来升级，因为这样做可以在数据库或其信息丢失的情况下防止数据完全丢失。
- en: Cron and Scheduled Tasks
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Cron和计划任务
- en: In order to keep the site running smoothly and keep it up to date, there are
    a variety of chores that need to be performed on a regular basis. For example,
    we saw earlier in the book that the aggregator module needed to be run on a regular
    basis so that it could update all its feeds and so forth. The Drupal developers
    are well aware of all the tasks that need to be handled; so they bundled everything
    up into one handy script—cron.php.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使网站运行顺畅并保持最新，需要定期执行各种任务。例如，我们在本书中较早提到，聚合模块需要定期运行，以便更新所有其源和等等。Drupal开发者非常清楚需要处理的任务；因此，他们将所有内容打包成一个方便的脚本——cron.php。
- en: You need to set the **crontab** or **scheduled task** to execute the `cron.php`
    script, which is housed in the main folder of your Drupal installation, so that
    it can perform all the necessary tasks. The cron script basically searches through
    the site and executes any tasks that apply to modules or other things (like log
    handling) so that they all stay updated.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要设置**crontab**或**计划任务**以执行位于您的Drupal安装主文件夹中的`cron.php` 脚本，以便它可以执行所有必要的任务。cron脚本基本上会搜索整个站点并执行适用于模块或其他事物（如日志处理）的任务，以确保它们都保持更新。
- en: Let's take a look at how to control the crontab, followed by setting up a scheduled
    task for the Windows users among us.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何控制crontab，然后为Windows用户设置计划任务。
- en: The Crontab
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Crontab
- en: If you are not particularly keen to learn how to make use of the crontab on
    your hosted site, then feel free to skip to the section entitled *Poormanscron*
    a little later on in this chapter. It is recommended that you do learn how to
    make use of the crontab regardless, because it will no doubt come in handy someday
    when your Drupal site is not immediately available.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不是特别想学习如何在托管站点上使用crontab，那么您可以自由地跳到本章稍后提到的名为*Poormanscron*的部分。尽管如此，建议您学习如何使用crontab，因为它无疑会在您的Drupal站点不可立即访问时派上用场。
- en: 'All the variables set in the crontab are numerical constants, with the exception
    of the asterisk character, which is a wildcard that allows any value. The ranges
    permitted for each field are as follows:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: crontab中设置的变量都是数值常数，除了星号字符，它是一个通配符，允许任何值。每个字段允许的范围如下：
- en: 'Minutes: 0-59'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分钟：0-59
- en: 'Hours: 0-23'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 小时：0-23
- en: 'Day of month: 1-31'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 月份中的日期：1-31
- en: 'Month: 1-12'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 月份：1-12
- en: 'Weekday: 0-7 (Sunday is either 0 or 7)'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 星期：0-7（星期日是0或7）
- en: 'You can include multiple values for each entry, simply by separating each value
    with a comma. The command you wish to issue can be any shell command, and can
    be used to execute web pages, like the `cronfeed.php` file. Many hosting companies
    will have an interface such as the following one, which allows you to work with
    the crontab easily:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过用逗号分隔每个值来为每个条目包含多个值。您希望发出的命令可以是任何shell命令，并且可以用来执行网页，如`cronfeed.php` 文件。许多托管公司都将有一个如下所示的界面，它允许您轻松地使用crontab：
- en: '![The Crontab](img/1800_10_03.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![Crontab](img/1800_10_03.jpg)'
- en: 'In the final entry you can see (hopefully) that the `cron.php` script is set
    to run at midnight every day using the command:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后的条目中，您可以看到（希望如此）`cron.php` 脚本被设置为每天午夜运行，使用以下命令：
- en: '[PRE4]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: whereas, for example, the first task is set to run every hour (remember to substitute
    your own site's URL in place of the highlighted code in the previous snippet).
    Notice too that the `php` command was not used to execute the cron script as it
    was for the other two scripts—this is because the `cron.php` file needs to be
    accessed as a web page so that certain environment variables are properly set.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，第一个任务被设置为每小时运行一次（记住用您自己的站点URL替换上一个片段中突出显示的代码）。注意，`php` 命令没有用于执行cron脚本，就像用于其他两个脚本一样——这是因为`cron.php`
    文件需要作为网页访问，以便正确设置某些环境变量。
- en: Tip
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Set your cron job to run at regular intervals to ensure that your site is kept
    as up to date as possible! It is recommended that `cron.php` is run several times
    a day.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 将您的cron作业设置为定期运行，以确保您的站点尽可能保持最新！建议每天运行`cron.php` 几次。
- en: Windows Scheduled Tasks
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Windows计划任务
- en: 'On the off chance you are using a Windows-based server, or simply wish to enable
    scheduled tasks on your Windows PC while you are developing, you can make use
    of the **Scheduled Task** wizard. The following instructions, taken from the Drupal
    site, explain exactly how this is done:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在使用基于Windows的服务器，或者希望在开发过程中在Windows PC上启用计划任务，您可以使用**计划任务向导**。以下说明来自Drupal网站，详细解释了如何完成此操作：
- en: Go to **Start | Programs | Accessories | System Tools | Scheduled Tasks**.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往**开始 | 程序 |附件 | 系统工具 | 计划任务**。
- en: Double-click **Add Scheduled Task**.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击**添加计划任务**。
- en: The **Scheduled Task** wizard will appear. Click **Next**.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**计划任务向导**将出现。点击**下一步**。'
- en: Select the program to run. Choose your **browser** from the list (for example,
    Internet Explorer or Firefox). Click **Next**.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要运行的程序。从列表中选择您的**浏览器**（例如，Internet Explorer或Firefox）。点击**下一步**。
- en: Give the task a **Name**, such as **Drupal Cron Job**, and choose the **Frequency**
    with which to perform the task (for example, **Daily)**. Click **Next**.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给任务一个**名称**，例如**Drupal计划任务**，并选择执行任务的**频率**（例如，**每日**）。点击**下一步**。
- en: Choose specific **date and time options** (this step will vary, depending on
    the option selected in the previous step). When finished, click **Next**.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择具体的**日期和时间选项**（这一步将根据前一步选择的选项而变化）。完成后点击**下一步**。
- en: Enter your **password** if prompted. Change the **username** if required (for
    example, if you'd like the task to run under a user with few privileges for security
    reasons). Click **Next**.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，输入你的**密码**。如果需要（例如，如果你希望任务在具有较少权限的用户下运行以出于安全原因），更改**用户名**。点击**下一步**。
- en: On the final page, select the checkbox **Open advanced properties for this task
    when I click Finish** and click **Finish**.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在最后一页，选择复选框**当我点击完成时为这个任务打开高级属性**，然后点击**完成**。
- en: Go to the task's setting page either by checking the checkbox at the end of
    the last step, or by double-clicking on the task.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以通过勾选最后一步末尾的复选框或双击任务来进入任务的设置页面。
- en: In the **Run** box, after the text that is there now (for example, **C:\PROGRA~1\MOZILL~1\firefox.exe)**,
    enter a space and then type the address of your website's `cron.php` page in double
    quotation marks (for example, **C:\PROGRA~1\MOZILL~1\**firefox.exe **"http://localhost/drupal/cron.php")**
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**运行**框中，在现有的文本之后（例如，**C:\PROGRA~1\MOZILL~1\firefox.exe**），输入一个空格，然后使用双引号输入你网站`cron.php`页面的地址（例如，**C:\PROGRA~1\MOZILL~1\**firefox.exe
    **"http://localhost/drupal/cron.php"**）。
- en: To set a frequency higher than **Daily** (for example, **Hourly)**, click the
    **Schedule** tab, and then click **Advanced**. Here you can set options such as
    **Repeat** task, every **1 hour** for **23 hours**. Click **OK** when finished.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要设置高于**每日**（例如，**每小时**）的频率，点击**计划**选项卡，然后点击**高级**。在这里，你可以设置诸如**重复**任务，每**1小时**重复**23小时**等选项。完成后点击**确定**。
- en: Change the **start time** on the task to **one minute from the current time**.
    This will allow you to test the task and make sure that it is working.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将任务的**开始时间**设置为**从当前时间起一分钟**。这将允许你测试任务并确保它正在运行。
- en: When all settings have been configured to your liking, click **Apply** and **OK**
    (note that you may be prompted for your password).
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当所有设置都按照你的喜好配置好后，点击**应用**和**确定**（注意，你可能需要输入密码）。
- en: If you find that you are unable to set a cron job to run on your host site once
    it is live, then you can use a neat trick and set your Windows scheduled task
    to access the `cron.php` script directly from your home PC instead using the instructions
    just listed. This means that the cron script is executed, depending on your settings,
    as often as your PC is online and able to access web pages.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你发现你无法在你的主机网站上设置cron作业在网站上线后运行，那么你可以使用一个巧妙的技巧，并按照以下说明将你的Windows计划任务设置为直接从你的家用PC访问`cron.php`脚本，而不是使用上述指令。这意味着cron脚本将根据你的设置，在PC在线且能够访问网页时执行，频率取决于你的设置。
- en: This last point highlights how easy Drupal has made things when it comes to
    performing necessary tasks on a regular basis. All that's required is a browser
    application of some sort to access the `cron.php` script, and any tasks that need
    to be run by the Drupal site will be run. You could access this script from your
    own browser, or set your own PC to do it whenever you start it up, or any other
    number of things.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 这最后一点突出了Drupal在执行定期必要任务方面使事情变得多么简单。你所需要的只是一个浏览器应用程序来访问`cron.php`脚本，Drupal网站需要运行的任何任务都将被执行。你可以从自己的浏览器访问这个脚本，或者设置你的PC在启动时执行它，或者任何其他数量的事情。
- en: Poormanscron
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Poormanscron
- en: It should come as no surprise that there is a contribution that can make life
    even easier. **Poormanscron** is a contributed module that does away with the
    need to set the crontab or a scheduled task entirely.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 毫不奇怪，有一个贡献可以让生活变得更加简单。**Poormanscron**是一个贡献模块，它消除了设置crontab或计划任务的需求。
- en: It works by checking whether the cron script has been run in the last unit of
    time (whatever you have set this to be; by default it is every hour) each time
    a web page is browsed. If it finds that there is a cron run due, it will cause
    this to happen after the page has been served (so that the user does not have
    to wait for the tasks to complete before viewing the page).
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 它的工作原理是在每次浏览网页时检查cron脚本是否在上一个时间单位（无论你设置为多久；默认为每小时）内运行过。如果发现有一个cron任务即将执行，它将在页面被服务后触发这个任务（这样用户在查看页面之前不需要等待任务完成）。
- en: 'Basically, Poormanscron means that you are freed from having to learn anything
    about cron jobs. This is convenient, but is also a double edged sword! It is quite
    likely that you will need to make use of cron jobs for other tasks, and if you
    use Poormanscron for Drupal, then all you are doing is postponing the time when
    you have to sit down and learn how to use the crontab or scheduled tasks. At any
    rate, you have seen examples of how to use all the options; so all that remains
    is for us to take a look at how to work with Poormanscron:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 通俗来说，Poormanscron意味着您无需学习任何关于cron作业的知识。这很方便，但也是一把双刃剑！很可能您还需要使用cron作业来完成其他任务，如果您使用Poormanscron来管理Drupal，那么您实际上只是在推迟必须坐下来学习如何使用crontab或计划任务的时间。无论如何，您已经看到了如何使用所有选项的示例；所以剩下的就是让我们看看如何与Poormanscron一起工作：
- en: Download the Poormanscron module from the Drupal website.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Drupal网站下载Poormanscron模块。
- en: Extract the files to your `modules` folder.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将文件提取到您的`modules`文件夹中。
- en: Enable the module in the **modules** section under **administer**.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**administer**下的**modules**部分启用该模块。
- en: That's all there is to it—provided your site has regular use, your cron tasks
    will run smoothly and you need not worry about accessing the `cron.php` script
    manually or setting the crontab.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是全部内容——只要您的网站有规律的使用，cron任务将顺利运行，您无需担心手动访问`cron.php`脚本或设置crontab。
- en: 'After some time, however, you might get a bit sick of seeing logged cron messages
    all the time. If you want to administer the Poormanscron module, then head on
    over to **poormanscron** under **settings** in the administration area, to bring
    up the following page:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，过了一段时间后，您可能会对不断看到记录的cron消息感到厌烦。如果您想管理Poormanscron模块，那么请转到管理区域中的**settings**下的**poormanscron**，以显示以下页面：
- en: '![Poormanscron](img/1800_10_04.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![Poormanscron](img/1800_10_04.jpg)'
- en: As you can see from this, there are a number of options available to control
    how often cron jobs should be run, how long to wait before retrying after an error,
    and what your logging policy should be. In this instance logging is disabled because
    there is nothing that urgently requires manual verification on the demo site (for
    the moment). If you added new software and had to confirm that it was being properly
    executed by the `cron.php` script, then you might consider switching logging back
    on.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，有多个选项可供控制cron作业应该多久运行一次，错误后应该等待多长时间再重试，以及您的日志策略应该是什么。在这种情况下，日志已被禁用，因为目前没有紧急需要手动验证的内容（暂且如此）。如果您添加了新的软件并需要确认它是否被`cron.php`脚本正确执行，那么您可能需要考虑重新启用日志。
- en: Throttling
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 节流
- en: Every once in a while someone makes a site that becomes wildly popular. Having
    loads of people visiting a site can put some serious strain on the server's resources
    and cause all sorts of problems as the congestion builds. Even if a site is not
    exceedingly popular, it is possible that it may come under a **denial of service**
    attack from somewhere.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候，有人会创建一个网站，这个网站会变得非常受欢迎。大量的人访问一个网站可能会对服务器的资源造成严重的压力，并在拥堵时引发各种问题。即使一个网站并不特别受欢迎，它也可能遭到来自某处的**拒绝服务**攻击。
- en: 'Before even thinking about setting up the throttling mechanism on a site, it
    is important that you know what resources are at your disposal:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在考虑在网站上设置节流机制之前，了解您可用的资源非常重要：
- en: Note
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you have already ensured that there are facilities in place to handle a *large
    amount of traffic*, then you have made the throttle module redundant in effect.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经确保有设施来处理**大量流量**，那么实际上您已经使节流模块变得多余。
- en: If you are unsure about what resources are available on your site, check with
    the hosting service and find out what they are giving you.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不确定您的网站上有什么资源可用，请咨询托管服务并了解他们提供了什么。
- en: 'Assuming you anticipate there will be a need for some sort of congestion control,
    a good way to deal with surges in traffic or bandwidth usage is to enable the
    throttling mechanism that comes with Drupal, in the form of the aforementioned
    throttle module. This is easy enough to accomplish by enabling it in the **modules**
    section of the administration tool. Once that is done, you can configure how the
    module acts on the site in general by navigating to the **throttle** page under
    settings in the administration area. This will bring up the following page:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你预计会有某种拥塞控制的需求，处理流量或带宽使用激增的一个好方法是启用Drupal附带的自带节流机制，即上述节流模块。通过在管理工具的**模块**部分启用它，这很容易实现。一旦完成，你可以通过导航到管理区域设置下的**节流**页面来配置模块在网站上的总体行为。这将显示以下页面：
- en: '![Throttling](img/1800_10_05.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![节流](img/1800_10_05.jpg)'
- en: This page deals with congestion from the point of view of how many people are
    using the site. In this case, Drupal is instructed to engage the auto-throttle
    on anonymous users provided there are **300** or more online, and the same for
    authenticated users provided there are more than **100** of them online. The final
    option deals with actually limiting the amount of work the throttle mechanism
    has to do so that it itself does not become a resource hog.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 此页面从使用该网站的人数的角度处理拥塞。在这种情况下，Drupal被指示在有**300**人或更多在线匿名用户时启用自动节流，对于有超过**100**个在线认证用户的情况也是如此。最后一个选项涉及实际限制节流机制必须完成的工作量，以便它本身不会成为资源消耗者。
- en: '*But what if you know that it is a specific module that is consuming more than
    its fair share of resources?* In this case, you would simply enable the auto-throttle
    for that specific module in the **modules** section of the administration tool,
    as shown here:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '*但如果你知道是某个特定模块消耗了超过其应得份额的资源呢？*在这种情况下，你只需在管理工具的**模块**部分为该特定模块启用自动节流，如图所示：'
- en: '![Throttling](img/1800_10_06.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![节流](img/1800_10_06.jpg)'
- en: This can be done on a block-by-block basis as well, by navigating over to the
    **blocks** section and doing the same thing. *But what does throttling blocks
    ultimately mean?* Basically, if your server is under strain and you have set a
    block to be automatically throttled, it will be disabled and not contribute to
    the load on the server.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 这也可以按块块进行，通过导航到**块**部分并执行相同操作。*但节流块最终意味着什么？*基本上，如果你的服务器承受压力，并且你设置了一个自动节流的块，它将被禁用，不会对服务器的负载做出贡献。
- en: 'You can take a look at your log message to determine what the throttle module
    is up to at any given time. For example, I set the throttle mechanism to engage
    after only one user visited the site. The following log message was then created:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过查看日志消息来确定在任何给定时间节流模块正在做什么。例如，我将节流机制设置为仅在一位用户访问网站后启动。然后创建了以下日志消息：
- en: '![Throttling](img/1800_10_07.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![节流](img/1800_10_07.jpg)'
- en: It's not much, but at least it makes it clear when the throttle is on. Once
    the load has dropped sufficiently, a corresponding message will be sent stating
    that the throttle can be disengaged and things can return to normal.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 这并不多，但至少它清楚地表明了何时启用节流。一旦负载足够降低，将发送一条相应的消息，表明可以解除节流，事情可以恢复正常。
- en: 'While this next point is not directly related to throttling, it is important
    that you gain some idea about the performance of your site and what you can do
    to ensure it is good. Take a look at [http://drupal.org/node/2601](http://drupal.org/node/2601)
    to learn about how to:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然以下这一点与节流没有直接关系，但了解你网站的性能以及你可以做什么来确保它是好的是很重要的。查看[http://drupal.org/node/2601](http://drupal.org/node/2601)了解如何：
- en: Analyze your site's performance
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析你网站的性能
- en: Reduce the load on your servers by preventing access to certain parts of your
    site for web crawlers of various kinds, using the `robot.txt` file
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用`robot.txt`文件阻止各种类型的网络爬虫访问你网站的某些部分，以减少你服务器的负载
- en: Learn about Apache performance and PHP and MySQL tuning
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解Apache性能以及PHP和MySQL调优
- en: Any knowledge you gain now can be put to good use preemptively to guard against
    poor performance which may discourage users in the future—even though it is unlikely
    that you will notice any performance-related issues early on.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在获得的知识可以预先用来防止可能在未来阻碍用户的性能问题——即使你不太可能在早期注意到任何与性能相关的问题。
- en: Patching
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 补丁
- en: From time to time, it becomes clear that there is a bug in a module or some
    other aspect of Drupal. This is especially a concern whenever there is a major
    overhaul of the software and everyone is working frantically to keep up—since
    Drupal is only just moving to the new 4.7 version at the time of writing, this
    is more pertinent now than at any other time. When this happens, invariably people
    head to the forums to find out if anyone else has had the same problem. Often,
    as is the case with a bug, other people have also been stricken with the same
    problem and it may be that someone has been able to fix the problem.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 不时地，人们会清楚地发现Drupal模块或其他方面存在一个bug。这在软件进行重大改版时尤其令人担忧，因为每个人都疯狂地工作以保持进度——鉴于Drupal在撰写本文时刚刚升级到4.7版本，这一点现在比以往任何时候都更加重要。当这种情况发生时，人们通常会去论坛看看是否有人遇到过相同的问题。通常情况下，就像bug一样，其他人也可能遇到了同样的问题，也许有人已经能够解决这个问题。
- en: 'If some kind soul has sorted out the problem on their machine, then it is most
    likely that they will submit a **patch** file to the forum so that it can be used
    by everyone else in order to fix their code. At this point it is important to
    realize several things:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有人在自己的机器上解决了这个问题，那么他们很可能会提交一个**补丁**文件到论坛，以便其他人可以使用它来修复自己的代码。在这个时候，重要的是要意识到以下几点：
- en: If you don't want to have any problems, ensure you only download well-tested
    and stable software for use on your site. Often CVS versions of a module still
    contain bugs or errors, and so it may be better to wait until a module is *released
    and tested for your specific version of Drupal*.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您不想遇到任何问题，请确保您只下载经过良好测试和稳定的软件用于您的网站。通常，模块的CVS版本仍然包含bug或错误，因此最好等到模块发布并针对您的Drupal特定版本进行测试后再使用。
- en: Patch files are not specific to Drupal. They are simply files that explain a
    list of lines of code that should be added or removed in such a way that it is
    possible for a **patch utility** to implement those changes without the need for
    human intervention.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 补丁文件并非特定于Drupal。它们只是解释了一组应该添加或删除的代码行的文件，这样补丁工具就可以在不需人工干预的情况下实施这些更改。
- en: Patch utilities are not native to Windows machines—they come with Unix-based
    operating systems such as Linux.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 补丁工具不是Windows机器的本地工具——它们与基于Unix的操作系统（如Linux）一起提供。
- en: Linux users will need to take some time to learn how to make use of the patch
    utility if they find they need to implement it. Windows users need to go a step
    further and download a patch utility first. Luckily there is a download of common
    Unix utilities available at [http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/).
    This contains the patch utility among other things, and you will need to extract
    the content to a folder—the `patch.exe` file will be within the `usr\local\wbin`
    folder in whichever directory you extracted the files to.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 如果Linux用户发现需要实施补丁，他们需要花一些时间学习如何使用补丁工具。Windows用户需要更进一步，首先下载一个补丁工具。幸运的是，[http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)
    提供了常见的Unix工具的下载。这其中包括补丁工具，您需要将内容提取到一个文件夹中——`patch.exe` 文件将位于您提取文件的目录中的 `usr\local\wbin`
    文件夹内。
- en: 'The `patch.exe` file can now be used just like any other command-line utility.
    We have already used the `mysql` command utility several times, so you have some
    experience with this. The general syntax when using patch is as follows:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '`patch.exe` 文件现在可以像任何其他命令行工具一样使用。我们已经多次使用过 `mysql` 命令工具，所以您对此有一些经验。使用补丁的一般语法如下：'
- en: '[PRE5]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In this case the `originalfile` is the file to which the changes should be
    applied, and `patchfile` is clearly the patch file that contains the changes to
    be implemented. There are a host of options that you can look through, so check
    out the man page for the patch before working with it. You can find one at [http://www.hmug.org/man/1/patch.php](http://www.hmug.org/man/1/patch.php).
    A typical command might look something like this (of course, you need to ensure
    that you enter the correct file paths to your files if you are not working in
    one directory):'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，`originalfile` 是应该应用更改的文件，而 `patchfile` 显然是包含要实施更改的补丁文件。有许多选项可以查看，因此在处理它之前请查看补丁的man页面。您可以在[http://www.hmug.org/man/1/patch.php](http://www.hmug.org/man/1/patch.php)找到它。一个典型的命令可能看起来像这样（当然，如果您不在一个目录中工作，您需要确保输入正确的文件路径）：
- en: '[PRE6]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Now there is an important path-related issue that needs to be resolved here.
    If you would like to use `patch` from anywhere on the command line, you need to
    add its file path to your **Path** system variable—otherwise, you would have to
    navigate to the `usr\local\wbin` folder on the command line before using `patch`
    each time (you could alternatively add `patch.exe` to a folder already in your
    **Path**, but it is probably better to keep everything separate).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 现在有一个重要的路径相关的问题需要解决。如果你想在命令行的任何位置使用`patch`，你需要将其文件路径添加到你的**Path**系统变量中——否则，你每次使用`patch`之前都必须在命令行中导航到`usr\local\wbin`文件夹（你也可以选择将`patch.exe`添加到已经存在于你的**Path**中的文件夹，但可能更好的做法是将所有内容分开）。
- en: 'To do this:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要这样做：
- en: Open up the **Control Panel** and click on **System**.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**控制面板**并点击**系统**。
- en: Click on the **Advanced** tab and click on **Environment Variables**
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**高级**选项卡并点击**环境变量**
- en: Add the path to the `patch.exe` file into the **Path** environment variable
    in the **System variables** section as shown here:![Patching](img/1800_10_08.jpg)
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`patch.exe`文件的路径添加到**系统变量**部分的**Path**环境变量中，如图所示：![修补](img/1800_10_08.jpg)
- en: Once you are done, click **OK**.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，点击**确定**。
- en: Note that each path set in the **Path** environment variable is separated by
    a semi-colon. You must ensure that you do not change anything other than adding
    the single path; otherwise you may well break other important applications.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，**Path**环境变量中设置的每个路径都是由分号分隔的。你必须确保除了添加单个路径之外，不要更改任何内容；否则，你可能会破坏其他重要的应用程序。
- en: With that done, you now have access to the patch utility from anywhere on the
    command line. The important question now becomes whether or not to use a patch
    file. *How do you know whether you need a patch?* The answer to this really lies
    in searching Drupal for an answer to any given problem you might have—often there
    are patches submitted on the module's download page, so make sure you search through
    this as well as look through the forums for more info.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些操作后，你现在可以从命令行的任何位置访问补丁实用程序。现在的重要问题变成了是否使用补丁文件。*你怎么知道你需要补丁呢？*这个答案实际上在于在Drupal中搜索任何可能遇到的问题的答案——通常在模块的下载页面上提交了补丁，所以请确保你也搜索了这个页面，并浏览论坛以获取更多信息。
- en: 'Finally, just because a patch has been made available does not necessarily
    mean that it will fix the problem. Often, you will find that patches themselves
    create other problems. For example, viewing the issues page for the Flexinode
    module shows the following:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，即使已经提供了补丁，也不一定意味着它将修复问题。通常，你会发现补丁本身可能会创建其他问题。例如，查看Flexinode模块的问题页面会显示以下内容：
- en: '![Patching](img/1800_10_09.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![修补](img/1800_10_09.jpg)'
- en: 'At the time of writing, there were several patches available for several different
    things. Depending on what you needed done, you would:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，有几个补丁可用于解决几个不同的问题。根据你需要完成的工作，你会：
- en: Find the relevant patch file.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到相关的补丁文件。
- en: Download it to your machine.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载到您的机器上。
- en: Use the patch utility to implement the patch.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用补丁实用程序实施补丁。
- en: Attempt to use the updated code.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试使用更新的代码。
- en: Make sure that it is in fact a patch file you are downloading and not an entire
    file that is intended as a replacement. Patch files will more often that not end
    with a `.patch` extension. As mentioned, the best way to avoid problems is to
    only use code that has been proven to be reliable, failing which, it is more than
    likely you will need to practice implementing patches—enjoy!
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你下载的是补丁文件，而不是作为替代的整个文件。补丁文件通常以`.patch`扩展名结尾。如前所述，避免问题的最佳方法是只使用经过验证的可靠代码，否则，你很可能需要练习实施补丁——享受这个过程吧！
- en: Website Activities
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网站活动
- en: Once you have developed your site and have it up and running on the live servers,
    you will find that your ISP probably offers a fair amount of toys for you to play
    around with. Some of these can be very useful for the budding website administrator.
    *But what could we possibly need, now that the entire site has been built?*
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你开发了你的网站，并且它在实时服务器上运行，你会发现你的ISP可能为你提供相当多的玩具来玩耍。其中一些对于初学的网站管理员非常有用。*但是，现在整个网站都建好了，我们可能还需要什么呢？*
- en: There are plenty of different tasks that still lie ahead of you. For example,
    are you sure that malicious people out there can't hotlink to your site and reduce
    your bandwidth? *What is hotlinking? What is bandwidth?* These questions constitute
    only a very small part of the types of concerns that must take focus once development
    is completed. I have to admit, that while the subject of the book was to *build
    a site*, that task is only one side of the coin!
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 您面前还有许多不同的任务。例如，您确定外面那些恶意的人不能通过热链接到您的网站并减少您的带宽吗？*什么是热链接？什么是带宽？*这些问题只是开发完成后必须关注的关注点类型中的一小部分。我必须承认，虽然这本书的主题是*建立网站*，但这只是硬币的一面！
- en: 'In the case of the demo site, the following administration panel is provided
    by the hosting service provider:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在演示网站的情况下，以下管理面板由托管服务提供商提供：
- en: '![Website Activities](img/1800_10_10.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![网站活动](img/1800_10_10.jpg)'
- en: Obviously, there are a lot of toys to play with here and it is recommended that
    you spend some time finding out what is available for you to use and how to use
    it. Knowing what you have available is very important because it means you are
    better able to plan *how you work*. For example, the demo site's hosts offer an
    automated **Search Engine submit** facility that allows the new website to be
    submitted for indexing to *all the major search engines—much* better than simply
    waiting around for the site to begin appearing on them.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，这里有很多玩具可以玩，建议您花些时间了解您可以使用什么以及如何使用它们。了解您有什么可用非常重要，因为这意味着您能更好地规划*您的工作方式*。例如，演示网站的托管商提供了一种自动化的**搜索引擎提交**功能，允许新网站提交给所有主要搜索引擎进行索引——这比简单地等待网站开始出现在它们上面要好得多。
- en: Another important thing to note here is that most hosting services will offer
    a full array of statistics for your website. Things like where people have come
    from, how many accessed the site, which pages are being accessed, and so on. Drupal
    comes with modules that do pretty much the same thing, so check to see whether
    the site's native statistics are sufficient or whether you need to consider installing
    a new module—something like the **GraphStat, Tracker, Watchdog**, or **Recorder**
    modules may be more what you have in mind.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里需要注意的另一件重要的事情是，大多数托管服务都会为您的网站提供一系列完整的统计数据。例如，人们来自哪里，有多少人访问了网站，访问了哪些页面等等。Drupal自带了一些模块，可以做到类似的事情，所以请检查网站的原生统计是否足够，或者您是否需要考虑安装一个新的模块——例如**GraphStat、Tracker、Watchdog**或**Recorder**模块可能更符合您的想法。
- en: 'Since it is possible you have an entirely different set of options available
    on your hosted site, we won''t discuss this any further here, but there are still
    a couple of other matters that warrant attention. Let''s begin with one of the
    most commonly requested: **Search Engine Optimization**, or **SEO**.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 由于您在托管网站上可能有完全不同的选项集可用，我们在这里不再进一步讨论这个问题，但还有一些其他问题值得注意。让我们从最常请求的一个开始：**搜索引擎优化**，或**SEO**。
- en: Search Engine Optimization
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 搜索引擎优化
- en: One of the most common goals for a website is to appear high up on the big search
    engine rankings. As you should know, having a good ranking increases the chances
    of potential users finding your site among the mass of other sites. *So what is
    it that you can do to make your site rank as highly as possible without actually
    having to pay anyone to do it for you?*
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一个网站来说，最常见的目标之一是出现在大型搜索引擎的高排名中。正如您所知，良好的排名增加了潜在用户在众多网站中找到您的网站的机会。*那么，您能做些什么来使您的网站尽可能高地排名，而不必真的付钱让别人为您做这件事呢？*
- en: 'There is no straight answer to this, unfortunately, and many people will give
    you just as many different answers. However, there is a core set of tasks you
    can take up that are known to help—they might vary in importance, but it is probably
    worth performing all of them. The following table highlights the most important
    optimizations or tasks, which you should consider performing (where possible):'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 很遗憾，这个问题没有直接的答案，很多人会给你同样多的不同答案。然而，有一组核心任务你可以承担，这些任务已知有助于提高排名——它们的重要性可能有所不同，但执行所有这些任务可能值得。以下表格突出了最重要的优化或任务，您应该考虑执行（如果可能的话）：
- en: '| Optimization | Explanation |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '| 优化 | 说明 |'
- en: '| --- | --- |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Write web-enhanced copy | IMPORTANT: Think about how your target users would
    find your site. *What type of words would they use to find a site like yours?*
    Once you have come up with a list of key words and phrases, ensure that the writing
    on your site makes use of these phrases whenever possible.If you are using Google
    AdWords, then you can check the popularity of various search terms yourself—simply
    put them forward as potential target keywords and check on their stats, which
    Google provides before they are added.For example, if you had a site that deals
    with mobile gadgets, and you wanted to make the phrase **cellular phone** a term
    that you rank highly on, then instead of writing something like:**This device
    can be used to call other people**, you should write:**This G1 super cellular
    phone, can call any other cellular phone from wherever you are**.Admittedly, you
    cannot control the content of other people''s comments and pages, but this would
    still apply to any and all standard pages you write—such as the *introduction*
    page, *about us*, or *FAQ*, or even your own personal blog. |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| 编写增强网页的副本 | 重要提示：考虑你的目标用户会如何找到你的网站。*他们会使用什么类型的词语来找到像你这样的网站？* 一旦你列出了一系列关键词和短语，请确保你的网站在可能的情况下使用这些短语。如果你使用谷歌AdWords，那么你可以自己检查各种搜索术语的流行度——只需将它们作为潜在的目标关键词提出，并检查它们的统计数据，这是在它们被添加之前谷歌提供的。例如，如果你有一个处理移动设备的网站，并且你希望将短语**手机**作为一个你希望排名很高的术语，那么你应该这样写：**这款G1超级手机，无论你在哪里，都可以拨打任何其他手机**。诚然，你无法控制他人的评论和页面内容，但这一点仍然适用于你写的任何标准页面——例如，*简介*页面、*关于我们*、*常见问题解答*，甚至是你自己的个人博客。
    |'
- en: '| Use meaningful file names | While this is not as important as the first point,
    it certainly will help to have everything named meaningfully, because search engines
    do look at file names. Instead of naming a page `19`, you should name it something
    like `awesome_webpage.html`. Don''t go overboard on this because it is not too
    important.Look through the modules available with help for renaming files if this
    appeals to you—something like **Node (key)words** should do the trick. |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| 使用有意义的文件名 | 虽然这一点不如第一个要点重要，但确实，拥有有意义的文件名会大有裨益，因为搜索引擎确实会查看文件名。不要将页面命名为`19`，而应该命名为类似`awesome_webpage.html`这样的名称。不过，也不要过分追求这一点，因为它并不是特别重要。如果你对此感兴趣，可以查看带有重命名文件帮助的可用模块——例如，**关键词（key）**应该能解决问题。
    |'
- en: '| Use meaningful anchor text | IMPORTANT: Search engines, in particular Google,
    place a large amount of emphasis on the anchor text used in links. As a result,
    make sure all your links have meaningful text associated with them. For example,
    you would rewrite the following sentence:`Donate to the Wildlife community <a
    href ="<yourlink>">here</a>`.to:`Donate to the <a href ="<yourlink>">Wildlife
    community</a> here`.The reason for this is that the word **here** is not particularly
    meaningful to a search engine, even though humans can easily make the connection.
    For the sake of your rankings, simply move the link to the key phrase **Wildlife
    community** to place more emphasis on it for the search engine. |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| 使用有意义的锚文本 | 重要提示：搜索引擎，尤其是谷歌，非常重视链接中使用的锚文本。因此，请确保所有链接都与有意义的文本相关联。例如，你会将以下句子重写为：`Donate
    to the Wildlife community <a href ="<yourlink>">here</a>`为：`Donate to the <a href
    ="<yourlink>">Wildlife community</a> here`。这样做的原因是，尽管人类可以轻松地建立联系，但单词**这里**对搜索引擎来说并不特别有意义。为了你的排名，简单地将链接移动到关键词**野生动物社区**，以便在搜索引擎上对其给予更多重视。
    |'
- en: '| Write meaningful metatags | As many people will tell you, metatags have become
    less and less important as time goes by. However, they are still useful, and you
    should at least go to the effort of filling them out properly. The two metatags
    that you should consider making use of are the `keyword` and `description` tags.
    For example, the following shows a possible tag:`<meta name="keywords" content="CWC
    wildlife conservation biosphere">`Metatags have been the subject of some abuse,
    and you should view the W3C consortium''s guidelines for their usage: `http://www.w3.org`.In
    order to make these changes, you would have to work with your theme—most likely
    the `page.tpl` file, or whatever is its equivalent! |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| 编写有意义的元标签 | 正如许多人会告诉你的那样，随着时间的推移，元标签的重要性越来越低。然而，它们仍然是有用的，你至少应该努力正确填写它们。你应该考虑使用的两个元标签是`keyword`和`description`标签。例如，以下是一个可能的标签示例:`<meta
    name="keywords" content="CWC wildlife conservation biosphere">`元标签已经成为一些滥用的对象，你应该查看W3C联盟关于它们使用的指南：`http://www.w3.org`。为了进行这些更改，你将不得不与你的主题合作——很可能是`page.tpl`文件，或者它的等效文件！|'
- en: '| Manage your links | IMPORTANT: A high level of importance is placed on the
    perceived popularity of a website. Search engines can judge the popularity of
    a website by looking at how many links there are to the site, and how popular
    the sites that link to it themselves are. For this reason, you should ensure that
    you link to and link from only sites that you feel are suitable partners.Effectively,
    you should search for as many relevant link pages as possible, or actually speak
    to the relevant sites to determine whether you can provide mutual links. The more
    links you have from popular sites, the better your ranking will be. You can also
    try to get one-way links to your site—these are also rated highly by search engines.
    |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 管理你的链接 | 重要：网站的可感知知名度被赋予了很高的重视。搜索引擎可以通过查看有多少链接指向该网站以及链接到该网站的网站有多受欢迎来判断网站的知名度。因此，你应该确保你只链接到和从你认为合适的合作伙伴网站链接。实际上，你应该尽可能多地搜索相关链接页面，或者实际上与相关网站交谈，以确定你是否可以提供互惠链接。来自知名网站的链接越多，你的排名就越好。你还可以尝试获取指向你网站的单向链接——这些也被搜索引擎高度评价。|'
- en: '| Write meaningful `alt` tags for images | Search engines don''t see pictures
    like humans do, so there is nothing you can do about images… *or is there?* Instead
    of naming your images `02_03.jpg`, you might consider giving them names like `cruel_hunter.jpg`.
    Don''t stop there either. Instead of adding an image like this:`<img src="img/cruel_hunter.jpg">`write
    it like this:`<img src="img/cruel_hunter.jpg" alt="Hunter making his kill ">`
    |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| 为图像编写有意义的`alt`标签 | 搜索引擎不像人类那样看待图片，所以你无法对图片做任何事情……*或者有吗？*与其将你的图片命名为`02_03.jpg`，你可能会考虑给它们起名如`cruel_hunter.jpg`。也不要就此止步。与其添加这样的图片:`<img
    src="img/cruel_hunter.jpg">`，你应该这样写:`<img src="img/cruel_hunter.jpg" alt="猎人正在猎杀">`|'
- en: '| Submit your site to search engines and online directories | Make sure your
    site is listed wherever possible. Most hosting packages provide an automated SE-submission
    facility, which will automatically forward your site to search engines for indexing.
    Otherwise, look for other SE web page submission tools, or search out your own
    lists and directories to become part of. |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| 将你的网站提交给搜索引擎和在线目录 | 确保你的网站尽可能被列出。大多数托管套餐都提供自动SE提交功能，这将自动将你的网站转发给搜索引擎进行索引。否则，寻找其他SE网页提交工具，或者寻找你自己的列表和目录以成为其中一员。|'
- en: '| Read up on lists, forums, and online tutorials | There is a lot of helpful
    information out there. Make sure you do your own research and come up with an
    SEO policy that is right for you. |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 阅读有关列表、论坛和在线教程的内容 | 这里有很多有用的信息。确保你进行自己的研究，并制定出适合你的SEO策略。|'
- en: You will find that if you are prepared to put in the time to develop your links
    and constantly upgrade your site, you will eventually recoup the benefits that
    accrue over time. However, don't expect everything to happen overnight—gaining
    popularity can be a tedious process!
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 你会发现，如果你愿意投入时间来开发你的链接并不断升级你的网站，你最终会回收随着时间的推移而积累的收益。然而，不要期望一切都会一夜之间发生——获得知名度可能是一个繁琐的过程！
- en: Maintaining Users
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 维护用户
- en: It is quite likely that while some people register with the full intention of
    making regular use of your site, they will move on and their account remains hanging
    around without actually doing anything. It might be prudent to add the **User
    Maintenance** module early on to keep track of how and whether your users are
    active, so that you can remove those who don't meet certain criteria.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能有些人注册时本意是定期使用您的网站，但他们可能会继续前进，而他们的账户却悬挂在那里，实际上并没有做什么。在早期添加**用户维护**模块可能是明智的，以便跟踪用户的活动情况，以及他们是否满足某些标准，这样您就可以移除那些不符合标准的人。
- en: 'Go ahead and download the module off the site. It requires a bit of work to
    get ready:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 请继续从网站上下载该模块。准备就绪需要一点工作：
- en: Extract the files to your `modules` folder.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将文件解压到您的`modules`文件夹中。
- en: 'Run the `.sql` script against the database (remember to have a backup available)
    with the following command:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令在数据库上运行`.sql`脚本（请记住要有备份可用）：
- en: '[PRE7]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Ensure that you replace the highlighted file path with the one that reflects
    your setup if need be.
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保在需要的情况下，将高亮显示的文件路径替换为您自己的设置。
- en: Enable the module in the **modules** section under **administer**.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**管理**下的**模块**部分启用该模块。
- en: 'To use the module, head on over to the **settings** section under **administer**
    once the module is enabled. In the drop-down list in the menu you will notice
    that there is now a new **user_maintenance** menu item available. Click on that
    to bring up the following page:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 启用模块后，请转到**管理**下的**设置**部分。在菜单中的下拉列表中，您会注意到现在有一个新的**用户维护**菜单项可用。点击它将显示以下页面：
- en: '![Maintaining Users](img/1800_10_11.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![维护用户](img/1800_10_11.jpg)'
- en: As you can see, it is now quite easy to select how long you are prepared to
    keep an active account on your site despite the fact that the user has not logged
    on after registering. The reason it is wise to get this contribution up and running
    as soon as possible is that it cannot work retrospectively. In other words, if
    you run into this problem after three years of collecting wasted accounts, this
    contribution cannot tell which accounts it should delete; it only works for those
    accounts that were created while it is enabled.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，尽管用户在注册后没有登录，但现在选择您愿意保留活跃账户的时间变得相当容易。尽快启用此贡献的原因是它不能追溯工作。换句话说，如果您在收集了三年的无效账户之后遇到这个问题，这个贡献无法告诉您应该删除哪些账户；它只能对在启用时创建的账户起作用。
- en: Summary
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter has rounded off the picture painted by the previous chapters by
    taking a look at some of the most important website-related chores that you will
    have to undertake. Knowing how to make backups at the click of a button, or being
    able to tell who is using your site for what purposes and when, gives you the
    power to maintain and manage your site efficiently and with a minimum of fuss.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 本章通过查看您将不得不承担的一些最重要的网站相关任务，完成了前几章所描绘的画面。知道如何一键备份，或者能够告诉谁在使用您的网站以及他们为何目的何时使用，这使您能够高效且尽可能少地麻烦地维护和管理您的网站。
- en: With the end of this chapter, we come to the end of the book. For those of you
    who now need to upload your new site your live domain, the appendix contains further
    instructions on deployment.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 随着本章的结束，我们来到了本书的结尾。对于那些现在需要上传您的新网站到实际域名的人，附录中包含了进一步的部署说明。
- en: Congratulations on finishing the book, and I wish you all the best in your future
    endeavors on the Web. Please remember to take the time to give back to the Drupal
    community so that it can continue to flourish and help others.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜您完成这本书，并祝您在未来的网络事业中一切顺利。请记住，花些时间回馈Drupal社区，以便它能够继续繁荣发展并帮助他人。
