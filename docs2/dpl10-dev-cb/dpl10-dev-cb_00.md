# 前言

Drupal 是一个流行的内容管理系统，用于为小型企业、电子商务、企业系统等构建网站。由超过 4,500 名贡献者创建，Drupal 10 为 Drupal 带来了许多新功能。无论您是 Drupal 的新手还是经验丰富的 Drupalista，*Drupal 10 开发食谱*都包含了深入了解 Drupal 10 所提供内容的配方。我们首先帮助您创建和维护您的 Drupal 站点。接下来，熟悉配置内容结构和编辑内容。您还可以了解本版的全部新更新。这包括创建自定义页面、访问和操作实体、使用 Drupal 运行和创建测试以及将外部数据迁移到 Drupal。随着您的进步，您将学习如何使用现成的模块自定义 Drupal 的功能、提供扩展以及编写自定义代码来扩展 Drupal。您还将学习如何设计一个具有强大内容管理和编辑工作流程的数字体验平台。

您可以通过编写自定义模块来适应 Drupal 的需求，创建自定义插件、实体类型和页面。您还可以使用现代前端开发构建工具为您的 Drupal 站点供电。您将能够创建和管理 Drupal 站点的代码库。您可以通过将 Drupal 作为您的 API 平台，并为您的消费者提供服务来利用 Drupal。

# 本书涵盖内容

*第一章*，*使用 Drupal 启动运行*，介绍了如何创建新的 Drupal 站点以及运行 Drupal 的系统要求，然后使用基于 Docker 的现代本地开发工具在本地运行 Drupal 站点。

*第二章*，*内容构建体验*，深入探讨了如何设置您的内容编辑体验并添加编辑审查工作流程。

*第三章*，*通过视图显示内容*，介绍了如何使用视图模块创建一个列出博客的页面以及一个显示最近五篇博客的伴随块，视图模块是一个可视化的查询构建器。

*第四章*，*使用自定义代码扩展 Drupal*，探讨了如何创建一个可以安装到您的 Drupal 站点的自定义模块。

*第五章*，*创建自定义页面*，演示了如何使用控制器和路由创建自定义页面。创建自定义页面可以使您将 Drupal 扩展到不仅仅是内容页面的范畴。

*第六章*，*访问和操作实体*，涵盖了在 Drupal 中处理实体时的**创建、读取、更新和删除**（**CRUD**）操作。我们将创建一系列路由来创建、读取、更新和删除文章节点。

*第七章*，*使用表单 API 创建表单*，介绍了 Form API 的使用，它用于在 Drupal 中创建表单而无需编写任何 HTML。

*第八章*，*使用插件即插即用*，介绍了实现块插件。我们将使用插件 API 提供自定义字段类型，以及字段的小部件和格式化程序。最后一个菜谱将向您展示如何创建和使用自定义插件类型。

*第九章*，*创建自定义实体类型*，解释了如何为自定义数据模型创建自定义实体类型。

*第十章*，*主题和前端开发*，介绍了如何创建主题，使用 Twig 模板系统，并利用 Drupal 的响应式设计功能。

*第十一章*，*多语言和国际化*，展示了 Drupal 10 的多语言和国际化功能，

*第十二章*，*使用 Drupal 构建 API*，介绍了如何在 Drupal 中使用 JSON:API 创建 RESTful API，展示了如何通过 HTTP 请求读取和操作数据。

*第十三章*，*使用 Drupal 运行和编写测试*，深入探讨了使用 PHPUnit 为您的自定义模块代码运行和编写自动化测试。

*第十四章*，*将外部数据迁移到 Drupal*，解释了如何从旧版本的 Drupal 迁移到 Drupal 10，并介绍了使用迁移模块从 CSV 文件和 HTTP API 迁移内容和数据。

# 您需要为此书准备的

为了使用 Drupal 10 并运行本书中的代码示例，以下软件将是必需的：

| **软件** | **操作系统要求** |
| --- | --- |
| 在 Docker 中运行的本地 Web 服务器（DDEV、Lando、Docksal 或 Docker4Drupal）或类似替代方案 MAMP | Windows、macOS 或 Linux |
| 用于代码编辑的 PhpStorm 或 VS Code | Windows、macOS 或 Linux |
| 终端、iTerm 或类似命令行工具 | Windows、macOS 或 Linux |
| NodeJS、npm 和 Laravel Mix | Windows、macOS 或 Linux |

注意，有几个免费的开源工具可以用来在本地运行 Drupal – DDEV、Lando、Docksal 和 Docker4Drupal 是前四个社区解决方案。建议您使用您最熟悉或已经建立的解决方案。本书的第一章涵盖了使用 DDEV 运行 Drupal。不幸的是，我们无法深入探讨所有可能的解决方案。

在使用本书时，保留您所使用的任何解决方案的文档是个好主意，因为示例可能是一般化的，尤其是在运行命令时。

# 本书面向的对象

本书面向那些一直在使用 Drupal 的人，例如网站构建者、后端和前端开发者，以及那些渴望了解当他们开始使用 Drupal 10 时将面临什么的人。

# 部分

在本书中，您会发现一些频繁出现的标题（*准备就绪*、*如何做…*、*它是如何工作的…*、*还有更多…* 和 *另请参阅*）。

为了清楚地说明如何完成食谱，我们使用以下这些部分。

## 准备工作

本节告诉您在食谱中可以期待什么，并描述了如何设置任何必需的软件或初步设置。

## 如何做…

本节包含遵循食谱所需的步骤。

## 它是如何工作的…

本节通常包含对上一节发生情况的详细解释。

## 更多内容…

本节包含有关食谱的附加信息，以便您对食谱有更深入的了解。

## 参见

本节提供了指向其他有用信息的链接，这些信息对食谱很有帮助。

# 下载彩色图像

我们还提供了一份包含本书中使用的截图和图表彩色图像的 PDF 文件。您可以从这里下载：[`packt.link/N7EpQ`](https://packt.link/N7EpQ)。

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件[`github.com/PacktPublishing/Drupal-10-Development-Cookbook`](https://github.com/PacktPublishing/Drupal-10-Development-Cookbook)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还有其他来自我们丰富的图书和视频目录的代码包可供使用，请访问[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)。查看它们吧！

# 使用的约定

在本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示：“在新建的目录中创建一个名为`Announcement.php`的文件，以便我们可以为我们的实体类型定义`Announcement`类。”

代码块设置如下：

```php
{% for tag in node.getTags %}
  <div>Tag: {{ tag.label }}</div>
{% endfor %}
```

任何命令行输入或输出都如下所示：

```php
mkdir -p src/Entity
```

**新术语**和**重要词汇**以粗体显示。屏幕上显示的单词，例如在菜单或对话框中，在文本中显示如下：“您将在**权限**表上看到生成的权限。”

小贴士或重要提示

它看起来像这样。

# 联系我们

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误表**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，如果您能向我们报告，我们将不胜感激。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果你在互联网上以任何形式发现我们作品的非法副本，如果你能提供位置地址或网站名称，我们将不胜感激。请通过版权@packtpub.com 与我们联系，并提供材料的链接。

**如果你有兴趣成为作者**：如果你在某个领域有专业知识，并且你感兴趣的是撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享你的想法

一旦你阅读了*Drupal 10 开发食谱*，我们很乐意听听你的想法！请[点击此处直接进入此书的亚马逊评论页面](https://packt.link/r/1-803-23496-2)并分享你的反馈。

你的评论对我们和科技社区都很重要，并将帮助我们确保我们提供高质量的内容。

# 下载这本书的免费 PDF 副本

感谢你购买这本书！

你喜欢在旅途中阅读，但无法携带你的印刷书籍到处走吗？ 你的电子书购买是否与你的选择设备不兼容？

别担心，现在每本 Packt 书籍你都可以免费获得该书的 DRM 免费 PDF 版本。

在任何地方、任何地方、任何设备上阅读。直接从你最喜欢的技术书籍中搜索、复制和粘贴代码到你的应用程序中。

优惠远不止于此，你还可以获得独家折扣、时事通讯和每天收件箱中的精彩免费内容

按照以下简单步骤获取优惠：

1.  扫描下面的二维码或访问以下链接

![](img/B18548_QR_Free_PDF.jpg)

https://packt.link/free-ebook/9781803234960

1.  提交你的购买证明

1.  就这些！我们将直接将你的免费 PDF 和其他优惠发送到你的电子邮件
