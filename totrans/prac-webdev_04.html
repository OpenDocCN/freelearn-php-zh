<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;JavaScript"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. JavaScript</h1></div></div></div><p>So far we have gone through three chapters and learned two languages, HTML and CSS. They are used to create a web page, give it content, and add styling to it. In this chapter, we will learn a third language, <span class="strong"><strong>JavaScript</strong></span>, which is <a id="id319" class="indexterm"/>used for programming your web pages and add life to them. For quite some time, JavaScript was treated by some as a second class citizen. If ever this was deserved, it is definitely no longer true today. Before we get started with JavaScript, let us get oriented in the world of programming.</p><div class="section" title="Programming 101"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec42"/>Programming 101</h1></div></div></div><p>There is no such thing as a smart computer. A computer is a device that is capable of executing just a few instructions, but can do that very fast. One such instruction could be to take a value stored<a id="id320" class="indexterm"/> somewhere, and another stored somewhere else, add the two, and store the result in a third place. A <span class="strong"><strong>program</strong></span> is <a id="id321" class="indexterm"/>a list of such instructions, written down in some logical and structured order, and in a human readable format. The format is called a <a id="id322" class="indexterm"/>
<span class="strong"><strong>programming language</strong></span>. A smart program would turn the useless device we described into a calculator.</p><p>For a lot of programming languages, a special program called a<a id="id323" class="indexterm"/> <span class="strong"><strong>compiler</strong></span> exists. It translates a program from a human readable format—usually a text file referred to as source code—into a format the computer can understand, typically a binary executable file.</p><p>Your computer or tablet contains many different kinds of programs. There is a program to manage the computer, programs to manage programs, others to create programs, a program that lets you type in commands which in turn are names of programs, and so on. That last one happens to be a programming <a id="id324" class="indexterm"/>language too, sometimes called a <span class="strong"><strong>shell</strong></span> or<a id="id325" class="indexterm"/> <span class="strong"><strong>command interpreter</strong></span>.</p><p>If you put some commands together in a text file, you have once again a program: a shell script. This is an example of a language that is interpreted, not compiled.</p><p>But this is <span class="emphasis"><em>Programming 101</em></span>, not Computer 101. Look at the following lines of source code, written in an imaginary programming language:</p><div class="informalexample"><pre class="programlisting">a = 1;
b = 2;
c = a + b;
printnumber (c);</pre></div><p>The letters <code class="literal">a</code>, <code class="literal">b,</code> and <code class="literal">c</code> are variables—things that can hold values. Those values can be numbers, names, complete employee records, and so on, as well as the value of an expression that contains more variables and values. You find those on the right-hand side of the <code class="literal">=</code> sign, which is<a id="id326" class="indexterm"/> an <span class="strong"><strong>operator</strong></span>. This operator assigns what is on the right to be the value of the variable on the left. <code class="literal">+</code> is also an operator. As you may have guessed, it adds two things. Variables have to be declared first, telling whomever or whatever is going to read this, about which variables you are going to use. Then they need to be initialized, which means giving them an initial value. If you don't, strange things could happen. In this example, both declaration and initialization happen on the same line. Finally, we used <code class="literal">printnumber(c)</code>.</p><p>This is the name of a function with one argument, the variable <code class="literal">c</code>. Assume it will take care of displaying the value: your program will only work if you also supply the code of that function, or if it was already written for you and supplied with the language as part of a library of functions.</p><p>So we have written a four line program to calculate the number <code class="literal">3</code>. For such a simple task, this is at least 3 lines too many, but we needed an example.</p><p>In the variables we used, there is no mention of what type of values variables contain. In some languages, such as the C Programming Language, you have to specify what kind of variable you mean when you declare it. Following is a similar program in C:</p><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>int</strong></span>  a, b, c;
<span class="strong"><strong>char</strong></span>  someletter; /* to hold a letter not a number */
<span class="strong"><strong>char</strong></span> *name; /* to hold a string of letters */
<span class="strong"><strong>float</strong></span> someFloat; /* to hold a floating point number */
a  = 1;
b  = 2;
c  =  a + b;
printnumber (c);</pre></div><div class="section" title="Compiled and interpreted languages compared"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec63"/>Compiled and interpreted languages compared</h2></div></div></div><p>The first day I used the C <a id="id327" class="indexterm"/>programming language, it was a revelation to me. I typed in my code using a full screen editor, pushed a button somewhere, and since there were no errors, I could immediately<a id="id328" class="indexterm"/> run my program to see if it did what I intended. At university, things had been different. I had to type in my <code class="literal">Fortran</code> program using a machine with punch cards, one line at a time, and leave the punch cards behind in the data center with a rubber band around it. Two days later I could pick them up together with a listing and there it was: <span class="emphasis"><em>line 37: missing semicolon</em></span>. That was, of course, a long time ago.</p><p>Using languages that have to be compiled has advantages, although opinions may vary. By having to go through a two-step process before you can run your program, a good compiler can do a thorough job checking your code and produce all kinds of error and warning messages, like <code class="literal">syntax error</code>, <code class="literal">undeclared variable</code>, <code class="literal">illegal type</code>, and so on, including the line number and offending statement. In interpreted languages like JavaScript, and to a lesser extent maybe<a id="id329" class="indexterm"/> <span class="strong"><strong>PHP</strong></span>, these errors are often silently ignored. Adding one line with an innocent typo into a perfectly working program can bring it to a complete stop. </p><p>Interpreted languages give you instant gratification. You type them in, using your favorite editor, as I do with <code class="literal">Textastic</code> on my iPad, immediately pull up the built in browser, and see the result (or nothing at all). You also do not have the inconvenience that you need to have a compiler present on the system when you create your programs, before you can run them. That compiler is usually part of a complete development environment.</p><p>So we set the stage for programming and learned, or relearned, a lot of important terms when it comes to programming. These are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Variables</li><li class="listitem" style="list-style-type: disc">Values</li><li class="listitem" style="list-style-type: disc">Types</li><li class="listitem" style="list-style-type: disc">Keywords or reserved words</li><li class="listitem" style="list-style-type: disc">Operators</li><li class="listitem" style="list-style-type: disc">Control flow</li><li class="listitem" style="list-style-type: disc">Functions</li><li class="listitem" style="list-style-type: disc">Compilers and interpreters</li><li class="listitem" style="list-style-type: disc">Libraries</li><li class="listitem" style="list-style-type: disc">Expressions</li><li class="listitem" style="list-style-type: disc">Syntax</li></ul></div><p>Now we are going to teach you what those are: for the JavaScript language, in this chapter, and for<a id="id330" class="indexterm"/> PHP in the next chapter. Before we do that, now that we understand those words, we need to address one important topic first.</p></div><div class="section" title="JavaScript is not the same as Java"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec64"/>JavaScript is not the same as Java</h2></div></div></div><p>I have already mentioned a few<a id="id331" class="indexterm"/> times about the six month class I took years ago on Web Development. Three months into it, one co-student was still mixing up Java and JavaScript. He is<a id="id332" class="indexterm"/> now a front-end developer so he must have seen the light eventually.</p><p>We want you to<a id="id333" class="indexterm"/> see it in the next <span class="emphasis"><em>three</em></span> minutes. Java and JavaScript are both programming languages. What they have in common are the first four letters of their name, Java, which is the name of a country, and makes many people think of coffee, and some of the late Sun Microsystems. That company, together with Netscape, coined the name JavaScript, and was also the creator and promoter of the Java programming language. Therefore, it is not surprising that people are sometimes confused.</p><div class="section" title="Java"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec18"/>Java</h3></div></div></div><p>Java is a programming language, developed by James Gosling of Sun Microsystems. A lot of its syntax comes from the C programming language, with some parts left out, like pointers, which happens to be my favorite part of C.</p><p>Unlike C, which is more of a "Write once, compile everywhere" language, Java is what I call a "Compile once, run everywhere" language. A Java compiler transforms a Java source code from text file to a platform independent bytecode file, so you can run it anywhere you have a Java runtime. Ever seen those messages that say you need to install a more up to date Java runtime? That is Java, not JavaScript.</p><p>Java applications typically run on server or desktop computers, but you can also use Java in Web Development. The<a id="id334" class="indexterm"/> server-side code for Web Applications, for which we will first use PHP (<a class="link" href="ch05.html" title="Chapter 5. PHP">Chapter 5</a>, <span class="emphasis"><em>PHP</em></span>) in this book, could be written in Java.</p></div><div class="section" title="JavaScript"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec19"/>JavaScript</h3></div></div></div><p>JavaScript is a totally different programming language. Although there are "other" usages of the language, for instance using JavaScript code to modify a PDF file, we will concentrate in this chapter on what is called client-side JavaScript.</p><p>JavaScript code is<a id="id335" class="indexterm"/> interpreted and the interpreter is the web browser. The language is sometimes referred to as a scripting language. Because of the word scripting, many believed that JavaScript would be rather simplistic in nature. This is not at all true. It can be very complex. That explains why there is a second chapter in this book where we talk about JavaScript. In this one we will just stick to the things you need for classic web development.</p><p>Client-side JavaScript combines the ability of the interpreter inside the browser with the already briefly mentioned<a id="id336" class="indexterm"/> <span class="strong"><strong>Document Object Model</strong></span> (<span class="strong"><strong>DOM</strong></span>), defined by that same browser. By being able to walk through or traverse the DOM using JavaScript code, you will be able to find the things you look for in your document and, if you would like to, modify both the content (HTML) and layout (CSS) of your document. You can also add life to your page by <a id="id337" class="indexterm"/>writing <span class="strong"><strong>event handlers</strong></span>. These are watchdog-like functions that wait and wait until a certain event occurs, for instance a user clicking a button. Then the appropriate code is executed and our watchdog waits some more. So with JavaScript, you can program your webpages and add life to it.</p><p>Those of you who are already programmers will discover an oddity or two in JavaScript that may be hard to get used to. In many languages, a statement is not executed, nor a function called, until the previous is complete. Things tend to happen in a synchronous way, first things first. In JavaScript, things can happen in an asynchronous way: where one thing already begins before the previous has completed. At first, you may find yourself checking your code over and over again, wondering why it is not doing the things you want it to do. We will teach you what to look out for and then everything will be hunky dory. So let's get started with our first JavaScript program.</p></div></div></div></div>
<div class="section" title="Our first JavaScript program"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec43"/>Our first JavaScript program</h1></div></div></div><p>Create a new HTML file<a id="id338" class="indexterm"/> and add the following to the <code class="literal">&lt;head&gt;</code> section:</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/javascript"&gt;
    <span class="strong"><strong>alert("Hello, World");</strong></span>
&lt;/script&gt;</pre></div><p>If you run this through a browser, a popup box will show up on the screen with the text <span class="emphasis"><em>Hello, World</em></span> in it. If you press the <span class="strong"><strong>OK</strong></span> button, the popup box will disappear. If you try this in a different browser, the same will happen but the popup box will look completely different. The <a id="id339" class="indexterm"/>browser renders it the way it wants and there is nothing we can do about it.</p><p>We could have also put that one line of code in a file <code class="literal">hello.js</code>, in a folder <code class="literal">js</code>, and have our program instead say the following:</p><div class="informalexample"><pre class="programlisting">&lt;script type="text/javascript" src="js/hello.js"&gt;
 &lt;/script&gt;</pre></div><p>Let's analyze that one line of JavaScript briefly. The line itself ends with a semicolon (<code class="literal">;</code>). It starts with <code class="literal">alert</code>, which is the name of a function that comes with JavaScript. The text for the popup is supplied as the only argument. That argument is, in this case, a string with the text <span class="emphasis"><em>Hello, World</em></span>. To indicate that it is a string value and not a variable, we used double quotes. Single quotes would have worked too.</p><div class="section" title="Variables"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec65"/>Variables</h2></div></div></div><p>In JavaScript, names of variables have to begin with a letter. A few other characters, like the <code class="literal">$</code> sign, are allowed as well, but we are not going to use them. This will help us, as early on as possible, to distinguish between JavaScript variables and PHP variables. Names are also<a id="id340" class="indexterm"/> case-sensitive, so <code class="literal">first</code> is not the same as <code class="literal">First</code>.</p><p>Of course it is alright to<a id="id341" class="indexterm"/> use very short names, like <code class="literal">a</code> and <code class="literal">b</code>, but if we want to give variables meaningful names, some best practices guides recommend to use names like <code class="literal">firstName</code>, <code class="literal">lastName</code>.</p><div class="section" title="Variable declarations"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec20"/>Variable declarations</h3></div></div></div><p>Variables are<a id="id342" class="indexterm"/> declared using the <code class="literal">var</code> keyword, for example:</p><div class="informalexample"><pre class="programlisting">var firstName;
var lastName;
var dayOfBirth;</pre></div><p>Or simply everything on one line, as shown next:</p><div class="informalexample"><pre class="programlisting">var firstName, lastName, dayOfBirth;</pre></div><p>When variables are declared but not initialized, they have <code class="literal">undefined</code> as a value, meaning there are no variable types. To assign a value to a variable, we use the <code class="literal">=</code> sign. So after a proper declaration, you <a id="id343" class="indexterm"/>can assign values similar to the following:</p><div class="informalexample"><pre class="programlisting">firstName = "Paul";
lastName = "Wellens";</pre></div><p>Of course, you can also do it all in one step, as shown next:</p><div class="informalexample"><pre class="programlisting">var firstName = "Paul";
var lastName = "Wellens";</pre></div><div class="section" title="Values of variables"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec03"/>Values of variables</h4></div></div></div><p>As we mentioned, there are no types of variables. As a value, we can assign almost anything. Following is<a id="id344" class="indexterm"/> a brief overview. But remember, we are not a reference manual, so it is not complete.</p></div><div class="section" title="Numbers"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec04"/>Numbers</h4></div></div></div><p>The most common <a id="id345" class="indexterm"/>numbers are integers. Simply use the digits that make up the number, so <code class="literal">myNumber = 127;</code> assigns the<a id="id346" class="indexterm"/> <span class="strong"><strong>decimal</strong></span> number <code class="literal">127</code> to the variable <code class="literal">myNumber</code>. The result would be different if you add a leading <span class="strong"><strong>zero</strong></span>. The line <code class="literal">myNumber = </code>
<span class="strong"><strong>0127;</strong></span> will assign the octal number <code class="literal">127</code>, which is 1*64 + 2*8 + 7 = 87 in decimal.</p><p>
<span class="strong"><strong>Hexadecimal</strong></span> numbers<a id="id347" class="indexterm"/> can be used as well, by starting the number with <code class="literal">0x</code>. So <code class="literal">myNumber = 0x127;</code> will store 256 + 2*16 + 7 = 295.</p><p>Finally, we can have floating point numbers. Always use a dot, never a comma, even if you are in France or other countries where the floating point is a floating comma (<span class="emphasis"><em>virgule flottante</em></span>, excuse my French!).</p><div class="informalexample"><pre class="programlisting">MyFloat = 123.456;</pre></div></div><div class="section" title="Strings"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec05"/>Strings</h4></div></div></div><p>A string contains zero<a id="id348" class="indexterm"/> or more characters enclosed within single (<code class="literal">'</code>) or double (<code class="literal">"</code>) quotes. So the shortest possible string is the empty string. Consider the following:</p><div class="informalexample"><pre class="programlisting">emptyString = "";
helloWorld = "Hello, World\n";
notANumber = "345";
twoLines = "First line\nSecond line";</pre></div><p>You probably recognize the <code class="literal">\n</code> from other languages. It is an example of an escape sequence, here<a id="id349" class="indexterm"/> representing the newline character. The <code class="literal">"345"</code> example is an important one. The <code class="literal">notANumber</code> variable indeed contains a string, not a number.</p></div><div class="section" title="Converting strings to numbers"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec06"/>Converting strings to numbers</h4></div></div></div><p>There are a few<a id="id350" class="indexterm"/> convenient functions that you can use to convert strings to numbers: <code class="literal">parseInt()</code> and <code class="literal">parseFloat()</code>. They will convert a string, or initial substring, until no more numbers are found to an integer or float number. If the string cannot be converted, the function returns<a id="id351" class="indexterm"/> <span class="strong"><strong>Not a Number</strong></span> (<span class="strong"><strong>NaN</strong></span>) . Following are some examples, where we have listed what the function returns as a comment:</p><div class="informalexample"><pre class="programlisting">/*
Examples using parseInt() and parseFloat()
This is a multiline comment
*/

parseInt("10 yard line");        // returns 10
parseInt("one two three");        // returns NaN
parseFloat("3.14");            // returns 3.14
parseInt("3.14");            // returns 3
parseFloat("3,14");            // returns 3
parseInt("notanumberatall");        // returns NaN
parseInt("0xff");            // returns 255 which is FF hex

/*
parseInt() can also take a second argument specifying the base of the number to be parsed
*/
parseInt("ff",16);            // 255, same as above
parseInt("11",2);            // returns 3, 1*2 + 1
parseInt("11", 8);            // returns 9, which is 1*8 + 1</pre></div></div></div></div><div class="section" title="Expressions and operators"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec66"/>Expressions and operators</h2></div></div></div><p>This section<a id="id352" class="indexterm"/> explains how <a id="id353" class="indexterm"/>
<span class="strong"><strong>expressions</strong></span> and<a id="id354" class="indexterm"/> <span class="strong"><strong>operators</strong></span> work in JavaScript, with a focus on what we are going to use the<a id="id355" class="indexterm"/> language for—programming websites. So do not expect an in-depth explanation of all bitwise operators, for instance. If you do not understand what I just said, that is perfectly OK. But if you need to know what they are, you will also need another book or reference.</p><p>An expression is part of a JavaScript statement, often the part on the right-hand side of the <code class="literal">=</code> operator, that the JavaScript interpreter can evaluate. The result will be the value of the expression. The simplest expressions we already know: values and variables. In the following example, <code class="literal">i + 7</code> is also an expression. It will evaluate as 8. It contains an operator, <code class="literal">+</code>, in the<a id="id356" class="indexterm"/> middle. The other parts to the left and right of it can be called <span class="strong"><strong>operands</strong></span>.</p><div class="informalexample"><pre class="programlisting">var i = 1;
var j;
j = i + 7;</pre></div><p>We will now go over the most essential operators. To those of you who already know C, C++, or Java, they will look very familiar.</p><div class="section" title="Arithmetic operators"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec21"/>Arithmetic operators</h3></div></div></div><p>This is the <a id="id357" class="indexterm"/>group of operators used to calculate things.</p><div class="section" title="Addition(+)"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec07"/>Addition(+)</h4></div></div></div><p>The <code class="literal">+</code> operator adds the values of the two operands, that is, if they are numbers, as is the case in the previous<a id="id358" class="indexterm"/> example. What if they are not numbers, will the program hang? Not at all. Remember, you are going to use JavaScript to programmatically modify web pages. Web pages, in turn, consist of HTML, which are a lot of strings. So our plus operator has just become one of the most useful tools you have. Look at the following example:</p><div class="informalexample"><pre class="programlisting">var hello = 'Hello, World';
var htmlString;
htmlString = '&lt;h1&gt;' + hello + '&lt;/h1&gt;';</pre></div><p>So, in JavaScript, the plus operator can be used to glue, or, to use a more technical term, <code class="literal">concatenate</code> strings together. We will encounter the same feature in PHP but there the operator is the dot (<code class="literal">.</code>). It is never too soon to get used to the difference, as you will use these a lot.</p><p>In one of the examples, we used a special case of the <code class="literal">+</code> operator. <code class="literal">counter++;</code> is a shorthand<a id="id359" class="indexterm"/> notation people are familiar with from languages like C, that both JavaScript and PHP support. It is a shorthand notation to simply add <code class="literal">1</code> to a variable's value. So the following two statements are identical:</p><div class="informalexample"><pre class="programlisting">varName = varName + 1;
varName++;</pre></div></div><div class="section" title="Subtraction (-)"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec08"/>Subtraction (-)</h4></div></div></div><p>Everybody who has ever used a calculator knows the minus sign. It is used to subtract numbers. While<a id="id360" class="indexterm"/> the <code class="literal">+</code> sign could also be used with strings, that does not make sense with subtractions (nor multiplications or divisions). There is also a shorthand notation like <code class="literal">++</code> which looks like"<code class="literal">—</code>".</p><div class="informalexample"><pre class="programlisting">varName = varName - 1;
varName—;</pre></div><p>They are indeed also the same.</p><p>So far, we have used one example with more than two operands, the one line statement we used to compose an HTML string. But what happens if we do the following:</p><div class="informalexample"><pre class="programlisting"> var result;
 var a = 7, b = 5,  c = 2;
 result = a - b - c;
 alert (result);</pre></div><p>Will it be 0, or will it be 4? It is 0 because the expression is evaluated left to right, but you can remove all doubt by using parentheses. Take a look at the following:</p><div class="informalexample"><pre class="programlisting"> result = (a - b) - c;   // 7-5 is 2 2-2 is 0
 result = a - (b - c);   // 5-2 is 3 7-3 is 4</pre></div></div><div class="section" title="Multiplication (*)"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec09"/>Multiplication (*)</h4></div></div></div><p>The <code class="literal">*</code> operator<a id="id361" class="indexterm"/> multiplies its two operands.</p></div><div class="section" title="Division (/)"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec10"/>Division (/)</h4></div></div></div><p>The <code class="literal">/</code> operator<a id="id362" class="indexterm"/> divides its first operand by its second. The result is always a floating point number so 5 / 2 evaluates as 2.5. In some languages, this would be two if both operands were integers.</p></div><div class="section" title="Modulo (%)"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec11"/>Modulo (%)</h4></div></div></div><p>The <code class="literal">%</code> operator is extremely useful. It returns the first operand modulo the second operand. For<a id="id363" class="indexterm"/> instance, 5%2 evaluates as 1, as the quotient of the division 5/2 as an integer is 2 and the remainder is 1. I often use it in styling when I want to do something different for even things than odd things. Using <code class="literal">if (number%2)</code> in your code would mean odd, because it is true if the value between the parentheses is not zero.</p></div><div class="section" title="Relational operators"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec12"/>Relational operators</h4></div></div></div><p>A common mistake in programming is to use things like <code class="literal">if ( a = b)</code> to compare two things and discover that it is always true even if <code class="literal">a</code> is not equal to <code class="literal">b</code>. This is because in many languages, including JavaScript and PHP, a single equal sign is the assignment operator. To <a id="id364" class="indexterm"/>check to see if two things are equal, you need (at least) two equal signs. The expressions using the operators listed next will evaluate as true or false, and in JavaScript the corresponding values are not <code class="literal">1</code> or <code class="literal">0</code>, but actually <code class="literal">true</code> or <code class="literal">false</code>. Here they are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Equal ( <code class="literal">==</code> ): This one we use in an expression to see if two variables contain equal values, for instance if (<code class="literal">a == b</code>)</li><li class="listitem" style="list-style-type: disc">Not Equal ( <code class="literal">!=</code> ): Of course this is for the opposite: <code class="literal">true</code> if they are not equal, <code class="literal">false</code> if they are</li><li class="listitem" style="list-style-type: disc">Less than ( <code class="literal">&lt;</code> )</li><li class="listitem" style="list-style-type: disc">Less than or equal( <code class="literal">&lt;=</code> )</li><li class="listitem" style="list-style-type: disc">Greater than( <code class="literal">&gt;</code> )</li><li class="listitem" style="list-style-type: disc">Greater than or equal( <code class="literal">&gt;=</code> )</li><li class="listitem" style="list-style-type: disc">Not ( <code class="literal">!</code> )</li></ul></div><p>This converts false to true and vice versa when placed in front of an expression. This can help a lot in making your program more readable.</p><p>Of course, such expressions are not very helpful when used in isolation. They need to be part of some construct where we add control to make our program do something different if the expression evaluates as false as opposed to true.</p></div></div></div><div class="section" title="Control flow"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec67"/>Control flow</h2></div></div></div><p>
<span class="strong"><strong>Control flow</strong></span> is the heart of programming. A control flow statement helps determine which part of the <a id="id365" class="indexterm"/>code that follows it is executed and which is not. The most commonly used control flow statement in any language is probably the <code class="literal">if-else</code> statement. We will guide you through the most useful ones in JavaScript.</p><p>We learned what an <a id="id366" class="indexterm"/>expression is. I also referred to a line of JavaScript code (ending with a semicolon) as a statement. You can group statements together by putting curly braces ( <code class="literal">{</code> and <code class="literal">}</code> ) around them. Such a group of statements is called a <a id="id367" class="indexterm"/>
<span class="strong"><strong>statement block</strong></span>. It is considered best practice to use curly braces even if there is only a single statement, when used in one of the controls described next, where the word statement represents a statement block.</p><div class="section" title="if"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec22"/>if</h3></div></div></div><p>The format of an <code class="literal">if</code> statement is:</p><div class="informalexample"><pre class="programlisting">if (expression)
{
    statements
}</pre></div><p>You can also<a id="id368" class="indexterm"/> combine <code class="literal">if</code> with <code class="literal">else</code>, as shown here:</p><div class="informalexample"><pre class="programlisting">if (expression) {
statements
}
else {
statements
}</pre></div><p>Example:</p><div class="informalexample"><pre class="programlisting">if (a &lt; b ) {
alert ("a is smaller than b" );
}
else
{
alert ("a is not smaller than b");
}</pre></div></div><div class="section" title="while"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec23"/>while</h3></div></div></div><p>Whereas an <code class="literal">if</code> statement is your basic control statement to do something, depending on a condition or something else, the <code class="literal">while</code> statement is perfect for creating a loop. A loop is a <a id="id369" class="indexterm"/>series of statements that are repeated as long as (or <code class="literal">while</code>) a certain condition is true. It is important to make sure that your condition is not forever true, otherwise you end up with an <code class="literal">infinite</code> loop.</p><p>Following is the format:</p><div class="informalexample"><pre class="programlisting">while (expression)
statement</pre></div><p>And next is an example:</p><div class="informalexample"><pre class="programlisting">var count = 0;
var seriesA = "";
while (count &lt; 100)
{
seriesA = seriesA + 'a'; // can also be written as seriesA += 'a';
count++;             // if you forget this one you are in trouble
}
alert(seriesA);</pre></div><p>The result of this code will be a pop-up of a string that contains the letter a 100 times.</p></div><div class="section" title="switch"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec24"/>switch</h3></div></div></div><p>I like the <code class="literal">switch</code> statement. If you have to execute different code depending on more than 2 different possible conditions, using a switch statement makes for more readable and maintainable<a id="id370" class="indexterm"/> code than multiple <code class="literal">if</code>/<code class="literal">else</code> statements. Typically, the expression that is evaluated will be a variable and then there will be several statements that are executed in <code class="literal">case</code> the value of the variable is <code class="literal">value1</code>, <code class="literal">value2</code>, <code class="literal">value3</code>, and so on.</p><p>It goes as follows:</p><div class="informalexample"><pre class="programlisting">switch (expression)  {

<span class="strong"><strong>case</strong></span> value1:
statement
break;
<span class="strong"><strong>case</strong></span> value2:
statement
break;
// etc. etc.
<span class="strong"><strong>default:</strong></span>
statement   // or no statement
break;
}</pre></div><p>First, the expression is evaluated. Depending on the value of the expression, the statement that belongs to the matching value is executed. If there is no match, the statement associated with <code class="literal">default:</code> is executed. The <code class="literal">break;</code> statements are important, yet not mandatory. In a <a id="id371" class="indexterm"/>switch statement, the first statement block that is executed is the one that belongs to the first match. If the <code class="literal">break;</code> statement is omitted, subsequent statements are executed as well and that is not usually what we want. I usually write a skeleton of a switch statement, including <code class="literal">case:</code> and <code class="literal">break;</code> first and then fill it out with real code.</p><p>Now let us look at an example and have some fun with it:</p><div class="informalexample"><pre class="programlisting">var plate;
plate = getPlateName();
switch (plate) {
case "first":
Who();
break;
case "second":
what();
break;
case "third":
IDontKnow();
break;
case "home":
today();
break;
default:
strike();
break;
}</pre></div></div></div><div class="section" title="Functions"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec68"/>Functions</h2></div></div></div><p>We already used some <span class="strong"><strong>functions</strong></span> in our examples. A function is a piece of JavaScript code that you have either <a id="id372" class="indexterm"/>written on your own or is predefined by the JavaScript implementation. A function <a id="id373" class="indexterm"/>may be passed arguments, also<a id="id374" class="indexterm"/> called <span class="strong"><strong>parameters</strong></span>. Following is an example of our own function to calculate the square root of the number that is passed as the first and only argument:</p><div class="informalexample"><pre class="programlisting">function square (x)
{
var sq;
sq =  x * x;
return  sq;
}</pre></div><p>
<code class="literal">square</code> is the name of the function. It consists of all the code that is in-between the curly braces. We call it a <code class="literal">function</code> block. Once the function is written, it can be used over and over again. The function in this example actually returns a value as well; in this case the square root of the argument. This is done by using a <code class="literal">return</code> statement: <code class="literal">return sq;</code>. Note that there are no parentheses after the <code class="literal">return</code> keyword, as is the case in other programming languages. That would imply that there would be a return <code class="literal">function</code>! So let us use our function a few times:</p><div class="informalexample"><pre class="programlisting">var message, result;
result = square(3);
message = "the square of 3 is" + result;
alert(message);

function square (x)
{
var sq;
sq =  x * x;
return  sq;
}
alert("the square of 4 is " + square(4));</pre></div><p>As you can see, we can use the function before and after the declaration. We can store our message in a variable first or pass it along to the <code class="literal">alert()</code> function directly.</p><div class="section" title="Scope of variables"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec25"/>Scope of variables</h3></div></div></div><p>At this point in the <a id="id375" class="indexterm"/>chapter, where we introduce functions, it is a good time to explain a very important concept: the <span class="strong"><strong>scope of variables,</strong></span> and the<a id="id376" class="indexterm"/> notion of <span class="strong"><strong>global</strong></span> versus <span class="strong"><strong>local</strong></span> variables.</p><p>If you have been practicing, I sincerely hope that you have diligently declared all your variables using the <code class="literal">var</code> keyword. But what if you forgot it somewhere? Well, in that case, you have, by mistake or not, declared a global variable. So the scope, which is the region of your JavaScript program where that variable can be used, is everywhere and we call that global.</p><p>Variables declared with the <code class="literal">var</code> keyword have a local scope. Local variables are defined only within the body of the function where they are declared. Variables that are passed as arguments to a function also have the local scope, and are defined only within the body of that function.</p><p>If you declare a local variable or use a parameter with the same name as an already existing global variable, that local variable will in fact "hide" the<a id="id377" class="indexterm"/> global variable from you while you are inside the function. But if, inside a function, you assign a value to a variable without declaring it first, you may have just overwritten a value that is needed elsewhere in the program. That is why it is important to declare all your variables in the beginning of the function. Take a few minutes to study the following example and it will all become clear.</p><div class="informalexample"><pre class="programlisting">// global variables
outside = "outside";
global = "global";
var same ="outside"
function   testfunction()
{
// inside function    
global = "local";    // mistakenly modified global variable

var inside = "inside";    // local variable
var local;    
var same = "inside";     

alert(inside);  // prints inside
alert (outside);// prints outside
alert(local);   // prints "" because it was not initialized
alert (same);  // prints inside
alert(global);    // prints local because we modified it
    
}

// running testfunction()
testfunction();    

// after running testfunction()
alert (outside);  // outside
alert(global);    // global because we had overwritten it
alert(same);      // prints outside</pre></div></div><div class="section" title="Objects"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec26"/>Objects</h3></div></div></div><p>Early on in this chapter, I mentioned that <a id="id378" class="indexterm"/>variables can contain almost anything: numbers, strings, or even complete employee records. But in the examples we have seen so far, there does not seem to be a <a id="id379" class="indexterm"/>suitable container for things as complex as employee records. This is where <span class="strong"><strong>objects</strong></span> fit in. And here we will learn how to create them.</p><p>Objects are collections of named values, and they are created using a special function called a <span class="strong"><strong>constructor</strong></span>. There <a id="id380" class="indexterm"/>are several such functions supplied with JavaScript. There is a generic one, <code class="literal">Object()</code>, but there are also specific ones to create objects of a predefined structure, such as <code class="literal">Date()</code> or <code class="literal">String()</code>. The syntax is as follows:</p><div class="informalexample"><pre class="programlisting">employee = new Object();</pre></div><p>Now we have created an empty object called employee that we can fill up with names and values, as shown below:</p><div class="informalexample"><pre class="programlisting">employee.firstName = "John";
employee.lastName = "Williams";
employee.profession = "conductor";</pre></div><p>In the context of JavaScript objects, these names are<a id="id381" class="indexterm"/> referred to as <span class="strong"><strong>properties</strong></span>. Properties in turn have values. Objects can also contain functions that can be used to do things with what is inside an object. Such functions are<a id="id382" class="indexterm"/> called <span class="strong"><strong>methods</strong></span>. The <code class="literal">String()</code> object for instance, contains quite a number of string manipulation methods. Consulting a good reference book or online reference on JavaScript Objects can result in having to write a lot less code, because it is all there already. Following is an example<a id="id383" class="indexterm"/> of a <span class="strong"><strong>String</strong></span> method:</p><div class="informalexample"><pre class="programlisting">hello = new String('Hello, World"); // Or simply hello = "Hello, World";
Hello = hello.toUpperCase();
alert (Hello);  // This will show HELLO, WORLD in a pop-up box</pre></div><div class="section" title="JSON"><div class="titlepage"><div><div><h4 class="title"><a id="ch04lvl4sec13"/>JSON</h4></div></div></div><p>There is another way to create objects, without the need of a constructor function.</p><div class="informalexample"><pre class="programlisting">employee = {};  // Creates an empty object
employee.firstName = "John"; // same as before
// or do it all at once
employee = { firstName:"John", lastName:"Williams" };</pre></div><p>The right hand side <a id="id384" class="indexterm"/>matches a format for data named <span class="strong"><strong>JavaScript Object Notation</strong></span> (<span class="strong"><strong>JSON</strong></span>). We are dedicating an entire chapter on JSON in<a id="id385" class="indexterm"/> this book, where we will convince you that it is the coolest data format to use; so more about JSON later.</p></div></div></div></div>
<div class="section" title="DOM objects, properties, methods, and events"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec44"/>DOM objects, properties, methods, and events</h1></div></div></div><p>We walked you through the basics of JavaScript objects and will now get to the essence of client-side JavaScript—programming the DOM.</p><div class="section" title="The Window object"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec69"/>The Window object</h2></div></div></div><p>When you are running a<a id="id386" class="indexterm"/> webpage in a browser, there are two objects available to you—<span class="strong"><strong>Window object</strong></span> and <span class="strong"><strong>Document object</strong></span>.</p><p>The Window object gives<a id="id387" class="indexterm"/> us access to the properties and methods that can tell us about the status of the window that is used to<a id="id388" class="indexterm"/> render the webpage. We already used one such method in every single example: <code class="literal">alert()</code>. Consider the following:</p><div class="informalexample"><pre class="programlisting">alert("Hello, world");</pre></div><p>This is actually short for the following:</p><div class="informalexample"><pre class="programlisting">window.alert("Hello, world");</pre></div><p>Similar useful methods for creating a dialog box are <code class="literal">prompt</code> and <code class="literal">confirm</code>. The former displays a dialog box that prompts the visitor for input; the latter displays a dialog box with a message and <a id="id389" class="indexterm"/>an <span class="strong"><strong>OK</strong></span> and <span class="strong"><strong>Cancel</strong></span> button. Refer to the next example:</p><div class="informalexample"><pre class="programlisting">var response = confirm ("Are you sure you want to do this?");
if (response == true) {
// if (response) has the same effect
doit();
} else {
donot();
}</pre></div><p>The window object has some interesting properties as well. You want to know how many pixels wide the current window is? You can access that by using:</p><div class="informalexample"><pre class="programlisting">var windowWidth = window.innerWidth;</pre></div><p>The single most important property of the window object is in turn an object -  the DOM Document object.</p></div><div class="section" title="The Document object"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec70"/>The Document object</h2></div></div></div><p>
<span class="strong"><strong>window.document</strong></span> (but you do not have<a id="id390" class="indexterm"/> to write the window part) is a property that gives you an object, which contains the entire webpage that is loaded by<a id="id391" class="indexterm"/> the browser.</p></div><div class="section" title="write and writeln methods"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec71"/>write and writeln methods</h2></div></div></div><p>In most of our examples, we used the window <code class="literal">alert()</code> method to display a popup box with some text. Useful as this may be for testing or debugging, it can be annoying because you have to click<a id="id392" class="indexterm"/> the box away before you see the next line of text. Most textbooks will use the document methods<a id="id393" class="indexterm"/> <code class="literal">write</code> and <code class="literal">writeln</code> instead. With these methods, you can write your message text straight into your<a id="id394" class="indexterm"/> document. <code class="literal">writeln</code> differs<a id="id395" class="indexterm"/> from write only in the manner that it adds a new line after each statement. Simply try the following:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html &gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html;    charset=utf-8" /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt; The following text is generated using JavaScript &lt;/p&gt;
&lt;script type="text/javascript"&gt;
document.write("Hello, World");
document.write("On the same line");
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div><div class="section" title="Nodes and DOM traversing"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec72"/>Nodes and DOM traversing</h2></div></div></div><p>We will use document methods to walk through or traverse our document and change it. You need to think of the document as a tree with nodes. What is attached to these nodes are your HTML tags with their attributes and inner HTML text. With dedicated methods, we can look for parts of our document. A <a id="id396" class="indexterm"/>
<span class="strong"><strong>node</strong></span> or <a id="id397" class="indexterm"/>
<span class="strong"><strong>node list</strong></span> is what they return (sometimes there is only one matching tag, sometimes there are more). Then, by changing the <a id="id398" class="indexterm"/>properties of these nodes or using other methods, we can effectively change the content or layout of our document.</p><p>Three useful methods<a id="id399" class="indexterm"/> for looking up things in the document tree are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">getElementById</code> : find the node with the id specified as argument</li><li class="listitem" style="list-style-type: disc"><code class="literal">getElementsByClassName</code> : get the node(s) with the class set to argument</li><li class="listitem" style="list-style-type: disc"><code class="literal">getElementsByTagName</code> : get all node(s) where the HTML tag equals argument</li></ul></div><p>A useful property is the <code class="literal">innerHTML</code> property, which allows you to get or set the HTML text inside an HTML tag. Using these ingredients, we can cook up the following example:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html &gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; 
charset=utf-8" /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 id="hellotext"&gt; Hello,World&lt;/h1&gt;
&lt;script type="text/javascript"&gt;
var  findhello = document.getElementById('hellotext');
findhello.innerHTML = ("Hello, Beach");
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>This simple HTML document, yet another <code class="literal">Hello, World</code> example, gets modified immediately using JavaScript, and the only thing we ever see rendered by the browser is <code class="literal">Hello, Beach</code>. This is<a id="id400" class="indexterm"/> not very exciting. If, however, we let the user decide when to change the text, trigger an event, and have our code react to that event, then <a id="id401" class="indexterm"/>we effectively add action to our webpage.</p></div><div class="section" title="Events"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec73"/>Events</h2></div></div></div><p>
<span class="strong"><strong>Events</strong></span> are things<a id="id402" class="indexterm"/> that happen to elements inside the DOM. They can be triggered<a id="id403" class="indexterm"/> by the browser or by the user. User controlled events can be:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Changing an input field</li><li class="listitem" style="list-style-type: disc">Clicking a button</li><li class="listitem" style="list-style-type: disc">Moving a mouse over an area</li><li class="listitem" style="list-style-type: disc">Clicking on a link</li></ul></div><p>You can attach an event handler to such tags that contain the code that needs to be executed. In the next example, we do so by adding an <code class="literal">event</code> attribute to the element. You can achieve the<a id="id404" class="indexterm"/> same by using the document <code class="literal">addEventListener()</code> method.</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html &gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html;
charset=utf-8" /&gt;
&lt;script type="text/javascript"&gt;
<span class="strong"><strong>function goToBeach() {</strong></span>
var  findhello = document.getElementById('hellotext');
findhello.innerHTML = "Hello, Beach";
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 id="hellotext"&gt; Hello,World&lt;/h1&gt;
<span class="strong"><strong>&lt;input type="button" onclick="goToBeach()" value="Beach"&gt;&lt;/input&gt;</strong></span>
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>The difference between<a id="id405" class="indexterm"/> the two examples is that we have added a button with an <code class="literal">onclick</code> attribute, which we have given the name of a JavaScript function as value, and placed our JavaScript code<a id="id406" class="indexterm"/> inside a function of the same name. Now, not until a user clicks the <span class="strong"><strong>Beach</strong></span> button, <span class="strong"><strong>Hello, World</strong></span> will turn into <span class="strong"><strong>Hello, Beach</strong></span>.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec45"/>Summary</h1></div></div></div><p>At this point, you are probably thinking, now I have arrived at the hard part and I am going to get lost soon. I have good news for you! You are not going to get lost because you have already reached the end of this chapter.</p><p>We started with a brief overview of the features of a programming language. Next, we laid out what these are for JavaScript, while explaining why we need this language and how we are going to use it: to program webpages. To achieve that, we need an easy way to access all the elements in a webpage.</p><p>Well, we already learned how to access elements of a page in the previous chapter through the use of <span class="strong"><strong>selectors</strong></span>.</p><p>
<span class="strong"><strong>jQuery</strong></span>, a popular and proven JavaScript library, is what we are going to use mostly for our client-side JavaScript. It lets you use CSS-style selectors to specify the elements we want to reach, even attach events to it, so we do not have to learn something new or/and have the size of this book approach that of <code class="literal">War</code> and <code class="literal">Peace</code>. jQuery has several other advantages, which we will describe in <a class="link" href="ch07.html" title="Chapter 7. jQuery">Chapter 7</a>, <span class="emphasis"><em>jQuery</em></span>. That includes a cool interface to switch between the <span class="emphasis"><em>client</em></span> and the <span class="emphasis"><em>server</em></span>.</p><p>For that reason, we are not diving into jQuery right away. We need to understand why we also need server-side programming. We are going to learn that in the next chapter and, at the same time, learn the second programming language of this book: <span class="strong"><strong>PHP</strong></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a> for all the Packt Publishing books you have purchased. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div></div></body></html>