- en: Chapter 4. Using the Core Helpers
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第4章。使用 Core 辅助工具
- en: 'In this chapter we will cover the following:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下内容：
- en: Loading a helper class
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加载辅助类
- en: Using the Date helper
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Date 辅助工具
- en: Using the Encryption helper
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Encryption 辅助工具
- en: Loading an RSS feed with the Feed helper
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Feed 辅助工具加载 RSS 源
- en: Managing files and directories with the File helper
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 File 辅助工具管理文件和目录
- en: Creating custom forms with the Form helper
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Form 辅助工具创建自定义表单
- en: Including a WYSIWYG editor on a form
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在表单上包含 WYSIWYG 编辑器
- en: Generating HTML code with the HTML helper
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 HTML 辅助工具生成 HTML 代码
- en: Generating and caching thumbnails with the Image helper
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Image 辅助工具生成和缓存缩略图
- en: Encoding and decoding JSON with the JSON helper
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 JSON 辅助工具进行 JSON 编码和解码
- en: Sending e-mails with the Mail helper
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Mail 辅助工具发送电子邮件
- en: Determining the MIME type of a file extension using the MIME helper
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 MIME 辅助工具确定文件扩展名的 MIME 类型
- en: Getting page URLs and breadcrumbs with the Navigation helper
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Navigation 辅助工具获取页面 URL 和面包屑
- en: Working with strings using the Text helper
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Text 辅助工具处理字符串
- en: Generating URLs with the URL helper
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 URL 辅助工具生成 URL
- en: Validating input data using the Validation helpers
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Validation 辅助工具验证输入数据
- en: Preventing spam using the Captcha helper
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Captcha 辅助工具防止垃圾邮件
- en: Getting a list of countries
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取国家的列表
- en: Getting a list of states and provinces
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取州和省的列表
- en: Showing a color picker on a form
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在表单上显示颜色选择器
- en: Showing a date/time selector on a form
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在表单上显示日期/时间选择器
- en: Showing a rating widget on a form
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在表单上显示评分小部件
- en: Using the banned words list
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用禁止使用的单词列表
- en: Reading and writing to the system cache
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 读取和写入系统缓存
- en: Writing to the debug log
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将信息写入调试日志
- en: Reading and writing to the configuration registry
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 读取和写入配置注册表
- en: Introduction
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: During the course of developing custom applications within the concrete5 content
    management system, you will likely find yourself having to perform certain tasks
    multiple times. Tasks such as creating custom forms, sending e-mails, or parsing
    RSS feeds can all be sped up by utilizing the Core helper classes included with
    concrete5.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发 concrete5 内容管理系统中的自定义应用程序的过程中，您可能会发现自己需要多次执行某些任务。例如，创建自定义表单、发送电子邮件或解析 RSS
    源等任务都可以通过使用 concrete5 内置的 Core 辅助类来加速。
- en: The concept of helpers in concrete5 might be familiar to developers who have
    previously worked with other popular MVC frameworks. Helpers are classes that
    provide miscellaneous, repeatable functionalities that can be used anywhere in
    your code. We will begin by showing how to load a helper class.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 中的辅助工具概念可能对之前在其他流行的 MVC 框架中工作过的开发者来说很熟悉。辅助工具是提供各种杂项、可重复功能的类，可以在代码的任何地方使用。我们将首先展示如何加载辅助类。
- en: A note about the code in this chapter
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于本章代码的说明
- en: As we've done in a few prior chapters, we will be making use of the `/config/site_post.php`
    file to run some arbitrary code. concrete5 doesn't have a great place to try out
    the API, so we will use `site_post` as our playground. Be sure to empty any experimental
    code before starting a new recipe, and perform all of these lessons on a development
    server.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在前几章中所做的那样，我们将使用 `/config/site_post.php` 文件来运行一些任意代码。concrete5 没有一个很好的地方来尝试
    API，所以我们将使用 `site_post` 作为我们的游乐场。在开始新的食谱之前，请确保清空任何实验性代码，并在开发服务器上执行所有这些课程。
- en: 'We will continue using the custom debugging function that we created in [Chapter
    1](ch01.html "Chapter 1. Pages and Page Types"), *Pages and Page Types*. Place
    the following function at the top of `site_post.php` if you''d like to follow
    along too:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将继续使用我们在[第1章](ch01.html "第1章。页面和页面类型")中创建的自定义调试函数，即“页面和页面类型”。如果您也想跟随，请将以下函数放置在
    `site_post.php` 的顶部：
- en: '[PRE0]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Of course, you're more than welcome to substitute our custom debugger with whatever
    you prefer.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，您完全可以替换我们的自定义调试器，使用您喜欢的任何工具。
- en: Loading a helper class
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 加载辅助类
- en: The `Loader` class in concrete5 is useful for loading many different types of
    files in concrete5\. We will use the `Loader` class to include and instantiate
    the Form helper.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 中的 `Loader` 类在加载 concrete5 中多种不同类型的文件时非常有用。我们将使用 `Loader` 类来包含和实例化
    Form 辅助工具。
- en: How to do it...
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到...
- en: Open `/config/site_post.php` in your code editor.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的代码编辑器中打开 `/config/site_post.php`。
- en: 'Make sure you know the "handle" of the helper that you wish to load. The handle
    is the name of the file that contains the helper class without the `.php` extension.
    As we want to load the Form helper, which exists at `/concrete/helpers/form.php`,
    the handle will be `form`:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你知道你想要加载的助手的 "handle"。handle 是包含助手类的文件名，不带 `.php` 扩展名。由于我们想要加载存在于 `/concrete/helpers/form.php`
    的表单助手，因此 handle 将是 `form`：
- en: '[PRE1]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Load the helper using the handle:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 handle 加载助手：
- en: '[PRE2]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Let''s double-check that the helper was loaded correctly by dumping the contents
    of the `$formHelper` variable:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们通过输出 `$formHelper` 变量的内容来检查助手是否正确加载：
- en: '[PRE3]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: How it works...
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `Loader` class includes PHP scripts, making it available for use. Also,
    when loading helpers, the included file will also be instantiated and returned,
    making it immediately available to use in your code.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '`Loader` 类包含 PHP 脚本，使其可用于使用。此外，当加载助手时，包含的文件也将被实例化并返回，使其立即可用于你的代码中。'
- en: There's more...
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多...
- en: 'If you need to load a helper that is included in an add-on package, simply
    provide the package handle as a second parameter when loading the helper:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要加载一个包含在附加包中的助手，只需在加载助手时提供一个包处理程序作为第二个参数：
- en: '[PRE4]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Using the Date helper
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用日期助手
- en: There are a number of date-related tasks that are simplified with the Date helper.
    We will look at a couple of ways to use the Date helper to assist in handling
    dates in your custom code.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 使用日期助手可以简化许多与日期相关的任务。我们将探讨使用日期助手来协助处理自定义代码中的日期的几种方法。
- en: Getting ready
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In this recipe, we will explore a couple of the functions of the Date helper.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在本菜谱中，我们将探索日期助手的一些功能。
- en: How to do it...
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Open `/config/site_post.php` in your editor.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的编辑器中打开 `/config/site_post.php`。
- en: 'Load the Date helper:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载日期助手：
- en: '[PRE5]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Get the user''s time:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取用户的时间：
- en: '[PRE6]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Get the system time:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取系统时间：
- en: '[PRE7]'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Get an array of timezones:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取时区数组：
- en: '[PRE8]'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Output each of these values to the screen:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将这些值输出到屏幕上：
- en: '[PRE9]'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: How it works...
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: concrete5 wraps functions from both PHP and the Zend framework to create single-line
    tasks that would normally take several lines of code.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 通过包装 PHP 和 Zend 框架的函数来创建单行任务，这些任务通常需要几行代码。
- en: Using the Encryption helper
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用加密助手
- en: concrete5 makes it easy for developers to encrypt and decrypt strings using
    the included Encryption helper. In this recipe, we will use the Encryption helper
    to encrypt and decrypt some strings.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 使得开发者可以使用包含的加密助手轻松地对字符串进行加密和解密。在本菜谱中，我们将使用加密助手来加密和解密一些字符串。
- en: Getting ready
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: The majority of web servers come built-in with it, but it is important to make
    sure your web server has `mcrypt` installed as it is required for this helper
    to work.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数 Web 服务器都内置了它，但确保你的 Web 服务器已安装 `mcrypt` 非常重要，因为它是此助手正常工作所必需的。
- en: How to do it...
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Open `/config/site_post.php` in your code editor.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的代码编辑器中打开 `/config/site_post.php`。
- en: 'Load the helper:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载助手：
- en: '[PRE10]'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Encrypt a basic string:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加密基本字符串：
- en: '[PRE11]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Output the encrypted string:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出加密的字符串：
- en: '[PRE12]'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Decrypt the encrypted string:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解密加密的字符串：
- en: '[PRE13]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Output the decrypted string:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出解密后的字符串：
- en: '[PRE14]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: How it works...
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Encryption helper wraps the `mcrypt` PHP extension, and encodes the encrypted
    text in a Base64 encoded string.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 加密助手包装 `mcrypt` PHP 扩展，并将加密文本编码为 Base64 编码的字符串。
- en: See also
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类* 菜谱'
- en: Loading an RSS feed with the Feed helper
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Feed 助手加载 RSS 源
- en: concrete5 comes with a third-party library called `SimplePie` that assists with
    parsing RSS feeds. The Feed helper wraps around the `SimplePie` library to provide
    a more convenient way to load RSS feeds.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 随附一个名为 `SimplePie` 的第三方库，该库有助于解析 RSS 源。Feed 助手围绕 `SimplePie` 库提供了一种更方便的加载
    RSS 源的方法。
- en: How to do it...
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Load the Feed helper:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载 Feed 助手：
- en: '[PRE15]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Define the URL of the RSS feed to load. We will load the news feed from Packt
    Publishing:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义要加载的 RSS 源的 URL。我们将加载 Packt Publishing 的新闻源：
- en: '[PRE16]'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Load the feed:'
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载源：
- en: '[PRE17]'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Dump the contents of the feed object to verify that it loaded correctly:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将源对象的内容输出以验证它是否正确加载：
- en: '[PRE18]'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: How it works...
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `load` function simply creates a new instance of the `SimplePie` class and
    loads the feed specified in the parameter. The `load` function then returns a
    `SimplePie` object based on the feed that was loaded.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '`load` 函数简单地创建 `SimplePie` 类的新实例并加载参数中指定的源。然后 `load` 函数返回一个基于加载的源的 `SimplePie`
    对象。'
- en: There's more...
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多...
- en: You can learn more about `SimplePie` and how to use the feed objects by visiting
    [http://simplepie.org](http://simplepie.org).
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过访问[http://simplepie.org](http://simplepie.org)了解更多关于`SimplePie`以及如何使用feed对象的信息。
- en: Managing files and directories with the File helper
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用文件助手管理文件和目录
- en: Working with files and directories that exist on the web server can sometimes
    be a tedious task. The concrete5 File helper provides convenience methods to make
    working with files and directories a much simpler task.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在网络服务器上处理已存在的文件和目录有时可能是一项繁琐的任务。concrete5文件助手提供了便利的方法，使得处理文件和目录变得更加简单。
- en: Getting ready
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: This exercise will deal a lot with hypothetical files and filenames. This is
    meant more as an exploration of the File helper API, so feel free to substitute
    some of the filenames here for actual files that exist in your system.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 这个练习将大量涉及假设的文件和文件名。这更多的是作为一个对文件助手API的探索，所以您可以随意将这里的一些文件名替换为您系统中的实际文件。
- en: How to do it...
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Load the File helper:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载文件助手：
- en: '[PRE19]'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Sanitize a filename so that it is suitable for saving:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清理文件名，使其适合保存：
- en: '[PRE20]'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Get the extension of a filename:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取文件名扩展名：
- en: '[PRE21]'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Change the extension of a file:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 修改文件的扩展名：
- en: '[PRE22]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Get a file''s contents:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取文件的全部内容：
- en: '[PRE23]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Force a file to download to the user''s computer:'
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 强制文件下载到用户的计算机：
- en: '[PRE24]'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Copy a directory''s contents to another directory:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将目录的内容复制到另一个目录：
- en: '[PRE25]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Delete all of the files in a directory:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除目录中的所有文件：
- en: '[PRE26]'
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: How it works...
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The File helper makes use of many of the built-in functions of PHP, such as
    `file_get_contents`, `unlink`, and `copy`. The helper takes these functions several
    steps further by wrapping them with additional logic to make most of these operations
    only require a single line of code.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 文件助手利用了PHP的许多内置函数，例如`file_get_contents`、`unlink`和`copy`。助手通过将这些函数包装在额外的逻辑中，使得大多数这些操作只需要一行代码。
- en: There's more...
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多...
- en: There are some other functions that the File helper provides, which can be discovered
    by viewing the source code of the file in `concrete/core/helpers/file.php`.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 文件助手还提供了一些其他功能，您可以通过查看`concrete/core/helpers/file.php`文件中的源代码来发现它们。
- en: See also
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**加载助手类**食谱'
- en: Creating custom forms with the Form helper
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用表单助手创建自定义表单
- en: Creating forms is one of the most common tasks that web developers are faced
    with on a regular basis. concrete5 provides the Form helper to make creating forms
    easy. In this recipe, we will create a feedback form using the Form helper.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 创建表单是网络开发者经常面临的最常见任务之一。concrete5提供了表单助手来简化创建表单的过程。在本食谱中，我们将使用表单助手创建一个反馈表单。
- en: Getting ready
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The code in this recipe will be inserted into a `<form>` element on our website.
    See the complete example code on the website for this book. Our form will contain
    the following fields:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱中的代码将被插入到我们网站上的`<form>`元素中。请参阅此书的网站上的完整示例代码。我们的表单将包含以下字段：
- en: '**Name** (text input)'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**（文本输入）'
- en: '**Email Address** (text input)'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**电子邮件地址**（文本输入）'
- en: '**Reason for Contacting** (select box)'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**联系原因**（选择框）'
- en: '**Message** (textarea)'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**消息**（文本区域）'
- en: How to do it...
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Create a new single page by adding a new file located at `/single_pages/example_form.php`.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过添加位于`/single_pages/example_form.php`的新文件来创建一个新的单页。
- en: Install the single page by visiting `/dashboard/pages/single` on your concrete5
    website. Enter `example_form` as the path for the new page.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过访问concrete5网站的`/dashboard/pages/single`来安装单页。将新页面的路径输入为`example_form`。
- en: 'Load the Form helper:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载表单助手：
- en: '[PRE27]'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Output the field for the **Name** input:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出**名称**输入字段：
- en: '[PRE28]'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Output the field for the **Email Address** input:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出**电子邮件地址**输入字段：
- en: '[PRE29]'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Create an associative array containing the options that will appear in the
    **Reason for Contacting** select box:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个包含将出现在**联系原因**选择框中的选项的关联数组：
- en: '[PRE30]'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Output the **Reason for Contacting** select box:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出**联系原因**选择框：
- en: '[PRE31]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Show the **Message** textarea:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 显示**消息**文本区域：
- en: '[PRE32]'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: How it works...
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Form helper's functions return HTML that can be directly inserted into your
    forms on the website. If you provide an extra parameter to these functions, you
    can pre-fill the field's value with whatever you like (unless the value is present
    in the HTTP request parameters, which in that case concrete5 will fill the field
    with that value). There are many benefits to creating forms this way, and one
    can save a lot of time by following the simple conventions presented here.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 表单助手的函数返回可以直接插入到网站表单中的HTML。如果您向这些函数提供额外的参数，您可以用您喜欢的任何内容预先填充字段的值（除非该值存在于HTTP请求参数中，在这种情况下，concrete5将用该值填充字段）。以这种方式创建表单有许多好处，并且可以通过遵循这里提出的简单约定节省大量时间。
- en: There's more...
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: There are many form elements that can be generated using the Form helper. Radio
    buttons, checkboxes, select elements, text inputs, and more. Refer to the Form
    helper class at `concrete/core/helpers/form.php` or visit the concrete5 developer's
    documentation at [http://www.concrete5.org/documentation/developers/forms/](http://www.concrete5.org/documentation/developers/forms/).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用表单助手生成许多表单元素。单选按钮、复选框、选择元素、文本输入等。请参阅`concrete/core/helpers/form.php`中的表单助手类或访问[http://www.concrete5.org/documentation/developers/forms/](http://www.concrete5.org/documentation/developers/forms/)的concrete5开发者文档。
- en: See also
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类*菜谱'
- en: Including a WYSIWYG editor on a form
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在表单中包含一个WYSIWYG编辑器
- en: concrete5, being a content management system, comes with built-in **What You
    See Is What You Get** (**WYSIWYG**) editors, specifically, a popular open source
    editor called **TinyMCE**. Developers can include this editor in their custom
    HTML forms. In this recipe, we will add a WYSIWYG editor to the form that we created
    in the previous recipe.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5作为一个内容管理系统，内置了**所见即所得**（**WYSIWYG**）编辑器，具体来说，是一个流行的开源编辑器，称为**TinyMCE**。开发者可以将此编辑器包含在他们的自定义HTML表单中。在这个菜谱中，我们将向我们在前一个菜谱中创建的表单添加一个WYSIWYG编辑器。
- en: Getting ready
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will be building upon the form that was created in the previous recipe. The
    free code download from this book's website will give you a good starting point
    if you need to catch up.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在前一个菜谱中创建的表单基础上进行构建。如果您需要赶上进度，本书网站上的免费代码下载将为您提供一个良好的起点。
- en: How to do it...
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Open `/single_pages/example_form.php`.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开`/single_pages/example_form.php`。
- en: 'At the top of the file, include the JavaScript element to initialize the editor:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件顶部，包含初始化编辑器的JavaScript元素：
- en: '[PRE33]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Below that, include the default TinyMCE configuration element:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下面，包含默认的TinyMCE配置元素：
- en: '[PRE34]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Above the existing textarea output, load the element containing the editor''s
    controls:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在现有的文本区域输出上方，加载包含编辑器控制元素的元素：
- en: '[PRE35]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Replace the existing textarea output with a new one:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用新的文本区域替换现有的输出：
- en: '[PRE36]'
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '![How to do it...](img/4548OS_04_01.jpg)'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何做...](img/4548OS_04_01.jpg)'
- en: How it works...
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The modified TinyMCE editor that concrete5 uses requires a lot of JavaScript
    to be in place before it can be included on a web page. concrete5 elements contain
    repeatable blocks of HTML, (or CSS and JavaScript in the form of `<style>` and
    `<script>` tags). At the top of our form, we include the elements with the TinyMCE
    JavaScript and the configuration settings.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5使用的修改后的TinyMCE编辑器需要在网页上包含大量的JavaScript之前才能使用。concrete5元素包含可重复的HTML块（或以`<style>`和`<script>`标签形式存在的CSS和JavaScript）。在我们的表单顶部，我们包括包含TinyMCE
    JavaScript和配置设置的元素。
- en: It's optional, but it's a good idea to include the editor's control elements
    right above the textarea that will become the WYSIWYG editor. These controls have
    concrete5-specific functions, such as inserting links to pages in the site map
    or including images from the file manager. Note that as these controls mainly
    provide functionality relevant to site editors, these controls are better suited
    for backend forms, rather than use by end users.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 这不是必需的，但将编辑器的控制元素放在将成为WYSIWYG编辑器的文本区域上方是一个好主意。这些控件具有concrete5特定的功能，例如在网站地图中插入页面链接或从文件管理器中包含图片。请注意，由于这些控件主要提供与网站编辑器相关的功能，因此这些控件更适合用于后端表单，而不是供最终用户使用。
- en: Finally, we output a regular textarea element, but with a class of `ccm-advanced-editor`,
    which tells TinyMCE to turn this into a WYSIWYG editor.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们输出一个普通的文本区域元素，但带有`ccm-advanced-editor`类，这告诉TinyMCE将其转换为所见即所得编辑器。
- en: See also
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Creating custom forms with the Form helper* recipe
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用表单助手创建自定义表单*菜谱'
- en: Generating HTML code with the HTML helper
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用HTML助手生成HTML代码
- en: In many situations, you will want to avoid writing HTML strings in your PHP
    server-side code, as it can really clutter your code and make it harder to read.
    The HTML helper in concrete5 can help you avoid that by providing a nice, object
    oriented way to generate HTML code.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，您会希望避免在PHP服务器端代码中编写HTML字符串，因为它真的会弄乱您的代码并使其更难阅读。concrete5中的HTML助手可以通过提供一种优雅的面向对象的方式来生成HTML代码，帮助您避免这种情况。
- en: Getting ready
  id: totrans-183
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: This recipe assumes that `/css/example.css`, `/js/example.js`, and `/images/icon.png`
    all exist on your site. You can perform this recipe without those files existing,
    concrete5 will simply output a path to those non-existent files.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 此配方假定`/css/example.css`、`/js/example.js`和`/images/icon.png`都存在于您的网站上。即使这些文件不存在，您也可以执行此配方，concrete5将简单地输出这些不存在文件的路径。
- en: How to do it...
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Make the HTML helper available for use:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使HTML助手可用于使用：
- en: '[PRE37]'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Output a CSS `<link>` tag, linking to a CSS file stored at `/css/example.css`:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出一个CSS `<link>`标签，链接到存储在`/css/example.css`的CSS文件：
- en: '[PRE38]'
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Output a JavaScript `<script>` tag, setting the `src` attribute to a file that
    exists at `/js/example.js`:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出一个JavaScript `<script>`标签，将`src`属性设置为位于`/js/example.js`的文件：
- en: '[PRE39]'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Output an image `<img>` tag, showing an image that is stored at `/images/icon.png`:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出一个图像`<img>`标签，显示存储在`/images/icon.png`的图像：
- en: '[PRE40]'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: How it works...
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: concrete5 will recursively look through several directories to find the appropriate
    files that you need. It will then wrap the source path in the appropriate tag,
    whether it is a script, a CSS link, or an image.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5会递归地查找几个目录以找到所需的文件。然后，它会将源路径包裹在适当的标签中，无论是脚本、CSS链接还是图像。
- en: See also
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: The *Loading a helper class* recipe
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类*的配方'
- en: Generating and caching thumbnails with the Image helper
  id: totrans-198
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Image助手生成和缓存缩略图
- en: Many types of applications make use of thumbnails to display representations
    of larger images. This allows users to see many images on one page without having
    to wait for several large file sizes of images to load.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 许多类型的应用程序使用缩略图来显示大图像的表示。这使用户能够在不等待多个大文件大小的图像加载的情况下，在一页上查看多个图像。
- en: Getting ready
  id: totrans-200
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: The Image helper's thumbnail generator accepts a `File` object, so make sure
    to refer to [Chapter 3](ch03.html "Chapter 3. Files and File Sets"), *Files and
    File Sets*, to know how to get those loaded.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: Image助手的缩略图生成器接受一个`File`对象，因此请确保参考[第3章](ch03.html "第3章。文件和文件集"，*文件和文件集*)，了解如何加载这些文件。
- en: How to do it...
  id: totrans-202
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Open `/config/site_post.php` in your code editor.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的代码编辑器中打开`/config/site_post.php`。
- en: 'Load the Image helper:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载Image助手：
- en: '[PRE41]'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'Load the `File` object that we want to create a thumbnail of. This should be
    an image (JPEG, PNG, or GIF) and should exist in the File Manager. We will use
    the ID of `1` for our example image:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载我们想要创建缩略图的`File`对象。这应该是一个图像（JPEG、PNG或GIF），并且应该存在于文件管理器中。我们将使用示例图像的ID为`1`：
- en: '[PRE42]'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Generate a thumbnail with a height and width of 100 pixels, and crop the image
    to fit:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成一个高度和宽度为100像素的缩略图，并裁剪图像以适应：
- en: '[PRE43]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Echo the thumbnail image''s source location:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回显缩略图的源位置：
- en: '[PRE44]'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: How it works...
  id: totrans-212
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Image helper will take the `File` object (or file path string) and first
    check to see if a thumbnail of that size has already been created. If it has,
    it will serve that thumbnail from the cache. If the thumbnail does not exist,
    concrete5 will use the `gd` PHP extension to resize and crop the image (if the
    fourth parameter is specified and set to `true`) and then save the new copy to
    the cache.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: Image助手将获取`File`对象（或文件路径字符串），首先检查是否已创建该大小的缩略图。如果已创建，它将从缓存中提供该缩略图。如果缩略图不存在，concrete5将使用`gd`PHP扩展来调整图像大小和裁剪（如果第四个参数指定并设置为`true`），然后将新副本保存到缓存中。
- en: The helper returns a standard class object that has a few properties, `src`,
    `height`, and `width`. In this example, we are interested in the `src` property.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 助手返回一个具有几个属性的标准类对象，包括`src`、`height`和`width`。在这个例子中，我们关注的是`src`属性。
- en: There's more...
  id: totrans-215
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'You can have the Image helper applications output a thumbnail already wrapped
    in an `<img>` tag by simply calling the following:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过调用以下代码使Image助手应用输出已包裹在`<img>`标签中的缩略图：
- en: '[PRE45]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: See also
  id: totrans-218
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: The *Loading a file by its ID* recipe in [Chapter 3](ch03.html "Chapter 3. Files
    and File Sets"), *Files and File Sets*
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第3章中关于“通过ID加载文件”的配方，*文件和文件集*，*加载文件*
- en: The *Loading a helper class* recipe
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类*的配方'
- en: Encoding and decoding JSON with the JSON helper
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用JSON助手进行JSON编码和解码
- en: Most PHP installations include handy JSON functions such as `encode_json` and
    `decode_json`, which allows developers to easily generate JSON data to pass through
    to the user's browser. concrete5 includes the JSON helpers to allow you to encode
    and decode JSON even on systems that do not have those functions available. This
    is particularly useful if you are developing an add-on that will run on several
    different types of environments.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数 PHP 安装都包括方便的 JSON 函数，如 `encode_json` 和 `decode_json`，这允许开发者轻松生成 JSON 数据以传递给用户的浏览器。concrete5
    包含 JSON 助手，允许你在没有这些函数的系统中进行编码和解码 JSON。这对于开发将在多个不同环境中运行的插件尤其有用。
- en: How to do it...
  id: totrans-223
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Load the JSON helper:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载 JSON 助手：
- en: '[PRE46]'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Create an array that will be converted to a JSON string:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个将被转换为 JSON 字符串的数组：
- en: '[PRE47]'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Encode the array into a JSON string:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数组编码为 JSON 字符串：
- en: '[PRE48]'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Decode the JSON string back to an object:'
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 JSON 字符串解码回对象：
- en: '[PRE49]'
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: How it works...
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: If the native JSON functions are present, these helper functions will simply
    wrap around those. On environments where the JSON encode and decode functions
    are unavailable, concrete5 will use a third-party JSON library to facilitate the
    encoding and decoding of the JSON strings.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 如果存在本机 JSON 函数，这些助手函数将简单地围绕它们包装。在 JSON 编码和解码函数不可用的环境中，concrete5 将使用第三方 JSON
    库来促进 JSON 字符串的编码和解码。
- en: See also
  id: totrans-234
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类* 的配方'
- en: Sending e-mails with the Mail helper
  id: totrans-236
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用邮件助手发送电子邮件
- en: The ability to send e-mails from your web app can add a great layer of functionality
    to the end user. In this recipe, we will send an e-mail out with a simple subject
    and body.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 从您的网络应用中发送电子邮件的能力可以为最终用户添加一层强大的功能。在这个配方中，我们将使用简单的主题和正文发送电子邮件。
- en: How to do it...
  id: totrans-238
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Load the Mail helper:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载邮件助手：
- en: '[PRE50]'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Specify the e-mail address that we wish to send the e-mail to:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定我们希望发送电子邮件的地址：
- en: '[PRE51]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Specify the e-mail address that this e-mail is from (and who the recipient
    can reply to):'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定此电子邮件的发送地址（以及收件人可以回复的人）：
- en: '[PRE52]'
  id: totrans-244
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Set the subject line of the e-mail:'
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置电子邮件的主题行：
- en: '[PRE53]'
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Set the message body:'
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置邮件正文：
- en: '[PRE54]'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Send the e-mail:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发送电子邮件：
- en: '[PRE55]'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: How it works...
  id: totrans-251
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Mail helper wraps around the `Zend_Mail` object, which is part of the Zend
    framework that concrete5 is built upon. The Mail helper will obey the concrete5
    installation's settings, to send mails either by using PHP's built-in mail function,
    or by using an external SMTP server.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 邮件助手围绕 `Zend_Mail` 对象，这是 concrete5 构建在之上的 Zend 框架的一部分。邮件助手将遵守 concrete5 安装设置，通过使用
    PHP 内置的邮件函数或使用外部 SMTP 服务器来发送邮件。
- en: There's more...
  id: totrans-253
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'You can send e-mails with templates, HTML text, and more with the Mail helper.
    Mail templates can be stored in the `/mail` directory of your concrete5 website.
    The following an example template that would exist at `/mail/test.php`:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用邮件助手发送带有模板、HTML文本等电子邮件。邮件模板可以存储在您的 concrete5 网站的 `/mail` 目录中。以下是一个示例模板，它将存在于
    `/mail/test.php`：
- en: '[PRE56]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Notice how in this template, we refer to a variable called `$name`. To pass
    that variable into the template, call the `addParameter` function of the Mail
    helper:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 注意在这个模板中，我们引用了一个名为 `$name` 的变量。要将该变量传递到模板中，请调用邮件助手的 `addParameter` 函数：
- en: '[PRE57]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'To load the template and apply extra parameters, call the `load` function just
    before sending. Remember that our template exists at `/mail/test.php`:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 为了加载模板并应用额外参数，请在发送前调用 `load` 函数。请记住，我们的模板位于 `/mail/test.php`：
- en: '[PRE58]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: See also
  id: totrans-260
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类* 的配方'
- en: Determining the MIME type of a file extension using the MIME helper
  id: totrans-262
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 MIME 助手确定文件扩展名的 MIME 类型
- en: concrete5 can easily determine the **Multipurpose Internet Mail Extensions**
    (**MIME**) type of a file using the MIME helper.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 可以轻松地使用 MIME 助手确定文件的 **多用途互联网邮件扩展**（**MIME**）类型。
- en: How to do it...
  id: totrans-264
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Load the MIME helper:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载 MIME 助手：
- en: '[PRE59]'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Determine the MIME type of a JavaScript file:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定JavaScript文件的内容类型：
- en: '[PRE60]'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Verify that the MIME type is correct:'
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证 MIME 类型是否正确：
- en: '[PRE61]'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: How it works...
  id: totrans-271
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The MIME helper contains an array of several common MIME types and their related
    extensions. When you give the MIME helper an extension to find, it will simply
    find the related MIME type and return it to you.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: MIME 助手包含一个常见 MIME 类型及其相关扩展的数组。当你给 MIME 助手一个扩展来查找时，它将简单地找到相关的 MIME 类型并将其返回给你。
- en: There's more...
  id: totrans-273
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'The MIME helper can also return the file extension of a given MIME type:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: MIME 助手还可以返回给定 MIME 类型的文件扩展名：
- en: '[PRE62]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: See also
  id: totrans-276
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类*配方'
- en: Getting page URLs and breadcrumbs with the Navigation helper
  id: totrans-278
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用导航助手获取页面URL和面包屑
- en: 'The Navigation helper can assist with two very important functions: getting
    accurate page URLs and generating a breadcrumb trail for a given `Page` object.'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 导航助手可以协助执行两个非常重要的功能：获取准确的页面URL和为给定的`Page`对象生成面包屑路径。
- en: Getting ready
  id: totrans-280
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will need to load a `Page` object and pass it to the Navigation helper, so
    make sure you are familiar with that.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要加载一个`Page`对象并将其传递给导航助手，所以请确保您熟悉这一点。
- en: How to do it...
  id: totrans-282
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Load the Navigation helper:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载导航助手：
- en: '[PRE63]'
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'Load the `Page` object that we are going to work with. In this example, we
    will use a page located at `example.com/about-us`:'
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载我们将要处理的`Page`对象。在这个示例中，我们将使用位于`example.com/about-us`的页面：
- en: '[PRE64]'
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Get the URL for the page:'
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取页面的URL：
- en: '[PRE65]'
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'Get an array of breadcrumb items (as `Page` objects) for the given page:'
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取给定页面的面包屑项数组（作为`Page`对象）：
- en: '[PRE66]'
  id: totrans-290
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: How it works...
  id: totrans-291
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Navigation helper checks your configuration settings and appends any base
    URLs or rewriting logic to the page's collection path. For breadcrumbs, the helper
    recursively travels up the sitemap from the given page to find all of the parent
    pages above it.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 导航助手检查您的配置设置，并将任何基本URL或重写逻辑附加到页面集合路径上。对于面包屑，助手会从给定页面开始递归遍历网站地图，以找到其上方的所有父页面。
- en: See also
  id: totrans-293
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: The *Loading a helper class* recipe
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类*配方'
- en: The *Getting a Page object by its path* recipe in [Chapter 1](ch01.html "Chapter 1. Pages
    and Page Types"), *Pages and Page Types*
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第1章](ch01.html "第1章。页面和页面类型")的*通过路径获取页面对象*配方中，*页面和页面类型*
- en: Working with strings using the Text helper
  id: totrans-296
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用文本助手处理字符串
- en: Another useful helper that concrete5 provides is the Text helper. The Text helper
    lets you perform several common (and sometimes complex) operations on strings
    with very little code.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5提供的另一个有用助手是文本助手。文本助手允许您使用非常少的代码在字符串上执行几个常见（有时复杂）的操作。
- en: How to do it...
  id: totrans-298
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Load the Text helper:'
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载文本助手：
- en: '[PRE67]'
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Create a string to use for the example:'
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个用于示例的字符串：
- en: '[PRE68]'
  id: totrans-302
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'CamelCase a string (CamelCase):'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将字符串转换为驼峰式命名（CamelCase）：
- en: '[PRE69]'
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'Un-CamelCase that string:'
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将字符串转换为非驼峰式命名：
- en: '[PRE70]'
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Create a URL-friendly string with hyphens:'
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个带有短横线的URL友好字符串：
- en: '[PRE71]'
  id: totrans-308
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'Create an underscored handle:'
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个下划线命名的处理程序：
- en: '[PRE72]'
  id: totrans-310
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Remove all non-alphanumeric characters:'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除所有非字母数字字符：
- en: '[PRE73]'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE73]'
- en: How it works...
  id: totrans-313
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Text helper wraps around several built-in PHP functions, as well as some
    third-party libraries to provide convenient, one-line functions that allow you
    to modify your text quickly and easily.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 文本助手围绕几个内置的PHP函数以及一些第三方库，提供方便的、一行代码的函数，允许您快速轻松地修改文本。
- en: There's more...
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The Text helper has a few other useful functions that are beyond the scope of
    this recipe, such as automatically creating links out of any URLs in a string
    or even automatically linking to Twitter handles. It is recommended that developers
    explore the source code of the Text helper to see some of the more niche functionality
    that it provides.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 文本助手还有一些其他有用的函数，这些函数超出了本配方的作用范围，例如自动从字符串中的任何URL创建链接，甚至自动链接到Twitter账号。建议开发者探索文本助手的源代码，以了解它提供的更多特定功能。
- en: See also
  id: totrans-317
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: The *Loading a helper class* recipe
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类*配方'
- en: Generating URLs with the URL helper
  id: totrans-319
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用URL助手生成URL
- en: The URL helper can generate URLs using some simple functions.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: URL助手可以使用一些简单的函数生成URL。
- en: How to do it...
  id: totrans-321
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Load the URL helper:'
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载URL助手：
- en: '[PRE74]'
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Create an array that contains the URL parameters that we want to pass in. We
    will just make some stuff up for this example:'
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个包含我们想要传递的URL参数的数组。我们将在这个示例中随意创建一些内容：
- en: '[PRE75]'
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'Build the URL:'
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建URL：
- en: '[PRE76]'
  id: totrans-327
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'Output the URL to see the result:'
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出URL以查看结果：
- en: '[PRE77]'
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE77]'
- en: How it works...
  id: totrans-330
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: This function makes use of PHP's `http_build_query` function that can generate
    valid URLs when given an array of parameters.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数使用了PHP的`http_build_query`函数，该函数可以在给定参数数组时生成有效的URL。
- en: There's more...
  id: totrans-332
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The URL helper also has a function to create a shortened URL using the TinyURL
    service.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: URL助手还有一个使用TinyURL服务创建短URL的函数。
- en: '[PRE78]'
  id: totrans-334
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: See also
  id: totrans-335
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: The *Loading a helper class* recipe
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类*配方'
- en: Validating input data using the Validation helpers
  id: totrans-337
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用验证助手验证输入数据
- en: When building an application that accepts user data, it is definitely a good
    idea to make sure that users are filling out all of the required fields on a form.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 当构建接受用户数据的应用程序时，确保用户填写了表单上的所有必需字段绝对是一个好主意。
- en: Getting ready
  id: totrans-339
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Consider a comment form that has the following fields: Name, Email, Website,
    and Comment content. The name, e-mail, and content fields are required, but the
    website field is optional. We will use the Validation helper to determine if the
    user filled out all of the required fields.'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个包含以下字段的评论表单：姓名、电子邮件、网站和评论内容。姓名、电子邮件和内容字段是必需的，但网站字段是可选的。我们将使用验证助手来确定用户是否填写了所有必需的字段。
- en: How to do it...
  id: totrans-341
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Load the Validation helper:'
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载验证助手：
- en: '[PRE79]'
  id: totrans-343
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'Let''s create an array to simulate the data that would be contained in the
    `POST` request (via the `$_POST` super global). We will intentionally leave `email`
    blank to see how the Validation helper behaves when a test fails:'
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们创建一个数组来模拟 `POST` 请求（通过 `$_POST` 超全局变量）中包含的数据。我们将故意留空 `email` 以查看验证助手在测试失败时的行为：
- en: '[PRE80]'
  id: totrans-345
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'Pass the array to the Validation helper so that it knows what to validate against:'
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数组传递给验证助手，以便它知道要验证什么：
- en: '[PRE81]'
  id: totrans-347
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'Specify the fields that are required, with error messages for each one:'
  id: totrans-348
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定必需的字段，并为每个字段提供错误信息：
- en: '[PRE82]'
  id: totrans-349
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: Test the array to see if it passes the requirements.
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试数组以查看它是否满足要求。
- en: '[PRE83]'
  id: totrans-351
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE83]'
- en: How it works...
  id: totrans-352
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Validation helper is pretty basic in terms of functionality, it essentially
    checks for the presence of a given variable in the data array, and makes sure
    that it has some sort of value. Notice the use of `addRequiredEmail` in step 4\.
    This function makes sure the e-mail address is present and also verifies that
    it is a proper e-mail address (not just any string).
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 在功能方面，验证助手相当基础，它基本上检查数据数组中是否存在某个变量，并确保它具有某种类型的值。注意步骤 4 中的 `addRequiredEmail`
    的使用。这个函数确保电子邮件地址存在，并验证它是一个有效的电子邮件地址（而不仅仅是任何字符串）。
- en: The `getError` function on the Validation helper returns a `ValidationErrorHelper`
    object that has a function called `getList` that can provide an easy-to-use array
    of error messages.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 验证助手上的 `getError` 函数返回一个 `ValidationErrorHelper` 对象，该对象有一个名为 `getList` 的函数，可以提供一个易于使用的错误信息数组。
- en: There's more...
  id: totrans-355
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'In addition to testing for regular strings and e-mails, you can also test for
    integer values:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 除了测试常规字符串和电子邮件，你还可以测试整数值：
- en: '[PRE84]'
  id: totrans-357
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: See also
  id: totrans-358
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类* 的配方'
- en: Preventing spam using the Captcha helper
  id: totrans-360
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用验证码助手防止垃圾邮件
- en: As most web developers who have ever published a form online know, spam is an
    annoying and potentially damaging issue for site owners. concrete5 can help mitigate
    this problem with a built-in Captcha helper that can verify that form submissions
    are coming from humans, rather than automated scripts.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 如大多数曾经在线发布表单的网页开发者所知，垃圾邮件对网站所有者来说是一个令人烦恼且可能造成损害的问题。concrete5 可以通过内置的验证码助手帮助减轻这个问题，该助手可以验证表单提交是否来自人类，而不是自动化脚本。
- en: Getting ready
  id: totrans-362
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: This recipe will explain how to use the Captcha helper. Typically, you will
    use this helper in the HTML views that your end-user would see (single page views,
    block views, and so on). An example of this helper in the context of a single
    page is included in the book's code download.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 这个配方将解释如何使用验证码助手。通常，你将在你的最终用户会看到的 HTML 视图中使用这个助手（单页视图、块视图等）。书中代码下载中包含了这个助手在单页上下文中的一个示例。
- en: How to do it...
  id: totrans-364
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Load the Captcha helper:'
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载验证码助手：
- en: '[PRE85]'
  id: totrans-366
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'At the bottom of your form, display the CAPTCHA image and the input to allow
    the user to solve it:'
  id: totrans-367
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在表单底部显示 CAPTCHA 图像和输入，以便用户解决它：
- en: '[PRE86]'
  id: totrans-368
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'In the server-side code that processes the form submission, verify that the
    CAPTCHA was solved correctly:'
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在处理表单提交的服务器端代码中，验证 CAPTCHA 是否正确解决：
- en: '[PRE87]'
  id: totrans-370
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE87]'
- en: How it works...
  id: totrans-371
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Captcha helper takes advantage of a third-party library called `SecureImage`
    to generate the CAPTCHA images and related logic. If the user types the word in
    the image correctly, the `check` function will return `true`, and you can continue
    processing the form submission.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 验证码助手利用名为 `SecureImage` 的第三方库来生成 CAPTCHA 图像和相关逻辑。如果用户正确地输入了图像中的单词，`check` 函数将返回
    `true`，然后你可以继续处理表单提交。
- en: See also
  id: totrans-373
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-374
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载助手类* 的配方'
- en: Getting a list of countries
  id: totrans-375
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取国家列表
- en: Many times, web developers find themselves needing to provide a list of countries
    to users. Rather than hunt down this data or even manually assemble the data,
    concrete5 provides a helper to generate a list of all of the countries of the
    world. In this recipe, we will take the country list and create a `<select>` element
    that can be placed in a form, allowing users to select a country.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 许多时候，网络开发者发现自己需要向用户提供国家列表。而不是寻找这些数据或甚至手动组装数据，concrete5 提供了一个辅助器来生成世界上所有国家的列表。在这个菜谱中，我们将使用国家列表并创建一个可以放置在表单中的
    `<select>` 元素，允许用户选择一个国家。
- en: How to do it...
  id: totrans-377
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Create a single page at `/single_pages/example_form.php`.
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `/single_pages/example_form.php` 创建一个单个页面。
- en: Install the single page by visiting `/dashboard/pages/single` and typing `example_form`
    in the path input.
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过访问 `/dashboard/pages/single` 并在路径输入中键入 `example_form` 来安装单个页面。
- en: Open `/single_pages/example_form.php` in your code editor.
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的代码编辑器中打开 `/single_pages/example_form.php`。
- en: 'At the top of the file, load the country list helper:'
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件顶部加载国家列表辅助器：
- en: '[PRE88]'
  id: totrans-382
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'Get the array of the available countries:'
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取可用国家的数组：
- en: '[PRE89]'
  id: totrans-384
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'Load the Form helper:'
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载 Form 辅助器：
- en: '[PRE90]'
  id: totrans-386
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'Create an HTML form that contains a select element with all of the countries:'
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个包含所有国家的 `<select>` 元素的 HTML 表单：
- en: '[PRE91]'
  id: totrans-388
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE91]'
- en: How it works...
  id: totrans-389
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: concrete5 takes the heavy lifting of assembling and maintaining a list of countries
    and builds it into the core list helper. The country's two-character code is provided
    as the array key, and the full name string as the value.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 承担了组装和维护国家列表的重任，并将其构建到核心列表辅助器中。国家的两位字符代码作为数组键提供，完整名称字符串作为值。
- en: See also
  id: totrans-391
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关链接
- en: The *Loading a helper class* recipe
  id: totrans-392
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载辅助类* 菜单'
- en: The *Creating custom forms with the Form helper* recipe
  id: totrans-393
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用 Form 辅助器创建自定义表单* 菜单'
- en: Getting a list of states and provinces
  id: totrans-394
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取州和省的列表
- en: In addition to providing lists of countries, concrete5 can also provide lists
    of states, provinces, and counties, for the countries in which such a list is
    applicable.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 除了提供国家列表之外，concrete5 还可以提供适用于有此类列表的国家列表、州、省和县。
- en: In this recipe, we will get a list of all of the counties of the United Kingdom
    and present them in a `<select>` input.
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将获取英国所有县的列表并将它们呈现为 `<select>` 输入。
- en: How to do it...
  id: totrans-397
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: If it doesn't exist, create a single page at `/single_pages/example_form.php`.
  id: totrans-398
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果它还不存在，在 `/single_pages/example_form.php` 创建一个单个页面。
- en: 'Load the List helper:'
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载 List 辅助器：
- en: '[PRE92]'
  id: totrans-400
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'Get the list of counties in the UK:'
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取英国的县列表：
- en: '[PRE93]'
  id: totrans-402
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'Load the Form helper:'
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载 Form 辅助器：
- en: '[PRE94]'
  id: totrans-404
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'Create an HTML form that has a `<select>` element containing the list of counties:'
  id: totrans-405
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个包含县列表的 `<select>` 元素的 HTML 表单：
- en: '[PRE95]'
  id: totrans-406
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE95]'
- en: How it works...
  id: totrans-407
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The state/province List helper works much like the Country helper, in that the
    concrete5 team has assembled a list of states/counties/provinces for various counties
    that can be accessed by providing the two-character code.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 状态/县/省列表辅助器与国家辅助器的工作方式非常相似，因为 concrete5 团队为各种国家组装了一个州/县/省列表，可以通过提供两位字符代码来访问。
- en: There's more...
  id: totrans-409
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'If you want to get all of the states and provinces stored in the helper, you
    can use the following code:'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想获取存储在辅助器中的所有州和省，可以使用以下代码：
- en: '[PRE96]'
  id: totrans-411
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: See also
  id: totrans-412
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关链接
- en: The c*Loading a helper class* recipe
  id: totrans-413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载辅助类* 菜单'
- en: The *Creating custom forms with the Form helper* recipe
  id: totrans-414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用 Form 辅助器创建自定义表单* 菜单'
- en: Showing a color picker on a form
  id: totrans-415
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在表单上显示颜色选择器
- en: concrete5 provides helpers to generate standard HTML form elements, but what
    about applications that need to allow users to pick a color? For those applications,
    concrete5 includes a color picker helper as well!
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 提供辅助器来生成标准的 HTML 表单元素，但对于需要允许用户选择颜色的应用程序怎么办？对于这些应用程序，concrete5 也包含一个颜色选择器辅助器！
- en: Getting ready
  id: totrans-417
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: The color picker relies on jQuery UI, which isn't automatically included in
    concrete5, unless you are logged in as an administrator. Be sure to include jQuery
    UI's JavaScript and CSS files on the page if you use the color picker on the frontend
    of the site.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 颜色选择器依赖于 jQuery UI，除非你以管理员身份登录，否则它不会自动包含在 concrete5 中。如果你在网站的前端使用颜色选择器，请确保在页面上包含
    jQuery UI 的 JavaScript 和 CSS 文件。
- en: How to do it...
  id: totrans-419
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: If it doesn't already exist, create a single page at `/single_pages/example_form.php`.
  id: totrans-420
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果它还不存在，在 `/single_pages/example_form.php` 创建一个单个页面。
- en: Install this single page on the dashboard if need be.
  id: totrans-421
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，在仪表板上安装此单个页面。
- en: 'Load the color picker helper at the top of the file:'
  id: totrans-422
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件顶部加载颜色选择器辅助器：
- en: '[PRE97]'
  id: totrans-423
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'Output the color picker widget in an HTML form element:'
  id: totrans-424
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 HTML 表单元素中输出颜色选择器小部件：
- en: '[PRE98]'
  id: totrans-425
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE98]'
- en: How it works...
  id: totrans-426
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: concrete5 will generate the HTML and JavaScript necessary to provide an interactive
    color picker widget. The first parameter passed to the `output` function is the
    name of the field, which is how the value will be accessed once the form is submitted.
    The second parameter is the text that will appear in a `<label>` element next
    to the color picker.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 将生成必要的 HTML 和 JavaScript，以提供交互式颜色选择器小部件。传递给 `output` 函数的第一个参数是字段的名称，这是表单提交后访问值的方式。第二个参数是将在颜色选择器旁边的
    `<label>` 元素中出现的文本。
- en: See also
  id: totrans-428
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载辅助类* 菜谱'
- en: Showing a date/time selector on a form
  id: totrans-430
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在表单上显示日期/时间选择器
- en: A very common user experience when using web apps that require date inputs is
    to have the users choose the date on an interactive calendar, rather than typing
    the full date. concrete5 provides a helper to generate such widgets with ease.
    In this recipe, we will generate a date picker that will show a mini-calendar
    to allow users to choose a date.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 使用需要日期输入的 Web 应用程序时，一个非常常见的用户体验是让用户在交互式日历中选择日期，而不是输入完整的日期。concrete5 提供一个辅助工具，可以轻松生成此类小部件。在这个菜谱中，我们将生成一个日期选择器，它将显示迷你日历来允许用户选择日期。
- en: Getting ready
  id: totrans-432
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: concrete5 only automatically includes the JavaScript files for jQuery UI when
    users are logged in as administrators. If you wish to use the date picker in areas
    of the site where non-administrators can use it, be sure to include the jQuery
    UI JavaScript and CSS files in the page.
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 仅在用户以管理员身份登录时自动包含 jQuery UI 的 JavaScript 文件。如果您希望在非管理员可以使用的网站区域使用日期选择器，请确保在页面中包含
    jQuery UI JavaScript 和 CSS 文件。
- en: How to do it...
  id: totrans-434
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Create a single page at `/single_pages/example_form.php` if it doesn't already
    exist.
  id: totrans-435
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果单个页面 `/single_pages/example_form.php` 还不存在，请创建一个。
- en: Be sure to install the single page on the dashboard by visiting `/dashboard/pages/single`.
  id: totrans-436
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请确保通过访问 `/dashboard/pages/single` 来在仪表板上安装单个页面。
- en: 'Load the date/time helper:'
  id: totrans-437
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载日期/时间辅助工具：
- en: '[PRE99]'
  id: totrans-438
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'Output the date picker into an HTML form:'
  id: totrans-439
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将日期选择器输出到 HTML 表单中：
- en: '[PRE100]'
  id: totrans-440
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE100]'
- en: How it works...
  id: totrans-441
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: concrete5 makes use of the jQuery UI library to generate the JavaScript and
    CSS necessary to create an interactive date picker. The date/time helper generates
    all of the necessary boilerplate HTML and JavaScript, which makes using date pickers
    a very simple process.
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 使用 jQuery UI 库生成创建交互式日期选择器所需的 JavaScript 和 CSS。日期/时间辅助工具生成所有必要的样板
    HTML 和 JavaScript，这使得使用日期选择器变得非常简单。
- en: There's more...
  id: totrans-443
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'Sometimes developers will need to provide users with an interface to also select
    a time to go along with the date. This is simply a matter of calling a different
    function on the date/time helper:'
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: 有时开发者需要为用户提供一个界面，以便同时选择与日期一起的时间。这只是一个在日期/时间辅助工具上调用不同函数的问题：
- en: '[PRE101]'
  id: totrans-445
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: See also
  id: totrans-446
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载辅助类* 菜谱'
- en: Showing a rating widget on a form
  id: totrans-448
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在表单上显示评分小部件
- en: Modern web applications provide a set of star icons for users to click on, providing
    a "rating" of a given item. It is simple to include these types of UI components
    in concrete5 applications using the Rating helper.
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: 现代网络应用程序提供一组星形图标供用户点击，为给定项目提供“评分”。在 concrete5 应用程序中使用评分辅助工具包含这些类型的 UI 组件非常简单。
- en: How to do it...
  id: totrans-450
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Create a single page at `/single_pages/example_form.php` if it does not exist.
  id: totrans-451
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果单个页面 `/single_pages/example_form.php` 还不存在，请创建一个。
- en: Install the single page by visiting `/dashboard/pages/single` and entering `example_form`
    as the page location.
  id: totrans-452
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过访问 `/dashboard/pages/single` 并输入 `example_form` 作为页面位置来安装单个页面。
- en: 'Load the Rating form helper:'
  id: totrans-453
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载评分表单辅助工具：
- en: '[PRE102]'
  id: totrans-454
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE102]'
- en: 'Output the rating widget:'
  id: totrans-455
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出评分小部件：
- en: '[PRE103]'
  id: totrans-456
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE103]'
- en: How it works...
  id: totrans-457
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: The Rating helper makes use of a third-party jQuery plugin to provide an interactive
    rating chooser. The helper will take care of generating all HTML and JavaScript
    required to use this widget.
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 评分辅助工具利用第三方 jQuery 插件提供交互式评分选择器。辅助工具将负责生成使用此小部件所需的所有 HTML 和 JavaScript。
- en: 'The output function requires two parameters: the name of the input and the
    initial value (an integer that is either 20, 40, 60, 80, or 100).'
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: 输出函数需要两个参数：输入名称和初始值（一个整数，可以是 20、40、60、80 或 100）。
- en: There's more...
  id: totrans-460
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'If you''d like to just simply provide a read-only way to display a rating,
    the Rating helper can do that:'
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您只想简单地提供一种只读方式来显示评分，评分辅助工具可以做到这一点：
- en: '[PRE104]'
  id: totrans-462
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: Simply call the `outputDisplay` method and provide a value between 0 and 100.
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 简单地调用 `outputDisplay` 方法并提供一个介于 0 和 100 之间的值。
- en: See also
  id: totrans-464
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载辅助类*食谱'
- en: Using the banned words list
  id: totrans-466
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用禁止单词列表
- en: concrete5 comes bundled with a list of profane and inappropriate English words
    that site owners can use to remove inappropriate content from their website. In
    this example, we will check a word to see if it is in the banned words list.
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5附带了一系列粗俗和不恰当的英文单词列表，网站管理员可以使用这些单词从他们的网站上移除不适当的内容。在这个例子中，我们将检查一个单词，看看它是否在禁止单词列表中。
- en: How to do it...
  id: totrans-468
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'Load the banned words helper:'
  id: totrans-469
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载禁止单词助手：
- en: '[PRE105]'
  id: totrans-470
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'Check a word to see if it is in the banned words list:'
  id: totrans-471
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查一个单词，看看它是否在禁止单词列表中：
- en: '[PRE106]'
  id: totrans-472
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE106]'
- en: 'If the word is in the banned words list, then `$isBanned` will be equal to
    `true`:'
  id: totrans-473
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果单词在禁止单词列表中，则`$isBanned`将等于`true`：
- en: '[PRE107]'
  id: totrans-474
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE107]'
- en: How it works...
  id: totrans-475
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: concrete5 checks the list of banned words (stored at `/concrete/config/banned_words.txt`)
    to see if it contains the word provided in the parameter.
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5会检查禁止单词列表（存储在`/concrete/config/banned_words.txt`），以查看它是否包含参数中提供的单词。
- en: There's more...
  id: totrans-477
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Site owners can customize and edit the banned words list by copying it to `/config/banned_words.txt`
    and adding or removing entries there.
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: 网站管理员可以通过将其复制到`/config/banned_words.txt`并添加或删除条目来自定义和编辑禁止单词列表。
- en: See also
  id: totrans-479
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载辅助类*食谱'
- en: Reading and writing to the system cache
  id: totrans-481
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读取和写入系统缓存
- en: Responsible developers will take extra steps to make sure their application
    is optimized for maximum performance. concrete5 has a built-in cache API that
    developers can hook into to cache their own custom data and improve performance,
    especially on large database lookups.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 负责任的开发者会采取额外措施确保他们的应用程序针对最佳性能进行了优化。concrete5内置了一个缓存API，开发者可以将其挂钩以缓存自己的自定义数据并提高性能，尤其是在大型数据库查找中。
- en: Getting ready
  id: totrans-483
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will load a large amount of rows from the database (something that can impact
    performance in a negative way), and then store the resulting array in the cache
    to prevent future, resource-heavy data calls. This recipe will load from a hypothetical
    table called `Customers` that contains thousands of rows.
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从数据库中加载大量行（这可能会以负面方式影响性能），然后将结果数组存储在缓存中，以防止未来的资源密集型数据调用。这个食谱将从包含数千行的假设表`Customers`中加载。
- en: How to do it...
  id: totrans-485
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'Load a large set of records from the database that will tax the server''s resources.
    We will use a hypothetical table called `Customers`:'
  id: totrans-486
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从数据库中加载大量记录，这将消耗服务器的资源。我们将使用一个假设的表`Customers`：
- en: '[PRE108]'
  id: totrans-487
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'Store the results in the system cache:'
  id: totrans-488
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将结果存储在系统缓存中：
- en: '[PRE109]'
  id: totrans-489
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'Read the results from the cache, preventing another intense database query:'
  id: totrans-490
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从缓存中读取结果，防止进行另一个密集的数据库查询：
- en: '[PRE110]'
  id: totrans-491
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE110]'
- en: How it works...
  id: totrans-492
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: concrete5's cache library is a custom implementation of the `Zend_Cache` library,
    which comes with the Zend framework, upon which concrete5 is built. Calling the
    `set` function, you will specify the type of item that you are saving (in this
    case, we call it `customerList`), and an ID of the item we are saving (this is
    useful if you are saving several different objects of the same type—in this case
    we are not, so we just set this variable to `false`).
  id: totrans-493
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5的缓存库是对`Zend_Cache`库的定制实现，该库与Zend框架一起提供，而concrete5就是基于这个框架构建的。调用`set`函数时，您将指定要保存的项目类型（在这种情况下，我们称之为`customerList`），以及要保存的项目ID（如果您正在保存多个相同类型的对象，这将很有用——在这种情况下我们不是，所以我们只需将此变量设置为`false`）。
- en: There's more...
  id: totrans-494
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'You can delete an item that you have saved in the cache by sending in the type
    and the ID of the item that was stored. To delete our preceding customer list,
    you would write the following:'
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过发送已保存到缓存的项目类型和ID来删除您已保存到缓存中的项目。要删除我们之前保存的客户列表，您将编写以下内容：
- en: '[PRE111]'
  id: totrans-496
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'You can also flush the entire cache, removing all of the items that are stored
    inside:'
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以刷新整个缓存，删除存储在其中的所有项目：
- en: '[PRE112]'
  id: totrans-498
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: See also
  id: totrans-499
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: The *Loading a helper class* recipe
  id: totrans-500
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*加载辅助类*食谱'
- en: The *Loading the database object* recipe in [Chapter 5](ch05.html "Chapter 5. Working
    with Databases and Models"), *Working with Databases and Models*
  id: totrans-501
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第5章](ch05.html "第5章. 与数据库和模型一起工作")的*加载数据库对象*食谱中，*与数据库和模型一起工作*，*加载数据库对象*食谱
- en: The *Retrieving data from the database* recipe in [Chapter 5](ch05.html "Chapter 5. Working
    with Databases and Models"), *Working with Databases and Models*
  id: totrans-502
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第5章](ch05.html "第5章. 与数据库和模型一起工作")的*从数据库检索数据*食谱中，*与数据库和模型一起工作*，*从数据库检索数据*食谱
- en: Writing to the debug log
  id: totrans-503
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 写入调试日志
- en: Logging is a common practice in application development, but sometimes you might
    want to separate errors in your concrete5 app from errors that are specific to
    PHP or Apache. For this, you can write to concrete5's internal log that can be
    viewed from the dashboard by site administrators. In this recipe, we will simply
    write a couple of basic strings to the site's internal log.
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: 记录日志是应用程序开发中的常见做法，但有时你可能想要将 concrete5 应用程序中的错误与特定于 PHP 或 Apache 的错误分开。为此，你可以写入
    concrete5 的内部日志，该日志可以通过仪表板由网站管理员查看。在这个菜谱中，我们将简单地写入几个基本字符串到网站的内部日志。
- en: How to do it...
  id: totrans-505
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Come up with the message string that you would like to write to the log:'
  id: totrans-506
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 想出一个你想要写入日志的消息字符串：
- en: '[PRE113]'
  id: totrans-507
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE113]'
- en: 'Write the message to the log:'
  id: totrans-508
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将消息写入日志：
- en: '[PRE114]'
  id: totrans-509
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE114]'
- en: Reading and writing to the configuration registry
  id: totrans-510
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读取和写入配置注册表
- en: Storing key and value pairs in data dictionaries is a common task in any modern
    programming language. concrete5 allows you to store configuration settings using
    the `Config` class, rather than storing key/value settings in the database or
    elsewhere. In this recipe, we will write a configuration preference that signifies
    if the site administrator wants to allow comments on the site or not.
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据字典中存储键值对是任何现代编程语言中的常见任务。concrete5 允许你使用 `Config` 类来存储配置设置，而不是在数据库或其他地方存储键/值设置。在这个菜谱中，我们将写入一个配置首选项，表示网站管理员是否希望允许在网站上允许评论。
- en: How to do it...
  id: totrans-512
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Write the preference to the system configuration dictionary:'
  id: totrans-513
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将首选项写入系统配置字典：
- en: '[PRE115]'
  id: totrans-514
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE115]'
- en: 'Read the value of the preference item:'
  id: totrans-515
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 读取首选项项的值：
- en: '[PRE116]'
  id: totrans-516
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE116]'
- en: How it works...
  id: totrans-517
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: concrete5 stores the key and value pairs in the `Config` table of the database.
    The `Config` class presents a clean and simple API to make writing and reading
    configuration values as easy as possible. These configuration keys persist throughout
    concrete5, so developers should take extra caution to prevent clashes with other
    configuration values of the same name. It's a good idea to prefix configuration
    keys with something unique to your own code, such as `cookbook_allow_comments`,
    in this case.
  id: totrans-518
  prefs: []
  type: TYPE_NORMAL
  zh: concrete5 将键值对存储在数据库的 `Config` 表中。`Config` 类提供了一个干净且简单的 API，使得写入和读取配置值尽可能容易。这些配置键在
    concrete5 中持续存在，因此开发者应该格外小心，以防止与同名的其他配置值冲突。在这种情况下，给配置键加上一些你自己的代码中独特的名称，例如 `cookbook_allow_comments`
    是一个好主意。
