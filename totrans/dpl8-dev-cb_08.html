<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Multilingual and Internationalization</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will cover the following recipes to make sure that your site is multilingual and internationalized:</p>
<ul>
<li>Translating administrative interfaces</li>
<li>Translating configurations</li>
<li>Translating content</li>
<li>Creating multilingual views</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p>This chapter will cover the multilingual and internationalization features of Drupal 8, which have been greatly enhanced since Drupal 7. The preceding version of Drupal required many extra modules to provide internationalization efforts, but now the majority is provided by Drupal core.</p>
<p>Drupal core provides the following multilingual modules:</p>
<ul>
<li><strong>Language</strong>: This provides you with the ability to detect and support multiple languages</li>
<li><strong>Interface translation</strong>: This takes installed languages and translates strings that are presented through the user interface</li>
<li><strong>Configuration translation</strong>: This allows you to translate configuration entities, such as date formats and views</li>
<li><strong>Content translation</strong>: This brings the power of providing content in different languages and displaying it according to the current language of the user</li>
</ul>
<p>Each module serves a specific purpose in creating the multilingual experience for your Drupal site. Behind the scenes, Drupal supports the language code for all entities and cache contexts. These modules expose the interfaces to implement and deliver internationalized experiences.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating administrative interfaces</h1>
                </header>
            
            <article>
                
<p>The interface translation module provides a method to translate strings found in the Drupal user interface. Harnessing the Language module, interface translations are automatically downloaded from the Drupal translation server. By default, the interface language is loaded through the language code as a path prefix. With the default <strong>Language</strong> configuration, paths will be prefixed with the default language.</p>
<p>Interface translations are based on strings provided in the code that are passed through the internal translation functions.</p>
<p>In this recipe, we will enable Spanish, import the language files, and review the translated interface strings to provide missing or custom translations.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Drupal 8 provides an automated installation process of translation files. For this to work, your web server must be able to communicate with <span class="URLPACKT"><a href="https://localize.drupal.org/">https://localize.drupal.org/</a></span>. If your web server cannot automatically download the files from the translation server, you can refer to the manual installation instructions, which will be covered in the <em><span class="ChapterrefPACKT">There's more...</span></em> section of this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Go to <span class="packt_screen">Extend</span> and install the <span class="packt_screen">Interface Translation</span> module. It will prompt you to enable the <span class="packt_screen">Language</span>, <span class="packt_screen">File</span>, and <span class="packt_screen">Field</span> modules to be installed, if they are not.</li>
<li>After the module is installed, click on <span class="packt_screen">Configuration</span>. Go to the <span class="packt_screen">Languages</span> page under the <span class="packt_screen">Regional and Language</span> section.</li>
<li>Click on <span class="packt_screen">Add language</span> in the languages overview table:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/bd4bb6fc-208b-47d9-8323-489ac9f7244c.png"/></div>
<ol start="4">
<li>The <span class="packt_screen">Add language</span> page provides a select list of all available languages that the interface can be translated to. Select <span class="packt_screen">Spanish</span>, and then click on <span class="packt_screen">Add language</span>.</li>
<li>A batch process will run, install the translation language files, and import them.</li>
<li>The <span class="packt_screen">INTERFACE TRANSLATION</span> column specifies the percentage of active translatable interface strings that have a matching translation. Clicking on the link allows you to view the <span class="packt_screen">User interface translation</span> form:</li>
</ol>
<div class="packt_figure"><img class=" image-border" src="assets/08b05839-9e92-4b83-9770-cbb6820f87d5.png"/></div>
<ol start="7">
<li>The <span class="packt_screen">Filter Translatable Strings</span> form allows you to search for translated strings or untranslated strings. Select <span class="packt_screen">Only u</span><span class="packt_screen">ntranslated strings</span> from the <span class="packt_screen">Search in</span> list and click on <span class="packt_screen">Filter</span>.</li>
<li>Using the textbox on the right-hand side of the screen, a custom translation can be added to <span class="packt_screen">Only untranslated strings</span>. Type in a translation for the item:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/281b1f93-81c5-43a9-8378-485bd8144cb6.png"/></div>
<ol start="9">
<li>Click on <span class="packt_screen">Save translations</span> to save the modification.</li>
<li>Go to <kbd>/es/node/add</kbd>, and you will note that the <strong>Basic page</strong> content type description will now match your translation.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The interface translation module provides <kbd>\Drupal\locale\LocaleTranslation</kbd>, which implements <kbd>\Drupal\Core\StringTranslation\Translator\TranslatorInterface</kbd>. This class is registered under the <kbd>string_translation</kbd> service as an available lookup method.</p>
<p>When the <kbd>t</kbd> function or the <kbd>\Drupal\Core\StringTranslation\StringTranslationTrait::t</kbd> method is invoked, the <kbd>string_translation</kbd> service is called to provide a translated string. The <kbd>string_translation</kbd> service will iterate through the available translators and return a translated string, if possible.</p>
<div class="packt_tip">Developers need to note that this is a key reason to ensure that module strings are passed through translation functions. It allows you to identify strings that need to be translated.</div>
<p>The translator provided in the interface translation will then attempt to resolve the provided string against known translations for the current language. If a translation has been saved, it will be returned.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>We will explore ways to install other languages, check translation statuses, and do much more in the following sections.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Manually installing language files</h1>
                </header>
            
            <article>
                
<p>Translation files can be manually installed by downloading them from the Drupal.org translation server and uploading them through the language interface. You can also use the import interface to upload custom <strong>gettext portable object</strong> (<strong>.po</strong>) files.</p>
<p>Drupal core and most contributed projects have <kbd>.po</kbd> files available at the Drupal translations site, <span class="URLPACKT"><a href="https://localize.drupal.org">https://localize.drupal.org</a></span>. On the site, click on <span class="packt_screen">Download</span> to download a <kbd>.po</kbd> file for Drupal core in all available languages. Additionally, clicking on a language will provide more translations for a specific language across projects, as follows:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="523" width="467" class=" image-border" src="assets/1fb6a0ef-184e-4ad0-b2d7-1466a4a53ba4.png"/></div>
<p>You can import a <kbd>.po</kbd> file by going to the <kbd>User interface translation</kbd> form and selecting the <kbd>Import</kbd> tab. You will need to select the <kbd>.po</kbd> file and then the appropriate language. You can treat the uploaded files as custom-created translations. This is recommended if you are providing a custom translation file that was not provided by <span class="URLPACKT">Drupal.org</span>. If you are updating Drupal.org translations manually, make sure that you check the box that overwrites existing noncustom translations. The final option allows you to replace customized translations if the <kbd>.po</kbd> file provides them. This can be useful if you have translated missing strings that might now be provided by the official translation file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Checking translation status</h1>
                </header>
            
            <article>
                
<p>As you add new modules, the available translations will grow. The <kbd>Interface translation</kbd> module provides a translation status report that is accessible from the <kbd>Reports</kbd> page. This will check the default translation server for the project and check whether there is a <kbd>.po</kbd> available or if it has changed. In the event of a custom module, you can provide a custom translation server, which is covered in <em>P</em><span class="ChapterrefPACKT"><em>roviding translations for a custom module</em>.</span></p>
<p>If an update is available, you will be alerted. You can then import the translation file updates automatically or download and manually import them.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Exporting translations</h1>
                </header>
            
            <article>
                
<p>In the <kbd>User interface translation</kbd> form, there is an <kbd>Export</kbd> tab. This form will provide a <kbd>Gettext Portable Object</kbd> (<kbd>.po</kbd>) file. You can export all the available source text that is discovered in your current Drupal site without translations. This will provide a base <kbd>.po</kbd> for translators to work on.</p>
<p>Additionally, you can download a specific language. Specific language downloads can include uncustomized translations, customized translations, and missing translations. Downloading customized translations can be used to help make contributions to the multilingual and internationalization efforts of the Drupal community.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Interface translation permissions</h1>
                </header>
            
            <article>
                
<p>The interface translation module provides a single permission called <strong>Translate interface text</strong>. This permission grants users the permission to interact with all the module's capabilities. It is flagged with a security warning, as it allows users with this permission to customize all the output text presented to them.</p>
<p>However, it does allow you to provide a role for translators and limits their access to just translation interfaces.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using interface translation to customize default English strings</h1>
                </header>
            
            <article>
                
<p>The interface translation module is useful beyond its typical multilingual purposes. You can use it to customize strings in the interface that are not available to be modified through typical hook methods, or if you are not a developer.</p>
<p>Firstly, you will need to edit the English language from the <span class="packt_screen">Languages</span> screen. Check the checkbox for <span class="packt_screen">Enable interface translation for English</span> and click on <span class="packt_screen">Save language</span>. You will now have the ability to customize existing interface strings.</p>
<div class="packt_infobox">This is only recommended for areas of the interface that cannot already be customized through the normal user interface or provided API mechanisms.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Interface text language detection</h1>
                </header>
            
            <article>
                
<p>The <kbd>Language</kbd> module provides detection and selection rules. By default, the module will detect the current language based on the URL, with the language code acting as a prefix to the current path. For example, <kbd>/es/node</kbd> will display the node listing page in Spanish, as seen in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="238" width="530" class=" image-border" src="assets/ca433927-a762-48ce-b330-5a14973db728.png"/></div>
<p>You can have multiple detection options enabled at once and use the ordering to decide which takes precedence. This can allow you to use the language code in the URL first, but, if they are missing, a fallback to the language is specified by the user's browser.</p>
<p>Some detection methods have settings. For instance, the URL detection method can be based on the default path prefix or subdomains.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Providing translations for a custom module</h1>
                </header>
            
            <article>
                
<p>Modules can provide custom translations in their directories or point to a remote file. These definitions are added to the module's <kbd>info.yml</kbd> file. First, you will need to specify the <kbd>interface translation project</kbd> key if it differs from the project's machine name.</p>
<p>You will then need to specify a server pattern through the <kbd>interface translation server pattern</kbd> key. This can be a relative path to Drupal's root, such as <kbd>modules/custom/mymodule/translation.po</kbd>, or a remote file URL at <kbd><span class="URLPACKT">http://example.com/files/translations/mymodule/translation.po</span></kbd>.</p>
<p>Distributions (or other modules) can implement <kbd>hook_locale_translation_projects_alter</kbd> to provide this information on behalf of modules or to alter defaults.</p>
<p>The server pattern accepts the following different tokens:</p>
<ul>
<li><kbd>%core</kbd>: Indicates the version of a course (for example, 8.x)</li>
<li><kbd>%project</kbd>: <span>Indicates</span> the project's name</li>
<li><kbd>%version</kbd>: <span>Indicates</span> the current version string</li>
<li><kbd>%language</kbd>: <span>Indicates</span> the language code</li>
</ul>
<p>More information on the interface translation keys and variables can be found in the <kbd>local.api.php</kbd> document file located in the interface translation module's base folder.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li>Refer to the Drupal translation server at <span class="URLPACKT"><a href="https://localize.drupal.org/translate/drupal8%20">https://localize.drupal.org/translate/drupal8</a></span></li>
<li>You can contribute using the localization server at <span class="URLPACKT"><span class="URLPACKT"><a href="https://www.drupal.org/node/302194">https://www.drupal.org/node/302194</a></span></span></li>
<li>Refer to the <kbd>locale.api.php</kbd> documentation at <span class="URLPACKT"><a href="https://api.drupal.org/api/drupal/core%21modules%21locale%21locale.api.php/8">https://api.drupal.org/api/drupal/core%21modules%21locale%21locale.api.php/8</a></span></li>
<li>Refer to PO and POT files at <span class="URLPACKT"><a href="https://www.drupal.org/node/1814954">https://www.drupal.org/node/1814954</a></span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating configuration</h1>
                </header>
            
            <article>
                
<p>The <strong>Configuration translation</strong> module provides an interface to translate configurations with interface translation and language as dependencies. This module allows us to translate configuration entities. The ability to translate configuration entities adds an extra level of internationalization.</p>
<p>Interface translation allows us to translate strings provided in our Drupal site's code base. Configuration translation allows us to translate importable and exportable configuration items that we created, such as site title or date formats.</p>
<p>In this recipe, we will translate date format configuration entities. We will provide localized date formats for Danish to provide a more internationalized experience.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Your Drupal site needs to have two languages enabled in order to use <span class="packt_screen">Configuration Translation</span>. Install <span class="packt_screen">Danish</span> from the <span class="packt_screen">Languages interface</span>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Go to <span class="packt_screen">Extend</span> and install the <span class="packt_screen">Configuration Translation</span> module. It will prompt you to enable the <span class="packt_screen">Interface Translation</span>, <span class="packt_screen">Language</span>, <span class="packt_screen">File</span>, and <span class="packt_screen">Field</span> modules to be installed, if they are not.</li>
<li>After the module is installed, go to <span class="packt_screen">Configuration</span>. Then, go to the <span class="packt_screen">Configuration translation</span> page under the <span class="packt_screen">Regional and Language</span> section.</li>
</ol>
<p> </p>
<ol start="3">
<li>Click on the list for the <span class="packt_screen">Date format</span> option in the configuration entity option table:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="200" width="457" class=" image-border" src="assets/89c4343e-febd-4b52-9a1c-4764915fea71.png"/></div>
<ol start="4">
<li>We will translate the <span class="packt_screen">Default long date format</span> to represent the <span class="packt_screen">Danish</span> format. Click on the <span class="packt_screen">Translate for the Default long date format</span> row.</li>
<li>Click on <span class="packt_screen">Add</span> to create a <span class="packt_screen">Danish</span> translation:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/4888dbe3-8322-445a-9160-0018adb68ad8.png"/></div>
<ol start="6">
<li>For <span class="packt_screen">Danish</span>, we will provide the following PHP date format: <kbd>l j. F, Y - H.i</kbd>. This will display the day of the week, the day of the month, the month, the full year, and the 24-hour notation for the time.</li>
</ol>
<p> </p>
<ol start="7">
<li>Click on <span class="packt_screen">Save translation</span>.</li>
<li>Whenever a user is browsing your Drupal site with <span class="packt_screen">Danish</span> as their language, the date format will now be localized for their experience.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>The Configuration Translation module requires Interface Translation; however, it does not work in the same fashion. The module modifies all entity types that extend the <kbd>\Drupal\Core\Config\Entity\ConfigEntityInterface</kbd> interface. It adds a new handler under the <kbd>config_translation_list</kbd> key. This is used to build a list of available configuration entities and their bundles.</p>
<p>The module alters the configuration schema in Drupal, and updates the default configuration element definitions to use a specified class under <kbd>\Drupal\config_translation\Form</kbd>. This allows <kbd>\Drupal\config_translation\Form\ConfigTranslationFormBase</kbd> and its child classes to properly save translated configuration data, which can then be modified through the configuration translation screens.</p>
<p>When the configuration is saved, it is identified as being part of a collection. The collection is identified as <kbd>language.LANGCODE</kbd>, and all translated configuration entities are saved and loaded by this identifier. The following is an example of how the configuration items are stored in the database:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="90" width="326" class=" image-border" src="assets/beb3fb72-cc08-45b7-a0f7-3ca8cf64e5ee.png"/></div>
<p>When browsing the site in the <kbd>es</kbd> language code, the appropriate <kbd>block.block.bartik_account_menu</kbd> configuration entity will be loaded. If you are using the default site, or no language code, the configuration entity with an empty collection will be used.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Configuration entities and the ability to translate them are a big part of Drupal 8's multilingual capabilities. We'll explore them in detail in the next recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Altering configuration translation info definitions</h1>
                </header>
            
            <article>
                
<p>Modules can invoke the <kbd>hook_config_translation_info_alter</kbd> hook to alter discovered configuration mappers. For instance, the <strong>Node</strong> module does this to modify the <kbd>node_type</kbd> configuration entity:</p>
<pre>/** 
 * Implements hook_config_translation_info_alter(). 
 */ 
function node_config_translation_info_alter(&amp;$info) { 
  $info['node_type']['class'] = 'Drupal\node\ConfigTranslation\NodeTypeMapper'; 
} </pre>
<p>This updates the <kbd>node_type</kbd> definition to use the <kbd>\Drupal\node\ConfigTranslation\NodeTypeMapper</kbd> custom mapper class. This class adds the node type's title as a configurable translation item.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating views</h1>
                </header>
            
            <article>
                
<p>Views are configuration entities. When the Configuration translation module is enabled, it is possible to translate Views. This will allow you to translate display titles, exposed form labels, and other items. Refer to the <kbd>Creating a multilingual view</kbd> recipe in this chapter for more information.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li>Refer to the <em><span class="ChapterrefPACKT">Creating a Multilingual View</span></em> <span>recipe</span> of <span class="ChapterrefPACKT"><a href="459ccdb8-7d36-44a8-b476-e34649e310a2.xhtml"><em>Chapter 8</em></a>, <em>Multilingual and Internationalization.</em></span></li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating content</h1>
                </header>
            
            <article>
                
<p>The content translation module provides a method to translate content entities, such as nodes and blocks. Each content entity needs to have translation enabled, which allows you to granularly decide what properties and fields are translated.</p>
<p>Content translations are duplications of the existing entity, but are flagged with a proper language code. When a visitor uses a language code, Drupal attempts to load content entities using that language code. If a translation is not present, Drupal will render the default untranslated entity.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Your Drupal site needs to have two languages enabled to use Content translation. Install <span class="packt_screen">Spanish</span> from the <span class="packt_screen">Languages</span> interface.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Go to <span class="packt_screen">Extend</span> and install the <span class="packt_screen">Content translation</span> module. It will prompt you to enable the <span class="packt_screen">Language</span> modules to be installed, if they are not.</li>
<li>After the module is installed, go to <span class="packt_screen">Configuration</span> and then to the <span class="packt_screen">Content language and translation</span> page under the <span class="packt_screen">Regional and Language</span> section.</li>
<li>Check the checkbox next to <span class="packt_screen">Content</span> to expose settings for the current content types.</li>
<li>Enable the content translation for the <span class="packt_screen">Basic page</span> and keep the provided default settings that enable translation for each field. Click on <span class="packt_screen">Save configuration</span>:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/2f612655-ee3e-476d-9140-b4dd0a74a218.png"/></div>
<ol start="5">
<li>Create a new <span class="packt_screen">Basic page</span> node. We will create this in the site's default language.</li>
<li>When viewing the new node, click on the <span class="packt_screen">Translate</span> tab. From the <span class="packt_screen">Spanish</span> language row, click on <span class="packt_screen">Add</span> to create a translated version of the node:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/06703719-0a07-444d-841c-44fa2a355cc2.png"/></div>
<ol start="7">
<li>The content will be prepopulated with the default language's content. Replace the title and body with the translated text:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/26d04112-75f2-43eb-96d0-ffcd9abf118f.png"/></div>
<ol start="8">
<li>Click on <span class="packt_screen">Save and keep published (this translation)</span> to save the new translation.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works</h1>
                </header>
            
            <article>
                
<p>The Content translation module works by utilizing language code flags. All content entities and field definitions have a language code key. A content entity has a language code column, which specifies what language the content entity is for. Field definitions also have a language code column, which is used to identify the translation for the content entity. Content entities can provide handler definitions to handle translations, or else the Content translation module will provide its own.</p>
<p>Each entity and field record is saved with the proper language code to use. When an entity is loaded, the current language code is taken into consideration to ensure that the proper entity is loaded.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>There are additional operations to translate content; we will cover them in the next sections.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Flagging translations as outdated</h1>
                </header>
            
            <article>
                
<p>The Content translation module provides a mechanism to flag translated entities as possibly being outdated. The <span class="packt_screen">Flag other translations as outdated</span> flag provides a way to make a note of entities that will need updated translations:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="180" width="294" class=" image-border" src="assets/3687cf10-3325-4832-b750-468d5feb86e8.png"/></div>
<p>This flag does not change any data, but rather provides a moderation tool. This makes it easy for translators to identify content, which has been changed and requires updating. The translation tab for the content entity will highlight all translations, which are still marked as outdated. As they are changed, the editor can uncheck the flag.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating content links</h1>
                </header>
            
            <article>
                
<p>Mostly, Drupal menus contain links to nodes. Menu links are not translated by default, and the <span class="packt_screen">Custom menu links</span> option must be enabled under <span class="packt_screen">Content translation</span>. You will need to translate node links manually from the menu administration interface.</p>
<p>Enabling a menu link from the node create and edit form will not work with translations. If you edit the menu settings from a translation, it will edit the untranslated menu link.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Defining translation handlers for entities</h1>
                </header>
            
            <article>
                
<p>The Content translation module requires entity definitions to provide information about translation handlers. If this information is missing, it will provide its own defaults. The <em>Entity API</em> is covered in <a href="2f5fe169-0ba6-4746-9586-896f00f0bb28.xhtml"><em><span class="ChapterrefPACKT">Chapter 10</span></em></a>, <em>The Entity API</em>, but we will quickly discuss how the content translation module interacts with the Entity API.</p>
<p>Content entity definitions can provide a <kbd>translation</kbd> handler. If not provided, it will default to <kbd>\Drupal\content_translation\ContentTranslationHandler</kbd>. A node provides this definition and uses it to place the content translation information into the vertical tabs.</p>
<p>The <kbd>content_translation_metadata</kbd> key defines how to interact with translation metadata information, such as flagging other entities as outdated. The <kbd>content_translation_deletion</kbd> key provides a form class to handle entity translation deletion.</p>
<p>Currently, as of 8.0.1, no core modules provide implementations that override the default <kbd>content_translation_metadata</kbd> or <kbd>content_translation_deletion</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li><span class="ChapterrefPACKT">Refer to <a href="2f5fe169-0ba6-4746-9586-896f00f0bb28.xhtml"><em>Chapter 10</em></a>, <em>The Entity API</em></span>.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating multilingual views</h1>
                </header>
            
            <article>
                
<p>Views, being configuration entities, are available for translation. However, the power of multilingual views does not lie just in configuration translation. Views allow you to build filters that react to the current language code. This ensures that the content, which has been translated into the user's language, is displayed.</p>
<p>In this recipe, we will create a multilingual view that provides a block showing recent articles. If there is no content, we will display a translated <kbd>no results</kbd> message.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>Your Drupal site needs to have two languages enabled in order to use <span class="packt_screen">Content Translation</span>. Install <span class="packt_screen">Spanish</span> from the <span class="packt_screen">Languages</span> interface. Enable content translation for <span class="packt_screen">Articles</span>. You will also need to have some translated content.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<ol>
<li>Go to <span class="packt_screen">Views</span> from <span class="packt_screen">Structure</span>, and click on <span class="packt_screen">Add view</span>.</li>
<li>Provide a view name, such as <kbd>Recent articles</kbd>, and change the type of content to <span class="packt_screen">Article</span>. Mark that you would like to <span class="packt_screen">Create a block</span> and then click on <span class="packt_screen">Save</span> and <span class="packt_screen">edit</span>.</li>
<li>Add a new <span class="packt_screen">Filter criteria</span>. Search for <span class="packt_screen">Translation language</span> and add the filter for the <span class="packt_screen">Content</span> category. Click on <span class="packt_screen">Add and configure filter criteria</span>. Set the filter to check the <span class="packt_screen">Interface text language selected for page</span>. This will only display that the content that has been translated or the base language is the current language:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/80007260-af25-43f2-bbe9-f23b94cc27a3.png"/></div>
<ol start="4">
<li>Click on <span class="packt_screen">Add</span> next to <span class="packt_screen">No Results</span> and search for <span class="packt_screen">Text area</span>. Check the checkbox and click on <span class="packt_screen">Add and configure no results behavior</span>. Provide some sample text, such as <kbd>Currently no recent articles</kbd>.</li>
<li>Save the view.</li>
<li>Click on the <span class="packt_screen">Translate view</span> tab. Click on <span class="packt_screen">Add</span> for the <span class="packt_screen">Spanish</span> row to translate the view for the language.</li>
<li>Expand the <span class="packt_screen">Master display settings</span> and then the <span class="packt_screen">Recent articles</span> display options fieldsets. Modify the <span class="packt_screen">Display title</span> option to provide a translated title:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/4c3cc463-801a-42a0-9f6a-8764e8cac093.png"/></div>
<ol start="8">
<li>Expand <span class="packt_screen">No results behavior</span> to modify the text on the right-hand side of the screen using the textbox on the left-hand side of the screen as the source for the original text:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/10c296fb-ea80-41f0-9b87-958b3c44bb3e.png"/></div>
<ol start="9">
<li>Click on <span class="packt_screen">Save translation</span>.</li>
</ol>
<p> </p>
<ol start="10">
<li>Place the block on your Drupal site by going to <span class="packt_screen">Structure</span> and then to <span class="packt_screen">Block Layout</span>.</li>
<li>Go to the site through <kbd>/es</kbd> and note the translated <kbd>Views</kbd> block:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/b3b2996d-189e-4a06-a092-0c6936577bff.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>Views provide the Translation language filter that builds off this element. The Views plugin systems provide a mechanism to gather and display all available languages. These will be saved as a token internally and then substituted with the actual language code when the query is executed. If a language code is no longer available, the <kbd>Content language for selected</kbd> page and views will fall back to the current language when viewed.</p>
<div class="packt_infobox">You will come across this option when editing views provided by Drupal core or contributed modules. Although this is not an option in the user interface, it is a default practice to add a language filter defined as <kbd>***LANGUAGE_language_content***</kbd>, which will force the view to be multilingual.</div>
<p>The filter tells <span class="packt_screen">Views</span> to query based on the language code of the entity and its fields.</p>
<p>Views are configuration entities. The Configuration translation module allows you to translate views. Views can be translated from the main Configuration translation screens from the <kbd>Configuration</kbd> area or by editing individual views.</p>
<p>Most translation items will be under the <span class="packt_screen">Master display settings</span> tab unless overridden in specific displays. Each display type will also have its own specific settings.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">There's more...</h1>
                </header>
            
            <article>
                
<p>Even more can be done to translate your views; we will discuss in the following section.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating exposed form items and filters</h1>
                </header>
            
            <article>
                
<p>Each view can translate the exposed form from the <kbd>Exposed Form</kbd> section. This does not translate the labels on the form but the form elements. You can translate the <kbd>submit</kbd> button text, <kbd>reset</kbd> button label, <kbd>sort</kbd> label, and <kbd>ascending</kbd> or <kbd>descending</kbd> .</p>
<p>You can translate the labels for exposed filters from the <kbd>Filters</kbd> section. Each exposed filter will show up as a collapsible fieldset, allowing you to configure the administrative label and front-facing label.</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/41784ca9-6035-4b2a-8b52-18d18e479de6.png"/></div>
<p>By default, available translations need to be imported through the global interface translation context.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating display and row format items</h1>
                </header>
            
            <article>
                
<p>Some display formats have translatable items. These can be translated in each display mode's section. For example, the following items can be translated with their display format:</p>
<ul>
<li>The <kbd>Table</kbd> format allows you to translate the table summary</li>
<li>The <kbd>RSS feed</kbd> format allows you to translate the feed description</li>
<li>The <kbd>Page</kbd> format allows you to translate the page's title</li>
<li>The <kbd>Block</kbd> format allows you to translate the block's title</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating page display menu items</h1>
                </header>
            
            <article>
                
<p>Custom menu links can be translated through the Content translation module. Views which use a page display do not create custom menu link entities. So it must be translated through the View itself. The <kbd>Views</kbd> module takes all views with a page display and registers their paths into the routing system directly as if defined in a module's <kbd>routing.yml</kbd> file:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/b0b187c4-b6ec-43d3-a43d-118776ae5d9d.png"/></div>
<p>For example, the <strong>People</strong> view that lists all users can be translated to have an updated tab name and link description.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">See also</h1>
                </header>
            
            <article>
                
<ul>
<li><span class="ChapterrefPACKT">Refer to <a href="2015063a-2e03-45d2-822d-892e87f10e41.xhtml"><em>Chapter 3</em></a>, <em>Displaying Content through Views</em></span>.</li>
</ul>


            </article>

            
        </section>
    </body></html>