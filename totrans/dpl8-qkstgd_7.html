<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Feeding the Masses – RSS</h1>
                </header>
            
            <article>
                
<p class="mce-root">In this chapter, we will look at what a feed is and how to create one. In fact, we will create two! Here are the topics we will cover:</p>
<ul>
<li>Why you would want to provide a feed</li>
<li>Deciding what content to include in a feed</li>
<li>Modifying content to enable feed selection</li>
<li>A brief overview of the Views module</li>
<li>Using the Views module to create feeds</li>
<li>Creating a block of feed links</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Why feeds?</h1>
                </header>
            
            <article>
                
<p>What is a <em>feed</em>? <strong>RSS</strong> stands for <strong>Rich Site Summary</strong>. The word "feed" has many meanings. In our context, the meaning to consider is the one that you've probably heard in regards to broadcast television. For example, there could be an event happening outside London that is being covered by a local network. That network then allows other networks and stations to tap into their continuous broadcast, when desired. That continuous broadcast is referred to as a <em>feed</em>, in that it is "food" for another to consume. On the internet, a feed is much the same. A site provides its content in a stream that is pulled (requested) by a site that wants to use that content. That stream is a feed.</p>
<p>Some feeds provide news content. Some are e-commerce feeds that provide products that any registered e-commerce site can sell for a commission. Some simply provide articles on topics of interest to the readers of sites that consume the feeds.</p>
<p>So, why would you want to provide a feed for your site?</p>
<p class="mce-root"/>
<p>Exposure. Providing a feed makes it possible for other sites to consume it and expose your site's content to those who might otherwise never see it. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Selecting content for a feed</h1>
                </header>
            
            <article>
                
<p><span>What if some of your site content is secure, or available only to premium subscribers? </span>No problem! We're going to look at a way to filter the content selected for the feed, or, conversely, filter out content that you do not want selected. </p>
<p>We're going to create three feeds. The first thing we need to decide upon is what content the feed will contain...which means determining the selection criteria. </p>
<p>One of our feeds is destined for the pet-loving community. It will contain any of our articles related to pets.</p>
<p>Our second feed is for travelers. It will contain any of our articles related to travel.</p>
<p>Finally, our third feed will contain any article that not included in the first two feeds.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Modifying content for feed selection</h1>
                </header>
            
            <article>
                
<p>So, we know what criteria we have for our feeds, but how will Drupal know which content meets that criteria? Let's discuss two possible methods.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Pick-me flags</h1>
                </header>
            
            <article>
                
<p>A <em>pick-me</em> flag is a content field that's purpose is to highlight the fact that the content applies to something specific, and so is the flag for selecting it. It is represented by a Boolean field, which contains <kbd>True (-1)</kbd> or <kbd>False (0)</kbd>, so that you can think of it as either on or off. It is typically represented by a checkbox. </p>
<p>So, for our use, we could add a field called Pets to our article content type, and check the box when creating an article if the article touches on pets, and the same with a <span class="packt_screen">Travel</span> checkbox for travel content.</p>
<p>This makes sense, and is an easy way to determine what content to select, but there is one kink in that plan. Every time a new criterion arises, it would mean adding yet another field to the content type. Things could get messy quickly.</p>
<p class="mce-root"/>
<p>A pick-me flag works best for a standalone need, such as when an article is marked as Published. Fortunately, there is another method available to us.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Tags</h1>
                </header>
            
            <article>
                
<p>Just as content is kept in an entity called a <em>node</em>, Drupal also has an entity type called <em>taxonomy</em>, which is a scientific word for classification. Just as nodes are represented by content, taxonomy is represented by vocabularies containing terms. </p>
<p>Drupal comes with a taxonomy vocabulary, called <span class="packt_screen">Tags</span>. The intended use of tags is to categorize content. Additional vocabularies can also be created to hold tags for specific use, such as one for travel-related terms, or one for Spanish-language terms, but for the purpose of assigning categories applicable to the content, this is what the Tags vocabulary was designed for, and it will work for us.</p>
<p>I'm going to go back and edit the article <em>A Moment in the Life of My Dog</em>, and in the <em>Tags</em> field, which currently contains <kbd>Sasha</kbd> and <kbd>donuts</kbd>, I'm going to add one more, <kbd>pets</kbd>, and save it again.</p>
<p>Then, I will add two additional pieces of content, both related to travel, and will tag them with travel, as well as tags specific to the travel type and destination, as shown in the following screenshots. The following screenshot is related to Iceland:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-325 image-border" src="assets/0aec6292-af37-401d-be2e-ed4d08e357dc.png" style="width:54.50em;height:28.67em;"/></p>
<p>And the other is related to the Caribbean:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-326 image-border" src="assets/7cddc26f-1db3-4b58-ba9a-e6177a1a5b76.png" style="width:43.25em;height:24.67em;"/></p>
<p>Now, we need one final piece of content for the third of our feeds. The tag for this content will be <em>leftovers</em>, since the feed is for any content not tagged as <span class="packt_screen">pets</span> or <span class="packt_screen">travel</span>.</p>
<p>Having created some content for testing our feed, let's look at how we're going to do that.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Views</h1>
                </header>
            
            <article>
                
<p>Views is a very popular Drupal module. It used to be a contributed module, but is now part of Drupal's core code.</p>
<p class="mce-root">Views provides many features, and so resists a single-sentence description. Rather than trying to describe what it is for, let me give you a simple description of how it works, from which you can infer many of its potential uses.</p>
<p>Views retrieves data from Drupal based on selection criteria and data relationships, arranges it, and outputs it in any number of ways, whether as a component of a Drupal page, as an external file, or as a feed <span>– which is meaningful for our purposes.</span></p>
<p class="mce-root"/>
<p>To get started, navigate to <span class="packt_screen">Extend</span> (<kbd>/admin/modules</kbd>) and enable both <span class="packt_screen">Views</span> and <span class="packt_screen">Views UI</span>. The former is the module that provides the services for each view to run, while the latter provides a visual tool for creating views.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the container view</h1>
                </header>
            
            <article>
                
<p>Here, we are going to be creating three feeds. The output choices and displays of the Views module includes both feeds and blocks, and a single view can act as a container for multiple displays. Although we will be creating three view displays, they will all be contained in one view. Let's create it, as follows:</p>
<ol>
<li>Navigate to <span class="packt_screen">Structure</span> | <span class="packt_screen">Views</span> (<kbd>/admin/structure/views</kbd>) and click the <span class="packt_screen">+Add view</span> button.</li>
<li>In the <span class="packt_screen">View name</span> text box, we'll enter <strong>Custom RSS Feeds</strong>. I am naming it this way to differentiate it from the predefined RSS view included with the module. </li>
<li>Below the name is a checkbox for <span class="packt_screen">Description</span>. Let's check it, and in the text box that appears, enter <kbd>Tutorial examples</kbd>. This description will appear in the list of views at <em>/admin/structure/views</em>.</li>
<li>The remainder of the page allows us to provide information in an easy manner that will be carried forward to the <span class="packt_screen">Views UI</span>, where we can still enter it but with a little more effort. However, we are focusing on creating feeds, and the feed display type is not offered here. </li>
<li>Click the <span class="packt_screen">Save and edit</span> button to save your changes.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the Pets feed</h1>
                </header>
            
            <article>
                
<p>We are now on the Views UI form for our view. The following screen will look slightly different than what you will see, because I have opened the <span class="packt_screen">Advanced</span> column on the right so that you can see the entire form:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-327 image-border" src="assets/7df0b34e-136f-4744-bb9b-3a1caf8f9ce0.png" style="width:159.08em;height:64.67em;"/></p>
<p>At this point, the only display that exists for our view is the <span class="packt_screen">Master</span> display, which acts like a template. <span class="packt_screen">Settings</span> made in it are carried forward to any displays added to the view. Since we will be creating more than one type of display, feeds, and a block, we won't enter the settings on the <span class="packt_screen">Master</span>.</p>
<p>The first thing we need to do is select the type of display we want. Most often, this will be a page or a block, but we want to create a feed. Click the <span class="packt_screen">+Add</span> button at the top and select <span class="packt_screen">Feed</span> from the list. Now that a display has been added, the Master display will be hidden and replaced with Feed. The asterisk is present because the display has been modified but not yet saved.</p>
<p>Let's work our way through the settings, one panel at a time.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Display name</h1>
                </header>
            
            <article>
                
<p>The display name is currently <span class="packt_screen">Feed</span>, which would be fine if we were to only have one in the view. Since we will be having three, we'll make the name more specific. Click the word <span class="packt_screen">Feed</span> and enter <kbd>Pets Feed</kbd> in the popup, and then click <span class="packt_screen">Apply</span><em>.</em></p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Title</h1>
                </header>
            
            <article>
                
<p>We want to add a title, so click None, and in the popup, enter <kbd>D8QuickStart Pets Feed</kbd>, and then click <span class="packt_screen">Apply</span><em>.</em></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Format</h1>
                </header>
            
            <article>
                
<p>We want the format to be an RSS feed, so that can be left as is. Click the <span class="packt_screen">Settings</span> link and enter the same string that we used for the feed title, that is, <span class="packt_screen">D8QuickStart Pets Feed</span>. We don't have to use the same one, but it provides a descriptive title that also works to describe the RSS content. Click the <span class="packt_screen">Apply</span> button.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Feed settings</h1>
                </header>
            
            <article>
                
<p>I'm going out of order for a moment. The reason for this is that Views provides a live preview area that shows what the view output will be based on what settings have been entered. This preview is at the bottom of the page, but if you scroll down, you will just see an error telling you that the feed should have a path, but none has been supplied. As long as an error is present, no preview will be generated, so let's get rid of the error. </p>
<p>We'll make our path <kbd>/pets/feed</kbd>. Click <span class="packt_screen">Path</span> and enter that into the text box in the popup, click <span class="packt_screen">Apply</span>, and click <span class="packt_screen">Save</span> at the bottom of the page. </p>
<p>Scrolling down to the Preview area, you will now see a preview of the feed. It might look a bit strange, but an RSS reader will know what to do with it. But all of our content is there...not just articles about pets. Let's address that next. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Filtering the criteria</h1>
                </header>
            
            <article>
                
<p>We're skipping the <span class="packt_screen">Fields</span> pane because we're not going to be specifying specific fields. We'll let Views parse our article content itself.</p>
<p>Regarding <span class="packt_screen">Content Published</span>, there may be circumstances where unpublished content should be included in the feed, but this isn't one of those times. Views has set this to <strong>Yes</strong> to show only published content. </p>
<p>The next filter we want to put in place will be to limit the select to Articles. Click the <span class="packt_screen">Add button</span> and type <strong>Content type</strong> in the <span class="packt_screen">Search</span> text box. The list of filter criteria will be filtered to just that one, and we'll check the box next to it.</p>
<p>While we're at it, let's also enter the criterion that will allow us to select only articles about pets. Clear the <span class="packt_screen">Search</span> text box and enter <kbd>Tax</kbd>. From the resulting list, check the box for <span class="packt_screen">Has taxonomy term</span>, and then click the <span class="packt_screen">Add and configure filter criteria</span> button.</p>
<p class="mce-root">The first popup is for specifying what content types we want included in our feed. Since we only want Articles, we'll check that box, then click <span class="packt_screen">Apply and continue</span>.</p>
<p>The next popup is used to select the taxonomy vocabulary that will contain the term(s) to which we will limit the content. Since Tags is the only vocabulary we have, it is already selected. Click <span class="packt_screen">Apply and continue</span>. In the subsequent popup, enter <kbd>pets</kbd> into the text box and click <span class="packt_screen">Apply</span>.</p>
<p>Now, when we scroll down to the Preview area, the only content present is the <em>A Moment in the Life of My Dog</em> article.</p>
<p> </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Sort criteria</h1>
                </header>
            
            <article>
                
<p>There is only one criterion present, but it is the one we want. The content will be ordered based on its creation date, with the most recent coming first.</p>
<p>With that, we've completed our first feed. To test it, you will need to have a RSS feed reader installed in your browser. Given that, and entering <kbd>/pets/feed</kbd>, we can see that the feed works as it should:</p>
<p class="mce-root CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-328 image-border" src="assets/6bd7296e-67a2-4cfa-ac1e-84fa27357873.png" style="width:23.17em;height:4.92em;"/></p>
<p>Let's click <span class="packt_screen">Save</span> and move on to our next feed.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the Travel feed</h1>
                </header>
            
            <article>
                
<p>Our Travel feed will be much like the Pets feed. One thing we would like to do differently is have the feed include the image that is part of the content, because travel consuming sites are very visually focused. </p>
<p>Since we have already created a feed display, we can clone it and make the changes we need rather than starting from scratch. Find the drop-down that reads <span class="packt_screen">View Pets Feed</span> and click the arrow, and then click <em><span class="packt_screen">Duplicate Pets Feed</span></em>.</p>
<p>You will note that we now have two <span class="packt_screen">Pets Feed</span> listings in the <span class="packt_screen">Displays</span> pane. The highlighted one is the new one. Let's quickly change its name before we get confused by both having the same name. Click the link for <span class="packt_screen">Pets Feed</span> beside <span class="packt_screen">Display name</span> and change the name to <kbd>Travel Feed</kbd> before clicking <span class="packt_screen">Apply</span>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Title</h1>
                </header>
            
            <article>
                
<p>We will make the same change to the <span class="packt_screen">Title</span>, changing <span class="packt_screen">Pets</span> to <kbd>Travel</kbd>, but before clicking <span class="packt_screen">Apply</span>, ensure that you change the drop-down from <em><span class="packt_screen">All displays</span></em> to <em><span class="packt_screen">This feed (override)</span></em>, which will change the text of the <em><span class="packt_screen">Apply</span></em> button to <em><span class="packt_screen">Apply (this display)</span></em>, otherwise you will change both feeds:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-329 image-border" src="assets/eb9eb42c-d406-4499-8fd0-59c5f8a68e6d.png" style="width:51.83em;height:19.33em;"/></p>
<div class="packt_tip">When working with more than one display, be careful when making settings changes to ensure that the change is configured properly, either for only the display you are currently editing, or for all displays, if that is your intention. Accidentally applying a change to all displays (the default) can result in a lot of extra work. The easiest way to remember this is to always note what the <span class="packt_screen">Apply</span> button says.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Feed settings</h1>
                </header>
            
            <article>
                
<p>I'm going out of order again. This time, we need to change the path, which has been copied from the Pets feed.</p>
<p>We'll make our path <kbd>/travel/feed</kbd>. Click <em><span class="packt_screen">Path</span></em> and enter that into the text box in the popup, and click <em><span class="packt_screen">Apply</span></em>. </p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Format</h1>
                </header>
            
            <article>
                
<p>Make the same change under <span class="packt_screen">Settings</span> in the <span class="packt_screen">Format</span> section, by changing <strong>Pets</strong> to <strong>Travel</strong>. You will notice that this setting does not offer the choices that we just discussed. Some settings apply only to a single display.</p>
<p class="mce-root">We're going to change things up somewhat in order to accommodate our need for having the content image included in the feed. Let's tell Drupal that we want the feed to be in a different format than the default, the output of which you saw for the Pets feed.</p>
<p>Beside <em><span class="packt_screen">Show</span></em>, click <span class="packt_screen"><em>Use site default RSS settings</em></span> and from the popup select <em><span class="packt_screen">Teaser</span></em>. A content teaser typically contains text and an image—if the content contains one—and that is what we want. Click the <em><span class="packt_screen">Apply</span></em> button.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Filtering criteria</h1>
                </header>
            
            <article>
                
<p>We're skipping the <span class="packt_screen">Fields</span> pane because we're not going to be specifying specific fields. We'll let Views parse our article content itself.</p>
<p>Only one setting from the Pets feed needs to be changed. Click the <em><span class="packt_screen">Has taxonomy term (= pets)</span></em> link<em> </em>. In the subsequent popup, enter <kbd>travel</kbd> into the text box, select <em><span class="packt_screen">This feed (override)</span></em> in the dropdown at the top, and click <em><span class="packt_screen">Apply (this display)</span></em>.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Now, when we scroll down to the Preview area, we will be able to see our feed with teasers of our travel content:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-330 image-border" src="assets/9f23274d-cd7f-4da6-9ca7-c58ab148830b.png" style="width:100.58em;height:89.42em;"/></p>
<p>Two down and one to go!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the Leftovers feed</h1>
                </header>
            
            <article>
                
<p><span>We will clone the Pets feed, since it doesn't include images and neither will </span>this one.<span> Click the <span class="packt_screen">Pets Feed</span> button in <span class="packt_screen">Displays</span> to switch to it from the <span class="packt_screen">Travel Feed</span>. Find the drop-down that reads</span> <em><span class="packt_screen">View Pets Feed</span></em> <span>and click the arrow, and then click</span> <em><span class="packt_screen">Duplicate Pets Feed</span></em><span>.</span></p>
<p>You will note that we now have two <em><span class="packt_screen">Pets Feed</span></em> listings in the <span class="packt_screen"><em>Display</em><em>s</em></span> <span>pane. The highlighted one is the new one. Let's quickly change its name before we get confused by both having the same name. Click the link for</span> <em><span class="packt_screen">Pets Feed</span></em> <span>beside</span> <em><span class="packt_screen">Display name</span></em> <span>and change the name to</span> <kbd>Leftovers Feed</kbd><span> before clicking </span><em><span class="packt_screen">Apply</span></em><span>.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Title</h1>
                </header>
            
            <article>
                
<p>We will make the same change to the <em><span class="packt_screen">Title</span></em>, changing <span class="packt_screen">Pets</span> to <kbd>Leftovers</kbd>, but before clicking <em><span class="packt_screen">Apply</span></em>, ensure that you change the drop-down from <em><span class="packt_screen">All displays</span></em> to <em><span class="packt_screen">This feed (override)</span></em>, which will change the text of the <em><span class="packt_screen">Apply</span></em> button to <em><span class="packt_screen">Apply (this display)</span></em>, otherwise you will change all feeds.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Feed settings</h1>
                </header>
            
            <article>
                
<p>We'll make our path <kbd>/leftovers/feed</kbd>. Click <em><span class="packt_screen">Path</span></em> and enter that into the text box in the popup, and then click <em><span class="packt_screen">Apply</span></em>. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Format</h1>
                </header>
            
            <article>
                
<p>Make the same change under <span class="packt_screen">Settings</span> in the <span class="packt_screen">Format</span> section, changing <span class="packt_screen">Pets</span> to <kbd>Travel</kbd>. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Filtering criteria</h1>
                </header>
            
            <article>
                
<p>Click the <em><span class="packt_screen">Has taxonomy term (= pets)</span></em> link. In the subsequent popup, change <em><span class="packt_screen">Is one of</span></em> to <em><span class="packt_screen">Is none of</span></em>. Enter <strong>travel</strong> into the text box after <strong>pets</strong>, separating them with a comma, select <em><span class="packt_screen">This feed (override)</span></em> in the drop-down at the top, and click <em><span class="packt_screen">Apply (this display)</span></em>.</p>
<p>Now, when we scroll down to the Preview area, we will see our final feed containing all content other than the content that was used for the first two feeds.</p>
<p>Great! We've finished with our view. Let's create the menu block!</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating the Feed Links block</h1>
                </header>
            
            <article>
                
<p>Our feeds won't be of much use if site visitors can't find them, so we will create a means for them to do so. We're not going to be using Views for this. You might wonder why, since Views can create a block display. Views is made to select items (rows of data) and create an output for each, whether that be feed items, pages of articles, or a bulleted list. Our links are going to be HTML text unrelated to rows. In other words, this is one block of text without any regard to a selection of article content or any other content. Because of that, the easiest approach is to create a custom block to act as a feed menu on the home page, like so:</p>
<ol>
<li>Navigate to <em><span class="packt_screen">Structure</span></em> | <em><span class="packt_screen">Block layout</span></em> (<kbd>/admin/structure/block</kbd>) and click the tab for <em><span class="packt_screen">Custom block library</span></em>. Then, click the <em><span class="packt_screen">+Add custom block</span></em> button.</li>
<li>For the <em><span class="packt_screen">Block description</span></em>, enter <kbd>RSS feeds</kbd>.</li>
<li>For the <em><span class="packt_screen">Body</span></em>, click <span class="packt_screen">Source</span> in the toolbar, and then enter the following:</li>
</ol>
<pre>&lt;a href="/pets/feed"&gt;Pets&lt;/a&gt;&lt;br /&gt;<br/>&lt;a href="/travel/feed"&gt;Travel&lt;/a&gt;&lt;br /&gt;<br/>&lt;a href="/leftovers/feed"&gt;Other topics&lt;/a&gt;</pre>
<ol start="4">
<li>Click <span class="packt_screen">Source</span> again, then click <span class="packt_screen">Save</span>.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we have learned what RSS feeds are and how they are used, and how to create content meant for a feed. We have learned about the Views module and what views are, how to create a view with multiple feed displays, and how to create a block menu.</p>
<p>In our final chapter, we will put everything together in a home page, including making use of the block we created in this chapter.</p>


            </article>

            
        </section>
    </body></html>