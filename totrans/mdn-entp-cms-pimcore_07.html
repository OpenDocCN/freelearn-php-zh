<html><head></head><body>
		<div id="_idContainer098">
			<h1 id="_idParaDest-128"><em class="italic"><a id="_idTextAnchor129"/>Chapter 7</em>: Administrating Pimcore Sites</h1>
			<p>In the previous chapter, we learned how to manage images, thumbnails, and assets in Pimcore, using the DAM feature. In this chapter, we will start by seeing how it is possible to enhance Pimcore features through the use of bundles, which are packages created by the Pimcore team or by third-party developers and can be easily installed. </p>
			<p>Another fundamental feature that cannot be missed is the organization of users and their permissions. To limit the functionality of the site in the administration and content management sections, we will learn how roles are created, how permissions are created for roles, and how they are assigned to users.</p>
			<p>We will also see how it is possible to import and export the settings of our Pimcore installation to other environments. Finally, we will get a little familiar with the Pimcore console, a powerful and useful tool to be able to execute commands, without having to access the web administration panel.</p>
			<p>We will cover the following topics in this chapter:</p>
			<ul>
				<li>Installing a bundle</li>
				<li>Exploring Users and Roles</li>
				<li>Managing perspectives</li>
				<li>Importing and Exporting Pimcore settings </li>
				<li>Using the Pimcore Console</li>
			</ul>
			<p>By the end of this chapter, we will have learned how to add functionality to our site by installing bundles, configure access to users with different roles and permissions, import and export settings and classes, and use the Pimcore console via the command line. </p>
			<h1 id="_idParaDest-129"><a id="_idTextAnchor130"/>Technical requirements</h1>
			<p>To follow this chapter, the only requirement is to have an up and running Pimcore installation and be able to access it via the command line. </p>
			<p>If you have installed Pimcore with Docker, just run these simple instructions:</p>
			<ol>
				<li>Run Docker with the following command:<p class="source-code"><strong class="bold">docker-compose up</strong></p></li>
				<li>It is possible, but not necessary, to restore the local installation settings by running this command:<p class="source-code"><strong class="bold">docker-compose exec php bash restore.sh</strong></p></li>
			</ol>
			<p>Navigate to <a href="http://localhost/admin">http://localhost/admin</a> and log in with your admin/pimcore credentials.</p>
			<p>Now you are ready to put into practice all the aspects related to this chapter.</p>
			<h1 id="_idParaDest-130"><a id="_idTextAnchor131"/>Installing a bundle</h1>
			<p>In this section, we will see how you can add features to Pimcore with the use of bundles. We will then see what a bundle is and how to install it in a few simple steps.</p>
			<p>Pimcore offers many features already pre-installed and ready to use, but while these may be sufficient for our needs, it is possible to need additional features that are not available in Pimcore. No problem, because the framework provides a quick and easy way to install new features. Adding functionality to the framework is done by installing packages, or <strong class="bold">bundles</strong> in<a id="_idIndexMarker363"/> the Pimcore world, just like in other systems, where they can be identified as plugins, modules, or add-ons. A bundle, in other words, is a package that contains additional components or features that will increase the functionality of Pimcore.</p>
			<p>Installing a bundle is a relatively easy operation; let's proceed step by step.</p>
			<p>The first thing to do is to identify a bundle to install according to our needs. There's a dedicated page for this on the official Pimcore site, where you can find a large number of bundles, many created by the Pimcore development team and others by third-party developers. This is the link to this page, which is <a id="_idIndexMarker364"/>called the Pimcore Marketplace: https://Pimcore.com/en/developers/marketplace.</p>
			<p>We can see<a id="_idIndexMarker365"/> how the marketplace looks in the following screenshot:</p>
			<div>
				<div id="_idContainer076" class="IMG---Figure">
					<img src="image/Figure_7.01_B17073.jpg" alt="Figure 7.1: Pimcore Marketplace&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.1: Pimcore Marketplace</p>
			<p>As we can see in the previous screenshot, it is possible to do a search and filter the search results.</p>
			<p>Now we just have to look for what we need. For this chapter, we can assume we need a bundle that allows us to generate continuous numbers. Even if the bundle we are going to install will not add many features to our Pimcore installation, the procedure remains valid for every bundle that we will have to install, regardless of its features.</p>
			<p>After a simple search, we found a bundle that will be right for us. The bundle is called <strong class="bold">Number Sequence Generator</strong>, developed by the Pimcore team. In the next screenshot, we see <a id="_idIndexMarker366"/>what the page looks like with the search carried out and the results:</p>
			<div>
				<div id="_idContainer077" class="IMG---Figure">
					<img src="image/Figure_7.02_B17073.jpg" alt="Figure 7.2: The Pimcore Marketplace page with a search performed&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.2: The Pimcore Marketplace page with a search performed</p>
			<p>As we can see in the preceding screenshot, we got a list of results with our search. The search results are represented with cards, where we can read a brief description of the features that we will introduce with the installation of the bundle. There is also other useful information, such as the version number, category, name of the developer, whether it is a reviewed version, and when it was last reviewed.</p>
			<p>Now, just click on the bundle and go to the details page. Among all the additional information that we find on the page, click on the <strong class="bold">GET IT NOW</strong> button. This is a link that will send us to the bundle's source code page.</p>
			<p>So, let's go a bit <a id="_idIndexMarker367"/>further and begin with the installation procedure. It's nothing complicated, but compared to other plugin installation systems, such as WordPress or other similar systems, it requires some additional steps. So, get ready to get your hands a little dirty, and follow these steps:</p>
			<ol>
				<li value="1">Locate and open the <strong class="source-inline">composer.json</strong> file in the source file repository. In our case, the file looks like this:<p class="source-code">{</p><p class="source-code">     "name": "Pimcore/number-sequence-generator",</p><p class="source-code">     "license": "GPL-3.0+",</p><p class="source-code">     "type": "Pimcore-bundle",</p><p class="source-code">     "config": {</p><p class="source-code">          "sort-packages": true</p><p class="source-code">     },</p><p class="source-code">     …</p><p class="source-code">}</p><p>While familiarity with the <strong class="source-inline">composer.json</strong> file is certainly useful, in this case, the only thing we are interested in is retrieving the bundle name to install it. We find this by scrolling up the file to the <strong class="source-inline">"name"</strong> property.</p><p>Now that we <a id="_idIndexMarker368"/>know the name of the bundle to install, we need to execute one simple command, and <strong class="source-inline">compose</strong> will do everything for us. To do this, we need to access our command-line installation. If you do not use Docker, just open a shell on the machine where Pimcore is installed. Otherwise, you first need to access the container where Pimcore runs. </p></li>
				<li>To do that, type the following command: <p class="source-code"><strong class="bold">docker-compose ps</strong></p><p>The output of this command shows a list of all the Docker images up and running on the machine, formatted as a table; we are interested in the second column, <strong class="source-inline">NAME</strong>, related to the Pimcore image. </p></li>
				<li>Once you have recovered the container ID of the image where Pimcore runs, type this command:<p class="source-code"><strong class="bold">docker-compose exec  xxxxxxxxxxxx bash</strong></p><p>Here, <strong class="source-inline">xxxxxxxxxxxx</strong> is the container ID retrieved from the previous command. </p></li>
				<li>Once you are in, run this command:<p class="source-code"><strong class="bold">composer require pimcore/number-sequence-generator</strong></p><p>The preceding command produces some lines of output in the console where it was run because <strong class="source-inline">composer</strong> downloads and installs the packages needed to add the new bundle. The output of the command can be longer or shorter, depending on the number of packages that need to be installed or whether they are already<a id="_idIndexMarker369"/> installed and need to be updated. At the end of the process, the last few lines in the console should look like this:</p><p class="source-code"><strong class="bold">… (previous console log lines) </strong></p><p class="source-code"><strong class="bold">Trying to install assets as relative symbolic links.</strong></p><p class="source-code"><strong class="bold"> --- --------------------------------- ------------------ </strong></p><p class="source-code"><strong class="bold">      Bundle                            Method / Error    </strong></p><p class="source-code"><strong class="bold"> --- --------------------------------- ------------------ </strong></p><p class="source-code"><strong class="bold">     FOSJsRoutingBundle                relative symlink  </strong></p><p class="source-code"><strong class="bold">… (some other bundles)</strong></p><p class="source-code"><strong class="bold">--- --------------------------------- ------------------                                                                             </strong></p><p class="source-code"><strong class="bold"> [OK] All assets were successfully installed.     </strong></p></li>
			</ol>
			<p>If the installation was successful, we will have installed a new bundle in our Pimcore. We just have to go and configure it.</p>
			<p>By following the <strong class="bold">Tools | Bundles</strong> menus, you can access the bundle configuration page. In the next screenshot, we see what this page looks like:</p>
			<div>
				<div id="_idContainer078" class="IMG---Figure">
					<img src="image/Figure_7.03_B17073.jpg" alt="Figure 7.3: The Pimcore bundle management page&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.3: The Pimcore bundle management page</p>
			<p>As we can see in the preceding<a id="_idIndexMarker370"/> screenshot, we have two bundles installed; the one on the second line is the bundle we just installed.</p>
			<p>Before completing the installation of the bundle, let's stop for a moment and analyze the columns that we see in the table in <em class="italic">Figure 7.3</em>. </p>
			<p>We can see that there are two types of columns: </p>
			<ul>
				<li><strong class="bold">Information columns</strong>, which <a id="_idIndexMarker371"/>include <strong class="bold">ID</strong>, <strong class="bold">Name</strong>, <strong class="bold">Version</strong>, and <strong class="bold">Description</strong>.</li>
				<li><strong class="bold">Action columns</strong>, which <a id="_idIndexMarker372"/>contain action buttons. In particular, the two columns that are of interest to us are the <strong class="bold">Enable/Disable</strong> and <strong class="bold">Install/Uninstall</strong> columns, and their action buttons.</li>
			</ul>
			<p>First of all, we need to enable the bundle. To do that, click on the <strong class="bold">+</strong> icon in the <strong class="bold">Enable / Disable</strong> column, and proceed to enable the bundle. This action will take a few seconds, and when it is finished, a modal will appear on the screen, indicating that the enabling operation was successful.</p>
			<p>Now we are ready to <a id="_idIndexMarker373"/>install the bundle. Before moving on to this step, we need to clear the cache. You can do this easily by clicking on the button at the top right: <strong class="bold">Clear cache and reload</strong>. The cache cleaning operation is necessary because Pimcore extensively uses caches for different types of data, including bundle files and their configurations. It is not recommended to complete the operation without first clearing the cache and then reloading the page.</p>
			<p>After clearing the cache and Pimcore has reloaded, we can return to the bundle management page to verify the correct status of the bundle.</p>
			<p>Now that we have <a id="_idIndexMarker374"/>enabled the bundle, an icon with <strong class="bold">+</strong> appears in the <strong class="bold">Install/Uninstall</strong> column, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer079" class="IMG---Figure">
					<img src="image/Figure_7.04_B17073.jpg" alt="Figure 7.4: The Pimcore bundle after being enabled&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.4: The Pimcore bundle after being enabled</p>
			<p>As we can see from the preceding screenshot, it is now possible to click on the <strong class="bold">+</strong> icon in the <strong class="bold">Install/Uninstall</strong> column of the new bundle to start the installation process.</p>
			<p>As for the enabling action, the system notifies us of the result of the operation through a modal containing some information on the operation that was just completed.</p>
			<p>Once again, Pimcore reminds us that we need to clear the cache and reload Pimcore. Let's do this for the last time, and the bundle installation is complete.</p>
			<p>Now that we have successfully installed the new bundle, we can take advantage of its features. The bundle we have chosen for this chapter allows us to generate continuous numbers, for example, for order numbers or customer numbers. We will not see how this feature works in detail because the purpose of this section is to learn how to install and manage bundles.</p>
			<p>In the next section, we're going to see how users and roles are created, and how a user can be profiled to limit access to content.</p>
			<h1 id="_idParaDest-131"><a id="_idTextAnchor132"/>Exploring Users and Roles</h1>
			<p>In this section, we will see how we can manage users and their permissions, to limit the functionality of the site in the administration and content management sections. We will see how roles and permissions are created and how they are assigned to users.</p>
			<p>During the creation of a site, we often have to manage different parts with different importance. In addition to this, it is possible to differentiate the work we do in the organization. The administration part of the site is important and concerns the creation or editing of contents. </p>
			<p>Generally, the part concerning the maintenance and management of the site is the responsibility of the administrator. Thus, tasks such as managing languages, configuring routing rules, or creating users and installing bundles are done by expert users who have the required skills and knowledge, and the privileges to do such actions are dependent on the administrators. The content, on the other hand, is often the responsibility of other people such as the <strong class="bold">users</strong>, often<a id="_idIndexMarker375"/> defined as editors or publishers. Once we become aware that the management and maintenance of a site pass through several users, we can therefore take another step and define some basic notions that concern the rules of <em class="italic">who does what</em>.</p>
			<p>As we have already mentioned, there are different types of users: in our example, we talked about administrators, who manage the configuration parts of the site, and editors or publishers, who enter the content. This distinction, although valid, is however limited because just as in a real company, where there are many people with many different tasks and responsibilities, even on a site, there can be many users with many different roles and responsibilities.</p>
			<p>So, how do we distinguish the users who access the site, and above all, how can we allow these users to be able to see and modify certain information that we want them to work on? The answer to this question is simple: through roles.</p>
			<p>But what are roles? A <strong class="bold">role</strong> is essentially<a id="_idIndexMarker376"/> a set of permissions. If we wanted to create a role for a publisher, referring to the previous example, we would have to put within this role the permissions to create and modify content such as web pages, products of a shop, or articles of a blog. Once the role has been created, it will be possible to give this role to one or more users of the site, effectively allowing these users to do the actions that the role allows.</p>
			<h2 id="_idParaDest-132"><a id="_idTextAnchor133"/>Setting Users and Roles</h2>
			<p>In Pimcore, as <a id="_idIndexMarker377"/>well as in almost all systems that allow access to multiple people, it is possible to<a id="_idIndexMarker378"/> create users and roles and to relate the two entities. For this purpose, there are dedicated sections in the Pimcore <strong class="bold">Settings</strong> menu: <strong class="bold">Users</strong> and <strong class="bold">Roles</strong>. </p>
			<p>Following the <strong class="bold">Settings | Users</strong> menu, Pimcore opens a page with a list of registered users. On this page, we can delete, modify, or create new users. To open the role management page instead, simply follow the link in the <strong class="bold">Settings | Roles</strong> menu. Here, we will find the list of roles created in the system, and the possibility of modifying, deleting, or creating new ones. </p>
			<p>By clicking on a <a id="_idIndexMarker379"/>user, the <strong class="bold">Configuration</strong> tab will open, where you can add or change information<a id="_idIndexMarker380"/> such as <strong class="bold">Firstname</strong> and <strong class="bold">Lastname</strong>, <strong class="bold">Email</strong>, and <strong class="bold">Language</strong>, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer080" class="IMG---Figure">
					<img src="image/Figure_7.05_B17073.jpg" alt="Figure 7.5 – Administration pages for users&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.5 – Administration pages for users</p>
			<p>In the previous screenshot, we can see the user administration page; by right-clicking the left menu, a pop-up context menu will appear where you can create or delete a user. The role administration page has the same layout and functionality as the user administration page.</p>
			<p>In Pimcore, there are two levels of<a id="_idIndexMarker381"/> user permissions:</p>
			<ul>
				<li>Permissions on system components</li>
				<li>Permissions on data elements (assets, objects, and documents)</li>
			</ul>
			<p>Permissions can be <a id="_idIndexMarker382"/>granted to roles or individual users. It is not mandatory to use roles; permissions can be granted to users directly instead. However, it is advised to use roles if there is a larger user group to manage. In the <strong class="bold">User/Role</strong> settings tab, inside the <strong class="bold">Permission</strong> section, it can be decided which permissions are granted to that user or role. An individual user has a few more general settings than the role.</p>
			<p>So, let's see how to <a id="_idIndexMarker383"/>assign permissions to users. Take a look at how the user <a id="_idIndexMarker384"/>configuration page is defined. As you can see in <em class="italic">Figure 7.5</em>, the page is divided into four tabs. Describing them all in detail would take a long time and is beyond the scope of this chapter. For our purpose, we will keep the focus on the <strong class="bold">Settings</strong> and <strong class="bold">Workspaces</strong> tabs.</p>
			<p>In particular, the <strong class="bold">Settings</strong> tab is divided into sections:</p>
			<ul>
				<li><strong class="bold">General</strong>: Configures the account user</li>
				<li><strong class="bold">Admin</strong>: Grants administrator role to the user</li>
				<li><strong class="bold">Permission</strong>: Sets <a id="_idIndexMarker385"/>which system role to grant to the user</li>
				<li><strong class="bold">Allowed types to create</strong>: Selects the classes allowed to be created</li>
				<li><strong class="bold">Editor Settings</strong>: Selects the language for the user</li>
				<li><strong class="bold">Shared Translation Settings</strong>: Manages shared translations</li>
			</ul>
			<p>So, let's start with the configuration of user settings. By clicking on the <strong class="bold">+</strong> icon, you discover the various configurations for each section, as we can see in the following screenshot:</p>
			<div>
				<div id="_idContainer081" class="IMG---Figure">
					<img src="image/Figure_7.06_B17073.jpg" alt="Figure 7.6: User administration page: sections inside the Settings tab&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.6: User administration page: sections inside the Settings tab</p>
			<p>As we can see from the<a id="_idIndexMarker386"/> previous screenshot, the <strong class="bold">General</strong> section contains all the user information, such as username and password, image, and roles. The <strong class="bold">Admin</strong> section, on the other hand, contains only a checkbox that, if selected, will grant administrator privileges for the user; that is, they will have full control of Pimcore. The third section, <strong class="bold">Permissions</strong>, is a long list of checkboxes, each of which identifies particular permission to perform operations on Pimcore. </p>
			<p>Let's check out some of these items and their meaning:</p>
			<ul>
				<li><strong class="bold">Assets</strong>: Makes the assets<a id="_idIndexMarker387"/> tree visible.</li>
				<li><strong class="bold">Classes</strong>: Makes the object classes editor visible (user can create and modify object classes).</li>
				<li><strong class="bold">Clear Cache</strong>: Defines whether a user may clear the Pimcore cache.</li>
				<li><strong class="bold">Clear Temporary Files</strong>: Defines whether a user may delete temporary system files.</li>
				<li><strong class="bold">Documents</strong>: Makes the documents tree visible.</li>
				<li><strong class="bold">Document Types</strong>: Allows the user to create and modify predefined document types.</li>
				<li><strong class="bold">Emails</strong>: The user sees the email history.</li>
				<li><strong class="bold">Extensions</strong>: Specifies whether a user is allowed to download, install, and manage the extension.</li>
				<li><strong class="bold">Objects</strong>: Makes the object's tree visible.</li>
				<li><strong class="bold">Recycle Bin</strong>: The user has access to the recycle bin.</li>
				<li><strong class="bold">Redirects</strong>: The user can <a id="_idIndexMarker388"/>create and modify redirects.</li>
				<li><strong class="bold">System Settings</strong>: The user has access to system settings.</li>
				<li><strong class="bold">Translations</strong>: Defines whether a user may view and edit website translations.</li>
				<li><strong class="bold">Users</strong>: Defines whether a user may manage other users' settings and system permissions.</li>
				<li><strong class="bold">Website Settings</strong>: The user can create and modify website settings.</li>
			</ul>
			<p>Therefore, by selecting some of these checkboxes, it is possible to configure the permissions of a user (or for a role, the configuration section is identical) according to the needs. These permissions are the Pimcore system permissions. </p>
			<p>There are also other permissions that can be configured from the <strong class="bold">Workspaces</strong> tab, which looks like this:</p>
			<div>
				<div id="_idContainer082" class="IMG---Figure">
					<img src="image/Figure_7.07_B17073.jpg" alt="Figure 7.7: Managing user permissions on data elements (assets, objects, and documents)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.7: Managing user permissions on data elements (assets, objects, and documents)</p>
			<p>As we can see in the preceding screenshot, a user's access can be restricted on an element basis. This can be done by defining workspaces for a user or role. Provided that a user may generally access documents, it can be specified what a user/role may or may not do with each document or <a id="_idIndexMarker389"/>workspace. The same is true for objects and assets.</p>
			<p>The user permissions based on the elements are identified by a column, as can be seen in <em class="italic">Figure 7.7</em>. We can summarize some of them:</p>
			<ul>
				<li><strong class="bold">List</strong>: The element can be listed in a tree.</li>
				<li><strong class="bold">View</strong>: The element can be opened.</li>
				<li><strong class="bold">Save</strong>: The element can be saved (save button visible).</li>
				<li><strong class="bold">Publish</strong>: The element can be published (publish button visible).</li>
				<li><strong class="bold">Create</strong>: New child elements can be created (does not exist for assets).</li>
				<li><strong class="bold">Delete</strong>: The element can be deleted.</li>
				<li><strong class="bold">Versions</strong>: Makes<a id="_idIndexMarker390"/> the <strong class="bold">Versions</strong> tab available.</li>
			</ul>
			<p>Now that we have seen all the components needed to configure and use users and roles, let's move on to a simple practical example.</p>
			<h2 id="_idParaDest-133"><a id="_idTextAnchor134"/>A practical example of using users and roles</h2>
			<p>Now that we have a clear idea of how to configure users and roles, let's take a simple practical example. </p>
			<p>For this example, we created two users, <strong class="bold">Tom</strong> and <strong class="bold">Bob</strong>, and two roles, <strong class="bold">tomstuff</strong> and <strong class="bold">bobstuff</strong>. Let's<a id="_idIndexMarker391"/> assign <strong class="bold">Tom</strong> the <strong class="bold">tomstuff</strong> role and <strong class="bold">Bob</strong> the <strong class="bold">bobstuff</strong> role. This is <a id="_idIndexMarker392"/>possible by going to the <strong class="bold">General</strong> section of the <strong class="bold">User Configuration</strong> menu (<em class="italic">Figure 7.6</em>) and selecting the appropriate role in the <strong class="bold">Roles</strong> box.</p>
			<p>What we need to do now is to select the permissions for each role. This can be done from the group called <strong class="bold">Permissions</strong> inside the <strong class="bold">Settings</strong> tab (see <em class="italic">Figure 7.6</em>):</p>
			<ul>
				<li>For <strong class="bold">tomstuff</strong>, we selected <strong class="bold">Notes &amp; Events</strong> | <strong class="bold">System Settings</strong> | <strong class="bold">Users</strong> |<strong class="bold"> Admin Translation</strong> | <strong class="bold">Object</strong>.</li>
				<li>For <strong class="bold">bobstuff</strong>, we selected <strong class="bold">Recycle Bin</strong> | <strong class="bold">Static Routes</strong> | <strong class="bold">Clear Cache</strong> |<strong class="bold"> Object</strong>.</li>
			</ul>
			<p>These are permissions concerning the Pimcore configurations and settings. Now let's set the permissions for the contents. We have created two classes: <strong class="source-inline">Book</strong> and <strong class="source-inline">Film</strong>. Class creation is fully described in <a href="B17073_05_ePub_RK.xhtml#_idTextAnchor093"><em class="italic">Chapter 5</em></a>, <em class="italic">Exploring Objects and Classes</em>. We assigned the <strong class="bold">tomstuff</strong> role permissions to manage the books, while <strong class="bold">bobstuff</strong> was given permissions to manage the films. This can be done from the <strong class="bold">Workspace</strong> tab, as seen in <em class="italic">Figure 7.7</em>.</p>
			<p>Now that the configuration is completed, let's log in with the two users; in the next screenshot, we can see what the administration looks like by logging in as Tom:</p>
			<div>
				<div id="_idContainer083" class="IMG---Figure">
					<img src="image/Figure_7.08_B17073.jpg" alt="Figure 7.8 – Administration page for Tom&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.8 – Administration page for Tom</p>
			<p>As we can see in the previous screenshot, only some menu items are accessible for Tom, under the permissions of the user's role. We can also see that Tom can only manage book objects, as we specified in the workspace of the <strong class="bold">tomstuff</strong> role. In the next screenshot, instead, we can see what the administration looks like for Bob:</p>
			<div>
				<div id="_idContainer084" class="IMG---Figure">
					<img src="image/Figure_7.09_B17073.jpg" alt="Figure 7.9: Administration page for Bob&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.9: Administration page for Bob</p>
			<p>Again, in this screenshot, we can see how the menus are limited for Bob, and how it is possible to manage only the film objects.</p>
			<p>As we can see from the<a id="_idIndexMarker393"/> preceding screenshot, the context menus of the Pimcore administration<a id="_idIndexMarker394"/> are different according to the user and their roles. In particular, we can verify that only the actions related to the assigned permissions are visible; everything else is not accessible. Even for the contents, the two users are only enabled for the classes that are accessible through their role; in particular, Tom can manage books, while Bob can manage films.</p>
			<p>What we have just seen in this section is a possible solution to the problem of limiting access to certain users based on roles, and it is possible to achieve this without having to write the code, simply by configuring users, roles, and permissions, from the Pimcore administration page. </p>
			<p>Pimcore, however, offers a much more complete system for creating special views that is much more complete and configurable than what we have just seen. This Pimcore feature is <a id="_idIndexMarker395"/>called <strong class="bold">perspectives</strong>, that is, views created and configured ad hoc for specific users. So, let's see how a perspective can be created, how it is configured, and what the final result will be in our Pimcore.</p>
			<h1 id="_idParaDest-134"><a id="_idTextAnchor135"/>Managing Perspectives</h1>
			<p>As we saw in the previous<a id="_idIndexMarker396"/> section, it is possible to limit access to Pimcore features by configuring users and roles. We also mentioned, at the end of the previous section, that there is a feature in Pimcore that allows you to obtain the same result, namely the perspective. While the preceding is completely true, there is one important difference to keep in mind: while using permissions on users and roles restricts access to data, perspectives are not intended to be used to restrict access to data. So, although the end result may seem similar, they are two very different things in terms of security. Our advice is to use both, so as to have a perfect result both from the administrative backend side as well as from the security side.</p>
			<p>So, let's see how we can create a perspective. The simplest way is to use the bundle developed by the Pimcore dev team. This bundle provides an editor for Pimcore that allows us to do the following:</p>
			<ul>
				<li>Add/remove/edit custom views</li>
				<li>Add/remove/edit perspectives</li>
			</ul>
			<p>It also allows us to configure most of the possible configuration options directly in the user interface.</p>
			<p>The bundle page can be reached at this address: https://github.com/pimcore/perspective-editor.</p>
			<p>As we have<a id="_idIndexMarker397"/> seen in the <em class="italic">Installing a bundle</em> section of this chapter, to install a bundle it will be enough to follow a few simple steps. We will not explain again how to install the bundle, but as we have already seen, we have to ask a composer to add the bundle to the solution, with the following command: </p>
			<p class="source-code">composer require pimcore/perspective-editor</p>
			<p>After installing and activating the bundle on Pimcore, we are ready to use this new feature, starting from the new menu item that we find under <strong class="bold">Settings</strong> |<strong class="bold"> Perspectives / Views</strong>, as you can see in the following screenshot:</p>
			<p class="figure-caption"> </p>
			<div>
				<div id="_idContainer085" class="IMG---Figure">
					<img src="image/Figure_7.10_B17073.jpg" alt="Figure 7.10: Perspectives / Views Menu item and the Perspectives edit page&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.10: Perspectives / Views Menu item and the Perspectives edit page</p>
			<p>As you can see<a id="_idIndexMarker398"/> in the previous screenshot, there is a default perspective, which can be changed at will. But in order not to touch the default perspective, let's go and create a new one. By clicking on the <strong class="bold">Add Perspective</strong> button, a modal will open, which will allow us to enter only the name of the new perspective. We will call our new perspective <strong class="source-inline">MyFirstPerspective</strong>.</p>
			<p>As you can also see in <em class="italic">Figure 7.10</em>, we have five fields in a perspective, and they are as follows:</p>
			<ul>
				<li><strong class="bold">icon</strong>: You can select an <a id="_idIndexMarker399"/>icon for the perspective.</li>
				<li><strong class="bold">Element Tree Left</strong>: Within this element, it is possible to add one or more of the following elements: <strong class="bold">Document</strong>, <strong class="bold">Asset</strong>, <strong class="bold">Object</strong>, or <strong class="bold">Custom View</strong>. The added items will be displayed on the left column of the Pimcore admin interface.</li>
				<li><strong class="bold">Element Tree Right</strong>: This is the same as the preceding item just described, but the items will be displayed on the right column.</li>
				<li><strong class="bold">Dashboard</strong>: By selecting this element, you would be able to decide which elements can be allowed or forbidden in the dashboard. It is also possible to create new dashboards and, for each one, it is possible to decide which elements it is composed of.</li>
				<li><strong class="bold">Toolbar</strong>: Through a<a id="_idIndexMarker400"/> list of checkboxes, grouped by menu, it is possible to choose whether or not to display a menu, but also to decide which items for a menu should be visible or not. In other words, through this element, it is possible to enable or hide the menu items of the Pimcore administration, and even hide entire menus.</li>
			</ul>
			<p>As we have seen, in the two items, <strong class="bold">Element Tree Right</strong> and <strong class="bold">Element Tree Left</strong>, it is possible to add one or more of the document, asset, or object elements. In the next screenshot, we see how to add the document element:</p>
			<div>
				<div id="_idContainer086" class="IMG---Figure">
					<img src="image/Figure_7.11_B17073.jpg" alt="Figure 7.11: Perspective Menu item: add document element tree left&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.11: Perspective Menu item: add document element tree left</p>
			<p>As we can see in the<a id="_idIndexMarker401"/> preceding screenshot, for our view we have decided to add a document and asset elements in the left column and an object in the right column. Once you have decided which elements to put where, by selecting each of these elements, it will be possible to decide, through a list of checkboxes, which elements of the contextual menu should be visible for each element. Let's take, for example, the document element, as seen in the following screenshot:</p>
			<div>
				<div id="_idContainer087" class="IMG---Figure">
					<img src="image/Figure_7.12_B17073.jpg" alt="Figure 7.12: Definition of the context menu for the document element&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.12: Definition of the context menu for the document element</p>
			<p>As we can see from the previous screenshot, it is possible to select which context menu items we want to display. </p>
			<p>As for the<a id="_idIndexMarker402"/> elements of the columns, just seen, through the <strong class="bold">Toolbar</strong> element, it is possible to decide which menus to show or hide, or it is possible to decide which items of a menu or submenu we want to hide. All menus are grouped, and in each group there is a list of checkboxes that act on the menu item, displaying or hiding it. For better understanding, let's take a look at the following screenshot, relating to the settings menu:</p>
			<div>
				<div id="_idContainer088" class="IMG---Figure">
					<img src="image/Figure_7.13_B17073.jpg" alt="Figure 7.13: Selection of items to be displayed in the settings menu&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.13: Selection of items to be displayed in the settings menu</p>
			<p>As we can see<a id="_idIndexMarker403"/> in the preceding screenshot, each menu item is a group, which can be expanded, revealing the list of checkboxes that identify the various menu items. Each checkbox list group has <strong class="bold">Hide </strong><strong class="bold">xxx Menu</strong> as its first entry, where <strong class="bold">xxx</strong> is the name of the menu. If we select this item, the menu will be hidden, and subsequent ticks will not be considered.</p>
			<p>Once all parts of the perspectives are defined, the perspective item will appear in the file menu, and inside it will be possible to select our new perspective, as we can see in the following figure:</p>
			<div>
				<div id="_idContainer089" class="IMG---Figure">
					<img src="image/Figure_7.14_B17073.jpg" alt="Figure 7.14: File menu with the list of perspectives&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.14: File menu with the list of perspectives</p>
			<p>As we can see in the preceding figure, in the new menu item called <strong class="bold">Perspectives</strong>, inside the file menu, there are two items: the default perspective and our new perspective, <strong class="bold">MyFirstPerspective</strong>.</p>
			<p>Once our <a id="_idIndexMarker404"/>perspective is configured as we want, we can associate it to users or roles. This can be done directly in the user or role settings, as we can see in the following figure:</p>
			<div>
				<div id="_idContainer090" class="IMG---Figure">
					<img src="image/Figure_7.15_B17073.jpg" alt="Figure 7.15: Configuration of the perspective for users and roles&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.15: Configuration of the perspective for users and roles</p>
			<p>As we can see from the preceding screenshot, the selection of the perspective for users and roles is extremely simple: just select the desired perspective from the list and save the settings. We have thus seen how users and roles are managed in Pimcore, and how to create and configure perspectives to be associated with each user or role. In the next section, we will see a very useful feature concerning the maintenance of Pimcore: the import/export of Pimcore settings.</p>
			<h1 id="_idParaDest-135"><a id="_idTextAnchor136"/>Importing and Exporting Pimcore settings</h1>
			<p>In this section, we will see how it is possible to export the settings of our Pimcore installation and import them into other environments, a fundamental functionality when we have to work in different environments, such as for development, testing, or production.</p>
			<p>As we saw in <a href="B17073_05_ePub_RK.xhtml#_idTextAnchor093"><em class="italic">Chapter 5</em></a>, <em class="italic">Exploring Objects and Classes</em>, when we talked about classes and objects, we<a id="_idIndexMarker405"/> learned how to create new entities and use them for our <a id="_idIndexMarker406"/>purposes. All the work we do is somehow trapped inside Pimcore, like in a kind of a box. This is completely normal, and when developing a new website, we are used to referring to the various environments, development, testing, staging, and so on, where we have made our changes. The doubt therefore arises: if I work in the development environment, for example, how can I transfer the work done in other environments?</p>
			<p>Well, having a tool that allows us to export the work done in a Pimcore installation, to be able to import it into another installation, becomes a necessary, if not indispensable, benefit. </p>
			<p>To clarify, let's take a <a id="_idIndexMarker407"/>simple example taking the two classes we initially <a id="_idIndexMarker408"/>created: <strong class="source-inline">Book</strong> and <strong class="source-inline">Film</strong>. If we want to export one of the two classes, or both, to be able to import them into another Pimcore installation in another environment, we can go to the class editing page and click the <strong class="bold">Export</strong> button in the bottom button bar, as you can see in the following screenshot:</p>
			<div>
				<div id="_idContainer091" class="IMG---Figure">
					<img src="image/Figure_7.16_B17073.jpg" alt="Figure 7.16 Class edit page, with the Import/Export buttons&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.16 Class edit page, with the Import/Export buttons</p>
			<p>As we can see, the <strong class="bold">Export</strong> button is exactly what we need. Just click on <strong class="bold">Export</strong> and Pimcore will generate a JSON file containing all the necessary information to be able to import it later on in another Pimcore environment. Once it has been exported, all we have to do is access the Pimcore installation where we want to import our class, create it, and then import the previously extracted file using the <strong class="bold">Import</strong> button, as shown in <em class="italic">Figure 7.16</em>.</p>
			<p>But this is only part of the solution. Let's imagine we have hundreds of classes; exporting and importing them one by one could be a long job, and we could forget some classes along the way. To solve this problem, navigate to <strong class="bold">Settings</strong> | <strong class="bold">Data Objects</strong> and we find two items: <strong class="bold">Bulk Export</strong> and <strong class="bold">Bulk Import</strong>. After clicking on <strong class="bold">Bulk Export</strong>, a modal like this will appear:</p>
			<div>
				<div id="_idContainer092" class="IMG---Figure">
					<img src="image/Figure_7.17_B17073.jpg" alt="Figure 7.17: Bulk export&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.17: Bulk export</p>
			<p>As we can see, it is possible to select from the list of classes the ones that we want to export. </p>
			<p>Also, if you have<a id="_idIndexMarker409"/> created or edited <strong class="bold">field-collections</strong> or <strong class="bold">bricks</strong>, you can <a id="_idIndexMarker410"/>export these. <strong class="bold">Field-collections</strong> and <strong class="bold">bricks</strong> are internal Pimcore objects that can be added or modified. The management pages of these entities can be found by following the menu items: <strong class="bold">Data Objects</strong> | <strong class="bold">field-collections</strong> and <strong class="bold">Data Object</strong> | <strong class="bold">bricks</strong>. These two objects are described in <a href="B17073_05_ePub_RK.xhtml#_idTextAnchor093"><em class="italic">Chapter 5</em></a>, <em class="italic">Exploring Objects and Classes</em>. For our example, we select only the two classes: <strong class="source-inline">Book</strong> and <strong class="source-inline">Film</strong>.</p>
			<p>Once we have selected what we want to extract by clicking on <strong class="bold">Export</strong>, Pimcore generates a JSON file containing all the information necessary to import all the elements in another environment. Finally, you can use the <strong class="bold">Bulk Import</strong> command to reload the exported file containing all the exported entities.</p>
			<p>The import happens <a id="_idIndexMarker411"/>in two steps, as follows: </p>
			<ol>
				<li value="1">Select the JSON file generated during the export. Using the following modal, load the JSON file that was generated during the export stage, which you now want to import: <div id="_idContainer093" class="IMG---Figure"><img src="image/Figure_7.18_B17073.jpg" alt="Figure 7.18: Select local file&#13;&#10;"/></div><p class="figure-caption">Figure 7.18: Select local file</p></li>
				<li>Decide what<a id="_idIndexMarker412"/> we want to import from this file. In our example, we selected the two classes we want to import – <strong class="bold">Book</strong> and <strong class="bold">Film</strong> – from the following modal:</li>
			</ol>
			<p class="figure-caption"> </p>
			<div>
				<div id="_idContainer094" class="IMG---Figure">
					<img src="image/Figure_7.19_B17073.jpg" alt="Figure 7.19: Select object to import&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.19: Select object to import</p>
			<p>As you can see in the previous screenshot, Pimcore shows us the list of all the objects that we can import, related to the file we have uploaded. So, let's select what we want to import. Once we have decided, just click on <strong class="bold">Apply</strong>, and Pimcore will do the rest.</p>
			<p>At this point in the chapter, we have seen how to install a bundle, how to manage users and roles, and also how we transfer our work between various Pimcore installations. We have done all these activities from the web admin interface that Pimcore makes available to us. But there is also another way to be able to make changes to Pimcore, without having to go through the administration page: using the Pimcore console tool. </p>
			<h1 id="_idParaDest-136"><a id="_idTextAnchor137"/>Using the Pimcore Console</h1>
			<p>In this section, we will get a<a id="_idIndexMarker413"/> little familiar with the Pimcore console, a powerful and useful tool to be able to execute commands without having to access the web administration panel.</p>
			<p>The <strong class="bold">Pimcore Console</strong> can<a id="_idIndexMarker414"/> be described as a command-line interface that allows you to install, configure, and maintain your Pimcore using only the terminal. The main goal is to provide a tool for the actions that can normally be performed through the administrative area.</p>
			<p>As Pimcore's admin interface is so beautiful and easy to use, the natural question is: why should you use a command-line interface? There are two main reasons:</p>
			<ul>
				<li><strong class="bold">The keyboard is faster than the mouse</strong>: For advanced users, typing a command can be an order of magnitude faster than pressing a button in a web browser.</li>
				<li><strong class="bold">Scripting</strong>: You can put several commands in a text file and have it run automatically.</li>
			</ul>
			<p>Using a<a id="_idIndexMarker415"/> console instead of using the web interface is much faster because it eliminates all the dead time for loading the page and all its components. The console acts directly on the Pimcore core, making the command execution much faster. </p>
			<p>So, the first step to using the console is to get on board the machine where Pimcore is running, or inside the Docker container (for more on Docker, see the <em class="italic">Installing a bundle</em> section in this chapter to get commands to execute to access the container), and run this command to get a list of available commands:</p>
			<p class="source-code">./bin/console list</p>
			<p>The output of this command is very long because many commands can be executed from the console. Let's look at the partial output of the command list:</p>
			<div>
				<div id="_idContainer095" class="IMG---Figure">
					<img src="image/Figure_7.20_B17073.jpg" alt="Figure 7.20: The partial output of the Pimcore console&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.20: The partial output of the Pimcore console</p>
			<p>As we can <a id="_idIndexMarker416"/>see in the preceding screenshot, the first part of the output contains useful information about the options for the Pimcore console, and beneath that is the list of the available commands (which for convenience we have cut out in <em class="italic">Figure 7.20</em>). Even if the list is very long, the logic for executing commands is always the same: we just have to understand how a command is structured and how to execute it.</p>
			<p>Inside the <strong class="bold">Options</strong> section, we can see some parameters that we can pass before each command. For example, if we want as much information as possible when executing a command, we just add <strong class="source-inline">-vvv</strong> in front of the command. If, on the other hand, we don't want any information to be output to the console, just add the <strong class="source-inline">-q</strong> parameter before the command.</p>
			<p>All commands are divided into <strong class="bold">namespaces</strong>. In other words, a namespace is a label that groups multiple commands. So, all <a id="_idIndexMarker417"/>cache-related commands will start with the <strong class="source-inline">cache</strong> namespace, the Pimcore core commands will start with the <strong class="source-inline">pimcore</strong> namespace, and so on.</p>
			<p>To see the list of all commands for each namespace, you can run the <strong class="source-inline">list</strong> command followed by the namespace. For example, to get all the cache-related commands, we run the <strong class="source-inline">list</strong> command followed by the <strong class="source-inline">cache</strong> namespace:</p>
			<p class="source-code">./bin/console list cache</p>
			<p>The output will be the list of all available commands to execute on the Pimcore cache.</p>
			<p>Some namespaces<a id="_idIndexMarker418"/> are composed of several elements, concatenated by a colon, so if we want to identify the list of commands available for Pimcore bundles, we must execute the following command:</p>
			<p class="source-code">./bin/console list pimcore:bundle</p>
			<p>Now that we are familiar with the console commands, let's try running a couple of commands as an exercise. At the beginning of the chapter, we installed a bundle, then we activated it from the web interface. Let's now try to run the same commands but using the console.</p>
			<p>First of all, we need to identify which bundles are available in our Pimcore installation by running the following command:</p>
			<p class="source-code">./bin/console pimcore:bundle:list</p>
			<p>The output of this command is shown in the following screenshot:</p>
			<div>
				<div id="_idContainer096" class="IMG---Figure">
					<img src="image/Figure_7.21_B17073.jpg" alt="Figure 7.21: The output of the command to get the bundle available in our Pimcore installation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption"> </p>
			<p class="figure-caption">Figure 7.21: The output of the command to get the bundle available in our Pimcore installation</p>
			<p>As we can see from this screenshot, the bundle we installed at the beginning of the chapter is enabled. Now let's try to disable it by running the following command:</p>
			<p class="source-code">./bin/console pimcore:bundle:disable NumberSequenceGeneratorBundle</p>
			<p>As we can see, at the bottom of the command we have added as a parameter the name of the bundle we want to act on: <strong class="source-inline">NumberSequenceGeneratorBundle</strong>.</p>
			<p>We now execute the command again:</p>
			<p class="source-code">./bin/console pimcore:bundle:list</p>
			<p>The output will <a id="_idIndexMarker419"/>now look like this:</p>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="image/Figure_7.22_B17073.jpg" alt="Figure 7.22: The output of the command to get the bundle available in our Pimcore installation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 7.22: The output of the command to get the bundle available in our Pimcore installation</p>
			<p>As we can see, the bundle is now completely uninstalled.</p>
			<p>So, we saw how simple it is to execute a command using the Pimcore console. The other thing that makes the console very useful is in the execution of scheduled scripts, in which it is possible to execute several commands in sequence. For example, you can write a script that cleans up the cache and the mail logs, and have this script run every morning, for example, through a scheduler, such<a id="_idIndexMarker420"/> as <strong class="bold">crontab</strong> on <strong class="bold">Unix systems</strong>. </p>
			<p>We leave you the freedom to try other commands, to become familiar with the Pimcore console, and to understand its potential.</p>
			<h1 id="_idParaDest-137"><a id="_idTextAnchor138"/>Summary</h1>
			<p>In this chapter, we learned how it is possible to enhance Pimcore features through the use of bundles, and how they can easily be installed and managed.  </p>
			<p>We learned how to organize the site's users and their permissions, to limit the functionality of the site in the administration and content management sections, and how to create and configure perspectives, as well as associating them with users or roles.</p>
			<p>We also learned how to import and export the settings of our Pimcore installation to other environments. </p>
			<p>Finally, we learned how to use the Pimcore console, a powerful and useful tool to be able to execute commands, without having to access the web administration panel.</p>
			<p>All these new skills acquired while reading this chapter will allow us to configure our site in the best way, to achieve the aim of creating a site that satisfies all our needs, and even a little of our pleasures.</p>
			<p>Now that we have become familiar with all the tools that Pimcore offers us, it is time to get our hands dirty. After this chapter, we will begin to put into practice everything we have seen in the previous chapters, with the aim of creating a site, with blogs, static pages, and a products catalog. For this, in the next chapter, we begin by creating custom CMS pages.</p>
		</div>
	</body></html>