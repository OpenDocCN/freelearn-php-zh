<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Grabbing Global Readership</h1>
                </header>
            
            <article>
                
<p>In the previous chapter we learned about expanding the capabilities and features of Drupal. In this chapter we will look at expanding our readership.</p>
<p class="mce-root">The internet makes the world a smaller place. You might create a blog or online store, assuming that your users will be domestic, and be surprised to find that some of them are half a world away. Then, after consideration, you might realize that with most of the world living somewhere outside your own country, global readership can expose your content to many more people.</p>
<p>There is a complicating factor, though. Many of these users—perhaps most—do not speak the same language. You could leave it up to the reader's browser to translate the content, but let's be honest, instantaneous translation such as that provided by Google is problematic at the least with regard to straightforward, unambiguous, dictionary-approved source text, but even more so with colloquial and idiomatic usage.</p>
<p>I often tell the story of a former client who wanted the UI of his English site to be available in Japanese as well. The site sold car parts. The site owner opted for low-budget translation, and that likely resulted in the use of online AI translation. The result was much lower than expected sales. Why? While the translation was fine for menu items such as carburetors and seats, the term used for <em>Bodies</em> turned out to mean <em>Corpses</em>. Oops!</p>
<p>If a global market is important for the increased usage and success of your site, it is worth having the translation done by those knowledgeable in the two languages and in similar style for both. In other words, using the Queen's English for content and Spanish street slang is probably not your intention. Nor is, again, using Spanish as an example, having the translation be proper Madrid Spanish while your readers are predominantly Latin American.</p>
<p>So you decide to have your content and UI professionally translated. Then what? Do you have to have the equivalent of two sites in order to support two languages?</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>That is, create separate menus and pieces of content for each? Nope. Drupal has you covered, and just how it does this is what we will be covering in this chapter:</p>
<ul>
<li>How to declare additional languages</li>
<li>How to execute a UI translation</li>
<li>Entering content translations</li>
<li>Enabling the user to select a preferred language</li>
</ul>
<p>When Drupal is installed, the installer selects a default language for the site. In most cases, that language is English. What if there are other languages spoken within our target market? What if our country has more than one official language, or unofficial languages, or English isn't either? The site can be configured to support additional languages, and that is what we must do in order to be able to take advantage of internationalization. To get started, navigate to the <em><span class="packt_screen">Extend</span></em> page (<kbd>/admin/modules</kbd>).</p>
<p>Scrolling down, you will find the <span class="packt_screen">Multilingual</span> section:</p>
<p class="mce-root CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-318 image-border" src="assets/98b8388f-8ae3-4544-982c-97a8a6adcc04.png" style="width:15.92em;height:14.25em;"/></p>
<p>Each of these modules are part of Drupal's core, in core, and has a different purpose related to internationalization:</p>
<ul>
<li><span class="packt_screen"><strong><em><span class="packt_screen">Configuration</span></em></strong> <em><span class="packt_screen">Transla</span></em><strong><em><span class="packt_screen">tion</span></em></strong></span>: For translating configuration settings, such as <span>views, site name, menus, and blocks</span></li>
<li><span class="packt_screen">Content Translation</span>: For translating content, such as <span>nodes, taxonomy terms, and custom blocks</span></li>
<li><span class="packt_screen">Interface Translation</span>: For translating r<span>egistration forms, content submission forms, and administration interfaces</span></li>
<li><span class="packt_screen">Language</span>: For declaring additional languages that are usable for translation</li>
<li><span class="packt_screen">Language Icons</span>: For providing flags to represent languages when switching between them</li>
</ul>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Declaring additional languages</h1>
                </header>
            
            <article>
                
<p>To start, we need to enable the Language module. Check its box and click the <em><span class="packt_screen">Install</span></em> button at the bottom of the page.</p>
<p>In order to declare additional languages, we need to do the following: </p>
<ol>
<li>Enable the language module by checking its box and clicking on the <span class="packt_screen">Install</span> button at the bottom of the page.</li>
<li>Now, when you go to <span class="packt_screen">Configuration</span> page <span>(</span><kbd>/admin/config</kbd><span>)</span>, you will find a section for <span class="packt_screen">Regional and Language</span>. To start configuring, click <span class="packt_screen">Content language</span>.</li>
<li>Check Content and you will notice that a configuration form will appear, listing each content type. As we are only interested in articles, having a default language as the same would be fine.</li>
<li>Check the box to mark the content type as translatable.</li>
<li>A list of fields will appear that will belong to Article. Select all of the available fields.</li>
<li>After that, check the box that will allow the language to be selected when creating and clicking <span class="packt_screen">Save</span> configuration.</li>
</ol>
<div class="packt_tip">In the current version of Drupal (at the time of writing this book), the meta fields should also be selected as translatable. The reason is that if they are not selected, an error will likely be given when trying to save, stating that <em>Non-translatable fields can only be changed when updating the original language. </em>This seems to be a bug, because fields that change, such as the creation or update timestamp, are not translatable. This means that they should not have new values, as far as the translation system is concerned.</div>
<ol start="7">
<li>Returning to the <em><span class="packt_screen">Configuration</span></em> page, we will choose <em><span class="packt_screen">Languages</span></em> this time. Note that English is already configured as the default site language.</li>
<li>Click <span class="packt_screen">+Add language</span>. A select box will appear containing a long list of languages. For my site, one of the languages will be <strong>Spanish</strong>, so I'll select that and click to add it. Spanish has now been added, though English remains the default language.</li>
<li><span>Click the</span> <span class="packt_screen">Edit</span> <span>link for Spanish and change the language name to Español. To me, it makes more sense to display the language name in its own language for those who will be using it. They might not even know what we call their language in English.</span></li>
</ol>
<p class="mce-root"/>
<p>Let's add another. This time, I will select <strong>Hebrew</strong>. Once it has been added, click the <span class="packt_screen">Edit</span> link. You will see in the language definition that <em><span class="packt_screen">Right to left</span></em> is selected, as this is the direction in which Hebrew is written. I'll edit it and translate its name, entering עברית.</p>
<p>That's all there is to declaring languages for use. Now, let's use them and create some multilingual content.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating content</h1>
                </header>
            
            <article>
                
<p>In this section, we'll create a short new article to use for our example. Navigate to <kbd>/node/create/article</kbd>. For my title, I'll enter <strong>My Favorite Time</strong>. For the body, I've put <strong>Dawn is my favorite time of the day. </strong>Note that below the <em><span class="packt_screen">Body text</span></em> field there is a language selector. Since it is defaulting to <strong>English</strong>, I'll leave it unchanged and save my article. If you still have Content moderation active, don't forget to save your article as <strong>Published</strong> rather than <strong>Draft</strong>.</p>
<p>In order to provide content translations, we need to enable <em><span class="packt_screen">Content translation</span></em>. Let's navigate to <em><span class="packt_screen">Extend</span></em> (<kbd>/admin/modules</kbd>) and do that. </p>
<p>With content translation enabled, we have two ways in which to begin a translation: the <em><span class="packt_screen">Translate</span></em> tab, that will now be present beside the <span class="packt_screen">View</span>, <span class="packt_screen">Edit</span>, and <span class="packt_screen">Delete</span> tabs when viewing the content, or, as a <span class="packt_screen">Translate</span> option via the admin content page, <kbd>/admin/content</kbd>, on each Operations selection. Use either to proceed to the translations list for your article.</p>
<p>My translations list looks like this:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-319 image-border" src="assets/d68ee1e6-4246-4dc7-8ac4-8bb0dd3619c2.png" style="width:149.25em;height:37.92em;"/></p>
<p>Each piece of content will have rows corresponding to each configured language. The status column identifies whether the content has been translated to that language. If it has, there will be an <span class="packt_screen">Edit</span> button. If not, there will be an <span class="packt_screen">Add</span> button. I'll click <span class="packt_screen">Add</span> in the row for the Spanish translation.</p>
<p>When clicked, the familiar form for editing a node appears. In fact, it appears with the content already filled in for each field. You might think that something is amiss, because there was not supposed to be a translation yet for this language, but there is content instead of empty fields, and it's not the correct language. Don't panic! The content is supposed to be present for you to see what actually needs to be translated, rather than trying to remember. It will appear in the default language. I'm going to translate the title and body text. My form will now look as it does in the following screenshot. Once your translated content seems ready, click the <em><span class="packt_screen">Save (all translations)</span></em> button:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-320 image-border" src="assets/8ec8478c-ae55-4d11-8063-9edd865442c3.png" style="width:27.08em;height:9.67em;"/></p>
<p>Having saved this translation, the translation list for my content now shows Español, with its translated title, as being published. Next, I'll create a Hebrew translation and save it. The content edit form looks different, because with a right-to-left language, the text fields appear on the right and the metadata fields on the left:</p>
<p class="mce-root CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-321 image-border" src="assets/9b8d8354-bbbc-41e1-9502-2a3af1f7763c.png" style="width:33.42em;height:10.33em;"/></p>
<p>And that's it! The content is now available in three languages (in the next section, we will discuss how a user accesses them). </p>
<p>How does this work behind the scenes? When Drupal stores the field information in the database, part of the index used to find that information is code referring to the language. When you create the content, initially, a node ID—an integer value—is assigned to it. Regardless of how many language translations you create, the node ID remains the same. So, the index for the English version might include the code <kbd>en</kbd> for English, <kbd>es</kbd> for Spanish, and <kbd>he</kbd> for Hebrew.</p>
<p class="mce-root"/>
<p>You might be wondering, how does the user select the desired language? That's what we'll be covering next!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">User language selection</h1>
                </header>
            
            <article>
                
<p>Being able to offer content in multiple languages is great, but only if the site visitor can take advantage of it. Drupal makes that easy with a language switcher. </p>
<p>We need to enable another module. Navigate to <em><span class="packt_screen">Extend</span></em> (<kbd>/admin/modules</kbd>) and enable the <em>Language Icons</em> module. Drupal will let you know that this module depends on the <em>Interface Translation</em> module and will ask whether you want to proceed with enabling both. Go ahead.</p>
<p>The Language Icons module provides flag icons for each language. It does this by way of a block that needs to be placed somewhere on the page. Let's do that.</p>
<ol>
<li>Navigate to <em><span class="packt_screen">Structure</span></em> | <em><span class="packt_screen">Block layout</span></em> (<em>/admin/structure/block</em>). You'll need to choose a region of the screen in which to have the language switcher block appear, such as <em>Header</em> or <em>Sidebar first.</em> I chose the latter.</li>
<li><span>C</span><span>lick the</span> <em><span class="packt_screen">Place block</span></em> <span>button beside whichever region you choose. Scroll down to</span> <em><span class="packt_screen">Language switcher</span></em> <span>and click the</span> <em><span class="packt_screen">Place block</span></em> <span>button in its row. A configuration screen will appear.</span></li>
<li><span>Y</span><span>ou can leave the</span> <em><span class="packt_screen">Title</span></em> <span>as</span> <strong>Language switcher</strong><span>.</span></li>
<li><span>Uncheck the</span> <em><span class="packt_screen">Display title</span></em> <span>box</span> below <span>it; the icons will speak for themselves without displaying a block title.</span></li>
<li><span>The vertical tabs allow constraints to be put on this block. The</span> <em><span class="packt_screen">Language</span></em> <span>tab can be used to offer only a subset of the configured languages.</span></li>
<li><span>The</span> <em><span class="packt_screen">Content types</span></em> <span>tab can limit which types of content the translation will choose. We don't need to set any limitations.</span></li>
<li><span>If we want to limit the appearance of the</span> <em><span class="packt_screen">Language switcher</span></em> <span>to just the homepage, on the</span> <em><span class="packt_screen">Pages</span></em> <span>tab, we can enter</span> <kbd>&lt;front&gt;</kbd> <span>into the</span> <em><span class="packt_screen">Pages</span></em> <span>text box.</span></li>
<li><span>C</span><span>lick the</span> <em><span class="packt_screen">Save block</span></em> <span>button and navigate to the homepage.</span></li>
</ol>
<p><span>On my site, I now have a block that looks like what's shown in the following screenshot. Yours will vary based on the language(s) that you chose:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-322 image-border" src="assets/713729a7-2797-4074-8ecf-2fa3f1a72c4f.png" style="width:20.50em;height:14.83em;"/></p>
<p>By clicking on one of the links, the site visitor chooses to receive translated content in that language. Content that's not available in the selected language will not be presented.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Translating the user interface</h1>
                </header>
            
            <article>
                
<p>Now, we know how to provide translated content, but what about the rest of the page, like the menus? A link like <span class="packt_screen">Contact</span> means little to someone who doesn't speak English. Fortunately, Drupal provides us with the means to translate the UI. </p>
<p>We've already enabled the <em>Interface Translation</em> module. We just need to configure it. Navigate to <em><span class="packt_screen">Config</span></em> (<kbd>/admin/config</kbd>) and click the User interface translation <span>link in the</span> <em><span class="packt_screen">Regional and Language</span></em> <span>section.</span></p>
<p>So far, the actions that were necessary to provide translated content have been fairly simple. So, you're probably expecting a button to click that will translate all of the prompts and menus in the UI. Sorry... not gonna happen. </p>
<p>The configuration interface allows you to enter a translation string for each string that Drupal finds in the core and modules interfaces. You can use this page, and the many, many, many other pages to translate each, or you can export the list of strings and enter translations all into one file and then import it.</p>
<p class="mce-root"/>
<p>This sounds like a lot of work, and that's because it <em>is</em> a lot of work. So, let's look at the easy way to do it. What? You thought I said... no, what I said was that there's no button to translate the interface, but there is an existing translation file for many languages that you can download and import. </p>
<ol>
<li>Navigate to <a href="https://localize.drupal.org/download">https://localize.drupal.org/download</a>. Here, you will find a list of the available UI translation files. In my case, I'm going to download the Drupal 8 version of the file for Spanish and the one for Hebrew. Do the same for the language(s) that you chose. The nice thing about these files is that they are editable, so you can alter strings or add your own when you need new ones, like when you create custom menu links.</li>
<li><span>N</span><span>ext, on the</span> <em><span class="packt_screen">User interface translation</span></em> <span>page, click the</span> <em><span class="packt_screen">Import</span></em> <span>tab at the top of the page.</span></li>
<li>Browse <span>to and select the translation file that you downloaded</span></li>
<li><span>Select the applicable language from the</span> <em><span class="packt_screen">Language</span></em> <span>dropdown</span></li>
<li><span>Click</span> <em><span class="packt_screen">Import</span></em><span>.</span></li>
</ol>
<p><span>I've done this for both languages and the result can be seen in the following screenshots, which shows each version of the homepage when using the</span> <em><span class="packt_screen">Language switcher</span></em> <span>block.</span></p>
<p>The following screenshot is in Spanish:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-323 image-border" src="assets/5c161e77-1f48-4bd9-8da8-c5d201e36dbb.png" style="width:161.25em;height:74.42em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p>And the following screenshot version is in Hebrew, an example of a right-to-left (RTL) language:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-324 image-border" src="assets/7de0fb7d-019e-40d7-acee-b8bdd32e4745.png" style="width:161.00em;height:68.17em;"/></p>
<p>This is definitely easier than manually translating every string!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we've learned how to use Drupal's translation features: configuring additional languages, providing content translations, adding icons that are used by site visitors to switch languages, and importing user interface translations.</p>
<p>In the next chapter, you will learn how to use feeds to import content and to provide your content to other sites.</p>


            </article>

            
        </section>
    </body></html>