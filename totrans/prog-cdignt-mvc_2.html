<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Configurations and Naming Conventions"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Configurations and Naming Conventions</h1></div></div></div><p>This chapter initially introduces the CI naming conventions. These conventions include the rules, style guide, and CodeIgniter naming spirit. The second part of this chapter will review CI project configurations for built-in resources as well as user-defined or third-party add-on libraries. Note that we will actually build our own project code in the subdirectory application described in <a class="link" href="ch01.html" title="Chapter 1. Getting Started">Chapter 1</a>, <span class="emphasis"><em>Getting Started</em></span>, with optionally relative resource directories for our project's self-made resources, such as CSS / Media / jQuery libraries' resources or third-party add-ons, extending the base CI downloaded from the Ellis Labs site or GitHub.</p><p>We should remember that developing a CI project is done by replacing/expanding the default provided controllers, views, models, and other resources in a well-defined OOP fashion. We should extend controllers, models, and add additional views as well as use defined helpers or libraries. We can add these from third-party libraries or helpers, or develop new ones for our special project business logic and needs.</p><p>The initial step after installing the CI is making the proper configurations for our project requirements, such as database, session, auto-loaded helpers, and the libraries we want.</p><p>The CI has a set of configuration files defined in the project directory located at <code class="literal">application/config</code>. These configurations are loaded initially whenever we execute any of our project's CI controllers via a URI call using a browser or issuing an HTTP request via code. The major configuration files are: <code class="literal">config.php</code>, <code class="literal">database.php</code>, <code class="literal">autoload.php</code>, and <code class="literal">routes.php</code>.</p><p>We should review each of the major configuration files with its configuration value, which includes recommended value, and possible values.</p><div class="section" title="CI directory tree"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>CI directory tree</h1></div></div></div><p>The following is the <a id="id30" class="indexterm"/>classic directory tree <a id="id31" class="indexterm"/>structure of CodeIgniter:</p><div class="mediaobject"><img src="graphics/4704OT_02_01.jpg" alt="CI directory tree"/></div><p>Note that when we add new plugins and other resources such as <code class="literal">bootstrap</code>, new directories of resources may be added with a name of your choice so that you can refer to them from the specific resource you are developing using the CI <code class="literal">BASEPATH</code> defined parameter as the directory path to the <code class="literal">CI_PROJECT_ROOT</code> directory.</p><p>If we add a new directory under the project root, let's say <code class="literal">bootstrap</code>, the path for including resources such as CSS, JavaScript, or images (for example, <code class="literal">hello.png</code>) will be <code class="literal">$path = BASEPATH."bootstrap/hello.png"</code>.</p><div class="section" title="config.php"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec17"/>config.php</h2></div></div></div><p>The CI main configuration<a id="id32" class="indexterm"/> files have the <a id="id33" class="indexterm"/>following major configurations:</p><div class="informalexample"><pre class="programlisting">$config['base_url'] = '';</pre></div><p>The default is an empty string so that CI can calculate the base URL of our project root directory. We shall refer to the base URL in many places in our code, mostly to execute controllers. To get the base URL, we should call:</p><div class="informalexample"><pre class="programlisting">$base_url = base_url();
// defined in the URL
// helper mentioned before.</pre></div><p>The <code class="literal">base_url()</code> function <a id="id34" class="indexterm"/>in the URL helper function returns the URI string to the CI project base. For example, if the CI project is developed on a domain named <code class="literal">example.com</code> under a <code class="literal">public_html</code> directory named <code class="literal">mydev</code>, and we have a controller named <code class="literal">find</code>, a method named <code class="literal">stock</code>, and a directory named <code class="literal">myprod</code>, we can call the <code class="literal">find</code> or <code class="literal">stock</code> method in both the <code class="literal">myprod</code> and <code class="literal">mydev</code> projects using <code class="literal">base_url()</code>:</p><div class="informalexample"><pre class="programlisting">$url = base_url()."index.php/ find/stock";</pre></div><p>In the <code class="literal">mydev</code> project, we will get:</p><div class="informalexample"><pre class="programlisting">$url = "http://example.com/mydev/index.php/find/stock"</pre></div><p>In the <code class="literal">myprod</code> project, we will get:</p><div class="informalexample"><pre class="programlisting">$url = "http://example.com/myprod/index.php/find/stock"</pre></div><p>Hence, in <a id="id35" class="indexterm"/>order to call a controller class named <code class="literal">my_class</code>, we use:</p><div class="informalexample"><pre class="programlisting">$URL = base_url()."index.php/my_class/mymethod";</pre></div><p>This will define <code class="literal">$u</code>
<code class="literal">rl</code> as <code class="literal">http://example.com/</code>
<code class="literal">mydev/index.php/my_class</code>.</p><p>To set the index page as a part of the URI path to CI controllers/methods, we use:</p><div class="informalexample"><pre class="programlisting">$config['index_page'] = 'index.php';</pre></div><p>The <code class="literal">index.php</code> file is the CI root PHP service that handles all the URI requests. It is used as part of a path URI to a resource, such as <code class="literal">http://mysite.com/fci/index.php/tables_managemen</code>
<code class="literal">t/show</code>. However, we can hide the <code class="literal">index.php</code> file by setting CI to hide the index.php file in the URI path for calling the CI resources such as <a class="ulink" href="http://mysite.com/fci/tables_managemen">http://mysite.com/fci/tables_managemen</a>
<code class="literal">t/show</code>. To do so, we need to perform the following configuration steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the project root directory where the CI <code class="literal">index.php</code> file resides, an HTACCESS type file named <code class="literal">.htaccess</code> is added with the following configuration lines, which reroutes a none <code class="literal">index.php</code> URI referring to the CI project controllers path without <code class="literal">index.php</code>:<div class="informalexample"><pre class="programlisting">RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d</pre></div><div class="informalexample"><pre class="programlisting">RewriteRule ^(.*)$ index.php/$1 [L]

&lt;Files "index.php"&gt;
AcceptPathInfo On
&lt;/Files&gt;</pre></div><p>For more on this, refer to <a class="ulink" href="http://en.wikipedia.org/wiki/Htaccess">http://en.wikipedia.org/wiki/Htaccess</a>.</p></li><li class="listitem">We should make the change to the <code class="literal">/config/config.php</code> file so that <code class="literal">index_page</code> will be empty in the URI path string instead of the default <code class="literal">index.php</code>. $config['index_page'] = '';</li></ol></div><p>The <code class="literal">.htaccess</code> file<a id="id36" class="indexterm"/> does the trick here by adding the <code class="literal">index.php</code> file to the URI after receiving the URI request from the browser and before executing it. The result is that the user who is browsing will not see it, but it will call the desired resource properly, in a similar way to how we used <code class="literal">index.php</code>:</p><p>The language setting is done as follows:</p><div class="informalexample"><pre class="programlisting">$config['language'] = 'english';</pre></div><p>It is <a id="id37" class="indexterm"/>recommended that you leave this as default. Note that even if we use other languages, such as Arabic or Hebrew, it will be fine. We just make sure that our PHP files are saved as UTF-8 without BOM (byte order mark is a unicode character that marks the file-encoding method supporting multilanguage schemes; for more information, refer to <a class="ulink" href="http://en.wikipedia.org/wiki/Byte_order_mark">http://en.wikipedia.org/wiki/Byte_order_mark</a> to inform the browser that receives the rendered HTML page to process it as a UTF-8 file.</p><p>The exact meaning of this tag is out of the scope of this book and can be learned from HTML standard.</p><div class="informalexample"><pre class="programlisting">$config['charset'] = 'UTF-8';</pre></div><p>Additionally, it is highly recommended for multi-language support to add the following line in our view file's HTML header:</p><div class="informalexample"><pre class="programlisting">&lt;meta http-equiv="Content-Type"
content="text/html; charset=utf-8" /&gt;</pre></div><p>These settings inform the browser to process the rendered HTML page whose characters are encoded as UTF-8, which is the most common multilanguage standard for non-English languages such as Hebrew, Arabic, and Chinese.</p><p>Do not touch these settings; it is very useful to support multiple languages.</p><div class="informalexample"><pre class="programlisting">$config['enable_hooks'] = FALSE;</pre></div><p>The<a id="id38" class="indexterm"/> preceding configuration, if set to <code class="literal">TRUE</code>, will enable us to define hooks into CI events, where the hooks are defined in<a id="id39" class="indexterm"/> the <code class="literal">application/hooks</code> directory. Do not touch these settings unless you have a specific plan for CI event hooks. Note that the concept of adding hooks to the CI core activity is out of this book's scope.</p><div class="informalexample"><pre class="programlisting">$config['subclass_prefix'] = 'MY_';</pre></div><p>The preceding configuration will enable us to define naming roles to our library class name's prefix, in order to distinguish with other default libraries.</p><div class="informalexample"><pre class="programlisting">$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';</pre></div><p>The preceding code defines the allowed chars within a URI calling CI resources, mainly controllers. It is recommended to not touch this setting.</p><div class="informalexample"><pre class="programlisting">$config['allow_get_array'] = TRUE;</pre></div><p>This will enable us to call the controller class methods with parameters, such as in the example provided earlier.</p><div class="informalexample"><pre class="programlisting">&lt;?php echo base_url(); ?&gt;index.php/my_handler/calc/5/7</pre></div><p>The preceding code will provide the same results as the class method within the <code class="literal">my_handler</code> class itself in the following format:</p><div class="informalexample"><pre class="programlisting">$Val= $this-&gt;calc(5,7);</pre></div><p>The following configuration defines if a GET URL query string will be used:</p><div class="informalexample"><pre class="programlisting">$config['enable_query_strings'] = FALSE;</pre></div><p>This configuration, if set to <code class="literal">TRUE</code>, will enable us to call controller class methods with parameters in the GET URL query form:</p><div class="informalexample"><pre class="programlisting">&lt;?php echo base_url();?&gt;index.php/my_handler/calc.php?a=5&amp;b=7</pre></div><p>It is highly recommended to leave this as <code class="literal">FALSE</code>, as CI provides a solution to pass parameters within URI, as shown in the <code class="literal">calc</code> example at the beginning of this chapter.</p><p>The log threshold for the severity level is such that any event that is of the same or higher severity level will be logged to CI. The supported threshold levels and their meanings are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>0</strong></span>: Disables logging (error logging turned off)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>1</strong></span>: Error messages (including PHP errors)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>2</strong></span>: Debug messages</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>3</strong></span>: Informational messages</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>4</strong></span>: All messages<div class="informalexample"><pre class="programlisting">$config['log_threshold'] = 4;
// 4 is the highest level for all CI events from notice level 
// events and worse</pre></div></li></ul></div><p>The<a id="id40" class="indexterm"/> preceding configuration will <a id="id41" class="indexterm"/>generate error logs according to the <code class="literal">log_threshold</code> <code class="literal">()</code> level at <code class="literal">/application/logs</code> if the error log was enabled.</p><p>Note that enabling the errors log will cause performance reduction in our web application. Use it only if you must for debugging needs. Otherwise set it to <code class="literal">0</code>.</p><div class="informalexample"><pre class="programlisting">$config['log_path'] = '';</pre></div><p>The default log file path in the CI project is <code class="literal">application/logs</code>. Do not touch this configuration unless you have a clear reason.</p><p>The date time format:</p><div class="informalexample"><pre class="programlisting">$config['log_date_format'] = 'Y-m-d H:i:s';</pre></div><p>The default date time format setting is <code class="literal">2012-06-18 14:54:11</code>. It is recommended to not touch this configuration.</p><p>The cache file path:</p><div class="informalexample"><pre class="programlisting">$config['cache_path'] = '';</pre></div><p>The default is <code class="literal">application/cache</code>. It is recommended not to touch this configuration. The session key:</p><div class="informalexample"><pre class="programlisting">$config['encryption_key'] = '';</pre></div><p>This <code class="literal">encryption_key</code> must be set with a key in order to use the session class services. For example:</p><div class="informalexample"><pre class="programlisting">$config['encryption_key'] = 'cMGy4DSwGUvxYSar4279626HgOn2342efrwerr2TE2RF4G3reg4tF3etf';</pre></div><p>An example of the session library usage within a controller and setting a session variable is as follows:</p><div class="informalexample"><pre class="programlisting">$uid = 119; // where uid is the id of the loggeing user
$this-&gt;session-&gt;set_userdata ('this_user_id', $uid );</pre></div><p>Getting the session variable in another controller is as follows:</p><div class="informalexample"><pre class="programlisting">$uid = $this-&gt;session-&gt;userdata('this_user_id');</pre></div><p>The session data storage mechanism is as follows:</p><div class="informalexample"><pre class="programlisting">$config['sess_use_database'] = FALSE;</pre></div><p>If the recommended configuration is set to <code class="literal">TRUE</code>, we would use many session parameters of a large size stored in the associated default database.</p><p>Session <a id="id42" class="indexterm"/>expiration timeout in seconds:</p><div class="informalexample"><pre class="programlisting">$config['sess_expiration'] = 7200;
// The number of seconds the session will be kept</pre></div><p>Additional <a id="id43" class="indexterm"/>session configuration parameters can be found in the CI user manual. Cross-site scripting (XSS) filtering activation/deactivation:</p><div class="informalexample"><pre class="programlisting">$config['global_xss_filtering'] = FALSE;</pre></div><p>This will enable XSS filtering on URI requests sent to the application. Note that all URI requests are processed initially by the root <code class="literal">index.php</code> to analyze the URI request and issue the proper CI calls. If set to <code class="literal">TRUE</code> it will protect URI requests from XSS type malicious attackers. It is recommended to set it to <code class="literal">TRUE</code> even if we reduce a bit of our application performance.</p><div class="informalexample"><pre class="programlisting">$config['csrf_protection'] = FALSE;</pre></div><p>If set to <code class="literal">TRUE</code> the CI will prevent <span class="strong"><strong>Cross-Site Request Forger</strong></span>
<span class="strong"><strong>y</strong></span> (<span class="strong"><strong>CSRF</strong></span>/<span class="strong"><strong>XSRF</strong></span>) attacks. The risk is <a id="id44" class="indexterm"/>when the fraud form is submitted. If we are accepting user data, it is strongly recommended that CSRF protection should be enabled. Note that when using AJAX, additional code may be required to enable CSRF protection with AJAX.</p></div><div class="section" title="database.php"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec18"/>database.php</h2></div></div></div><p>The database<a id="id45" class="indexterm"/> configuration <a id="id46" class="indexterm"/>enables to define one or more database connections that can be used by the application. The database configuration is a two-dimensional array in the following form:</p><div class="informalexample"><pre class="programlisting">$db['db_entry']['db_connection_param']</pre></div><p>By setting the parameters for database default entry, we shall define the following parameters:</p><div class="informalexample"><pre class="programlisting">$db['default']['hostname'] = 'localhost';
// note: in some cases '127.0.0.1' must be used instead 
// localhost if the database server is in another server use
// URI such as: 'domain.db.NNNNNNN.hostedresource.com' or 
// similar – advise our system admin/service provider
// Optional configuration of DB server connection port

$db['default']['port'] = '4009';
// In case our DB server operates on another port
// otherwise we may drop the port config line!

$db['default']['username'] = 'mydefaultdb';
$db['default']['password'] = 'mypass1';
$db['default']['database'] = 'mydatabase1';
$db['default']['dbdriver'] = "mysql";
$db['default']['dbprefix'] = "";
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = TRUE;
$db['default']['cachedir'] = "";
$db['default']['char_set'] = "utf8";
$db['default']['dbcollat'] = "utf8_general_ci";</pre></div><p>By setting the <a id="id47" class="indexterm"/>parameters for another <a id="id48" class="indexterm"/>database entry named <code class="literal">dbentry2</code>, we shall define the following parameters:</p><div class="informalexample"><pre class="programlisting">$db['dbentry2']['hostname'] = 'localhost';
$db['dbentry2']['username'] = 'mySecondDB';
$db['dbentry2']['password'] = 'mypass2';
$db['dbentry2']['database'] = 'mySecondDB';
$db['dbentry2']['dbdriver'] = "mysql";
$db['dbentry2']['dbprefix'] = "";
$db['dbentry2']['pconnect'] = TRUE;
$db['dbentry2']['db_debug'] = TRUE;
$db['dbentry2']['cache_on'] = TRUE;
$db['dbentry2']['cachedir'] = "";
$db['dbentry2']['char_set'] = "utf8";
$db['dbentry2']['dbcollat'] = "utf8_general_ci";</pre></div><p>There is no need to connect and load the default database as it is done automatically when loading the database class—however, the call is:</p><div class="informalexample"><pre class="programlisting">$this-&gt;load-&gt;database();</pre></div><p>Or, for referring to a specific database entry name, it is:</p><div class="informalexample"><pre class="programlisting">$this-&gt;load-&gt;database('default');</pre></div><p>In order to<a id="id49" class="indexterm"/> connect and load the <code class="literal">dbentry2</code> <a id="id50" class="indexterm"/>database settings stated earlier, use the following code:</p><div class="informalexample"><pre class="programlisting">$this-&gt;dbentry2= $this-&gt;load-&gt;database(dbentry2', TRUE); </pre></div><p>To use the default database with the database class library, <code class="literal">db,</code> use:</p><div class="informalexample"><pre class="programlisting">$q1 = $this-&gt;db-&gt;query ("select * from mytable");</pre></div><p>To use the <code class="literal">dbentry2</code> database, use:</p><div class="informalexample"><pre class="programlisting">$q2 = $this-&gt;dbentry2-&gt;db-&gt;query ("select * from DB2table");</pre></div></div><div class="section" title="routes.php"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec19"/>routes.php</h2></div></div></div><p>Define the default <a id="id51" class="indexterm"/>controller<a id="id52" class="indexterm"/> that will be executed when referred via the URI to the <code class="literal">base_url</code> of the project—let's say <code class="literal">http://mydomain.com/myapp</code> so that <code class="literal">myapp</code> is a subdirectory of <code class="literal">public_html</code> in the sever and we have <code class="literal">home_page_controller</code>.</p><div class="informalexample"><pre class="programlisting">$route['default_controller'] = "home_page_controller"</pre></div><p>When the user issues <code class="literal">http://mydomain.com/myapp</code>, due to the route configuration for the home controller, the URI that CI will issue will be as if the user is referring to <code class="literal">http://mydomain.com/myapp/home_page_controller</code>.</p><div class="informalexample"><pre class="programlisting">$route['404_override'] = '';</pre></div><p>In the preceding example, the default <code class="literal">application/errors/error_404.php</code> page will be executed, in case the user refers to a non-existing project controller, such as <code class="literal">http://mydomain.com/myapp/sadfasdfsdfsdi</code>.</p><p>We may decide, for example, to pop-up a message for the non-existing page and route to the default URI to minimize user inconvenience.</p></div></div></div>
<div class="section" title="Defining and using your own configurations"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Defining and using your own configurations</h1></div></div></div><p>CI enables us to define <a id="id53" class="indexterm"/>our own configurations and easily access them via the <code class="literal">config</code> class. For example, with <code class="literal">application/config/my_config.php</code>, let's say we define a parameter in that <code class="literal">config</code> file as follows:</p><div class="informalexample"><pre class="programlisting">$param1 = "value1";</pre></div><p>We can easily access our <a id="id54" class="indexterm"/>configuration file parameters to load all the parameters into the array:</p><div class="informalexample"><pre class="programlisting">$array = $this-&gt;config-&gt;load('my_config', TRUE);</pre></div><p>The second parameter, <code class="literal">TRUE,</code> assures us that our configuration parameters will be defined in an array prefixed with the configuration file name.</p><p>Consider: <code class="literal">$param1 = $array['my_config']['param1'];</code></p><p>or: <code class="literal">$param1 = $this-&gt;config-&gt;item('param1', 'my_config');.</code></p><p><code class="literal">$param1</code> will have the value <code class="literal">value1</code> that we have set in the configuration file that we built.</p></div>
<div class="section" title="Understanding and using CI naming conventions"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Understanding and using CI naming conventions</h1></div></div></div><p>The CI naming conventions <a id="id55" class="indexterm"/>are essential to understand and use, in order to properly develop with CI. They enable you to write minimal code using a strict and concise set of rules.</p><p>The full CI naming conventions and style guide can be found at <a class="ulink" href="http://codeigniter.com/user_guide/general/styleguide.html">http://codeigniter.com/user_guide/general/styleguide.html</a>.</p><p>The naming conventions refer to the naming of parameters, functions/methods, class-related PHP file name storing code, project resource paths, and so on. Here are the specific issues we will review:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Extending CI resources such as the CI controller or model in our project resources (class extends class fashion—for example, extending <code class="literal">CI_controller</code> or <code class="literal">CI_model</code>; see the examples discussed in the <span class="emphasis"><em>Controller definition naming rules</em></span> section)</li><li class="listitem" style="list-style-type: disc">Defining views and rendering them by a controller with or without providing parameters that the view code may use for its operation</li><li class="listitem" style="list-style-type: disc">Using existing general reusable resources (can be loaded from any controller or model and reused by rendered views as well) of CI helpers and libraries, and defining new CI helpers and libraries</li><li class="listitem" style="list-style-type: disc">How-tos, dos, and don'ts for locating files and naming are categorized based on the defined controllers, models, libraries, and helpers</li><li class="listitem" style="list-style-type: disc">Relations<a id="id56" class="indexterm"/> between the defined class resource name, containing file name, loading a defined class a helper or a model, instantiating and calling a calls method via the URI and calling a class method with parameters</li></ul></div><div class="section" title="The main resource type naming rules"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec20"/>The main resource type naming rules</h2></div></div></div><p>CI defines "one <a id="id57" class="indexterm"/>class one file standard" so that every class of a CI controller extension and CI model extension <a id="id58" class="indexterm"/>of a library class resides in one file. This also applies to helpers that are a set of functions. Each resource category (controller, library, model, and view) will be located in a specific directory or its subdirectory. The most commonly used resource categories are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Controllers</strong></span>: These get the client side (for example, browser) to operate</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Views</strong></span>: These are rendered by the controller and returned to the browser via HTTP</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Libraries</strong></span>: These are called by project resources such as controllers, views, models, and helpers</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Models</strong></span>: These are called by project resources such as controllers, views, libraries, and helpers</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Helpers</strong></span>: These are called by project resources such as controllers, views, libraries, and models</li></ul></div><div class="mediaobject"><img src="graphics/4704OT_02_01.jpg" alt="The main resource type naming rules"/></div><div class="section" title="Controller definition naming rules"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec01"/>Controller definition naming rules</h3></div></div></div><p>Let's define the initial <a id="id59" class="indexterm"/>project controller <a id="id60" class="indexterm"/>to handle some basic services. Note that the controller class name is <code class="literal">My_handler</code>, and must reside in a file named <code class="literal">my_handler.php</code> (all lower case) at <code class="literal">/application/controllers</code> in our CI project directory. Here's the code sample with which to review the naming conventions:</p><div class="informalexample"><pre class="programlisting">class My_handler extends CI_Controller { 
function __construct(){
// Must Call Patent to get all its services inherited
parent::__construct();
}
  function index () {
// executed when referring to My_handlercontroller via URLecho "Hello World"; }

function calc  ($a = 2, $b=2) {// executed when referring to My_handler/calc via URL echo   " $a * $b = ".$a*$b;
}


functionAJAX_calc () {
// If the request is not an AJAX we shall abort!
//This is done by the
if (!$this-&gt;input-&gt;is_AJAX_request())  
exit ('none AJAX calls rejected!'); // see http://codeigniter.com/user_guide/libraries/input.html

$a = $this-&gt;input-&gt;post('a');// get the posted a parameter$b = $this-&gt;input-&gt;post('b');// get the posted b parameter
$result = (int) $a * (int) $b; 
$data = array('result'=&gt; $result);// to add more array parameters: ,'p2' =&gt; $p2, 'p3'=&gt;$p3,..
echojson_encode($data);// return the JSON encoded array
return;
}

} // closing the class definition</pre></div><p>We call this controller via an HTTP request URL, as an HTTP or HTTPS request. For example: <code class="literal">http://mydomain.com/index.php/my_handler</code>.</p><p>Let us review <a id="id61" class="indexterm"/>several usage scenarios<a id="id62" class="indexterm"/> with this controller class definition. Note that you can enable CodeIgniter to operate without the <code class="literal">index.php</code> file in the path; for more information, refer to the <code class="literal">index.php</code> file issue discussed later in this chapter. In this section we will review different use cases for the CI controller as well as the naming rules associated with the controller. The following are the cases that are mainly used for calling a controller:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Directly from a browser</li><li class="listitem" style="list-style-type: disc">From a view HTML page script using a CI PHP anchor helper embedded in the page</li><li class="listitem" style="list-style-type: disc">From a view HTML page using a JavaScript/jQuery AJAX call embedded in the page</li><li class="listitem" style="list-style-type: disc">From a crontab PHP script using cURL to call a controller</li></ul></div><p>The controller has its own naming rules and usage guidelines that we will review now. The controller is most commonly called from the view using an anchor tag. However, it may also be called using AJAX or even a crontab PHP script using a PHP function file or cURL-based request.</p></div><div class="section" title="Example 1 – calling the controller index method"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec02"/>Example 1 – calling the controller index method</h3></div></div></div><p>Controllers are mostly called via<a id="id63" class="indexterm"/> a user interaction session on a rendered <a id="id64" class="indexterm"/>view processed by a client browser. The controller method is called to issue another process, such as and AJAX request or processing the request and rendering it back to the client browser additional view or web page. To define the controller call within a view definition (application/views), we define an anchor to be executed by the browser per user request. Note that in these examples we use another URL helper named <code class="literal">anchor()</code>.</p><div class="informalexample"><pre class="programlisting">anchor( $uri, $text, $html_attributes);</pre></div><p>Note that in order to use the CI anchor helper function, we will initially load the helper URL via <code class="literal">config/autoload.php</code>.</p><div class="informalexample"><pre class="programlisting">$autoload['helper'] = array('url');</pre></div><p>Another way to do this is to load the anchor helper in the controller rendering the view, where we want to use an anchor:</p><div class="informalexample"><pre class="programlisting">$this-&gt;load-&gt;helper('url');</pre></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">$URI</code>: The URI path to call a controller or any URI we want to execute</li><li class="listitem" style="list-style-type: disc"><code class="literal">$text</code>: The anchor label shown to the user to click on</li><li class="listitem" style="list-style-type: disc"><code class="literal">$html_attributes</code>: Any HTML attributes that can be defined for an HTML anchor element</li></ul></div><p>An example of the resulting HTML that will be executed by the client-side browser is as follows:</p><div class="informalexample"><pre class="programlisting">&lt;a href="myapps.com/myciapp/showme" class='mybutton'&gt;
Press Me 
&lt;/a&gt;
&lt;!-- where 	$uri = 'myapps.com/myciapp/showme';
$text = 'Press Me';
$html_attributes = "class='mybutton'";--&gt;</pre></div><p>Back to our example—the view code part that enables the user to call the defined controller will look like the following (the PHP portions are with other HTML tags in a view file):</p><div class="informalexample"><pre class="programlisting">&lt;?PHP 
echo anchor(ase_url().' index.php/my_handler ','Press Me A');
?&gt;</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>Since we only referred to the class name, its constructor and index method, if defined, will be executed. In case we did not define an index method for this <code class="literal">my_handler</code> controller, the preceding calls will only instantiate the class using its constructor definition, and if the index method was defined it will be called as well. In our case, the index method was defined so it will be called as well.</p></div></div></div><div class="section" title="Example 2 – calling the controller and calc method without arguments"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec03"/>Example 2 – calling the controller and calc method without arguments</h3></div></div></div><p>In this example, we<a id="id65" class="indexterm"/> enable the end user to call a specific class method but without parameters, so that the default method parameters must be used via the browser.</p><p>Note that in order to use any CI helper function we need to make sure that it is either autoloaded or specifically loaded in the controller (for the controller method's usage or rendered views), library, or model.</p><div class="informalexample"><pre class="programlisting">&lt;?PHP 
echo anchor(base_url().' index.php/my_handler/calc ' ,'Press Me B');
?&gt;</pre></div><p>Note that in order to refer to a specific <code class="literal">My_handler</code> class method named <code class="literal">calc</code>, we concatenated <code class="literal">/calc</code> after the class name. Issuing this view from a browser we will get a result as follows: <span class="strong"><strong>2 * 2 = 4. Why?</strong></span>.</p><p>This is simply because we define default values in the receiving controller method. So that if no parameters are sent as in this example the default ones will be used, which are both set to <code class="literal">2</code> and hence the class <code class="literal">calc</code> method will output <code class="literal">4</code>.</p></div><div class="section" title="Example 3 – calling the controller and calc method with arguments"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec04"/>Example 3 – calling the controller and calc method with arguments</h3></div></div></div><p>In this example we enable<a id="id66" class="indexterm"/> the end user to call a specific class method with its parameters via the browser.</p><div class="informalexample"><pre class="programlisting">&lt;?PHP
echo anchor(base_url().' index.php/my_handler/calc/5/7', 'Press Me C',);
?&gt;</pre></div><p>Issuing this from a browser, we will get: <span class="strong"><strong>5 * 7 = 35. Why?</strong></span>.</p><p>Since we provided <code class="literal">5</code> as the first parameter and <code class="literal">7</code> as the second, using the CI URI naming convention of spectated <code class="literal">/</code> to pass parameter values to a called controller class method. Since we use the parameters as integers for multiplication, PHP casts them as integers, so we have 5 * 7 which is 35.</p><p>Note that in order <a id="id67" class="indexterm"/>to call a specific controller method with parameters, we add the <code class="literal">/</code> separator after the method name followed by the parameters, and each parameter is also separated by <code class="literal">/</code>.</p><p>To understand this better see the following use cases and their meanings, CI uses the URI as follows:</p><p>When issuing the URI:</p><div class="informalexample"><pre class="programlisting">&lt;?PHP base_url() ?&gt;/controller_name/method_name/param1/param2/../paramN</pre></div><p>The controller named <code class="literal">controller_name</code> will be instanced by CI with the controller constructor, and then the method <code class="literal">method_name</code> will be called with the first parameter <code class="literal">param1</code>, second parameter <code class="literal">param2</code>, and so on.</p><p>On the PHP controller side, the <code class="literal">controller_name</code> method prototype will look like the following example:</p><div class="informalexample"><pre class="programlisting">Publicfunction method_name($user, $name, $email, $phone) {</pre></div><p>So that <code class="literal">$user</code> = <code class="literal">param1</code>, <code class="literal">$name</code> = <code class="literal">param2</code>, and so on.</p><p>This is one possible way to get the parameters through a URL or get an array. In CodeIgniter we don't have to get an array, so we can use the URI class to get the parameters. For reference, see <a class="ulink" href="http://ellislab.com/codeigniter/user-guide/libraries/uri.html">http://ellislab.com/codeigniter/user-guide/libraries/uri.html</a>.</p><p>If we provide:</p><div class="informalexample"><pre class="programlisting">&lt;?PHP base_url() ?&gt;/controller_name</pre></div><p>The CI will execute only the controller constructor and the <code class="literal">index()</code> method, if the controller has such a method.</p><p>If we provide:</p><div class="informalexample"><pre class="programlisting">&lt;?PHP base_url() ?&gt;/controller_name/method_name</pre></div><p>The preceding code will be executed without calling the <code class="literal">index()</code> method, following the call of the specific method, <code class="literal">method_name</code>. Remember that we shall not use <code class="literal">/</code> in our parameters for such a call and may wish to provide them using URL encode or other reversible encoding methods. We can also call our controller method using POST/GET so that we <a id="id68" class="indexterm"/>can retrieve the parameter value posted in the class method in the following way:</p><div class="informalexample"><pre class="programlisting">$param1_val = $this-&gt;input-&gt;post('param1');</pre></div><p>For example, within the class code we issue an AJAX call to a function as shown in the next example.</p></div><div class="section" title="Example 4 – calling AJAX to an AJAX-oriented method with arguments"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec05"/>Example 4 – calling AJAX to an AJAX-oriented method with arguments</h3></div></div></div><p>In this example we <a id="id69" class="indexterm"/>enable the end user to issue an AJAX call to a specific class method with its parameters enabled via HTTP <code class="literal">POST</code>.</p><div class="informalexample"><pre class="programlisting">&lt;script src="https://AJAX.googleapis.com/AJAX/libs/jquery/1.8.1/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;

function AJAX_call () {
a_val  = $('[name="a"]').val();
b_val  = $('[name="b"]').val();
AJAX_url = '&lt;?PHP echo base_url()."index.php/my_handler/AJAX_calc";?&gt;';
$.AJAX({
type: "POST",url : AJAX_url,data:  {a : a_val,  b : b_val },dataType: "json",success: function(data) {$('#result').html (data.result); }
}); // AJAX Call end
}&lt;/script&gt;

&lt;form onsubmit="AJAX_call();"&gt;&lt;label&gt;Enter A&lt;/label&gt;&lt;input type="text" name="a" /&gt;&lt;label&gt;Enter B&lt;/label&gt;&lt;input type="text" name="b" /&gt;Result:&lt;div id='result'&gt;The Result Will Be Shown Here&lt;/div&gt;&lt;input type="submit" value="Calculate" /&gt;&lt;/form&gt;</pre></div><p>Enter two numeric<a id="id70" class="indexterm"/> values for <code class="literal">A</code> and <code class="literal">B</code> and click on the <span class="strong"><strong>Calculate</strong></span> button. We will get the integer casted as <code class="literal">A</code> and multiply it by the integer casted as <code class="literal">B</code> in the <code class="literal">div</code> section with <code class="literal">id='result'</code>.</p></div><div class="section" title="Loading libraries, models, and helpers"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec06"/>Loading libraries, models, and helpers</h3></div></div></div><p>To reuse other<a id="id71" class="indexterm"/> libraries, models, and helper <a id="id72" class="indexterm"/>capabilities in our <a id="id73" class="indexterm"/>controller, we may also want to load libraries and helpers to our controller or model class to reuse them for our needs. In case we decide that certain helpers, libraries, or models are useful, we will have them loaded automatically. We can do so in the autoload configuration file named <code class="literal">autoload.php</code> located at <code class="literal">application/config/autoload.php</code> in our project.</p><p>The following is an autoload configuration example:</p><div class="informalexample"><pre class="programlisting">$autoload['libraries'] = array('template','database','session');

$autoload['helper'] = 
array('url', 'utilities');
// Note: url helper provide base_url() service</pre></div><p>Remember that if we want to load our helpers or libraries within a certain controller or model, we can enable it as per the following example:</p><div class="informalexample"><pre class="programlisting">classMy_handler extends CI_Controller { 
function __construct(){
// see previous explanation on this parent call 
parent::__construct();

// Loadingspecific helperto enable calling 
// its functions in all this 
// controller class methods as well as in all 
// rendered views.
// Note how the full name and path is abbreviated:

$this-&gt;load-&gt;helper('ssl_helper');

//Loading and instantiatinga library s
// application/librarues/smart_handler.php to 
// enable calling all its class methods as from // this controller as well from all the rendered 
// by this controller.
$this-&gt;load-&gt;library('smart_handler' );
}
function enforce_ssl () {
force_ssl();
// A function in the ssl_helper for more see 
// helpers chapter
}
function smarty () {
//call a method smart_service in the loaded //smart_handler library
//for more see Libraries chapter
$this-&gt;smart_handler-&gt;smart_service($param1, $param2); 
} 
}//End Controller My_handler</pre></div><p>We shall <a id="id74" class="indexterm"/>call the method that uses the<a id="id75" class="indexterm"/> helper <a id="id76" class="indexterm"/>as follows:</p><div class="informalexample"><pre class="programlisting">&lt;?php echo base_url(); ?&gt;index.php/my_handler/enforce_ssl</pre></div><p>For smarty method calls in the loaded library, we use the following code:</p><div class="informalexample"><pre class="programlisting">&lt;?php echo base_url(); ?&gt;index.php/my_handler/smarty</pre></div><p>Passing parameters within a controller into a view, <code class="literal">application/controllers/my_controller.php</code> as follows:</p><div class="informalexample"><pre class="programlisting">$array = array ('a' =&gt;100,'b' =&gt;200);
$view_params = array 
('param1' =&gt; 'hello world', 'param2' =&gt;$array
);
$this-&gt;load_view('my_view', $view_params);</pre></div><p>In the view file at <code class="literal">application/views</code>: <code class="literal">my_view.php</code>, the view can use the provided parameters in the following method:</p><div class="informalexample"><pre class="programlisting">&lt;?PHP 
echo $param1;// will echo hello world</pre></div><p>Note that within the controller it is defined as the <code class="literal">param1</code> key array element, where the array is sent to the view.</p><div class="informalexample"><pre class="programlisting">// To get the param2 values we shall perform :

foreach ( $params2 as param ){
echo param;  
// will echo 100 and 200 as $params2['a'] and 
// $params2['b'] values
}
?&gt;</pre></div></div></div></div>
<div class="section" title="Miscellaneous naming conventions"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Miscellaneous naming conventions</h1></div></div></div><p>CI guidelines have some <a id="id77" class="indexterm"/>general naming conventions, such as the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Your classes, functions, and parameters should have short names, and if constructed from several words they should use the underscore separator as follows:<div class="informalexample"><pre class="programlisting">// several lowercase words naming with under score
get_file_properties();</pre></div></li><li class="listitem" style="list-style-type: disc">When defining a string value, in case the string does not have a parameter to evaluate, we shall use a single comma as follows:<div class="informalexample"><pre class="programlisting">$my_string   = 'the string';</pre></div></li><li class="listitem" style="list-style-type: disc">In case we want our string to have a parameter such as <code class="literal">$name</code>, we write our string using double quotes:<div class="informalexample"><pre class="programlisting">$name = 'big string parameter';
$my_string = "This is a $name ";</pre></div></li><li class="listitem" style="list-style-type: disc">The Boolean and contacts all should be in upper case:<div class="informalexample"><pre class="programlisting">$this_vale = FALSE;
// While in javascript we shall use true / false 
// to distinguish</pre></div></li></ul></div><p>For more general CI PHP style guide<a id="id78" class="indexterm"/> refer to <a class="ulink" href="http://codeigniter.com/user_guide/general/styleguide.html">http://codeigniter.com/user_guide/general/styleguide.html</a>.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec19"/>Summary</h1></div></div></div><p>In this chapter we have reviewed and practiced CI naming conventions, rules, and usage with a set of examples for parameters, classes, controllers, models, helpers, libraries, and views.</p><p>Following the naming conventions we have reviewed CI configurations. We reviewed the major configuration files, such as <code class="literal">config.php</code>, <code class="literal">database.php</code>, <code class="literal">autoload.php</code>, and <code class="literal">routes.php</code> in depth. We also reviewed how we can use the configuration parameters while configuring several databases to be used in our project. In addition to it we also saw how we can add more project-specific configurations.</p></div></body></html>