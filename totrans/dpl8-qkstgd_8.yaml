- en: Welcome Home!
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 欢迎回家！
- en: 'So far in this book, we''ve learned about many of the things that can be done
    to quickly get a Drupal site up: creating content types, fields, and content;
    managing users; adding modules; providing translations; and creating feeds for
    other sites to consume. With all of these topics, there are still a few left to
    cover, and that becomes evident when we look at our home page.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，在这本书中，我们已经学习了快速搭建 Drupal 网站所需做的许多事情：创建内容类型、字段和内容；管理用户；添加模块；提供翻译；以及为其他网站创建内容源。在所有这些主题中，还有一些内容尚未涉及，当我们查看我们的主页时这一点就变得很明显。
- en: BAD home page!
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 糟糕的主页！
- en: 'There are many things about our home page that are bad, as shown in the following
    screenshot:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，我们的主页有很多问题：
- en: '![](img/440c78a0-d856-4332-b9b1-3dcda424ec6e.png)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/440c78a0-d856-4332-b9b1-3dcda424ec6e.png)'
- en: 'Some, the design-related ones, are out of the scope of this book, but there
    are others that we can address. Let''s make a list of what''s bad about our home
    page:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 一些与设计相关的内容超出了本书的范围，但还有一些我们可以解决。让我们列出我们主页上存在的问题：
- en: Too much content!
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内容过多！
- en: There is no access to the content that is not on the home page
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 没有访问主页之外的内容
- en: Our RSS feeds menu needs to be added
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的 RSS 源菜单需要添加
- en: The footer menu says Legal instead of Terms and Conditions
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 页脚菜单显示的是“法律”而不是“条款和条件”
- en: The Legal link leads back to the home page
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “法律”链接会返回到主页
- en: Design improvements
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设计改进
- en: Next, let's take our list and consider the deficiencies and what can be done
    to remedy them.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们看看我们的列表，考虑一下存在的不足以及如何加以改进。
- en: Too much content!
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内容过多！
- en: Drupal is a content management system, of course, but that doesn't mean that
    all the content should be on the home page. It becomes too long and cluttered.
    It's better to show only one complete piece or a small number of teasers.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，Drupal 是一个内容管理系统，但这并不意味着所有内容都应该放在主页上。内容太多，显得杂乱无章。最好只展示一个完整的内容或少数几个简介。
- en: There is a view that provides the selection of content for the home page. Its
    default behavior is to include all content that has been promoted by checking
    its Promote to front page checkbox. So, we could limit the number of pieces displayed
    by limiting the number of those promoted. Let's be a little more creative.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个视图提供了主页内容的选取。它的默认行为是包括所有通过勾选“提升到首页”复选框而被提升的内容。因此，我们可以通过限制这些被提升内容的数量来限制显示的内容数量。让我们有点创意。
- en: We will limit the teaser to the most recent piece of promoted content and create
    a block that offers the others as a list of links.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将限制简介只显示最新被提升的内容，并创建一个块，提供其他内容的链接列表。
- en: No access to content
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 没有内容访问权限
- en: 'This is the opposite problem of the first one. If we''re going to show the
    most recent piece of content, and a handful of others in a list, what about the
    content that is older than that? This is a dilemma suited for the same solution
    you often see with a blog: an archive. We''ll create one to show the older content.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这是第一个问题的反面。如果我们打算展示最新内容以及一些其他内容列表中的内容，那么那些比这更早的内容怎么办？这是一个适合使用与博客中常见的相同解决方案的困境：存档。我们将创建一个来展示更早的内容。
- en: No RSS feeds menu
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 没有RSS源菜单
- en: This is an easy one to resolve. We have already created a custom block that
    provides a menu for our RSS feeds. All we will need to do is place this block
    on the home page.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个容易解决的问题。我们已经创建了一个自定义块，为我们的 RSS 源提供了一个菜单。我们所需做的只是将这个块放置在主页上。
- en: We need a Terms and Conditions page
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 我们需要一个“条款和条件”页面
- en: The footer menu has a *Legal* link, which leads back to the home page. We'll
    change it to the heading we want, and create a page to link to it.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 页脚菜单中的“法律”链接会返回到主页。我们将将其更改为我们想要的标题，并创建一个页面来链接到它。
- en: Making the changes
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进行更改
- en: Now that we have a plan, let's get busy!
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了计划，让我们开始忙碌起来！
- en: Improving the Frontpage view
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 改进首页视图
- en: 'Navigate to *Structure* | *Views* (`/admin/structure/views`). Scroll down to
    the *Frontpage* view. This is one of the views that comes with Drupal. We could
    modify it, but it is a good practice to leave the original unchanged and, instead,
    make a duplicate to modify, which is what we''ll do here:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到 *结构* | *视图* (`/admin/structure/views`)。向下滚动到 *首页* 视图。这是 Drupal 附带的一个视图。我们可以对其进行修改，但保留原始视图不变，而是创建一个副本进行修改，这正是我们在这里要做的：
- en: From the drop-down in its row, select *Duplicate*.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从其行中的下拉菜单中选择*复制*。
- en: In the View name text box that then appears, change the name to `Frontpage -
    Custom` and click *Duplicate*.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在随后出现的“视图名称”文本框中，将名称更改为“首页 - 自定义”并点击*复制*。
- en: On the View configuration page, we will change the number of items that the
    view displays. It is currently configured to show 10 items and a pager, but we
    will change it to show only one. Click *Full* and select *This page (override)*
    from the drop-down. Select the setting for *Display a specified number of items*,
    and click *Apply (this display)*.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在视图配置页面，我们将更改视图显示的项目数量。它目前配置为显示10个项目和一个分页器，但我们将将其更改为只显示一个。点击*全部*并从下拉菜单中选择*此页（覆盖）*。选择*显示指定数量的项目*的设置，然后点击*应用（此显示）*。
- en: In the *Pager options* dialog, change the *Items per page* to `1`, click *Apply*,
    and then click *Save*.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*分页器选项*对话框中，将*每页项目数*更改为`1`，点击*应用*，然后点击*保存*。
- en: Return to the views list at `/admin/structure/views`. If you look at the list,
    you will see that the original *Frontpage* and our *Frontpage - Custom* both have
    the same path.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回到`/admin/structure/views`的视图列表。如果你查看列表，你会看到原始的*首页*和我们的*自定义首页*都有相同的路径。
- en: The path needs to be `/node` for technical reasons, but we cannot have two views
    responding to the same path. Therefore, in the row for the original Frontpage,
    select *Disable* from the drop-down.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于技术原因，路径需要是`/node`，但我们不能有两个视图响应相同的路径。因此，在原始首页的行中，从下拉菜单中选择*禁用*。
- en: This change will ensure that only the most recent piece of content. Let's edit
    our new view so that we can add an additional display to it. The current display
    is for the home page, but we also want a display that provides a block of title
    links for additional content.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此更改将确保只显示最新内容。让我们编辑我们的新视图，以便我们可以向其中添加额外的显示。当前的显示是为首页，但我们还想要一个提供额外内容标题链接块的显示。
- en: On its configuration page, click the *+Add* button in the Displays panel, and
    select *Block*.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在其配置页面，点击显示面板中的*添加*按钮，并选择*块*。
- en: Title
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 标题
- en: Click on the link for *Title*, and select This block (override) from the drop-down.
    Then, in the pop-up, enter `Recent articles`, and click *Apply (this display)*.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 点击*标题*链接，从下拉菜单中选择*此块（覆盖）*。然后在弹出窗口中输入`Recent articles`，点击*应用（此显示）*。
- en: Format
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 格式
- en: Click the *Content* link and select *This block (override)* from the drop-down.
    Then, select *Fields* and click *Apply (this display)*. In the subsequent pop-up,
    click *Apply*.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 点击*内容*链接，从下拉菜单中选择*此块（覆盖）*。然后，选择*字段*并点击*应用（此显示）*。在随后的弹出窗口中，点击*应用*。
- en: Fields
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 字段
- en: At this point, we have told Views that we want our output to be a list, and
    that we want to be able to select the fields that will be in that list, but we
    have no fields selected. Views doesn't like that, and it doesn't help us, giving
    us an empty output. Let's let Views know that we want a list of titles that link
    back to the content.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经告诉视图我们想要输出一个列表，并且我们想要能够选择列表中将包含的字段，但我们还没有选择任何字段。视图不喜欢这样，并且它没有帮助我们，给出了一个空输出。让我们让视图知道我们想要一个包含链接回内容的标题列表。
- en: Click the *Add* button. select *This block (override)* from the drop-down, scroll
    down and check the box for *Title*, and then click *Apply (this display)*. In
    the subsequent pop-up, click *Apply (this display)*.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 点击*添加*按钮。从下拉菜单中选择*此块（覆盖）*，向下滚动并勾选*标题*复选框，然后点击*应用（此显示）*。在随后的弹出窗口中，点击*应用（此显示）*。
- en: Filtering criteria
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 筛选条件
- en: There are number of filters in effect, but we want to also filter on the content
    type, limiting it to Article.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 有多个筛选条件生效，但我们还想根据内容类型进行筛选，限制为文章。
- en: Click the Add button, select This block (override) from the drop-down, scroll
    down and check the box for Content type, and then click Apply (this display).
    In the subsequent pop-up, check the box for Article, and click Apply (this display).
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 点击*添加*按钮，从下拉菜单中选择*此块（覆盖）*，向下滚动并勾选*内容类型*复选框，然后点击*应用（此显示）*。在随后的弹出窗口中，勾选*文章*复选框，然后点击*应用（此显示）*。
- en: Block settings
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 块设置
- en: Click *None* next to *Block name*, enter `Recent articles` in the text box,
    and click *Apply*.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在“*块名称*”旁边点击*无*，在文本框中输入`Recent articles`，然后点击*应用*。
- en: Pager
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分页器
- en: Click *10 items*, change `10` to `3`, set the offset to `1`, and click *Apply*.
    This tells Views that the three most recent articles after the most recent should
    be used. The reason we ignore the most recent is that it is the one that will
    appear as a teaser in the main content area, so we don't want to have its title
    appear in the block as well.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 点击*10个项目*，将`10`更改为`3`，设置偏移量为`1`，然后点击*应用*。这告诉视图使用最新文章之后的三个最新文章。我们忽略最新的原因是它将作为主要内容区域中的预告出现，所以我们不希望其标题也出现在块中。
- en: That completes our block. Don't forget to click *Save*.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这就完成了我们的块。别忘了点击*保存*。
- en: Navigate to *Structure* | *Block layout* (`/admin/structure/block`). In the
    *Sidebar first* section, click *Place block*. Then, in the row for *Recent articles,*
    click *Place block*, and then click *Save block*.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到 *结构* | *区块布局* (`/admin/structure/block`)。在 *侧边栏第一* 部分，点击 *放置区块*。然后，在 *最近文章*
    行中点击 *放置区块*，然后点击 *保存区块*。
- en: Adding an Archive
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加存档
- en: Navigate to *Structure* | *Views* (`/admin/structure/views`), scroll down to
    the *Disabled* section, and enable the *Archive* view.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到 *结构* | *视图* (`/admin/structure/views`)，向下滚动到 *禁用* 部分，并启用 *存档* 视图。
- en: Navigate to *Structure* | *Block layout* (`/admin/structure/views`), in the
    Sidebar first section. Then, click Place block, and scroll down in the row for
    Archive. Here, click Place block, and then click the Save block button.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到 *结构* | *区块布局* (`/admin/structure/views`)，在 *侧边栏第一* 部分。然后，点击 *放置区块*，在 *存档*
    行中向下滚动。在这里，点击 *放置区块*，然后点击 *保存区块* 按钮。
- en: Adding the RSS Feeds menu
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加RSS源菜单
- en: Earlier, we created a RSS feeds block display in a view. Let's add that block
    to our home page now.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 之前，我们在视图中创建了一个RSS源区块显示。现在让我们将这个区块添加到我们的主页上。
- en: Navigate to *Structure* | *Block layout* (`/admin/structure/views`). In the
    *Sidebar first* section, click *Place block*. Then, scroll down the row for *RSS
    Feeds*, click *Place block*, and finally click the *Save block* button.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到 *结构* | *区块布局* (`/admin/structure/views`)。在 *侧边栏第一* 部分，点击 *放置区块*。然后，在 *RSS源*
    行中向下滚动，点击 *放置区块*，最后点击 *保存区块* 按钮。
- en: Fixing the Footer menu
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修复页脚菜单
- en: We want to fix the Legal link. One of the things we need to fix is that it is
    currently linking to the home page rather than a Terms and Conditions page. Drupal
    will not allow a path to be specified for the menu item unless the path already
    exists. Therefore, we need to create a Terms and Conditions page first.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想修复法律链接。我们需要修复的事情之一是它目前链接到主页而不是条款和条件页面。除非路径已经存在，否则Drupal不会允许为菜单项指定路径。因此，我们需要首先创建一个条款和条件页面。
- en: Navigate to Content | Create content (`/node/add`) and select Basic page as
    the content type. In the Title text box, enter `Terms & Conditions`. We're not
    going to enter the legalese at this point, but let's type `Placeholder` in the
    Body field for now. Click the vertical tab for URL Path Settings, enter `/termsandconditions`,
    and click Save.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到内容 | 创建内容 (`/node/add`) 并选择基本页面作为内容类型。在标题文本框中输入 `条款和条件`。我们现在不会输入法律术语，但暂时在正文中输入
    `占位符`。点击 URL 路径设置选项卡，输入 `/termsandconditions`，然后点击保存。
- en: Navigate to Structure | Menus (`/admin/structure/menu`) and click the Edit menu
    button for the Footer menu.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到 *结构* | *菜单* (`/admin/structure/menu`)，点击页脚菜单的编辑菜单按钮。
- en: Click the Edit button for the Legal link, and change the title from Legal to
    Terms & Conditions. For the Link, type Terms, and then when the autocomplete field
    offers the content title, click it. Enter `T's & C's` in the Description text
    box and click Save.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 点击法律链接的编辑按钮，将标题从法律改为条款和条件。对于链接，输入“条款”，然后当自动完成字段提供内容标题时，点击它。在描述文本框中输入 `T's &
    C's` 并点击保存。
- en: This completes our improvements.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了我们的改进。
- en: '![](img/fc3dc44f-6295-4350-8954-43366a2b451f.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/fc3dc44f-6295-4350-8954-43366a2b451f.png)'
- en: Summary
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we learned how to improve a weak home page by editing its view,
    providing an archive and recent content block, and change the footer menu.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了如何通过编辑视图、提供存档和最近内容区块以及更改页脚菜单来改进一个弱的主页。
- en: This completes *Drupal 8 Quickstart*. I hope this book has helped you get your
    site up and running as well as helped your understanding of basic Drupal features.
    Thanks for reading!
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了 *Drupal 8 快速入门*。我希望这本书能帮助你将网站搭建起来并运行，同时也帮助你理解基本的Drupal功能。感谢阅读！
