<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Reflection and Unit Testing"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Reflection and Unit Testing</h1></div></div></div><p>PHP5 brings in many new flavors compared to PHP4. It replaces many old APIs with smarter, new ones. One of them is Reflection API. Using this cool set of API, you can reverse engineer any class or object to figure out its properties and methods. You can invoke those methods dynamically and do some more. In this chapter we will learn in more detail about reflections and use of each of these functions. </p><p>Another very important part of software development is building test suits for automated testing of your piece of work. This is to ensure it's working correctly and after any changes it maintains backward compatibility. To ease the process for PHP developers, there are a lot of testing tools available on the market. Among them are some very popular tools like PHPUnit. In this chapter we will learn about unit testing with PHP.</p><div class="section" title="Reflection"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec53"/>Reflection </h1></div></div></div><a id="id178" class="indexterm"/><a id="id179" class="indexterm"/><p>Reflection API provides some functionality to find out what is inside an object or a class at runtime. Besides that, reflection API lets you invoke dynamically any method or property of any object. Let's get our hands dirty with reflection. There are numerous objects introduced in reflection API. Among them, the following are important: <a id="id180" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">
<code class="literal">class</code> <code class="literal">Reflection</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">interface</code> <code class="literal">Reflector</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionException</code> <code class="literal">extends</code> <code class="literal">Exception</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionFunction</code> <code class="literal">implements</code> <code class="literal">Reflector</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionParameter</code> <code class="literal">implements</code> <code class="literal">Reflector</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionMethod</code> <code class="literal">extends</code> <code class="literal">ReflectionFunction</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionClass</code> <code class="literal">implements</code> <code class="literal">Reflector</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionObject</code> <code class="literal">extends</code> <code class="literal">ReflectionClass</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionProperty</code> <code class="literal">implements</code> <code class="literal">Reflector</code> <code class="literal">{</code> <code class="literal">}</code>
<code class="literal">class</code> <code class="literal">ReflectionExtension</code> <code class="literal">implements</code> <code class="literal">Reflector</code> <code class="literal">{</code> <code class="literal">}</code>
</pre></div><p>Let us go and play with <code class="literal">ReflectionClass</code> first. </p><div class="section" title="ReflectionClass"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec16"/>ReflectionClass </h2></div></div></div><a id="id181" class="indexterm"/><a id="id182" class="indexterm"/><a id="id183" class="indexterm"/><p>This is one of the major core classes in reflection API. This class helps you to reverse engineer any object in the broad sense. The structure of this class is shown here: </p><div class="informalexample"><pre class="programlisting">&lt;?php
class ReflectionClass implements Reflector
{
   final private __clone()
   public object __construct(string name)
   public string __toString()
   public static string export(mixed class, bool return)
   public string getName()
   public bool isInternal()
   public bool isUserDefined()
   public bool isInstantiable()
   public bool hasConstant(string name)
   public bool hasMethod(string name)
   public bool hasProperty(string name)
   public string getFileName()
   public int getStartLine()
   public int getEndLine()
   public string getDocComment()
   public ReflectionMethod getConstructor()
   public ReflectionMethod getMethod(string name)
   public ReflectionMethod[] getMethods()
   public ReflectionProperty getProperty(string name)
   public ReflectionProperty[] getProperties()
   public array getConstants()
   public mixed getConstant(string name)
   public ReflectionClass[] getInterfaces()
   public bool isInterface()
   public bool isAbstract()
   public bool isFinal()
   public int getModifiers()
   public bool isInstance(stdclass object)
   public stdclass newInstance(mixed args)
   public stdclass newInstanceArgs(array args)
   public ReflectionClass getParentClass()
   public bool isSubclassOf(ReflectionClass class)
   public array getStaticProperties()
   public mixed getStaticPropertyValue(string name [, mixed default])
   public void setStaticPropertyValue(string name, mixed value)
   public array getDefaultProperties()
   public bool isIterateable()
   public bool implementsInterface(string name)
   public ReflectionExtension getExtension()
   public string getExtensionName()
}
?&gt;<a id="id184" class="indexterm"/>
</pre></div><p>Let's discuss how this class actually works. First we will find their methods and purpose: <a id="id185" class="indexterm"/>
<a id="id186" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">export()</code> method dumps the internal structure of any object, which is almost similar to <code class="literal">var_dump</code> function. </li><li class="listitem" style="list-style-type: disc"><code class="literal">getName()</code> function returns the internal name of an object, hence the class name. </li><li class="listitem" style="list-style-type: disc"><code class="literal">isInternal()</code> returns true if the class is a built-in object inside PHP5. </li><li class="listitem" style="list-style-type: disc"><code class="literal">isUserDefined()</code> is the opposite of <code class="literal">isInternal()</code> method. It just returns whether the object is defined by the user.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getFileName()</code> function returns the PHP script file name where the class is written.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getStartLine()</code> returns at which line the code of that class begins in the script file.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getDocComment()</code> is another interesting function which returns the class level document for that object. We will demonstrate it in examples later in this chapter. </li><li class="listitem" style="list-style-type: disc"><code class="literal">getConstructor()</code> returns the reference of the constructor of the object as a <code class="literal">ReflectionMethod</code> object.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getMethod()</code> function returns the address of any method passed to it as a string. The returned object is a <code class="literal">ReflectionMethod</code> object.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getMethods()</code> returns an array of all the methods in the object. In that array every method is returned as <code class="literal">ReflectionMethod</code> object. </li><li class="listitem" style="list-style-type: disc"><code class="literal">getProperty()</code> function returns a reference to any property in that object, as a <code class="literal">ReflectionProperty</code> object.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getConstants()</code> returns an array of constants in that object.</li><li class="listitem" style="list-style-type: disc"><code class="literal">getConstant()</code> returns the value of any particular constant. </li><li class="listitem" style="list-style-type: disc">If you want a reference to the interfaces that a class implemented (if any), you can use <code class="literal">getInterfaces()</code> function which, returns an array of interfaces as <code class="literal">ReflectionClass</code> object.</li><li class="listitem" style="list-style-type: disc">The <code class="literal">getModifiers()</code> method returns the list of modifiers relevant to that class. For example, it could be public, private, protected, abstract, static, or final. </li><li class="listitem" style="list-style-type: disc"><code class="literal">newInstance()</code> <code class="literal">f</code>unction returns a new instance of that class and returns it as a regular object (which is actually <code class="literal">stdClas;</code> <code class="literal">stdClass</code> is the base class of every PHP object).</li><li class="listitem" style="list-style-type: disc">You want a reference to the parent class of any class? You can use <code class="literal">getParentClass()</code> method to get that as a <code class="literal">ReflectionClass</code> object.</li><li class="listitem" style="list-style-type: disc">Another cool function of <code class="literal">ReflectionClass()</code> is that it can tell from which extension a class has been originated. For example, <code class="literal">ArrayObject</code> class is originated from SPL class. You have to use <code class="literal">getExtensionName()</code> function for that. <a id="id187" class="indexterm"/><a id="id188" class="indexterm"/></li></ul></div><p>Let's write some code now. We will see these functions in real life code. Here, I am showing a fantastic example taken from the PHP Manual. <a id="id189" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;?php
interface NSerializable
{
   // ...
}

class Object
{
   // ...
}

/**
* A counter class
*/
class Counter extends Object implements NSerializable 
{
   const START = 0;
   private static $c = Counter::START;

   /**
    * Invoke counter
    *
    * @access  public
    * @return  int
    */
   public function count() 
   {
       return self::$c++;
   }
}

// Create an instance of the ReflectionClass class
$class = new ReflectionClass('Counter');

// Print out basic information
printf(
   "===&gt; The %s%s%s %s '%s' [extends %s]\n" .
   "     declared in %s\n" .
   "     lines %d to %d\n" .
   "     having the modifiers %d [%s]\n",
       $class-&gt;isInternal() ? 'internal' : 'user-defined',
       $class-&gt;isAbstract() ? ' abstract' : '',
       $class-&gt;isFinal() ? ' final' : '',
       $class-&gt;isInterface() ? 'interface' : 'class',
       $class-&gt;getName(),
       var_export($class-&gt;getParentClass(), 1),
       $class-&gt;getFileName(),
       $class-&gt;getStartLine(),
       $class-&gt;getEndline(),
       $class-&gt;getModifiers(),
       implode(' ', Reflection::getModifierNames(
                                   $class-&gt;getModifiers()))
       );<a id="id190" class="indexterm"/>

// Print documentation comment
printf("---&gt; Documentation:\n %s\n", 
                    var_export($class-&gt;getDocComment(), 1));

// Print which interfaces are implemented by this class
printf("---&gt; Implements:\n %s\n", 
                    var_export($class-&gt;getInterfaces(), 1));

// Print class constants
printf("---&gt; Constants: %s\n", 
                     var_export($class-&gt;getConstants(), 1));

// Print class properties
printf("---&gt; Properties: %s\n", 
                     var_export($class-&gt;getProperties(), 1));

// Print class methods
printf("---&gt; Methods: %s\n", 
                     var_export($class-&gt;getMethods(), 1));

// If this class is instantiable, create an instance
if ($class-&gt;isInstantiable()) 
{
   $counter = $class-&gt;newInstance();
   echo '---&gt; $counter is instance? '; 
   echo $class-&gt;isInstance($counter) ? 'yes' : 'no';
   echo "\n---&gt; new Object() is instance? ";
   echo $class-&gt;isInstance(new Object()) ? 'yes' : 'no';
}
?&gt;</pre></div><p>Now save the above code in a file named <code class="literal">class.counter.php</code>. When you run the above code, you will get the following output:<a id="id191" class="indexterm"/> </p><p>
<span class="strong"><strong>X-Powered-By: PHP/5.1.1</strong></span>
</p><p>
<span class="strong"><strong>Content-type: text/html</strong></span>
</p><p>
<span class="strong"><strong>===&gt; The user-defined class 'Counter' [extends ReflectionClass::__set_state(array(</strong></span>
</p><p>
<span class="strong"><strong>   'name' =&gt; 'Object',</strong></span>
</p><p>
<span class="strong"><strong>))]</strong></span>
</p><p>
<span class="strong"><strong>     declared in PHPDocument2</strong></span>
</p><p>
<span class="strong"><strong>     lines 15 to 29</strong></span>
</p><p>
<span class="strong"><strong>     having the modifiers 0 []</strong></span>
</p><p>
<span class="strong"><strong>---&gt; Documentation:</strong></span>
</p><p>
<span class="strong"><strong> '/**</strong></span>
</p><p>
<span class="strong"><strong>* A counter class</strong></span>
</p><p>
<span class="strong"><strong>*/'</strong></span>
</p><p>
<span class="strong"><strong>---&gt; Implements:</strong></span>
</p><p>
<span class="strong"><strong> array (</strong></span>
</p><p>
<span class="strong"><strong>  0 =&gt; </strong></span>
</p><p>
<span class="strong"><strong>  ReflectionClass::__set_state(array(</strong></span>
</p><p>
<span class="strong"><strong>     'name' =&gt; 'NSerializable',</strong></span>
</p><p>
<span class="strong"><strong>  )),</strong></span>
</p><p>
<span class="strong"><strong>)</strong></span>
</p><p>
<span class="strong"><strong>---&gt; Constants: array (</strong></span>
</p><p>
<span class="strong"><strong>  'START' =&gt; 0,</strong></span>
</p><p>
<span class="strong"><strong>)</strong></span>
</p><p>
<span class="strong"><strong>---&gt; Properties: array (</strong></span>
</p><p>
<span class="strong"><strong>  0 =&gt; </strong></span>
</p><p>
<span class="strong"><strong>  ReflectionProperty::__set_state(array(</strong></span>
</p><p>
<span class="strong"><strong>     'name' =&gt; 'c',</strong></span>
</p><p>
<span class="strong"><strong>     'class' =&gt; 'Counter',</strong></span>
</p><p>
<span class="strong"><strong>  )),</strong></span>
</p><p>
<span class="strong"><strong>)</strong></span>
</p><p>
<span class="strong"><strong>---&gt; Methods: array (</strong></span>
</p><p>
<span class="strong"><strong>  0 =&gt; </strong></span>
</p><p>
<span class="strong"><strong>  ReflectionMethod::__set_state(array(</strong></span>
</p><p>
<span class="strong"><strong>     'name' =&gt; 'count',</strong></span>
</p><p>
<span class="strong"><strong>     'class' =&gt; 'Counter',</strong></span>
</p><p>
<span class="strong"><strong>  )),</strong></span>
</p><p>
<span class="strong"><strong>)</strong></span>
</p><p>
<span class="strong"><strong>---&gt; $counter is instance? yes</strong></span>
</p><p>
<span class="strong"><strong>---&gt; new Object() is instance? No</strong></span><a id="id192" class="indexterm"/>
</p></div></div></div>
<div class="section" title="ReflectionMethod"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec54"/>ReflectionMethod</h1></div></div></div><a id="id193" class="indexterm"/><a id="id194" class="indexterm"/><p>This is the class used to investigate any method of the class and then invoke it. Let us see the structure of this class:<a id="id195" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;?php
class ReflectionMethod extends ReflectionFunction
{
   public __construct(mixed class, string name)
   public string __toString()
   public static string export(mixed class, string name, bool return)
   public mixed invoke(stdclass object, mixed args)
   public mixed invokeArgs(stdclass object, array args)
   public bool isFinal()
   public bool isAbstract()
   public bool isPublic()
   public bool isPrivate()
   public bool isProtected()
   public bool isStatic()
   public bool isConstructor()
   public bool isDestructor()
   public int getModifiers()
   public ReflectionClass getDeclaringClass()

   // Inherited from ReflectionFunction
   final private __clone()
   public string getName()
   public bool isInternal()
   public bool isUserDefined()
   public string getFileName()
   public int getStartLine()
   public int getEndLine()
   public string getDocComment()
   public array getStaticVariables()
   public bool returnsReference()
   public ReflectionParameter[] getParameters()
   public int getNumberOfParameters()
   public int getNumberOfRequiredParameters()
}
?&gt;<a id="id196" class="indexterm"/>
</pre></div><p>The most important methods of this class are <code class="literal">getNumberOfParamaters</code>, <code class="literal">getNumberOfRequiredParameters</code>, <code class="literal">getParameters</code>, and <code class="literal">invoke</code>. <a id="id197" class="indexterm"/>The first three of these are self explanatory; let's look at the fourth one which is invoked. This is a nice example taken from the PHP Manual:</p><div class="informalexample"><pre class="programlisting">&lt;?php
class Counter<a id="id198" class="indexterm"/>
{
   private static $c = 0;

   /**
    * Increment counter
    *
    * @final
    * @static
    * @access  public
    * @return  int
    */
   final public static function increment()
   {
       return ++self::$c;
   }
}
// Create an instance of the Reflection_Method class
$method = new ReflectionMethod('Counter', 'increment');
// Print out basic information
printf(
   "===&gt; The %s%s%s%s%s%s%s method '%s' (which is %s)\n" .
   "     declared in %s\n" .
   "     lines %d to %d\n" .
   "     having the modifiers %d[%s]\n",
       $method-&gt;isInternal() ? 'internal' : 'user-defined',
       $method-&gt;isAbstract() ? ' abstract' : '',
       $method-&gt;isFinal() ? ' final' : '',
       $method-&gt;isPublic() ? ' public' : '',
       $method-&gt;isPrivate() ? ' private' : '',
       $method-&gt;isProtected() ? ' protected' : '',
       $method-&gt;isStatic() ? ' static' : '',
       $method-&gt;getName(),
       $method-&gt;isConstructor() ? 'the constructor' : 
                                      'a regular method',
       $method-&gt;getFileName(),
       $method-&gt;getStartLine(),
       $method-&gt;getEndline(),
       $method-&gt;getModifiers(),
       implode(' ', Reflection::getModifierNames(
                                 $method-&gt;getModifiers()))
       );<a id="id199" class="indexterm"/>

// Print documentation comment
printf("---&gt; Documentation:\n %s\n", 
                  var_export($method-&gt;getDocComment(), 1));

// Print static variables if existant
if ($statics= $method-&gt;getStaticVariables()) {
   printf("---&gt; Static variables: %s\n", var_export($statics, 1));
}

// Invoke the method
printf("---&gt; Invokation results in: ");
var_dump($method-&gt;invoke(NULL));
?&gt;</pre></div><p>When executed, this code will give the following output:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>===&gt; The user-defined final public static method 'increment' (which is a regular method)</strong></span>
<span class="strong"><strong>     declared in PHPDocument1</strong></span>
<span class="strong"><strong>     lines 14 to 17</strong></span>
<span class="strong"><strong>     having the modifiers 261[final public static]</strong></span>
<span class="strong"><strong>---&gt; Documentation:</strong></span>
<span class="strong"><strong> '/**</strong></span>
<span class="strong"><strong>    * Increment counter</strong></span>
<span class="strong"><strong>    *</strong></span>
<span class="strong"><strong>    * @final</strong></span>
<span class="strong"><strong>    * @static</strong></span>
<span class="strong"><strong>    * @access  public</strong></span>
<span class="strong"><strong>    * @return  int</strong></span>
<span class="strong"><strong>    */'</strong></span>
<span class="strong"><strong>---&gt; Invokation results in: int(1)</strong></span><a id="id200" class="indexterm"/>
</pre></div></div>
<div class="section" title="ReflectionParameter"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec55"/>ReflectionParameter</h1></div></div></div><a id="id201" class="indexterm"/><a id="id202" class="indexterm"/><p>Another very important object in the reflection family is <code class="literal">ReflectionParameter</code>. Using this class you can analyze parameters of any method and take action accordingly. Let us take a look at the object structure:<a id="id203" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;?php
class ReflectionParameter implements Reflector
{
   final private __clone()
   public object __construct(string name)
   public string __toString()
   public static string export(mixed function, mixed parameter, 
                                                      bool return)
   public string getName()
   public bool isPassedByReference()
   public ReflectionFunction getDeclaringFunction()
   public ReflectionClass getDeclaringClass()
   public ReflectionClass getClass()
   public bool isArray()
   public bool allowsNull()
   public bool isPassedByReference()
   public bool getPosition()
   public bool isOptional()
   public bool isDefaultValueAvailable()
   public mixed getDefaultValue()
}
?&gt;</pre></div><a id="id204" class="indexterm"/><p>To make things easier, have a look at the following example to see how this thing works. </p><div class="informalexample"><pre class="programlisting">&lt;?php
function foo($a, $b, $c) { }
function bar(Exception $a, &amp;$b, $c) { }
function baz(ReflectionFunction $a,  $b = 1, $c = null) { }
function abc() { }

// Create an instance of Reflection_Function with the
// parameter given from the command line.    
$reflect = new ReflectionFunction("baz");
echo $reflect;
foreach ($reflect-&gt;getParameters() as $i =&gt; $param) 
{
   printf(
       "-- Parameter #%d: %s {\n".
       "   Class: %s\n".
       "   Allows NULL: %s\n".
       "   Passed to by reference: %s\n".
       "   Is optional?: %s\n".
       "}\n",
       $i, 
       $param-&gt;getName(),
       var_export($param-&gt;getClass(), 1),
       var_export($param-&gt;allowsNull(), 1),
       var_export($param-&gt;isPassedByReference(), 1),
       $param-&gt;isOptional() ? 'yes' : 'no'
   );
}
?&gt;<a id="id205" class="indexterm"/>
</pre></div><p>If you run the above code snippet, you will get the following output: </p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>Function [ &lt;user&gt; &lt;visibility error&gt; function baz ] </strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>  @@ C:\OOP with PHP5\Codes\ch5\test.php 4 - 4</strong></span>
<span class="strong"><strong>  - Parameters [3] </strong></span>
<span class="strong"><strong>  {</strong></span>
<span class="strong"><strong>    Parameter #0 [ &lt;required&gt; ReflectionFunction &amp;$a ]</strong></span>
<span class="strong"><strong>    Parameter #1 [ &lt;optional&gt; $b = 1 ]</strong></span>
<span class="strong"><strong>    Parameter #2 [ &lt;optional&gt; $c = NULL ]</strong></span>
<span class="strong"><strong>  }</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>-- Parameter #0: a </strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>   Class: ReflectionClass::__set_state(array(</strong></span>
<span class="strong"><strong>   'name' =&gt; 'ReflectionFunction',</strong></span>
<span class="strong"><strong>))</strong></span>
<span class="strong"><strong>   Allows NULL: false</strong></span>
<span class="strong"><strong>   Passed to by reference: true</strong></span>
<span class="strong"><strong>   Is optional?: no</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>-- Parameter #1: b </strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>   Class: NULL</strong></span>
<span class="strong"><strong>   Allows NULL: true</strong></span>
<span class="strong"><strong>   Passed to by reference: false</strong></span>
<span class="strong"><strong>   Is optional?: yes</strong></span>
<span class="strong"><strong>}</strong></span>
<span class="strong"><strong>-- Parameter #2: c </strong></span>
<span class="strong"><strong>{</strong></span>
<span class="strong"><strong>   Class: NULL</strong></span>
<span class="strong"><strong>   Allows NULL: true</strong></span>
<span class="strong"><strong>   Passed to by reference: false</strong></span>
<span class="strong"><strong>   Is optional?: yes</strong></span>
<span class="strong"><strong>}</strong></span><a id="id206" class="indexterm"/>
</pre></div></div>
<div class="section" title="ReflectionProperty"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec56"/>ReflectionProperty</h1></div></div></div><a id="id207" class="indexterm"/><a id="id208" class="indexterm"/><p>This is the last one under the reflection family that we are going to discuss here. This class helps you to investigate class properties and reverse engineer them. This class has the following structure:<a id="id209" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;?php
class ReflectionProperty implements Reflector
{
   final private __clone()
   public __construct(mixed class, string name)
   public string __toString()
   public static string export(mixed class, string name, bool return)
   public string getName()
   public bool isPublic()
   public bool isPrivate()
   public bool isProtected()
   public bool isStatic()
   public bool isDefault()
   public int getModifiers()
   public mixed getValue(stdclass object)
   public void setValue(stdclass object, mixed value)
   public ReflectionClass getDeclaringClass()
   public string getDocComment()
}
?&gt;</pre></div><p>Here is an example taken directly from the PHP Manual, that helps describe how it actually works. </p><div class="informalexample"><pre class="programlisting">&lt;?php
class String
{
   public $length  = 5;
}

// Create an instance of the ReflectionProperty class
$prop = new ReflectionProperty('String', 'length');
// Print out basic information
printf(
   "===&gt; The%s%s%s%s property '%s' (which was %s)\n" .
   "     having the modifiers %s\n",
       $prop-&gt;isPublic() ? ' public' : '',
       $prop-&gt;isPrivate() ? ' private' : '',
       $prop-&gt;isProtected() ? ' protected' : '',
       $prop-&gt;isStatic() ? ' static' : '',
       $prop-&gt;getName(),
       $prop-&gt;isDefault() ? 'declared at compile-time' : 
                                     'created at run-time',
       var_export(Reflection::getModifierNames(
                                   $prop-&gt;getModifiers()), 1)
      );  <a id="id210" class="indexterm"/>

// Create an instance of String
$obj= new String();

// Get current value
printf("---&gt; Value is: ");
var_dump($prop-&gt;getValue($obj));

// Change value
$prop-&gt;setValue($obj, 10);
printf("---&gt; Setting value to 10, new value is: ");
var_dump($prop-&gt;getValue($obj));

// Dump object
var_dump($obj);
?&gt;</pre></div><p>The code produces the following output upon execution. This code inspects a property with the help of <code class="literal">ReflectionProperty</code> and displays the following output: </p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>===&gt; The public property 'length' (which was declared at compile-time)</strong></span>
<span class="strong"><strong>     having the modifiers array (</strong></span>
<span class="strong"><strong>  0 =&gt; 'public',</strong></span>
<span class="strong"><strong>)</strong></span>
<span class="strong"><strong>---&gt; Value is: int(5)</strong></span>
<span class="strong"><strong>---&gt; Setting value to 10, new value is: int(10)</strong></span>
<span class="strong"><strong>object(String)#2 (1) {</strong></span>
<span class="strong"><strong>  ["length"]=&gt;</strong></span>
<span class="strong"><strong>  int(10)</strong></span>
<span class="strong"><strong>}</strong></span>
</pre></div><p>We will see some more uses of Reflection API in later chapters, when we will learn build an MVC framework. <a id="id211" class="indexterm"/>
</p></div>
<div class="section" title="Unit Testing"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec57"/>Unit Testing</h1></div></div></div><a id="id212" class="indexterm"/><a id="id213" class="indexterm"/><p>Another very important part of programming is unit testing, by which you can test pieces of code, whether it works perfectly or not. You can write test cases against any version of your code to check if your code works after refactoring. Unit testing ensures the workability of the code and helps to pin-point the problem when it occurs. When you code your application, unit tests works as your skeleton. Unit testing is a mandatory part of programming for programmers of every language. There are unit testing packages available for almost all major programming languages. </p><p>As with every other programming language, there is one package for Java that is considered as a standard model for every other unit testing package for other languages. This package is called as <span class="strong"><strong>JUnit</strong></span> which is for Java developers.<a id="id214" class="indexterm"/>
<a id="id215" class="indexterm"/> The standard and testing style maintained in JUnit is usually followed in many other unit testing packages. So JUnit has become a defacto in the unit testing area. The port of JUnit for PHP developers is known as <span class="strong"><strong>PHPUnit</strong></span><a id="id216" class="indexterm"/>, which was developed by Sebastian Bergmann. PHPUnit is a very popular unit testing package. </p><p>One of the main reasons for writing unit tests is that you cannot figure out all the bugs if you just write your code and deploy your application. There might be small bugs that might crash your application violently by returning a non relevant value. Don't overlook these small scenarios. There might be cases when you wouldn't imagine one of your codes returning an extremely odd result. Unit testing helps you by writing different test cases. Unit testing is not a thing which needs a lot of time to write, however the outcome is amazing. </p><p>In the following section we will learn the basics of unit testing, and get our hands dirty writing successful unit tests. </p><div class="section" title="Benefits of Unit Testing"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec17"/>Benefits of Unit Testing</h2></div></div></div><a id="id217" class="indexterm"/><p>Unit testing has a lot of benefits, some of them are that it:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Ensures the consistency of your application.</li><li class="listitem" style="list-style-type: disc">Ensures the workability of your complete application after any kind of refactoring.</li><li class="listitem" style="list-style-type: disc">Checks the redundancy and removes them from your code.</li><li class="listitem" style="list-style-type: disc">Designs good API.</li><li class="listitem" style="list-style-type: disc">Easily figures out where the problem is.</li><li class="listitem" style="list-style-type: disc">Speeds up the debugging process if anything goes wrong; as you know particularly where the bug resides. </li><li class="listitem" style="list-style-type: disc">Minimizes the effort of documentation by providing working examples of your API.</li><li class="listitem" style="list-style-type: disc">Helps to do a regression test so that no regression occurs again. </li></ul></div></div><div class="section" title="A small Introduction to Vulnerable Bugs"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec18"/>A small Introduction to Vulnerable Bugs</h2></div></div></div><a id="id218" class="indexterm"/><p>Bugs can be of different types. Some bugs could just bother your users, some bug stops the functionality, and some bug vulnerability corrupts your resources. Let us consider the following example. You have written a function which takes two parameters and updates the database accordingly. The first parameter is the name of the field and the second parameter is the value of that field by which it should locate the data and then update them. Now let us design it:</p><div class="informalexample"><pre class="programlisting">function selectUser($field, $condition)
{
  if (!empty($condition))
  {
    $query = "{$field}= '{$condition}'";
  }
  else 
      $query = "{$field}";
      echo "select * from users where {$query}";
  $result = mysql_query("select * from users where {$query}");
  $results = array();
  while ($data = mysql_fetch_array($result))
  {
    $results[] = $data;
  }
  return $results;
}</pre></div><p>Now when you call it like this, it shows a specific data:</p><div class="informalexample"><pre class="programlisting">print_r(selectUser("id","1");</pre></div><p>The output is: </p><div class="informalexample"><pre class="programlisting">(
  [0] =&gt; Array
    (
      [0] =&gt; 1
      [id] =&gt; 1
      [1] =&gt; afif
      [name] =&gt; afif
      [2] =&gt; 47bce5c74f589f4867dbd57e9ca9f808
      [pass] =&gt; 47bce5c74f589f4867dbd57e9ca9f808
    )
)</pre></div><p>But when you call it like this:</p><div class="informalexample"><pre class="programlisting">print_r(selectUser("id",$_SESSION['id']);</pre></div><a id="id219" class="indexterm"/><p>It displays the following:</p><div class="informalexample"><pre class="programlisting">(
  [0] =&gt; Array
    (
      [0] =&gt; 1
      [id] =&gt; 1
      [1] =&gt; afif
      [name] =&gt; afif
      [2] =&gt; 47bce5c74f589f4867dbd57e9ca9f808
      [pass] =&gt; 47bce5c74f589f4867dbd57e9ca9f808
    )

   1] =&gt; Array
    (
      [0] =&gt; 2
      [id] =&gt; 2
      [1] =&gt; 4b8ed057e4f0960d8413e37060d4c175
      [name] =&gt; 4b8ed057e4f0960d8413e37060d4c175
      [2] =&gt; 74b87337454200d4d33f80c4663dc5e5
      [pass] =&gt; 74b87337454200d4d33f80c4663dc5e5
    )
)</pre></div><p>This is not a correct output; and as it is happening in runtime if it was <code class="literal">update</code> instead of a <code class="literal">select</code> query, your whole data may get corrupt. So how can you ensure that the output is always a valid one? Well, we will do that easily with unit testing later in this chapter. </p></div><div class="section" title="Preparing for Unit Testing"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec19"/>Preparing for Unit Testing</h2></div></div></div><a id="id220" class="indexterm"/><p>To write successful unit test for PHP applications using PHPUnit, you need to download the package, configure it, and then do some small tasks before actually being able to execute your tests. </p><p>You can either run PHPUnit tests from the command line or from inside your script. For now we will run our tests from within our script, but in later sections, we will learn how to run unit tests from command line. </p><p>To start, download the package from <a class="ulink" href="http://www.phpunit.de">http://www.phpunit.de</a> and extract it in your include path. If you are not sure what is your include path you can get that from <code class="literal">include_path</code> settings in your <code class="literal">php.ini</code>. Or you can execute the following PHP script to display the output: </p><div class="informalexample"><pre class="programlisting">&lt;?
echo get_include_path()
?&gt;</pre></div><p>Now extract the PHPUnit archive and place the PHPUnit folder in a folder, which is in your include path. This PHPUnit folder contains two other folders named <code class="literal">PHPUnit</code> and <code class="literal">PHPUnit2</code>.</p><p>You are done as soon as you place the folders in your include path directories. Now we are ready to go.</p></div><div class="section" title="Starting Unit Testing"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec20"/>Starting Unit Testing</h2></div></div></div><a id="id221" class="indexterm"/><p>A unit test is actually a collection of different tests against your code. It is not a big job to write unit tests using PHPUnit. All you have to do is simply follow a set of conventions. Let's take a look at the following example, where you create a string manipulator class, which returns the number of words available in a string. </p><div class="informalexample"><pre class="programlisting">&lt;?
//class.wordcount.php
class wordcount
{
  public function countWords($sentence)
  {
    return count(split(" ",$sentence));
  }
}
?&gt;</pre></div><p>Now we will write a unit test for this class. We have to extend the <code class="literal">PHPUnit_Framework_TestCase</code> to write any unit test. And we have to use <code class="literal">PHPUnit_Framework_TestSuite</code> to create the test suite, which actually holds a collection of tests. Then we will use <code class="literal">PHPUnit_TextUI_TestRunner</code> to run the tests from the suite and print the result. </p><div class="informalexample"><pre class="programlisting">&lt;?
//class.testwordcount.php
require_once "PHPUnit/Framework/TestCase.php";
require_once "class.wordcount.php";

class TestWordCount extends PHPUnit_Framework_TestCase 
{
  public function testCountWords()
  {
    $Wc = new WordCount();
    $TestSentence = "my name is afif";
    $WordCount = $Wc-&gt;countWords($TestSentence);
    $this-&gt;assertEquals(4,$WordCount);
  }
}
?&gt;</pre></div><p>Running the test: <a id="id222" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;?
//testsuite.wordcount.php
require_once 'PHPUnit/TextUI/TestRunner.php';
require_once "PHPUnit/Framework/TestSuite.php";
require_once "class.testwordcount.php";

$suite = new PHPUnit_Framework_TestSuite();
$suite-&gt;addTestSuite("TestWordCount");
PHPUnit_TextUI_TestRunner::run($suite);
?&gt;</pre></div><p>Now if you run the code in <code class="literal">testsuite.wordcount.php</code> you will get the following output: </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.
Time: 00:00
OK (1 test)</pre></div><p>That means our test has passed and our word-counter function works perfectly, however, we will write some more test cases for that function. </p><p>Let us add this new test case in our <code class="literal">class.testwordcount.php</code>:</p><div class="informalexample"><pre class="programlisting">public function testCountWordsWithSpaces()
{
  $wc= new WordCount();
  $testSentence = "my name is Anonymous ";
  $wordCount = $Wc-&gt;countWords($testSentence);
  $this-&gt;assertEquals(4,$wordCount);		
}</pre></div><p>Now if we run our test suite we will get the following result:</p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

.F

Time: 00:00

There was 1 failure:

1) testCountWordsWithSpaces(TestWordCount)
Failed asserting that &lt;integer:5&gt; is equal to &lt;integer:4&gt;.
C:\OOP with PHP5\Codes\ch5\UnitTest\FirstTest.php:34
C:\OOP with PHP5\Codes\ch5\UnitTest\FirstTest.php:40
C:\Program Files\Zend\ZendStudio-5.2.0\bin\php5\dummy.php:1

FAILURES!
Tests: 2, Failures: 1.</pre></div><a id="id223" class="indexterm"/><p>Here, we found that our foolproof word-count function fails. So what was our test input? We just add more spaces in our test parameter <code class="literal">my</code> <code class="literal">name</code> <code class="literal">is</code> <code class="literal">afif</code>, and then our function fails. This is because it splits the sentence with white space and returns the number of split parts. As there are more white spaces, so our function fails gracefully. That's a pretty nice test case; we found that our function might fail in real life if we release our code with this version of word counter. PHPUnit has become useful for us already. Now we will solve our function so that it returns the correct result if our sentence contains more white spaces. We change our <code class="literal">class.wordcount.php</code> to this new one:</p><div class="informalexample"><pre class="programlisting">class WordCount
{
  public function countWords($sentence)
  {
    $newsentence = preg_replace("~\s+~"," ",$sentence);
    return count(split(" ",$newsentence));
  }
}</pre></div><p>Now if we run our test suite, it will give the following output. </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

..

Time: 00:00

OK (2 tests)</pre></div><p>However we want more proof that our function will work better in the wild. So we are writing another test case. Let's add this new test case in our <code class="literal">class.testwordcount.php</code>:</p><div class="informalexample"><pre class="programlisting">public function testCountWordsWithNewLine()
{
  $Wc = new WordCount();
  $TestSentence = "my name is \n\r Anonymous";
  $WordCount = $Wc-&gt;countWords($TestSentence);
  $this-&gt;assertEquals(4,$WordCount);
}</pre></div><p>And let's run the suit again. What is the result now?</p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

...

Time: 00:00

OK (3 tests)</pre></div><p>That's pretty satisfying. All our tests are running ok. The function is now a good one. </p><p>This is how unit test can help us in real life.  <a id="id224" class="indexterm"/>
</p></div><div class="section" title="Testing an Email Validator Object"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec21"/>Testing an Email Validator Object</h2></div></div></div><a id="id225" class="indexterm"/><p>Now, let's repeat the steps again. This time we will write unit tests for our brand new <code class="literal">Emailvalidator</code> class which our developer said is a good one. Let's take a look at our validator function first: </p><div class="informalexample"><pre class="programlisting">//class.emailvalidator.php
class EmailValidator
{
  public function validateEmail($email)
  {
    <code class="literal">$pattern</code> = "/[A-z0-9]{1,64}@[A-z0-9]+\.[A-z0-9]{2,3}/";
    preg_match(<code class="literal">$pattern</code>, $email,$matches);
    return (strlen($matches[0])==strlen($email)?true:false);
  }
}
?&gt;</pre></div><p>And here comes our test case:</p><div class="informalexample"><pre class="programlisting">class TestEmailValidator extends PHPUnit_Framework_TestCase 
{
  private $Ev;
  protected function setup()
  {
    $this-&gt;Ev = new EmailValidator();
  }

  protected  function tearDown()
  {
    unset($this-&gt;Ev);
  }

  public function testSimpleEmail()
  {
    $result = $this-&gt;Ev-&gt;validateEmail("has.in@somewherein.net");
    $this-&gt;assertTrue($result);
  }
}</pre></div><p>Now you have to write the test suit and run: </p><div class="informalexample"><pre class="programlisting">$suite = new PHPUnit_Framework_TestSuite();
$suite-&gt;addTestSuite("TestEmailValidator");
PHPUnit_TextUI_TestRunner::run($suite);</pre></div><a id="id226" class="indexterm"/><p>You will get the following output when you run this test suite: </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

...

Time: 00:00

OK (1 test)</pre></div><p>Now try harder; try to break your code. Try all the possible cases that may occur in an email and try as many as you can. We are going to add more test cases:</p><div class="informalexample"><pre class="programlisting">class TestEmailValidator extends PHPUnit_Framework_TestCase 
{
  private $Ev;
  protected function setUp()
  {
    $this-&gt;Ev = new EmailValidator();
  }

  protected  function tearDown()
  {
    unset($this-&gt;Ev);
  }

  public function testSimpleEmail()
  {
    $result = $this-&gt;Ev-&gt;validateEmail("hasin@somewherein.net");
    $this-&gt;assertTrue($result);
  }

  public function testEmailWithDotInName()
  {
    $result = $this-&gt;Ev-&gt;validateEmail("has.in@somewherein.net");
    $this-&gt;assertTrue($result);
  }

  public function testEmailWithComma()
  {
    $result = $this-&gt;Ev-&gt;validateEmail("has,in@somewherein.net");
    $this-&gt;assertFalse($result);
  }

  public function testEmailWithSpace()
  {
    $result = $this-&gt;Ev-&gt;validateEmail("has in@somewherein.net");
    $this-&gt;assertTrue($result);
  }

  public function testEmailLengthMoreThan64Char()
  {
    $result = 
    $this-&gt;Ev-&gt;validateEmail(str_repeat("h",67)."@somewherein.net");
    $this-&gt;assertFalse($result);
  }

  public function testEmailWithInValidCharacters()
  {
    $result = $this-&gt;Ev-&gt;validateEmail("has#in@somewherein.net");
    $this-&gt;assertFalse($result);
  }

  public function testEmailWithNoDomain()
  {
    $result = $this-&gt;Ev-&gt;validateEmail("hasin@");
    $this-&gt;assertFalse($result);
  }

  public function testEmailWithInvalidDomain()
  {
    $result = 
       $this-&gt;Ev-&gt;validateEmail("hasin@somewherein.comnetorg");
    $this-&gt;assertFalse($result);
  }
}</pre></div><p>When you run the test suite, you will get the following result: </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

.F.F....

Time: 00:00

There were 1 failures:

1) testEmailWithDotInName(TestEmailValidator)
Failed asserting that &lt;boolean:false&gt; is identical to &lt;boolean:true&gt;.
C:\OOP with PHP5\Codes\ch5\UnitTest\EmailValidatorTest.php:40
C:\OOP with PHP5\Codes\ch5\UnitTest\EmailValidatorTest.php:83
C:\Program Files\Zend\ZendStudio-5.2.0\bin\php5\dummy.php:1</pre></div><div class="informalexample"><pre class="programlisting">FAILURES!
Tests: 8, Failures: 1.<a id="id227" class="indexterm"/>
</pre></div><p>So our email validator fails! If you look at the result you will see that it fails with <code class="literal">testEmailWithDotInName</code>. Therefore, we have to change the regular expression pattern we used and allow <code class="literal">.</code> in the name. </p><p>Let's redesign the validator as show here:</p><div class="informalexample"><pre class="programlisting">class EmailValidator
{
  public function validateEmail($email)
  {
    <code class="literal">$pattern</code> = "/[A-z0-9\.]{1,64}@[A-z0-9]+\.[A-z0-9]{2,3}/";
    preg_match(<code class="literal">$pattern</code>, $email,$matches);
    return (strlen($matches[0])==strlen($email)?true:false);
  }
}</pre></div><p>Now if you run your test suites again, you will see the following output: </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

........

Time: 00:00

OK (8 tests)</pre></div><p>Our test passes. </p><p>So what is the benefit? Time after time, when you need to add new validation rules to your regular expression, this unit test will help to do the regression test so that the same fault never occurs again.</p><p>That's the beauty of Unit Testing. <a id="id228" class="indexterm"/>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>You will find two functions named <code class="literal">setUp()</code> and <code class="literal">tearDown()</code> in the above example. <code class="literal">setUp()</code> is used for setting up everything for the test; you can use it to connect to DB, to open a file or something similar. <code class="literal">tearDown()</code> is for cleaning. It is called when the script finishes executing. </p></div></div></div><div class="section" title="Unit Testing for Everyday Script"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec22"/>Unit Testing for Everyday Script</h2></div></div></div><p>Alongside these unit tests for functions and small classes, you will need to write unit tests for a final result achieved by different functions. However, as specific you go with your unit tests, the better outcome you can expect. Do also remember that of the many unit tests you write, only few of them are actually useful. </p><p>Now we will discuss how to test routines that works with a database. Let us create a small class which inserts, finds and updates the record, which we will write unit tests for. Here comes our small class, which directly interacts with a table named <code class="literal">users</code> in our database. </p><div class="informalexample"><pre class="programlisting">&lt;?
class DB
{
  private $connection;

  public function __construct()
  {
    $this-&gt;connection = mysql_connect("localhost","root","root1234");
    mysql_select_db("test",$this-&gt;connection);
  }
  public function insertData($data)
  {
    $fields = join(array_keys($data),",");
    $values = "'".join(array_values($data),",")."'";

    $query = "INSERT INTO users({$fields}) values({$values})";
    return mysql_query($query, $this-&gt;connection);
  }

  public function deleteData($id)
  {
    $query = "delete from users where id={$id}";
    return mysql_query($query, $this-&gt;connection);
  }

  public function updateData($id, $data)
  {
    $queryparts = array();
    foreach ($data as $key=&gt;$value)
    {
      $queryparts[] = "{$key} = '{$value}'";
    }

    $query = "UPDATE users SET ".join($queryparts,",")." 
                                           WHERE id='{$id}'";
    return mysql_query($query, $this-&gt;connection);
  }
}
?&gt;</pre></div><p>We need to test all the public methods in this class to ensure they are working properly. So here come our test cases. <a id="id229" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;?
require_once "PHPUnit/Framework/TestCase.php";

class DBTester extends PHPUnit_Framework_TestCase
{
  private $connection;
  private $Db;

  protected function setup()
  {
    $this-&gt;Db = new DB();

    $this-&gt;connection = mysql_connect("localhost","root","root1234");
    mysql_select_db("abcd",$this-&gt;connection);
  }

  protected  function tearDown()
  {
    mysql_close($this-&gt;connection);
  }

  public function testValidInsert()
  {
    $data = array("name"=&gt;"afif","pass"=&gt;md5("hello world"));
    mysql_query("delete from users");

    $result = $this-&gt;Db-&gt;insertData($data);
    $this-&gt;assertNotNull($result);

    $affected_rows = mysql_affected_rows($this-&gt;connection);
    $this-&gt;assertEquals(1, $affected_rows);
  }

  public function testInvalidInsert()
  {
    $data = array("names"=&gt;"afif","passwords"=&gt;md5("hello world"));
    mysql_query("delete from users");

    $result = $this-&gt;Db-&gt;insertData($data);
    $this-&gt;assertNotNull($result);

    $affected_rows = mysql_affected_rows($this-&gt;connection);
    $this-&gt;assertEquals(-1, $affected_rows);
  }

  public function testUpdate()
  {
    $data = array("name"=&gt;"afif","pass"=&gt;md5("hello world"));
    mysql_query("truncate table users");

    $this-&gt;Db-&gt;insertData($data);

    $data = array("name"=&gt;"afif2","pass"=&gt;md5("hello world"));
    $result = $this-&gt;Db-&gt;updateData(1, $data);
    $this-&gt;assertNotNull($result);

    $affected_rows = mysql_affected_rows($this-&gt;connection);
    $this-&gt;assertEquals(1, $affected_rows);
  }<a id="id230" class="indexterm"/>

  public function testDelete()
  {
    $data = array("name"=&gt;"afif","pass"=&gt;md5("hello world"));
mysql_query("truncate table users");

    $this-&gt;Db-&gt;insertData($data);
    $result = $this-&gt;Db-&gt;deleteData(1);
    $this-&gt;assertNotNull($result);

    $affected_rows = mysql_affected_rows($this-&gt;connection);
    $this-&gt;assertEquals(1, $affected_rows);

  }
}
?&gt;</pre></div><p>The test suite is like this:</p><div class="informalexample"><pre class="programlisting">&lt;?
require_once 'PHPUnit/TextUI/TestRunner.php';
require_once "PHPUnit/Framework/TestSuite.php";
$suite = new PHPUnit_Framework_TestSuite();
$suite-&gt;addTestSuite("DBTester");
PHPUnit_TextUI_TestRunner::run($suite);

?&gt;</pre></div><p>So what result will you get?</p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

....

Time: 00:00

OK (4 tests)</pre></div><p>However, these are basic functionality tests. We must make more versatile tests and find out how our objects may fail. Let's add two more tests as shown below:<a id="id231" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">public function testInvalidUpdate()
  {
    $data = array("name"=&gt;"afif","pass"=&gt;md5("hello world"));
    mysql_query("truncate table users");

    $this-&gt;Db-&gt;insertData($data);

    $data = array("name"=&gt;"afif2","pass"=&gt;md5("hello world"));
    $result = $this-&gt;Db-&gt;updateData(2, $data);

    $affected_rows = mysql_affected_rows($this-&gt;connection);
    $this-&gt;assertEquals(0, $affected_rows);
}

  public function testInvalidDelete()
  {
    $data = array("name"=&gt;"afif","pass"=&gt;md5("hello world"));
    mysql_query("truncate table users");

    $this-&gt;Db-&gt;insertData($data);
    $result = $this-&gt;Db-&gt;deleteData("*");
    $this-&gt;assertNotNull($result);

    $affected_rows = mysql_affected_rows($this-&gt;connection);
    $this-&gt;assertEquals(-1, $affected_rows);

}</pre></div><a id="id232" class="indexterm"/><p>Now if you run the test suite you will get the following result:</p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

......

Time: 00:00

OK (6 tests)</pre></div><p>Our DB code is looking hard to break. </p><p>In real life unit testing, you need to think beyond how you can break your own code. If you can write unit tests that break your existing code, that's better. </p></div><div class="section" title="Test Driven Development"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec23"/>Test Driven Development</h2></div></div></div><a id="id233" class="indexterm"/><a id="id234" class="indexterm"/><p>Now it's time to go further into unit testing. You may ask when you need to write unit tests before coding for applications: during time of development, or after finishing coding? Well, developers from different corners have different things to say, however it is found to be more useful to write the test first and then go for a real application. This is called <span class="strong"><strong>Test Driven Development</strong></span> or <span class="strong"><strong>TDD</strong></span> in short. TDD helps you to design better API for your application. </p><p>You may ask how to write tests when you don't have any real code, and which things to test? You don't need real objects for TDD. Just imagine some mock objects, which have just the functions. You will use those functions with the imaginary result. You can also write incomplete tests, which means a test with blank body. At your own convenience, you can write you can write the content of the test. Let's see the following example to understand how unit testing before real code actually fits in project development. </p><a id="id235" class="indexterm"/><p>PHPUnit provides you a lot of useful API for test-first programming such as <code class="literal">markTestSkipped()</code> and <code class="literal">markTestIncomplete()</code>. We will use these two methods to mark some of our tests, which are not implemented. Let us design a small feedback manager which can accept user's feedback and mail them to you. So what could be the useful features of a feedback manager? I would suggest the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">It can render a feedback form.</li><li class="listitem" style="list-style-type: disc">It will handle user's input and properly filter it.</li><li class="listitem" style="list-style-type: disc">It will have a spam prevention functionality.</li><li class="listitem" style="list-style-type: disc">It will prevent any automated feedback submitted by bots or spammers.</li><li class="listitem" style="list-style-type: disc">It will render a confirmation after submission of feedback, mailing it to owner.</li></ul></div><p>Let's create some blank unit tests for this. Here comes our test case, before we have the real code:<a id="id236" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;?
class FeedbackTester extends PHPUnit_Framework_TestCase
{
  public function testUsersEmail()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testInvalidDomain()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testCaptchaGenerator()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testCaptchaChecker()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testFormRenderer()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testFormHandler()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testValidUserName()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testValidSubject()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testValidContent()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testFeedbackSender()
  {
    $this-&gt;markTestIncomplete();
  }
  public function testConfirmer()
  {
    $this-&gt;markTestIncomplete();
  }

}
?&gt;</pre></div><p>This is good; we have now created 11 blank tests. Now if you run this test case using test suite, you will get the following result: </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

IIIIIIIIIII

Time: 00:00

OK, but incomplete or skipped tests!
Tests: 11, Incomplete: 11.</pre></div><p>PHPUnit successfully figured out that all our tests are marked as incomplete. Now let's think again. If you generate an <code class="literal">InputValidator</code> object, which validates user input and filters all malicious data from it, then we may have only one test case, <code class="literal">testValidInput()</code> instead of all these <code class="literal">testValidUserName()</code>, <code class="literal">testValidSubject()</code>, <code class="literal">testValidContent()</code>. So we can skip those tests. Now let's create the new test routine <code class="literal">testValidInput()</code> and mark it as incomplete: </p><div class="informalexample"><pre class="programlisting">public function testValidInput()
{
  $this-&gt;markTestIncomplete();
}</pre></div><a id="id237" class="indexterm"/><p>What will we do with those three tests that we plan to skip? We will not delete them but mark them as skipped. Modify the line <code class="literal">$this-&gt;markTestIncomplete()</code> to <code class="literal">$this-&gt;markTestSkipped()</code>. For example:</p><div class="informalexample"><pre class="programlisting">public function testValidUserName()
{
  $this-&gt;markTestSkipped();
}</pre></div><p>Now if you run your test suite again you will get the following result: </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

IIIIIISSSIII

Time: 00:00


OK, but incomplete or skipped tests!
Tests: 12, Incomplete: 9, Skipped: 3.</pre></div><p>PHPUnit is showing that it skipped three tests. </p><p>To keep our discussion short and focussed, we will now implement only one test from these nine. We will test that the feedback form renderer is actually working fine. </p><p>Now here is our revised test routine <code class="literal">testFormRenderer()</code> in our test case. <a id="id238" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">public function testFormRenderer(){

  $testResult = true;
  <code class="literal">$message </code>= "";
  $Fm= new FeedbackManager();
  ob_start();
  $Fm-&gt;renderFeedbackForm();
  $output = ob_get_clean();

  if (strpos($output, "name='email'")===false &amp;&amp; $testResult==true) 
  list($testResult, $message) = array(false, 
                                   "Email field is not present");
  if (strpos($output, "name='username'")===false &amp;&amp; 
                                           $testResult==true) 
  list($testResult, $message) = array(false, 
                             "Username is field not present");

  if (strpos($output, "name='subject'")===false &amp;&amp; $testResult==true) 
  list($testResult, $message) = array(false, 
                                     "Subject field is not present");

  if (strpos($output, "name='message'")===false &amp;&amp; $testResult==true) 
  list($testResult, $message) = array(false, 
                                    "Message field is not present");

  $this-&gt;assertTrue($testResult, $message);
  //$this-&gt;markTestIncomplete();
}</pre></div><p>It clearly states that in our feedback manager there must be a method named <code class="literal">renderFeedbackForm()</code> and in the generated output there must be four input fields namely, <code class="literal">email</code>,<code class="literal">subject</code>,<code class="literal">username</code> and <code class="literal">message</code>. Now let's create our <code class="literal">FeedBackManager</code> object. Here is <code class="literal">FeedBackManager</code> with a single method to render a feedback form: </p><div class="informalexample"><pre class="programlisting">class FeedBackManager 
&lt;?
{

  public function renderFeedbackForm()
  {
    $form = &lt;&lt;&lt; END
    &lt;form method=POST action=""&gt;
      Name: &lt;br/&gt;
      &lt;input type='text' name='username'&gt;&lt;br/&gt;
      Email: &lt;br/&gt;
      &lt;input type='text' name='email'&gt;&lt;br/&gt;
      Subject: &lt;br/&gt;
      &lt;input type='text' name='subject'&gt;&lt;br/&gt;

      &lt;input type='submit' value='submit&gt;	
    &lt;/form&gt;
    END;
    echo $form;
  }
}
?&gt;</pre></div><a id="id239" class="indexterm"/><p>Now if you run the unit test suite you will get the following result:</p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

IIIIFISSSIII

Time: 00:00

There was 1 failure:

1) testFormRenderer(FeedbackTester)
Message field is not present
Failed asserting that &lt;boolean:false&gt; is identical to &lt;boolean:true&gt;.
C:\OOP with PHP5\Codes\ch5\UnitTest\BlankTest.php:52
C:\OOP with PHP5\Codes\ch5\UnitTest\BlankTest.php:104
C:\Program Files\Zend\ZendStudio-5.2.0\bin\php5\dummy.php:1

FAILURES!
Tests: 12, Failures: 1, Incomplete: 8, Skipped: 3.</pre></div><p>Our form renderer failed. Why? Take a look at the output that comes from PHPUnit. It says <code class="literal">Message</code> <code class="literal">field</code> <code class="literal">is</code> <code class="literal">not</code> <code class="literal">present</code>. Oh! We forgot to place a <code class="literal">textarea</code> object named <code class="literal">message</code>. Let's revise our <code class="literal">renderFeedbackForm()</code> method and correct it. </p><div class="informalexample"><pre class="programlisting">class FeedBackManager 
{
  
  public function renderFeedbackForm()
  {
    $form = &lt;&lt;&lt; END
    &lt;form method=POST action=""&gt;
      Name: &lt;br/&gt;
      &lt;input type='text' name='username'&gt;&lt;br/&gt;
      Email: &lt;br/&gt;
      &lt;input type='text' name='email'&gt;&lt;br/&gt;
       Subject: &lt;br/&gt;
      &lt;input type='text' name='subject'&gt;&lt;br/&gt;
<span class="strong"><strong>      Message: &lt;br/&gt;</strong></span>
<span class="strong"><strong>      &lt;textarea name='message'&gt;&lt;/textarea&gt;&lt;br/&gt;</strong></span>
      &lt;input type='submit' value='submit&gt;	
    &lt;/form&gt;
END;
    echo $form;
  }
}</pre></div><a id="id240" class="indexterm"/><p>We have added the message field. Now let's run the suite again. You will get the following output: </p><div class="informalexample"><pre class="programlisting">PHPUnit 3.0.5 by Sebastian Bergmann.

IIII.ISSSIII

Time: 00:00


OK, but incomplete or skipped tests!
Tests: 12, Incomplete: 8, Skipped: 3.</pre></div><p>Great! Our test has passed. That means our rendered form is potentially error free. </p><p>This is the style of Test Driven Development. You have to foresee your application code before it is actually written. Using TDD helps you to design good API and good code. </p><div class="section" title="Writing Multiple Assertions"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec01"/>Writing Multiple Assertions</h3></div></div></div><a id="id241" class="indexterm"/><p>Don't write multiple assertions under one test. Split it as shown in the example above. To clarify, the following example is a bad example of a unit test. </p><div class="informalexample"><pre class="programlisting">public function testFormRenderer(){

  $testResult = true;
  <code class="literal">$message </code>= "";
  $Fm = new FeedBackManager();
  ob_start();
  $Fm-&gt;renderFeedbackForm();
  $output = ob_get_clean();

  $testResult = strpos($output, "name='email'");
  $this-&gt;assertEquals(true, $testResult,
                            "Email field is not present");

  $testResult = strpos($output, "name='username'");
  $this-&gt;assertEquals(true, $testResult,
                          "Username field is not present");

  $testResult = strpos($output, "name='subject'");
  $this-&gt;assertEquals(true, $testResult,
                           "Subject field is not present");

  $testResult = strpos($output, "name='message'");
  $this-&gt;assertEquals(true, $testResult,
                           "Message field is not present");
}</pre></div><p>This code will run, but multiple assertions in a single routine are prohibited and are against good application design. <a id="id242" class="indexterm"/>
</p></div></div><div class="section" title="PHPUnit API"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec24"/>PHPUnit API</h2></div></div></div><a id="id243" class="indexterm"/><p>There are several types of asserting API provided by PHPUnit. In our examples we used ones like <code class="literal">assertTrue()</code>, <code class="literal">assertEquals()</code>, <code class="literal">assertFalse()</code>, and <code class="literal">assertNotNull()</code>. However, there are dozens more. The function names are self explanatory. The following table is taken from the book <span class="emphasis"><em>PHPUnit Pocket Guide</em></span> written by Sebastian Bergmann himself and published by O'Reilly. The book is made free by O'Reilly and Sebastian Bergmann under the Creative Commons License. The latest version of this book is currently available at <a class="ulink" href="http://www.phpunit.de/pocket_guide/3.0/en/index.html">http://www.phpunit.de/pocket_guide/3.0/en/index.html</a>. </p><p>The following table shows all the assert functions possible with PHPUnit: </p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Assertion<a id="id244" class="indexterm"/>
</p>
</th><th style="text-align: left" valign="bottom">
<p>Meaning</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertTrue(bool</code> <code class="literal">$condition)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$condition</code> is <code class="literal">FALSE</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertTrue(bool</code> <code class="literal">$condition,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$condition</code> is <code class="literal">FALSE</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertFalse(bool</code> <code class="literal">$condition)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$condition</code> is <code class="literal">TRUE</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertFalse(bool</code> <code class="literal">$condition,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$condition</code> is <code class="literal">TRUE</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNull(mixed</code> <code class="literal">$variable)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$variable</code> is not <code class="literal">NULL</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNull(mixed</code> <code class="literal">$variable,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$variable</code> is not <code class="literal">NULL</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotNull(mixed</code> <code class="literal">$variable)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$variable</code> is <code class="literal">NULL</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotNull(mixed</code> <code class="literal">$variable,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$variable</code> is <code class="literal">NULL</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertSame(object</code> <code class="literal">$expected,</code> <code class="literal">object</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> do not reference the same object.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertSame(object</code> <code class="literal">$expected,</code> <code class="literal">object</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> do not reference the same object.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> do not have the same type and value.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> do not have the same type and value.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotSame(object</code> <code class="literal">$expected,</code> <code class="literal">object</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> reference the same object.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotSame(object</code> <code class="literal">$expected,</code> <code class="literal">object</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> reference the same object.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> have the same type and value.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> have the same type and value.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeSame(object</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$actualObject-&gt;actualAttributeName</code> and <code class="literal">$actual</code> do not reference the same object. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeSame(object</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$actualObject-&gt;actualAttributeName</code> and <code class="literal">$actual</code> do not reference the same object. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$actualObject-&gt;actualAttributeName</code> and <code class="literal">$actual</code> do not have the same type and value. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$actualObject-&gt;actualAttributeName</code> and <code class="literal">$actual</code> do not have the same type and value. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotSame(object</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$actualObject-&gt;actualAttributeName</code> and <code class="literal">$actual</code> reference the same object. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotSame(object</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$actualObject-&gt;actualAttributeName</code> and <code class="literal">$actual</code> reference the same object. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$actualObject-&gt;actualAttributeName</code> and <code class="literal">$actual</code> have the same type and value. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotSame(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$actualObject-&gt;actualAttributeName</code> and<code class="literal"> $actual</code> have the same type and value. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(array</code> <code class="literal">$expected,</code> <code class="literal">array</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two arrays <code class="literal">$expected</code> and <code class="literal">$actual</code> are not equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(array</code> <code class="literal">$expected,</code> <code class="literal">array</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two arrays <code class="literal">$expected</code> and <code class="literal">$actual</code> are not equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(array</code> <code class="literal">$expected,</code> <code class="literal">array</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two arrays <code class="literal">$expected</code> and <code class="literal">$actual</code> are equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(array</code> <code class="literal">$expected,</code> <code class="literal">array</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two arrays <code class="literal">$expected</code> and <code class="literal">$actual</code> are equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(float</code> <code class="literal">$expected,</code> <code class="literal">float</code> <code class="literal">$actual,</code> <code class="literal">'',</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two floats <code class="literal">$expected</code> and <code class="literal">$actual</code> are not within <code class="literal">$delta</code> of each other.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(float</code> <code class="literal">$expected,</code> <code class="literal">float</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message,</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two floats <code class="literal">$expected</code> and <code class="literal">$actual</code> are not within <code class="literal">$delta</code> of each other.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(float</code> <code class="literal">$expected,</code> <code class="literal">float</code> <code class="literal">$actual,</code> <code class="literal">'',</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two floats <code class="literal">$expected</code> and <code class="literal">$actual</code> are within <code class="literal">$delta</code> of each other.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(float</code> <code class="literal">$expected,</code> <code class="literal">float</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message,</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two floats <code class="literal">$expected</code> and <code class="literal">$actual</code> are within <code class="literal">$delta</code> of each other.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two strings <code class="literal">$expected</code> and <code class="literal">$actual</code> are not equal. The error is reported as the delta between the two strings.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two strings <code class="literal">$expected</code> and <code class="literal">$actual</code> are not equal. The error is reported as the delta between the two strings.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two strings <code class="literal">$expected</code> and <code class="literal">$actual</code> are equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two strings <code class="literal">$expected</code> and <code class="literal">$actual</code> are equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> are not equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> are not equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> are equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actual</code> are equal.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(array</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two arrays <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(array</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two arrays <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(array</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two arrays <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(array</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two arrays <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(float</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">'',</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two floats <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not within <code class="literal">$delta</code> of each other. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(float</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message,</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two floats <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not within <code class="literal">$delta</code> of each other. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(float</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">'',</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two floats <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are within <code class="literal">$delta</code> of each other. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(float</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message,</code> <code class="literal">float</code> <code class="literal">$delta</code> <code class="literal">=</code> <code class="literal">0)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two floats <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are within <code class="literal">$delta</code> of each other. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two strings <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not equal. The error is reported as the delta between the two strings. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two strings <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not equal. The error is reported as the delta between the two strings. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two strings <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two strings <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are not equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the two variables <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotEquals(mixed</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the two variables <code class="literal">$expected</code> and <code class="literal">$actualObject-&gt;actualAttributeName</code> are equal. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">array</code> <code class="literal">$expected)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is not an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">array</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is not an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">array</code> <code class="literal">$expected)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">array</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">Iterator</code> <code class="literal">$expected)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is not an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">Iterator</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is not an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">Iterator</code> <code class="literal">$expected)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">Iterator</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is an element of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertContains(string</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$expected)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is not a substring of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertContains(string</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is not a substring of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotContains(string</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$expected)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is a substring of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotContains(string</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$expected,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is a substring of <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is not an element of <code class="literal">$actualObject-&gt;actualAttributeName</code> which can be an array, a string, or an object that implements the Iterator interface. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is not an element of <code class="literal">$actualObject-&gt;actualAttributeName</code> which can be an array, a string, or an object that implements the Iterator interface. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$needle</code> is an element of <code class="literal">$actualObject-&gt;actualAttributeName</code> which can be an array, a string, or an object that implements the Iterator interface. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertAttributeNotContains(mixed</code> <code class="literal">$needle,</code> <code class="literal">string</code> <code class="literal">$actualAttributeName,</code> <code class="literal">object</code> <code class="literal">$actualObject,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$needle</code> is an element of <code class="literal">$actualObject-&gt;actualAttributeName</code> which can be an array, a string, or an object that implements the Iterator interface. The visibility of the <code class="literal">$actualObject-&gt;actualAttributeName</code> attribute may be public, protected, or private.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertRegExp(string</code> <code class="literal">$pattern,</code> <code class="literal">string</code> <code class="literal">$string)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$string</code> does not match the regular expression <code class="literal">$pattern</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertRegExp(string</code> <code class="literal">$pattern,</code> <code class="literal">string</code> <code class="literal">$string,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$string</code> does not match the regular expression <code class="literal">$pattern</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotRegExp(string</code> <code class="literal">$pattern,</code> <code class="literal">string</code> <code class="literal">$string)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$string</code> matches the regular expression <code class="literal">$pattern</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotRegExp(string</code> <code class="literal">$pattern,</code> <code class="literal">string</code> <code class="literal">$string,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$string</code> matches the regular expression <code class="literal">$pattern</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertType(string</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the variable <code class="literal">$actual</code> is not of type <code class="literal">$expected</code>..</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertType(string</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the variable <code class="literal">$actual</code> is not of type <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotType(string</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the variable <code class="literal">$actual</code> is of type <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertNotType(string</code> <code class="literal">$expected,</code> <code class="literal">mixed</code> <code class="literal">$actual,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the variable <code class="literal">$actual</code> is of type <code class="literal">$expected</code>.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertFileExists(string</code> <code class="literal">$filename)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the file specified by <code class="literal">$filename</code> does not exist.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertFileExists(string</code> <code class="literal">$filename,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the file specified by <code class="literal">$filename</code> does not exist.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertFileNotExists(string</code> <code class="literal">$filename)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if the file specified by <code class="literal">$filename</code> exists.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertFileNotExists(string</code> <code class="literal">$filename,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if the file specified by <code class="literal">$filename</code> exists.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertObjectHasAttribute(string</code> <code class="literal">$attributeName,</code> <code class="literal">object</code> <code class="literal">$object)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$object-&gt;attributeName</code> does not exist.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertObjectHasAttribute(string</code> <code class="literal">$attributeName,</code> <code class="literal">object</code> <code class="literal">$object,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error identified by <code class="literal">$message </code>if <code class="literal">$object-&gt;attributeName</code> does not exist.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertObjectNotHasAttribute(string</code> <code class="literal">$attributeName,</code> <code class="literal">object</code> <code class="literal">$object)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$object-&gt;attributeName</code> exists.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">void</code> <code class="literal">assertObjectNotHasAttribute(string</code> <code class="literal">$attributeName,</code> <code class="literal">object</code> <code class="literal">$object,</code> <code class="literal">string</code> <code class="literal">$message)</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Reports an error if <code class="literal">$object-&gt;attributeName</code> exists.</p>
</td></tr></tbody></table></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec58"/>Summary</h1></div></div></div><p>This chapter focuses on two very important features of object oriented programming in PHP. One is reflection, which is a part of all major programming languages like Java, Ruby, and Python. The second one is unit testing, which is an essential part of good, stable, and manageable application design. We focused on one very popular package, which is a port of JUnit in PHP, named PHPUnit. If you follow the guideline provided in this chapter you will be able to design your unit tests successfully. </p><p>In the next chapter, we will learn about some built-in objects in PHP which will make your life much easier than usual. We will learn about the huge object repository called Standard PHP Library or SPL. Before that, enjoy the debugging by writing your own unit tests. </p></div></body></html>