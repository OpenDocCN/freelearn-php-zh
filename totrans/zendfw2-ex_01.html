<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Getting Started with Zend Framework 2.0"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Getting Started with Zend Framework 2.0</h1></div></div></div><p>
<span class="emphasis"><em>In this chapter we will get our development environment set up and configured in order to start development with Zend Framework 2.0. We will set up a PHP Application Server, install MySQL, and create a development database that will be used in subsequent chapters for our Zend Framework learning exercises. So, let's get started.</em></span>
</p><div class="section" title="Zend Framework 2.0"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Zend Framework 2.0</h1></div></div></div><p>The last major release of Zend Framework, which happened in 2007, was version 1.0; during <a id="id0" class="indexterm"/>the last five years, Zend Framework has undergone a lot of changes to be a successful PHP-based framework. But by merely updating the framework, Zend Framework has retained some of the issues that were inherently present in Zend Framework 1.0.</p><p>Zend Framework 2.0 is an attempt to make Zend Framework better by rearchitecting the framework right from the core. Some of the key features of Zend Framework 2.0 over its previous version are listed as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">PHP 5.3 features such as namespaces and closures</li><li class="listitem" style="list-style-type: disc">A modular application architecture</li><li class="listitem" style="list-style-type: disc">Event manager</li><li class="listitem" style="list-style-type: disc">Dependency<a id="id1" class="indexterm"/> Injection (DI)</li></ul></div><p>We will get to know about implementing the new features of Zend Framework 2.0 in the coming chapters.</p><p>In this chapter we will cover the installation and configuration of some of the prerequisites of Zend Framework 2.0. ZF2 can be installed on most PHP-enabled web servers that support PHP 5.3.3 or later.</p><p>We have used Zend Server Community Edition as our default web server; however, any other PHP<a id="id2" class="indexterm"/> stack that supports PHP 5.3.3 can be used. Alternatively, you can also download Apache and PHP separately and install PHP over Apache.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>To simplify the installation process, I am using Linux as the primary development environment in this book. All the tools used in this book are available for Windows and can be used to perform the same activity.</p></div></div></div></div>
<div class="section" title="Introduction to Zend Server Community Edition (CE)"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Introduction to Zend Server Community Edition (CE)</h1></div></div></div><p>Zend Server Community Edition is the free version of the popular Zend Server stack. The Zend Server stack provides<a id="id3" class="indexterm"/> a pre-integrated PHP application stack that could be used across development, testing, and production. This enables application development teams to have a consistent environment across all stages of development.</p><p>Zend Server CE also provides features such as Zend Optimizer+ for PHP bytecode caching and Zend Guard for encoding files.</p><div class="section" title="Zend Server CE – system requirements"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>Zend Server CE – system requirements</h2></div></div></div><p>Zend Server<a id="id4" class="indexterm"/> offers installers for Windows, Mac OS X, and a universal installation package compatible with most Linux distributions.</p><p>More <a id="id5" class="indexterm"/>details on the installation requirements can be found at <a class="ulink" href="http://www.zend.com/en/products/server/system-requirements">http://www.zend.com/en/products/server/system-requirements</a>.</p></div></div>
<div class="section" title="Time for action &#x2013; installing Zend Server CE"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Time for action – installing Zend Server CE</h1></div></div></div><p>Our next step will be to download and install<a id="id6" class="indexterm"/> Zend Server CE; I am running Ubuntu 12.04 Precise Pangolin. The installation procedure for other operating systems could be different; you can always refer to the Zend Server website for installation instructions. The following are the steps to install the Zend Server CE:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Visit the Zend Server Community Edition website (<a class="ulink" href="http://www.zend.com/en/community/zend-server-ce">http://www.zend.com/en/community/zend-server-ce</a>) and download the<a id="id7" class="indexterm"/> latest version of Zend Server that is applicable to your operating system. In this case, we will be downloading the Linux installer.</li><li class="listitem">Once the installer is downloaded,<a id="id8" class="indexterm"/> extract the contents of the installer to a temporary location:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ tar -zxvf ZendServer-5.6.0-RepositoryInstaller-linux.tar.gz</strong></span>
</pre></div></li><li class="listitem">After extracting, the installer needs to be started with administrator privileges:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ cd ZendServer-RepositoryInstaller-linux/</strong></span>
<span class="strong"><strong>$ sudo ./install_zs.sh 5.3 ce</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>We are passing two parameters to the installer. The first one is the version of PHP that needs to be installed; in this case it is <code class="literal">5.3</code>. The second parameter identifies the edition of Zend Server that needs to be installed; in this case it is <code class="literal">ce</code> for Community Edition.</p></div></div></li><li class="listitem">During the installation, the installer will request you to download various packages:<div class="mediaobject"><img src="graphics/1929_01_01_1.jpg" alt="Time for action – installing Zend Server CE"/></div></li><li class="listitem">Zend Server will be installed into <code class="literal">/usr/local/zend</code> by default; the default document root will point to <code class="literal">/var/www</code>. You can use the following files to make configuration changes to the Zend Server instance:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Apache master configuration is available in <code class="literal">/etc/apache2/apache2.conf</code></li><li class="listitem" style="list-style-type: disc">PHP configuration is controlled by <code class="literal">/var/local/zend/etc/php.ini</code></li></ul></div><p>The following screenshot shows the installed location of Zend Server:</p><div class="mediaobject"><img src="graphics/1929_01_02_1.jpg" alt="Time for action – installing Zend Server CE"/></div></li><li class="listitem">Once the installation is completed, <a id="id9" class="indexterm"/>you should be able to open <code class="literal">http://localhost</code> on your web browser. This should take you to a test page like the one shown in the following screenshot:<div class="mediaobject"><img src="graphics/1929_01_03_1.jpg" alt="Time for action – installing Zend Server CE"/></div></li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>To restart<a id="id10" class="indexterm"/> Zend Server, use<a id="id11" class="indexterm"/> the <code class="literal">$ sudo service zend-server restart</code> command.</p></div></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>Zend Server CE is installed and ready to be used. Now we have a web server and a compatible version of PHP running—this satisfies the core requirements for running Zend Framework 2.0.</p></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>Have a go hero</h2></div></div></div><p>We will<a id="id12" class="indexterm"/> be using Git to check out Zend Framework <a id="id13" class="indexterm"/>from Github; one of the major changes that happened to Zend Framework 2.0 is that the source control has changed from SVN to Git.</p><p>Your next task will be to install Git. We will be making use of Git when we are setting up our Zend Framework project.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>Git<a id="id14" class="indexterm"/> binaries<a id="id15" class="indexterm"/> can either be downloaded from <a class="ulink" href="http://www.git-scm.com/">http://www.git-scm.com/</a> or installed from your operating system's repositories.</p><p>Installation instructions for Git can be found at the following link:</p><p>
<a id="id16" class="indexterm"/>
<a class="ulink" href="http://git-scm.com/book/en/Getting-Started-Installing-Git">http://git-scm.com/book/en/Getting-Started-Installing-Git</a>
</p></div></div></div><div class="section" title="Configuring Zend Server CE"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>Configuring Zend Server CE</h2></div></div></div><p>Our <a id="id17" class="indexterm"/>next step will be to set up Zend Server CE and make some configuration changes that will enable us to run other PHP applications.</p><div class="section" title="Zend Server CE – Administration Interface"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec01"/>Zend Server CE – Administration Interface</h3></div></div></div><p>Zend Server<a id="id18" class="indexterm"/> CE's Administration<a id="id19" class="indexterm"/> Interface is a web-based user interface that provides the following features:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Managing PHP extensions</li><li class="listitem" style="list-style-type: disc">Configuring PHP directives</li><li class="listitem" style="list-style-type: disc">Managing Zend Server components</li><li class="listitem" style="list-style-type: disc">Monitoring PHP status, extension status, and application/server logs</li></ul></div><p>In our next task, we will be making a configuration change to Zend Server by using its Administration Interface.</p></div></div></div>
<div class="section" title="Time for action &#x2013; configuring Zend Server CE"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Time for action – configuring Zend Server CE</h1></div></div></div><p>The Zend Server needs to be configured after the installation is completed. The following are the<a id="id20" class="indexterm"/> steps for configuring Zend Server CE:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the admin console of Zend Server in your default browser (<code class="literal">http://localhost:10081/</code>).<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>The Zend Server UI console runs on port 10081 while the web server runs on port 80. This is why we need to implicitly specify the port number in the URL for accessing the UI console.</p></div></div></li><li class="listitem">When opening the Zend Server Administration Interface for the first time, you will be presented with a configuration wizard. Review and accept the terms and conditions of Zend's <span class="strong"><strong>End User License Agreement</strong></span> page:<div class="mediaobject"><img src="graphics/1929_01_04_1.jpg" alt="Time for action – configuring Zend Server CE"/></div></li><li class="listitem">As <a id="id21" class="indexterm"/>shown in the following screenshot, you will be asked to set the password for the Zend Server installation:<div class="mediaobject"><img src="graphics/1929_01_05_1.jpg" alt="Time for action – configuring Zend Server CE"/></div></li><li class="listitem">After the initial configuration wizard is completed, you will be redirected to the Zend Server Administration Interface's home page.<div class="mediaobject"><img src="graphics/1929_01_06_1.jpg" alt="Time for action – configuring Zend Server CE"/></div></li><li class="listitem">We <a id="id22" class="indexterm"/>need to set the session save path. In order to do this, perform the following steps:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Navigate to <span class="strong"><strong>Directives</strong></span> in <span class="strong"><strong>Server Setup</strong></span>.</li><li class="listitem">Search for <code class="literal">session.save_path</code>.</li><li class="listitem">Set the value to <code class="literal">/tmp</code>.</li><li class="listitem">Click on <span class="strong"><strong>Save Changes</strong></span> and then <span class="strong"><strong>Restart PHP</strong></span>.</li></ol></div><div class="mediaobject"><img src="graphics/1929_01_07_1.jpg" alt="Time for action – configuring Zend Server CE"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We have successfully modified a server configuration using Zend Server's Administration Interface and we have restarted the PHP instance running on Zend Server.</p></div></div>
<div class="section" title="MySQL"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>MySQL</h1></div></div></div><p>MySQL doesn't need an introduction—it is the world's most widely used open source database <a id="id23" class="indexterm"/>application. It's free and is available on the Internet to individuals and businesses that wish to develop their websites and applications using the MySQL database.</p><p>Zend Framework 2.0 has driver support for MySQL along with SQLite, PostgreSQL, and Microsoft SQL Server.</p><p>Our next exercise will be to install MySQL on our development machine. MySQL is available for download from all Linux repositories. Windows and Mac users will have to download <a id="id24" class="indexterm"/>the installer from the MySQL website (<a class="ulink" href="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>).</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>Windows and Mac users can skip this section if they have chosen to install MySQL Server as a part of their Zend Server CE installation. The Zend Server installer allows Windows and Mac users to download and install MySQL Server as a part of the installation.</p></div></div></div>
<div class="section" title="Time for action &#x2013; installing MySQL"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Time for action – installing MySQL</h1></div></div></div><p>MySQL Server<a id="id25" class="indexterm"/> and Client need to be installed using the following steps; we will be using MySQL as our primary database in this book:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In a standard Ubuntu installation, MySQL can be installed by executing the following command in the shell prompt:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ sudo apt-get install mysql-server mysql-client</strong></span>
</pre></div></li><li class="listitem">After the installation is complete, MySQL Server will start automatically. To check if MySQL Server is running, run the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ sudo netstat -tap | grep mysql</strong></span>
</pre></div></li><li class="listitem">The command should give an output that is similar to the following; this means that the MySQL daemon is running:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>tcp     0      0 localhost:mysql     *:*     LISTEN      923/mysqld</strong></span>
</pre></div></li><li class="listitem">If, for some reason, MySQL Server is not running, you can start the server by running the <code class="literal">restart</code> command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ sudo service mysql restart</strong></span>
</pre></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We have<a id="id26" class="indexterm"/> just installed MySQL; we have the LAMP <a id="id27" class="indexterm"/>stack ready too. Our next step will be to create a database in MySQL Server.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>Since we are using Zend Server, we don't need to install the <code class="literal">php5-mysql</code> package. If you are using a stack that doesn't have MySQL support enabled by default, you will have to install the necessary packages manually.</p></div></div></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>Have a go hero</h2></div></div></div><p>Having gone through this section, feel free to attempt the task in the following section.</p><div class="section" title="phpMyAdmin"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec02"/>phpMyAdmin</h3></div></div></div><p>phpMyAdmin is<a id="id28" class="indexterm"/> a free, open source web-based database administration <a id="id29" class="indexterm"/>tool written in PHP. phpMyAdmin provides a web-based UI to manage MySQL Database Server; add / remove / manage databases, users, privileges; and so on. In this book, we will be using phpMyAdmin as the database Administration Interface for managing our database(s).</p><p>Now that we have Apache, PHP, and MySQL installed, our next step will be to create a blank database in MySQL Server.</p><p>For doing this, we need to install and configure phpMyAdmin in the Zend Server.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>phpMyAdmin<a id="id30" class="indexterm"/> can either be downloaded from <a class="ulink" href="http://www.phpmyadmin.net/">http://www.phpmyadmin.net/</a> or installed from your operating system's repositories.</p><p>Installation <a id="id31" class="indexterm"/>instructions for phpMyAdmin can be found at the following link:</p><p>
<a class="ulink" href="http://docs.phpmyadmin.net/en/latest/setup.html">http://docs.phpmyadmin.net/en/latest/setup.html</a>
</p></div></div><p>In our next task we will be creating a MySQL database, creating users in the MySQL server and also grant them access permissions to connect to the database and perform database operations.</p></div></div></div>
<div class="section" title="Time for action &#x2013; creating a database"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>Time for action – creating a database</h1></div></div></div><p>To create <a id="id32" class="indexterm"/>a new database, open an instance of phpMyAdmin<a id="id33" class="indexterm"/> in your web browser and follow the steps described here:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open phpMyAdmin in your web browser by visiting <code class="literal">http://localhost/phpmyadmin</code>:<div class="mediaobject"><img src="graphics/1929_01_09_1.jpg" alt="Time for action – creating a database"/></div></li><li class="listitem">Choose <a id="id34" class="indexterm"/><span class="strong"><strong>Databases</strong></span>, enter the name of the new <a id="id35" class="indexterm"/>database as <code class="literal">zf_app</code> in <span class="strong"><strong>Create new database</strong></span>, and click on <span class="strong"><strong>Create</strong></span>:<div class="mediaobject"><img src="graphics/1929_01_10_1.jpg" alt="Time for action – creating a database"/></div></li><li class="listitem">After<a id="id36" class="indexterm"/> creating the database, create a database<a id="id37" class="indexterm"/> user for this database; this can be done by selecting <span class="strong"><strong>Add a new user</strong></span> from <span class="strong"><strong>Privileges</strong></span>. Provide the following details:<div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>User field</p>
</th><th style="text-align: left" valign="bottom">
<p>Value</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>User</strong></span><a id="id38" class="indexterm"/>
<span class="strong"><strong> name</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">zf_user</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Host</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">localhost</code><a id="id39" class="indexterm"/>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Password</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">zf_pass</code><a id="id40" class="indexterm"/>
</p>
</td></tr></tbody></table></div><p>After doing this you will get the following screen:</p><div class="mediaobject"><img src="graphics/1929_01_11_1.jpg" alt="Time for action – creating a database"/></div></li><li class="listitem">After <a id="id41" class="indexterm"/>the user is created, go to the <span class="strong"><strong>Privileges</strong></span> section and choose <span class="strong"><strong>Edit Privileges </strong></span>for the <code class="literal">zf_user</code>.</li><li class="listitem">In the <span class="strong"><strong>Database-specific privileges</strong></span> section, select the <code class="literal">zf_app</code> database.</li><li class="listitem">You will be redirected to the privileges section of the <code class="literal">zf_app</code> database for the <code class="literal">zf_user</code> user. Choose <span class="strong"><strong>Check All</strong></span> and click on <span class="strong"><strong>Go</strong></span>.<div class="mediaobject"><img src="graphics/1929_01_12_1.jpg" alt="Time for action – creating a database"/></div></li></ol></div><p>You <a id="id42" class="indexterm"/>can now test the database by logging out of phpMyAdmin and logging in again with the user credentials of <code class="literal">zf_user</code>. You should now be able to see only the <code class="literal">zf_app</code> database.</p><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We just created our first database in MySQL. We have also created a user in the database and mapped the user to the database with administrative rights; we can now use these credentials in the application that we will be building in our next chapters.</p></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>Have a go hero</h2></div></div></div><p>Now that you have the PHP web server up and running and also have a MySQL database, create a simple table called <code class="literal">Students</code> and add a few records to the table using phpMyAdmin.</p><p>Your task will be to create a simple PHP web page that will display all the records in the <code class="literal">Students</code> table in the page.</p></div><div class="section" title="Pop quiz – Zend Framework 2.0"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>Pop quiz – Zend Framework 2.0</h2></div></div></div><p>Q1. What is the minimum version of PHP needed to run Zend Framework 2.0?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">PHP 4.3 and above</li><li class="listitem">PHP 5.2.0 and above</li><li class="listitem">PHP 5.3.3 and above</li><li class="listitem">PHP 5.4.7 and above</li></ol></div><p>Q2. What is the default location of <code class="literal">php.ini</code> in the new Zend Server installation?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem"><code class="literal">/home/&lt;user&gt;/etc/php/php.inc</code></li><li class="listitem"><code class="literal">/etc/php/php.ini</code></li><li class="listitem"><code class="literal">/var/www/php.ini</code></li><li class="listitem"><code class="literal">/usr/local/zend/etc/php.ini</code></li></ol></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Summary</h1></div></div></div><p>In this chapter we have learned the setup and configuration of Zend Server's PHP application stack. We went on to install MySQL Server and created our first database. In your exercises, you have learned about the installation of Git and phpMyAdmin.</p><p>In the next chapter, we will learn about the structure of a Zend Framework project and core MVC components such as views and controllers.</p></div></body></html>