<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Testing and Debugging"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Testing and Debugging</h1></div></div></div><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Installing PHPUnit</li><li class="listitem" style="list-style-type: disc">Test case in PHPUnit</li><li class="listitem" style="list-style-type: disc">Testing an application with PHPUnit</li><li class="listitem" style="list-style-type: disc">Starting a debugging session</li><li class="listitem" style="list-style-type: disc">Setting a breakpoint</li><li class="listitem" style="list-style-type: disc">Configuring breakpoint conditions</li><li class="listitem" style="list-style-type: disc">Creating exception breakpoints</li><li class="listitem" style="list-style-type: disc">Stepping through your code</li><li class="listitem" style="list-style-type: disc">Running to a line of code selected</li><li class="listitem" style="list-style-type: disc">Watching expressions and variables</li><li class="listitem" style="list-style-type: disc">Evaluating expressions</li><li class="listitem" style="list-style-type: disc">Changing code on the fly</li><li class="listitem" style="list-style-type: disc">Code coverage in PhpStorm</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec60"/>Introduction</h1></div></div></div><p>Whenever you create a new software, there is a business dependency inherent on that. Obviously, if your software were not sold, you would probably have opted for some other profession. Due to the business factor, you are always expected to make your software reliable. This can be done only after your software has passed testing. It is not that you, the programmers, will do the entire testing and kick the tester out. You will be required to do the unit testing while actually writing the code. If you unit test your code, the chances of failure decrease drastically. The unit testing<a id="id310" class="indexterm"/> should ideally be done while creating code, and an ideal timeline to unit test is as soon as some milestone functionality has been created.</p><p>To act wisely and do (unit) testing, use PHPUnit. <span class="strong"><strong>PHPUnit</strong></span>
<a id="id311" class="indexterm"/> is a system (application) written in your favorite PHP. It lets you write test cases for the code you write so that you can keep on checking for any error that might creep into your logic. Thus, by the time you use a build tool to create something like a phar or any other archive, you have already ensured that the first level of filtration has been applied.</p><p>It is obvious for you to ask the purpose of PHPUnit then. The answer to this is simple: you need PHPUnit to prevent errors from passing on to the integration testing phase. But what if there were some errors or functionality that could not be detected at the unit-testing phase? What if there were errors due to another component or module passing on erroneous data?</p><p>Instead of applying the same rule to change the tense of a person's existence, you are again advised to act wisely. Use a debugger. Most of the IDEs show debugger with a bug icon next to it, so you would not find it difficult to find it in PhpStorm. PhpStorm provides you with options to select a debugger and integrate it for usage.</p><p>Using <a id="id312" class="indexterm"/>a debugger, you can do wonders. You actually gain fine-grained control over your code. You gain the power to walk across walls and see through iron plates! Will you stop dreaming about being a superpower, please. You are still a software engineer? A debugger gives you the power to look into the value of any variable in your code and the return value of a method, to pause the execution at will and resume it at will, and the list is endless.</p><p>Before diving into the deep sea of knowledge, it is important to know the difference between testing and debugging. <span class="strong"><strong>Testing</strong></span>
<a id="id313" class="indexterm"/> is a process that is likely to be done during the development phase, just after some business logic has been developed and it needs to be cleaned and sanitized properly before being released into production. <span class="strong"><strong>Debugging</strong></span> is<a id="id314" class="indexterm"/> the process of removal of bugs from the code. A bug<a id="id315" class="indexterm"/> is that unwanted (improper) functionality that has passed the testing phase and has been discovered in the later testing phases or even in the production phase. Actually, both are similar because the aim of both is just to clean the product and functional software application.</p></div></div>
<div class="section" title="Installing PHPUnit"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec61"/>Installing PHPUnit</h1></div></div></div><p>The discussion starts with<a id="id316" class="indexterm"/> testing <a id="id317" class="indexterm"/>because it precedes debugging in the software development life cycle. PHP provides a unit-testing system, which is known as PHPUnit.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec132"/>Getting ready</h2></div></div></div><p>If you use PHPUnit, you gain the freedom to write some code and to check some code. Yes, you read it right. You can use PHPUnit to write some program that will check the input and output of some other program. Interesting phenomenon, right?</p><p>When you can <a id="id318" class="indexterm"/>write an application (PHP code) using an application (PhpStorm), why <a id="id319" class="indexterm"/>not test the application (PHP code) with an application (PHPUnit test cases)? Since PHPUnit is just an application written in PHP, it is available in the form of a <a id="id320" class="indexterm"/>
<span class="strong"><strong>PHP Archive</strong></span> (<span class="strong"><strong>PHAR</strong></span>). It is just a method to ship your files and folders as a whole and to make it ready to be executed.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note16"/>Note</h3><p>Please make sure that you have PHP interpreter installed before installing PHPUnit.</p></div></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec133"/>How to do it...</h2></div></div></div><p>You can install it very easily by just downloading the PHPUnit archive (the <code class="literal">phar</code> file) and setting the <code class="literal">/path/to/phpunit.phar</code> in the list of include paths.</p><p>You just need to perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to the <span class="strong"><strong>Project</strong></span> view.</li><li class="listitem">Access the right-click context menu on the <span class="strong"><strong>External Libraries</strong></span> directory.</li><li class="listitem">Select the <span class="strong"><strong>Configure PHP includes path</strong></span> option.</li></ol></div><p>You can also do that quickly by selecting the <span class="strong"><strong>External Libraries</strong></span> directory, pressing <span class="emphasis"><em>F4</em></span>, and pointing to the correct <code class="literal">phpunit.phar</code> file, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/3878OT_05_15.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec134"/>How it works...</h2></div></div></div><p>Since <a id="id321" class="indexterm"/>you have installed PHPUnit as a package (PHAR), the testing system swings <a id="id322" class="indexterm"/>into action as soon as you inherit (or extend) a class defined inside the directory <code class="literal">phpunit-lts.phar</code> under the <code class="literal">phpunit</code> directory and the framework subdirectory with the name <code class="literal">PHPUnit_Framework_TestCase</code>.</p></div></div>
<div class="section" title="Test case in PHPUnit"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec62"/>Test case in PHPUnit</h1></div></div></div><p>Having installed PHPUnit successfully, your challenge is not over yet—it has just led to another array of challenges. Testing is no easy task, but it is interesting. Just as you love writing beautiful PHP code, you will love writing test cases in PHPUnit because it is just like writing PHP code while taking care of some conventions.</p><p>A <span class="strong"><strong>test case</strong></span>
<a id="id323" class="indexterm"/> is a piece of an application that is written specifically to check (or test) for certain conditions in another application. Thus, when you write down a test case, you actually write a PHP code to test if something has gone wrong in other PHP code (which happens to be the code you have written to meet the business requirements).</p><p>Here, it is quite important to state that you, the programmer, usually have the following point of view:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You think that since you know your code very well you know that your code is errorless</li><li class="listitem" style="list-style-type: disc">Even if there are some errors in your code, since you know the code deeply, you can fix it in a flash</li><li class="listitem" style="list-style-type: disc">You think that the time you waste in writing test cases can be better utilized in writing more code</li></ul></div><p>These (and many such) points are incorrect. You need to write test cases.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec135"/>How to do it...</h2></div></div></div><p>To create a new<a id="id324" class="indexterm"/> test case, you need to create a new <a id="id325" class="indexterm"/>PHPUnit class. Thus, perform the <a id="id326" class="indexterm"/>following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to the <span class="strong"><strong>Project</strong></span> view.</li><li class="listitem">Select the file you want to test. This file should be a valid PHP class. Obvious statement.</li><li class="listitem">From the right-click context menu, select <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>PHPUnit</strong></span> | <span class="strong"><strong>PHPUnit Test</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/3878OT_05_14.jpg" alt="How to do it..."/></div></li><li class="listitem">Provide the name and the related details just as you would do to create a new PHP class.</li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note17"/>Note</h3><p>The test cases that you create will be PHP methods with the public access specifier inside this class.</p></div></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec136"/>How it works...</h2></div></div></div><p>To see how a <a id="id327" class="indexterm"/>test case works, you need to follow <a id="id328" class="indexterm"/>some conventions. The reason is that, since a test case is a PHP code, it has to have some functionality inherent in it. The conventions are listed for quick reference:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The test class should have the same name as the target class. Thus, you will create <code class="literal">XXXTest</code> inside the file <code class="literal">XXXTest.php</code> given that the name of the class to be tested is <code class="literal">XXX</code>.</li><li class="listitem" style="list-style-type: disc">All test classes should extend (inherit) the <code class="literal">PHPUnit_Framework_TestCase</code> class. This class is made available to you when you include the PHAR in your PhpStorm project (as we saw in the <span class="emphasis"><em>Installing PHPUnit</em></span> recipe of this chapter).</li></ul></div><p>Thus, your class <code class="literal">XXXTest</code> will have the following declaration:</p><div class="informalexample"><pre class="programlisting">class XXXTest extends PHPUnit_Framework_TestCase{
..
}</pre></div><p>The exact method to be tested inside the test class should have its name starting with <code class="literal">test</code> followed by the name of the method to be tested.</p><p>It is not that your test will fail just due to this reason, but it is a standard naming practice.</p><p>There is also no constraint on you to map one-to-one test methods to one single target method. Again, it is just a good practice.</p><p>Thus, given that the name of the method to be tested is <code class="literal">YYY</code>, a test inside your test class will have the declaration (definition) as follows:</p><div class="informalexample"><pre class="programlisting">public function testYYY(){
  ...
}</pre></div><p>As per the convention, you should write one test inside one method only. It leads to better organization of code and makes it easier to understand.</p><p>The actual testing is done by asserting some facts. The facts are the output of the methods you will be testing. Thus, if some method returns a string, you can check if the method return type is <code class="literal">string</code> by writing the following line of code:</p><div class="informalexample"><pre class="programlisting">   $this-&gt;assertInternalType("string", $methodReturnValue);</pre></div><p>A test class should have the common content inside a <code class="literal">setUp</code> method. This is particularly helpful in cases in which you need to have a chunk of code shared across all the test methods in this class. It is your call whether to use it or not.</p><p>At the end of a test method being called, you might not need to have the resources at hand. You might want to remove it from memory.</p><p>Here, it is quite<a id="id329" class="indexterm"/> important to remember that you should always<a id="id330" class="indexterm"/> design your tests wisely. You should always prevent unwanted memory usage in your test because once you do that, you will have to add another testing on this test class as well.</p><p>Having known the nuances of test cases, you are all set to test. This is a deliberate misuse of the letters of the alphabet to alert you!</p><p>Whatever you do, PhpStorm assists you. So, instead of waiting and thinking about what to do, get set, go!</p></div></div>
<div class="section" title="Testing an application with PHPUnit"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec63"/>Testing an application with PHPUnit</h1></div></div></div><p>There must be a<a id="id331" class="indexterm"/> question hovering in your mind about the<a id="id332" class="indexterm"/> role of PhpStorm in this testing. It's time for action. Having sufficient knowledge of the conventions to write tests, you can proceed to face the real world of testing. The more you test, the purer your code will become. Testing is good. Testing is healthy. Testing is recommended.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec137"/>How to do it...</h2></div></div></div><p>Good question. This question is best answered with some diving back into time to get back the same pizza cooking use case. You have grown up listening to grandma's advice to reuse objects. Now is the time for you to reuse. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Reuse the <code class="literal">PizzaDish</code> class. You will create a test class somewhat like the following:<div class="informalexample"><pre class="programlisting">require_once "PizzaDish.php";
class PizzaDishTest extends PHPUnit_Framework_TestCase {

  function setUp(){
    $this-&gt;pizzaDish = new PizzaDish("Pizza Dish", "Dish");
  }

  function tearDown(){
    unset($this-&gt;pizzaDish);
  }

  public function testGetInstance(){
    $this-&gt;assertInstanceOf('Dish',
    $this-&gt;pizzaDish-&gt;getInstance());
  }

  public function testGetDishName(){
    $this-&gt;assertInternalType("string", 
    $this-&gt;pizzaDish-&gt;getDishName());
  }
}</pre></div><p>As promised, you can see that the PHPUnit is all about writing PHP classes.</p></li><li class="listitem">To execute this test, you need to execute (run) this class.</li><li class="listitem">Running this class is extremely simple. <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F10</em></span> is your savior.</li><li class="listitem">If you want to run a single method, PhpStorm provides for that as well. You just need to place the cursor anywhere inside the body of the method you want to execute and issue the run command.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip19"/>Tip</h3><p>If the cursor is not inside a method body, the entire test class will be executed.</p></div></div></li></ol></div><p>The<a id="id333" class="indexterm"/> following <a id="id334" class="indexterm"/>screenshot shows the test result:</p><div class="mediaobject"><img src="graphics/3878OT_05_01.jpg" alt="How to do it..."/></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec138"/>How it works...</h2></div></div></div><p>In order to<a id="id335" class="indexterm"/> execute your unit test, PhpStorm makes some<a id="id336" class="indexterm"/> improvisations. Just as it does with every other library, it uses its own version of the execution script to execute the test. The full name of the file is <code class="literal">/tmp/ide-phpunit.php</code>. Thus, it is this file that accepts the name of the test class file you have written.</p><p>The working of the testing application is simple. As already stated, all classes that inherit <code class="literal">PHPUnit_Framework_TestCase</code> class become test classes. The <code class="literal">setUp</code> method instantiates an object of the target class <code class="literal">PizzaDish</code> and makes it available to the entire test class.</p><p>Inside your test class, the <code class="literal">testGetInstance</code> and <code class="literal">testGetDishName</code> methods get executed when you run the test. Inside the test method, a new object is instantiated to initiate the actual testing process. Up until this point, the activities that you did were the same as those for a PHP class. Inside the methods, there are certain assertions that do the actual testing. There are these special methods, namely, <code class="literal">assertInstanceOf</code> and <code class="literal">assertInternalType</code>, which are declared in the <code class="literal">Assert</code> class provided by the framework. You can view the documentation of the method by putting the cursor under the method name and pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Q</em></span>. These are the actual methods that perform the testing task by checking if the given assertion is true. Thus, the motive of the test class that you created is to check whether the desired class is instantiated or not and whether the name of the dish that you want to cook is of the type <code class="literal">string</code>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note18"/>Note</h3><p>Once you run the test, you will be able to see the test results in the usual run view which is accessible by <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>4</em></span>.</p></div></div></div></div>
<div class="section" title="Starting a debugging session"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec64"/>Starting a debugging session</h1></div></div></div><div class="blockquote"><blockquote class="blockquote"><p><span class="emphasis"><em>"Now is the time for all programmers to start debugging their code"</em></span></p></blockquote></div><p>Like most IDEs, PhpStorm<a id="id337" class="indexterm"/> also uses a bug icon to show the debugger. Just as a bug leeches your blood and doesn't let you concentrate on your main task, a software bug can leech precious CPU cycles and not allow your software to work as expected.</p><p>To prevent such bugs from entering the life cycle of software, you need to do debugging. Debugging is the process of diving deep into the code and finding out the potential areas that might be the problem causing regions in the code, so do extensive lookup to find and rectify the bugs.</p><p>The tools available for the purpose are termed debuggers in the industry. <span class="strong"><strong>Xdebug</strong></span>
<a id="id338" class="indexterm"/> is the name for one such tool. It is a very commonly used, free, and open source debugger that is available to be plugged in with most IDEs.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec139"/>Getting ready</h2></div></div></div><p>To plug it in, you need to install it on your development machine. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Check out the<a id="id339" class="indexterm"/> source code from <a id="id340" class="indexterm"/><span class="strong"><strong>GitHub</strong></span>, the repository where Xdebug is hosted. You need to issue this command in your terminal <code class="literal">git clone git://github.com/xdebug/xdebug.git</code>.</li><li class="listitem">Move into the directory where the code has been checked out.</li><li class="listitem">Issue the command <code class="literal">phpize</code>. There will be lots of text output to the console when you do this. Once the output finishes, you need to execute the configuration file, which happens to be an executable shell script.</li><li class="listitem"> You need to enable <code class="literal">xdebug</code> using the switch <code class="literal">--enable-xdebug</code> while configuring. Thus, you should write <code class="literal">./configure --enable-xdebug</code>.</li><li class="listitem">When this has been done, you need to issue the command <code class="literal">make &amp;&amp; make install</code> to complete the compilation.</li><li class="listitem">The output of steps will be a module—precisely a shared object or a <code class="literal">.so</code> file that you need to specify in the PHP settings. Kindly note it.</li><li class="listitem">Inside the appropriate <code class="literal">ini</code> file, you need to write the following code:<div class="informalexample"><pre class="programlisting">zend_extension="/path/to/compiled/xdebug/so/xdebug.so" 
xdebug.remote_enable=On
xdebug.remote_host=localhost
xdebug.remote_port=9000</pre></div></li><li class="listitem">In order to know which <code class="literal">php.ini</code> file your PhpStorm uses, you need to go to <span class="strong"><strong>Tools</strong></span> | <span class="strong"><strong>Run Command</strong></span> and issue the command <code class="literal">php --ini</code>. You will be given a list of all the <code class="literal">.ini</code> files that are parsed. You now have the correct <code class="literal">.ini</code> file to make the changes in.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note19"/>Note</h3><p>There is this shortcut as well, <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>X</em></span>, which opens the command-line tool console.</p></div></div></li></ol></div><p>Having installed a powerful debugger, you can proceed to making your code bug-free.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec140"/>How to do it...</h2></div></div></div><p>A debugging session is to be started only for a web-based PHP application. In order to be able to initiate the debugging for a web application, perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">You need to have, let's say for Chrome, an <code class="literal">xdebug</code> helper. It helps you to initiate a debugging session once you type in a URL.</li><li class="listitem">You know that corresponding to a client, there should be a server so that when you attempt to initiate a debug session, there must have been a listener for the incoming connection.</li><li class="listitem">So, you need to<a id="id341" class="indexterm"/> start the listener for the incoming debug connection. To do that, you need to go to <span class="strong"><strong>Run</strong></span> | <span class="strong"><strong>Start Listen to debug connections</strong></span>.</li><li class="listitem">Once you initiate the session for the first time, PhpStorm shows an alert regarding some entry, as shown in the screenshot following the next information box:<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note20"/>Note</h3><p>Make sure that the checkbox is checked for <span class="strong"><strong>Can accept external connection</strong></span>. This will be found in <span class="strong"><strong>Settings</strong></span> | <span class="strong"><strong>PHP</strong></span> | <span class="strong"><strong>Debug</strong></span>.</p></div></div><div class="mediaobject"><img src="graphics/3878OT_05_02.jpg" alt="How to do it..."/></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec141"/>How it works...</h2></div></div></div><p>Once you accept<a id="id342" class="indexterm"/> the connection, PhpStorm saves it. The saved servers can be viewed later under <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>Settings</strong></span> | <span class="strong"><strong>PHP</strong></span> | <span class="strong"><strong>Servers</strong></span>. From this point onwards, the debugging process becomes the same for a web-based application and a command-line application. So the debugger will view whatever variables will be there in the code, and according to the breakpoints that you provide, it will pause, continue, step through, or step over the code, thus making it very easy for you to see what is going on inside the code.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip20"/>Tip</h3><p>You<a id="id343" class="indexterm"/> can also visit <a class="ulink" href="http://www.xdebug.org/wizard.php">http://www.xdebug.org/wizard.php</a> to know more about <code class="literal">xdebug</code> installation for your server.</p></div></div></div></div>
<div class="section" title="Setting a breakpoint"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec65"/>Setting a breakpoint</h1></div></div></div><p>A breakpoint in a <a id="id344" class="indexterm"/>code is that point (or line of code) where you want the program execution to pause for a while. When you were cooking pizza and adding ingredients, suppose you wanted to know at any instant which ingredient was about to be added, you can set a breakpoint to actually make the interpreter pause at the line where the variable contained the name of the ingredient to be added. After a breakpoint is set, you can see which value a variable assumes under the variables frame in the debug window.</p><p>There are two types of breakpoints, which are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Permanent breakpoint</strong></span>: A normal<a id="id345" class="indexterm"/> breakpoint is one which remains till eternity, until <a id="id346" class="indexterm"/>you manually remove it</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Temporary breakpoint</strong></span>: A <a id="id347" class="indexterm"/>temporary breakpoint, on the other<a id="id348" class="indexterm"/> hand, is a breakpoint that gets removed or disabled upon certain conditions, the most common being a hit.</li></ul></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec142"/>How to do it...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To set a <a id="id349" class="indexterm"/>normal breakpoint, you need to select a suspicious line of code by placing the cursor under it.</li><li class="listitem">Go to <span class="strong"><strong>Run</strong></span> | <span class="strong"><strong>Toggle Line Breakpoint</strong></span>.</li><li class="listitem">There will be a red circle created at the left-hand side panel to give you a visual indication that the line is a breakpoint.</li><li class="listitem">You can do the same using the keyboard shortcut <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>F8</em></span>.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec143"/>How it works...</h2></div></div></div><p>A <a id="id350" class="indexterm"/>breakpoint allows you to view the state of the variables stack. So, when the interpreter halts at a breakpoint, you can view the contents of the variables involved in the program execution. If you have added some variables or expressions to <span class="emphasis"><em>watch</em></span>, you can constantly view the content of the selected variable at all times as long as it remains in the current scope. At all other times during the execution, there is the message <span class="strong"><strong>Cannot evaluate expression</strong></span> shown. The debugger provides instruction to the interpreter to pause the execution when a breakpoint is hit. Upon request, the debugger instructs the interpreter to write (output) messages to the console (and it appears to the human eye that PhpStorm has done it!)</p></div></div>
<div class="section" title="Configuring breakpoint conditions"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec66"/>Configuring breakpoint conditions</h1></div></div></div><p>PhpStorm provides you ways to customize the breakpoints. So you have some more comfort to sit back and enjoy the debugging happening, while being sure that your task will be done in time.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec144"/>How to do it...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Once you set a<a id="id351" class="indexterm"/> breakpoint, you can press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F8</em></span> to get a configuration panel. Using the panel, you can change the regular breakpoint to a temporary breakpoint.</li><li class="listitem">Select the checkbox next to the <span class="strong"><strong>Remove once hit</strong></span> option. That breakpoint will only be existent till the breakpoint is hit once.</li><li class="listitem">You can select <span class="strong"><strong>Log message to console</strong></span> to output once this breakpoint gets hit.</li><li class="listitem">You can create an expression to be evaluated once this breakpoint gets hit by selecting the <span class="strong"><strong>Log evaluated expression</strong></span> checkbox. You can also keep this breakpoint dormant conditionally.</li><li class="listitem">You can tell PhpStorm to activate this breakpoint to remain disabled until an exception of a particular type is thrown, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/3878OT_05_03.jpg" alt="How to do it..."/></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec145"/>How it works...</h2></div></div></div><p>Again, there is no <a id="id352" class="indexterm"/>logical explanation as to how a breakpoint works. You need to follow the steps shown, and PhpStorm will do the trick for you. The working is more related to the operating system.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip21"/>Tip</h3><p>While the pop up is still open, you can press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F8</em></span> to get a larger panel in which you can have a peek into the code as well, while still having the control panel open.</p></div></div><p>This is as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/3878OT_05_04.jpg" alt="How it works..."/></div></div></div>
<div class="section" title="Creating exception breakpoints"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec67"/>Creating exception breakpoints</h1></div></div></div><p>There is new information for your brain to absorb. Until this point in time, you assumed that a breakpoint can be created only manually when you suspected some line of code might be problematic. But you can actually create a breakpoint to be hit when an exception is hit. This type of breakpoint is <a id="id353" class="indexterm"/>known as <span class="strong"><strong>exception breakpoint</strong></span>. The question that comes to mind is "what is the reason for this name?" This breakpoint gets activated on encountering an exception.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec146"/>How to do it...</h2></div></div></div><p>To create a new exception<a id="id354" class="indexterm"/> breakpoint, you just need to remember a few small steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Inside the editor, press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F8</em></span>, where there will be a pop up.</li><li class="listitem">In the left-hand top corner, there is the <span class="strong"><strong>+</strong></span> sign, press it and you will get an option to create an exception breakpoint.</li><li class="listitem">On proceeding, you will be asked to enter the name of the exception at which you want the execution to halt.</li><li class="listitem">You can also make a customization in the way the breakpoint will behave. You can ask PhpStorm to activate this breakpoint when an unexpected (or uncaught) exception is thrown in the code, as shown in the following screenshot. This is particularly helpful for a wise programmer since most of the expected exceptions will have already been covered in the code. All the other rules that were applicable on a general breakpoint are applicable on the exception breakpoint except for this one difference.<div class="mediaobject"><img src="graphics/3878OT_05_05.jpg" alt="How to do it..."/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note21"/>Note</h3><p>You cannot disable an exception breakpoint once it is hit. In other words, you cannot make a temporary exception breakpoint.</p></div></div></li><li class="listitem">If you want<a id="id355" class="indexterm"/> the exception breakpoint to be activated upon some condition, you can leave the exception disabled until either another exception occurs or another breakpoint is hit. PhpStorm provides you with the options to choose from a list of breakpoints for the purpose.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip22"/>Tip</h3><p>To avoid laboring hard in making the decision as to which exception to choose, you can select the exception to be the <code class="literal">Exception</code> class. This can prove handy because all the exception classes ultimately inherit this <code class="literal">Exception</code> class.</p></div></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec147"/>How it works...</h2></div></div></div><p>The execution continues in the normal way—if you have set breakpoints, there will be pauses as there used to be. But now, the execution will pause on an exception as well. Thus, this exception breakpoint is an invisible breakpoint that will not be visible to you, but internally it will be active. Being a breakpoint, it will continue working as a breakpoint.</p></div></div>
<div class="section" title="Stepping through your code"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec68"/>Stepping through your code</h1></div></div></div><p>Life teaches new lessons at every moment. For all of you who found the phrase <span class="emphasis"><em>stepping through code</em></span> new, this is a process wherein you do an analysis of the values of variables, the control structures, and the method call hierarchy. The process includes three types of stepping:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Step Into</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Step Over</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Step Out</strong></span></li></ul></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec148"/>Getting ready</h2></div></div></div><p>Do you need to step <a id="id356" class="indexterm"/>through code at all? Yes, of course. When? When you have to find out what the eyesore in the code is. You have to step into the code when you need to know the next line in the entire program. You have to step over code when you need to know the next executed line in the entire program. You have to step out of code when you need to know the next line after the method selected.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec149"/>How to do it...</h2></div></div></div><p>In order to step through code, you just need to be in a debugging session. The rest is just a click away or just a matter of a keyboard shortcut. Perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Begin with stepping over the code. When your debug session is active, you need to press <span class="emphasis"><em>F8</em></span> or select the button as shown in the following screenshot:<div class="mediaobject"><img src="graphics/3878OT_05_06.jpg" alt="How to do it..."/></div></li><li class="listitem">In order to step into the code, you just need to press <span class="emphasis"><em>F7</em></span> or select the button as shown in the following screenshot:<div class="mediaobject"><img src="graphics/3878OT_05_07.jpg" alt="How to do it..."/></div></li><li class="listitem">In order to step out <a id="id357" class="indexterm"/>of the code, you need to use the keyboard combination <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F8</em></span> or select the button as shown in the following screenshot:<div class="mediaobject"><img src="graphics/3878OT_05_08.jpg" alt="How to do it..."/></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec150"/>How it works...</h2></div></div></div><p>Once you have used any of the stepping-through methods, you will obviously wish to know what goes on behind the scenes. A very high level of explanation will tell you that when you step into the code, the debugger takes you to the next line in the program. Once you are on the next line in the code, you can do a lot of inspection in that particular line of code, such as the contents of the variables.</p><p>Once you step into the code, the debugger actually shows you the immediate next line executed in the same program file or another program file. Once shown, you can again do lots of inspections in that particular line of code.</p><p>Once you step out of the<a id="id358" class="indexterm"/> code, the debugger shows you the immediate next line that will be executed after the current method is executed. If the debugger is unable to find any such line, the execution will be finished in the usual way, as it should have been without a debugger.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note22"/>Note</h3><p>You must have a debugging session before you try the shortcut keys such as <span class="emphasis"><em>F8</em></span>, <span class="emphasis"><em>F7</em></span>, and <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>F8</em></span>.</p></div></div></div></div>
<div class="section" title="Running to a line of code selected"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec69"/>Running to a line of code selected</h1></div></div></div><p>If you want no breakpoints in <a id="id359" class="indexterm"/>your code, but you still want the debugger to break at some point in your code, you are at the correct recipe and reading the correct text. This is also true when the breakpoint you set is already executed or stepped over, but you still suspect another line to be buggy.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec151"/>How to do it...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To tell PhpStorm to ask the debugger to break at some arbitrary point of your choice, you should exercise the <span class="strong"><strong>Run to Caret</strong></span> option. As a prerequisite, you have to place the cursor at some line of code in your program. Having done that, you have to now go to <span class="strong"><strong>Run</strong></span> | <span class="strong"><strong>Run to Cursor</strong></span>, and PhpStorm will obediently (and politely) ask Xdebug to pause at the location where your cursor has been placed. This is just the same behavior it would have exhibited in the case of a regular breakpoint.</li><li class="listitem">There are three cases to be covered:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">One is when you have just started debugging your code; the execution will pause on the line you have specified.</li><li class="listitem" style="list-style-type: disc">Another is when you specified a breakpoint in your code, and the debugger has proceeded ahead of that breakpoint (obviously after pausing there), the debugger will again stop at the line you specified.</li><li class="listitem" style="list-style-type: disc">The third case is when you specify a line that will not be executed at all—if you have capsicum, you will not add tomato. In this case, the execution will continue past that line and move ahead to the next breakpoint or finish altogether.</li></ul></div><div class="mediaobject"><img src="graphics/3878OT_05_09.jpg" alt="How to do it..."/></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec152"/>How it works...</h2></div></div></div><p>The working of the magic is <a id="id360" class="indexterm"/>quite simple to understand. Just as there were temporary breakpoints that disappeared once hit, this <span class="strong"><strong>Run to Caret</strong></span> option functions in the same way. Thus, the line of code you place the cursor on becomes a temporary breakpoint, with the additional feature of being invisible. Thus, as soon as the breakpoint is hit once, it is automatically removed invisibly. If there is a line that will never be executed, the debugger simply ignores this location in the code and proceeds ahead.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note23"/>Note</h3><p>The keyboard shortcuts increase your speed. Use <span class="emphasis"><em>Alt</em></span> + <span class="emphasis"><em>F9</em></span> to be fast.</p></div></div></div></div>
<div class="section" title="Watching expressions and variables"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec70"/>Watching expressions and variables</h1></div></div></div><p>The most important utility of a debugger is that it actually provides you with X-Ray goggles with which you can see through opaque objects.</p><p>This phenomenon of <span class="emphasis"><em>see-ing</em></span> through the opaque object (call it execution) is known as <a id="id361" class="indexterm"/>
<span class="strong"><strong>watching</strong></span>. It is synonymous with real-world watching. Do you watch something? You constantly pay attention to what is happening around that something to watch it. Daddy says, "I will see you son," and across the globe irrespective of the location, the problem of the son getting worried arises. But is the PhpStorm watching feature expected to worry you?</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec153"/>How to do it...</h2></div></div></div><p>If you are determined to <a id="id362" class="indexterm"/>watch the whereabouts and howabouts of a variable, you<a id="id363" class="indexterm"/> can ask PhpStorm to do that for you. When you start debugging, in the debug window, there are three frames: <span class="strong"><strong>Frames</strong></span>, <span class="strong"><strong>Variables</strong></span>, and <span class="strong"><strong>Watches</strong></span> open by default. To add variables to the watch feature, there are two methods:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">If that variable appears in the list of variables covered up to that point, you can select the variable, access the right-click context menu, select the <span class="strong"><strong>Add to Watch</strong></span> option from the list. You will see that the watches section will have an added variable as this one.</li><li class="listitem" style="list-style-type: disc">If that variable does not appear in the list of variables, you do not need to worry. If you remember the name of the variable you suspect, you can add it directly to the list of variables under watch (in the <span class="strong"><strong>Watches</strong></span> window) by selecting the <span class="strong"><strong>+</strong></span> sign and adding the exact name of the variable in the textbox that appears, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/3878OT_05_10.jpg" alt="How to do it..."/></div></li></ul></div><p>PhpStorm also enables you to add expressions under watch in just the same way as it does for a variable. All you need to do is to write an expression in just the same way as you would have written inside the editor. PhpStorm will take care of the rest.</p></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec154"/>How it works...</h2></div></div></div><p>When a variable is put<a id="id364" class="indexterm"/> under watch, PhpStorm simply outputs the contents to <a id="id365" class="indexterm"/>the console, which happens to be a watch window. Thus, a variable put under watch is made to be visible at all times during the execution (debugging) of the program. If the variable value changes, the change is reflected immediately in the watch window. If the variable has gone out of scope during the execution, the content of the variable becomes <span class="strong"><strong>Cannot evaluate expression</strong></span>. So it might appear to you that the content is not available, even though the content is actually available. </p><p>The same is true for an expression as well. The IDE treats it as normal content and attempts to show the value at all times. Just as it used to happen in the case of a normal variable under watch, the expression evaluates to <span class="strong"><strong>Cannot evaluate expression</strong></span> if the expression contains a variable that is not covered in the current scope.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip23"/>Tip</h3><p>Please do remember to use the <span class="emphasis"><em>exact</em></span> name of the variable.</p></div></div></div></div>
<div class="section" title="Changing code on the fly"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec71"/>Changing code on the fly</h1></div></div></div><p>According to no survey, it has been <a id="id366" class="indexterm"/>established that most of the bugs in programming arise due to uncertainty in the type and value of data. The real utility of a debugger is apparent when you have the freedom to interfere with the data that is generated during the execution. Thus, you can actually change the value of variables that the interpreter has covered while you are fighting against bugs in your code.</p><p>This can be particularly useful in cases where you have to set the width of a text container, and you cannot be sure about the maximum width of the text container.</p><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec155"/>How to do it...</h2></div></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The <span class="strong"><strong>Debug</strong></span> view is your friend in this scenario. Focus on the <code class="literal">Variables</code> frame.</li><li class="listitem">To assign a value to a variable, select it from the list of variables available.</li><li class="listitem">Access the right-click context menu. Select the <span class="strong"><strong>Set Value</strong></span> option, and in the textbox that appears, provide some value. You are done immediately after pressing the return key.</li><li class="listitem">From now onwards, wherever this variable is accessed, it will assume this particular value. The keyboard shortcut to do this is provided by PhpStorm as <span class="emphasis"><em>F2</em></span>.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec156"/>How it works...</h2></div></div></div><p>By now, you must have <a id="id367" class="indexterm"/>easily guessed that the debugger sits between your code and the interpreter. Thus, when you assign a value to a variable, the debugger <span class="emphasis"><em>cheats</em></span> the interpreter by passing on the changed value as the original value. The interpreter, a poor blind creature, gets into this gotcha by assuming that the value is the one specified in the code and proceeds ahead using this value.</p><p>The world is not being trusted at all!</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note24"/>Note</h3><p>When you assign some value to a variable, it is not that the value will be fixed irrespective of the business logic. As soon as a condition where the variable will change its value is met, the change will occur normally as it would have occurred in the absence of the debugger.</p></div></div></div></div>
<div class="section" title="Code coverage in PhpStorm"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec72"/>Code coverage in PhpStorm</h1></div></div></div><p>Having set the platform to write clean code and to remove bugs from code to make good software, you must be thinking that your task is done, and you can now sit back and relax.</p><p>Not now! There's much more to do. Since you have promised that you will not tire and that you will not falter, you should have the fire burning within to proceed. This time, you are going to proceed with code coverage. Yes you read it right, code coverage.</p><p>This is the right time to get informed about this phenomenon now that you have working knowledge about a testing system (<span class="strong"><strong>PHPUnit</strong></span>)<a id="id368" class="indexterm"/> and a <a id="id369" class="indexterm"/>debugging system (<span class="strong"><strong>Xdebug</strong></span>). Code coverage is a phenomenon that is brought <a id="id370" class="indexterm"/>about by the combined functionality provided by<a id="id371" class="indexterm"/> PHPUnit and Xdebug. This means that you have to have both the systems installed on your development machine if you really want code coverage.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec157"/>Getting ready</h2></div></div></div><p>To solve matters such as these, there comes code coverage. No, no, don't think that code coverage will remove the unused lines—it will be <span class="emphasis"><em>you</em></span> who will remove them. Coverage will let you know from where to remove the unused lines. Thus, code coverage is a phenomenon by which you check which lines of code are covered in the execution and which lines are not. Questions are firing inside you—what is the role of PhpStorm in this then? When you do code coverage, you get a visual indication as to which lines are not covered. It is this PhpStorm feature that takes care of managing this visual indication to you.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec158"/>How to do it...</h2></div></div></div><p>Covering a PHP <a id="id372" class="indexterm"/>code again requires some PHP code. You have to<a id="id373" class="indexterm"/> code everything in this world! The simplest way to code is to write tests for a target class. The framework (PHPUnit) will try to cover the entire class. In this case, you have to do nothing new while writing the code, for the change occurs when you try to run the test.</p><p>There is an option available in PhpStorm which lets you run a test with coverage. To do that, you will need to perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">You need to select the test file and go to <span class="strong"><strong>Run | Run </strong></span><code class="literal">&lt;test&gt;</code><span class="strong"><strong> with Coverage</strong></span>, as shown in the following screenshot.</li><li class="listitem">The target file will be tested in the usual way, and the coverage for the entire file will also be taken care of.<div class="mediaobject"><img src="graphics/3878OT_05_11.jpg" alt="How to do it..."/></div></li><li class="listitem">However, suppose you want to cover a selected part of the code or a method, you can do that too. There is an annotation provided in PHPUnit with the name covers. Using this annotation, you can tell the PHP interpreter that you want to cover only a selected part of the target class.</li><li class="listitem">Thus, if you just want to test the <code class="literal">getDishName</code> method inside the (target) <code class="literal">PizzaDish</code> class, you can use something like the following code just before the <code class="literal">testGetDishName</code> method declaration in the <code class="literal">PizzaDishTest</code> class:<div class="informalexample"><pre class="programlisting">/**
  * @covers PizzaDish::getDishName
*/
public function testGetDishName(){
  $this-&gt;assertInternalType("string",
  $this-&gt;pizzaDish-&gt;getDishName());
}</pre></div></li><li class="listitem">There will be instances in your programming life when you will not want to do anything interesting. You will just bother testing code and not covering any code—you will just want to test. You have an option. There is an annotation available with the name <code class="literal">coversNothing</code>. This is a way to tell the PHPUnit framework "Ok mate, you will only do testing for me. Don't waste time in covering the code." Thus, you can write something like the following code:<div class="informalexample"><pre class="programlisting">/**
  * @coversNothing
*/
public function testGetInstance(){
  $this-&gt;assertInstanceOf('Dish', $this-&gt;pizzaDish- &gt;getInstance());
}</pre></div></li></ol></div><p>Having used the annotations, you successfully maneuvered the functioning of code coverage. Congratulations!</p></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec159"/>How it works...</h2></div></div></div><p>The <a id="id374" class="indexterm"/>annotations are special features in PHP that provide <a id="id375" class="indexterm"/>some information to the interpreter to do some work silently. So, when you write <code class="literal">@covers &lt;Classname&gt;::&lt;Method-name&gt;</code>, you are telling the interpreter to cover certain code in a target class. Similarly, when you write <code class="literal">@coversNothing</code>, the interpreter understands that it does not have to do coverage.</p><p>Thus, PhpStorm provides you a visual indication by coloring regions in your code with certain colors denoting coverage and miss. When you run the test with coverage, there is a coverage view in the right-hand bottom corner of the editor window, which is shown in the following screenshot. You can view the statistics for the code that has just been tested (for coverage as well).</p><div class="mediaobject"><img src="graphics/3878OT_05_12.jpg" alt="How it works..."/></div><p>You get <a id="id376" class="indexterm"/>visual indications as well. It is shown in the editor window of<a id="id377" class="indexterm"/> the target class (here <code class="literal">PizzaDish.php</code>, as shown in the following screenshot) the area with red color is uncovered.</p><div class="mediaobject"><img src="graphics/3878OT_05_13.jpg" alt="How it works..."/></div></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec160"/>There's more…</h2></div></div></div><p>Now we have learned code coverage in PhpStorm, it is time to see the purpose of code coverage.</p><div class="section" title="Purpose of code coverage"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec10"/>Purpose of code coverage</h3></div></div></div><p>Again, there's that <a id="id378" class="indexterm"/>same question in your mind: why do I need code coverage at all? The answer is not so obvious but is worth knowing about. You agreed that there were bugs in the code, so you used some debugging tool to find out and remove those bugs. You agreed that the algorithm you implemented went away at times, so you tested it and fixed it. But did you ever get a feeling that there might be unused lines in the code you have written? There might be lines that the interpreter will be unable to process, and there might be lines inside some conditions that are <span class="emphasis"><em>never</em></span> met. Who will take into account these and many other such cases? Another question that will come to your mind is "what is the harm in having an extra line of code when you can have lines of comment in the code?" The answer is here.</p><p>A comment<a id="id379" class="indexterm"/> is<a id="id380" class="indexterm"/> something that the interpreter does not bother about, but an active but unused line is something that it bothers about. It is just like moving around in your kitchen with a pistol tied around your waist after you have come back from a shooting session. Would you need a pistol inside your kitchen? Why are you carrying it with you then?</p></div></div></div></body></html>