- en: Chapter 1. Introduction and Shared Project Resources
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第一章. 引言和共享项目资源
- en: What is this chapter for? I hope to use this first chapter to act as a primer
    for all other chapters and projects in the book. I would like you to use the introduction
    as a common resource containing all of the resources shared by the projects in
    the book.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这一章的目的是什么？我希望用这一章作为本书所有其他章节和项目的入门指南。我希望你们将引言作为一个包含本书中所有项目共享资源的通用资源使用。
- en: The introduction will cover the installation of third-party software, libraries,
    helpers, and so on, that are required by the projects in the later chapters. By
    keeping these resources in this chapter, the projects aren't swamped with repetitive
    code and the project code can be kept as clean and concise as possible.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 引言将涵盖后续章节中项目所需的第三方软件、库、助手等安装内容。将这些资源放在这一章，可以避免项目被重复的代码淹没，并使项目代码尽可能保持简洁。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: An overview of the book
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本书概述
- en: Downloading CodeIgniter
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载CodeIgniter
- en: Downloading and installing Twitter Bootstrap
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载并安装Twitter Bootstrap
- en: Creating common header and footer files used for all projects
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建适用于所有项目的通用页眉和页脚文件
- en: Installing Sparks
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Sparks
- en: Common language items
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通用语言项
- en: Common resources
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通用资源
- en: The common resources used in this book are discussed in upcoming sections.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本书使用的通用资源将在接下来的章节中讨论。
- en: Twitter Bootstrap
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Twitter Bootstrap
- en: Every project in the chapters in this book uses Twitter Bootstrap. We will download
    Bootstrap and find a good place for it in our filesystem. We will then create
    the header and the footer files. All projects in the book will call these header
    and footer files (using the CodeIgniter function `$this->load->view()` to display
    views). However, these projects will not actually contain the code for the header
    and footer—only the *working* code between the header and footer (what you might
    think of as the stuff in between the `<body>` and `</body>` tags) will be detailed
    in each project.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本书每一章中的项目都使用Twitter Bootstrap。我们将下载Bootstrap，并在我们的文件系统中找到一个合适的位置。然后我们将创建页眉和页脚文件。本书中的所有项目都将调用这些页眉和页脚文件（使用CodeIgniter函数`$this->load->view()`来显示视图）。然而，这些项目实际上并不包含页眉和页脚的代码——只有页眉和页脚之间的*有效*代码（你可能认为是在`<body>`和`</body>`标签之间的内容）将在每个项目中详细说明。
- en: Headers and footers
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 页眉和页脚
- en: The menus will be different for individual projects. In the header file, we
    will include the code to display the menu, but the actual HTML contents for the
    menu will be included in each project's chapter. The footer file contains the
    closing HTML markup for each page.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 各个项目的菜单将有所不同。在页眉文件中，我们将包含显示菜单的代码，但实际的菜单HTML内容将包含在每个项目的章节中。页脚文件包含每个页面的关闭HTML标记。
- en: Downloading CodeIgniter
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载CodeIgniter
- en: We'll need a copy of CodeIgniter to start with. This book isn't really aimed
    at the beginner, so the chances are reasonably high that you already have a copy
    of CodeIgniter installed or at least know your way around enough to skip this
    part; however, it does make sense to briefly go through the installation of CodeIgniter
    so that we have something to talk about in later chapters!
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一份CodeIgniter的副本来开始。这本书并不是针对初学者的，所以你已经有CodeIgniter安装副本或者至少足够了解如何跳过这一部分的可能性相当高；然而，简要地介绍CodeIgniter的安装是有意义的，这样我们就可以在后续章节中有所讨论！
- en: First things first, go to [https://ellislab.com/codeigniter/user-guide/installation/downloads.html](https://ellislab.com/codeigniter/user-guide/installation/downloads.html).
    You'll see something similar to what is shown in the following screenshot. This
    is the CodeIgniter download page. At the time of writing, the current CodeIgniter
    version is 2.2.0; this is why the screenshot says **Current version** next to
    version 2.2.0; however, whichever version is the latest when you're reading this
    book is the version you want to use.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，访问[https://ellislab.com/codeigniter/user-guide/installation/downloads.html](https://ellislab.com/codeigniter/user-guide/installation/downloads.html)。你会看到以下截图所示的内容。这是CodeIgniter下载页面。在撰写本文时，当前的CodeIgniter版本是2.2.0；这就是为什么截图在2.2.0版本旁边写着**当前版本**；然而，无论你在阅读本书时哪个版本是最新的，你都应该使用这个版本。
- en: Click on the **Current version** link, and CodeIgniter will begin to download.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**当前版本**链接，CodeIgniter将开始下载。
- en: '![Downloading CodeIgniter](img/7093OS_01_01.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![下载CodeIgniter](img/7093OS_01_01.jpg)'
- en: Once it's downloaded, navigate to where you have saved the file; this will be
    a compressed archive. Unpack it and move the contents of that file to a folder
    within your web root.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，导航到您保存文件的位置；这将是一个压缩归档文件。解压缩它并将该文件的内容移动到您的网络根目录下的一个文件夹中。
- en: Specific details of routing, configuration, and database use are in each chapter
    (these details are specific to that particular chapter).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 关于路由、配置和数据库使用的具体细节在每个章节中都有（这些细节特定于该章节）。
- en: CodeIgniter on newer versions of PHP
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: PHP的新版本
- en: 'You may experience errors if you run CodeIgniter on newer versions of PHP.
    There is a hack for this that is explained at [https://ellislab.com/forums/viewthread/244510/](https://ellislab.com/forums/viewthread/244510/).
    A poster called *milan.petrak* has described a work around. It can be summed up
    as follows:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在PHP的新版本上运行CodeIgniter，可能会遇到错误。有一个针对此问题的解决方案，在[https://ellislab.com/forums/viewthread/244510/](https://ellislab.com/forums/viewthread/244510/)上有解释。一个名为*milan.petrak*的帖子作者描述了一个解决方案。可以总结如下：
- en: Open the `/path/to/codeigniter/system/core/common.php` file and find the line
    257.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开`/path/to/codeigniter/system/core/common.php`文件并找到第257行。
- en: 'Find the following line:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到以下行：
- en: '[PRE0]'
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Save the `common.php` file.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存`common.php`文件。
- en: This will likely be permanently fixed in later releases of CodeIgniter, but
    for now, this is the fix.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能在CodeIgniter的后续版本中得到永久修复，但到目前为止，这是修复方法。
- en: Installing Twitter Bootstrap
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Twitter Bootstrap
- en: Twitter Bootstrap is a frontend HTML5 framework that allows anyone to easily
    construct reliable interfaces. At the time of writing, the version of Bootstrap
    used is version 3.1.1.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: Twitter Bootstrap是一个前端HTML5框架，它允许任何人轻松构建可靠的界面。在撰写本文时，所使用的Bootstrap版本是3.1.1。
- en: We will use Twitter Bootstrap throughout this book to provide the framework
    for all view files and templates. We will look at how to download Twitter Bootstrap
    and how to install it in the CodeIgniter filesystem.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本书中使用Twitter Bootstrap为所有视图文件和模板提供框架。我们将探讨如何下载Twitter Bootstrap以及如何在CodeIgniter文件系统中安装它。
- en: 'Firstly, we will need to download the Twitter Bootstrap files. To do that,
    perform the following steps:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要下载Twitter Bootstrap文件。为此，请执行以下步骤：
- en: Open your web browser and go to the Bootstrap download link at [http://getbootstrap.com/getting-started](http://getbootstrap.com/getting-started).
    You'll see something similar to what is shown in the following screenshot:![Installing
    Twitter Bootstrap](img/7093OS_01_02.jpg)
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您的网络浏览器，并访问Bootstrap下载链接[http://getbootstrap.com/getting-started](http://getbootstrap.com/getting-started)。您将看到以下截图所示的内容：![安装Twitter
    Bootstrap](img/7093OS_01_02.jpg)
- en: Find the **Download Bootstrap** link and click on it (as indicated in the preceding
    screenshot); the download will start automatically.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到**下载Bootstrap**链接并点击它（如前一个截图所示）；下载将自动开始。
- en: 'Once the download is finished, go to its location on your machine and unpack
    the archived file. Inside the unpacked file, you should see something similar
    to what is shown in the following structure:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，转到您的机器上的位置并解压缩归档文件。在解压缩的文件中，您应该看到以下结构类似的内容：
- en: '[PRE1]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Move the `bootstrap` folder to your CodeIgniter installation so that the file
    hierarchy looks like the following:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 将`bootstrap`文件夹移动到您的CodeIgniter安装中，以便文件层次结构看起来如下：
- en: '[PRE2]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: In the preceding tree structure, the `application` and `system` directories
    are to do with CodeIgniter, as are the `index.php` and `license.txt` files; however,
    the `bootstrap` directory contains the contents of your Bootstrap download.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的树结构中，`application`和`system`目录与CodeIgniter有关，同样，`index.php`和`license.txt`文件也是如此；然而，`bootstrap`目录包含您Bootstrap下载的内容。
- en: I have also indicated the location of the common `header.php` and `footer.php`
    files. These files are used throughout the book and act as a wrapper for every
    other view file.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我还指出了常见`header.php`和`footer.php`文件的位置。这些文件在本书中到处使用，并作为其他每个视图文件的包装器。
- en: Removing index.php from the address bar
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从地址栏移除index.php
- en: 'It is possible to remove `index.php` from the web browser address bar when
    CodeIgniter is running. This can be done by following these steps:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 当CodeIgniter运行时，可以从网络浏览器地址栏中移除`index.php`。这可以通过以下步骤完成：
- en: 'Create or open a `.htaccess` file. If a `.htaccess` file does not already exist,
    you can create one using the following:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建或打开一个`.htaccess`文件。如果尚未存在`.htaccess`文件，您可以使用以下方法创建一个：
- en: '**Linux/Mac**: Open a terminal window and type the following:'
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Linux/Mac**：打开一个终端窗口并输入以下命令：'
- en: '[PRE3]'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '**Windows**: Create a text file in your CodeIgniter root, naming it `file.htaccess`.
    Hold down the Windows key and then press *R* to open the **Run** dialogue. Enter
    the following command and click on **OK**:'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows**：在你的 CodeIgniter 根目录中创建一个文本文件，命名为 `file.htaccess`。按住 Windows 键，然后按
    *R* 打开 **运行** 对话框。输入以下命令并点击 **确定**：'
- en: '[PRE4]'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Once your `.htaccess` file is opened, write the following lines at the top
    of the file:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦打开 `.htaccess` 文件，请在文件顶部写入以下行：
- en: '[PRE5]'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Installing and using Sparks
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装和使用 Sparks
- en: 'For a long time, you had to search the Internet and download code from various
    places—blogs, code repositories, and so on—to find and use extensions, libraries,
    and other useful snippets of code for CodeIgniter. Useful installations for CodeIgniter
    were spread across the Internet; as such, they might have been hard to locate.
    Sparks acts as a single point of reference for extensions of CodeIgniter. It''s
    simple to install and use and contains thousands of useful add-ons for CodeIgniter:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 很长时间以来，你必须在网上搜索并从各种地方下载代码——博客、代码仓库等等——以找到和使用扩展、库以及其他有用的代码片段。有用的 CodeIgniter
    安装散布在互联网上；因此，它们可能很难找到。Sparks 作为 CodeIgniter 扩展的单一点参考。安装和使用都很简单，并包含数千个有用的 CodeIgniter
    扩展：
- en: 'If you are using a Mac or Linux, then the command-line interface is open to
    you. Using the terminal application on your system, navigate to the root of your
    CodeIgniter application and enter the following line:'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你正在使用 Mac 或 Linux，那么命令行界面对你来说是开放的。使用系统上的终端应用程序，导航到你的 CodeIgniter 应用程序的根目录，并输入以下行：
- en: '[PRE6]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'If your installation was successful, you should see something similar to the
    following:'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你的安装成功，你应该会看到以下类似的内容：
- en: '[PRE7]'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If you are using Windows, then you will need to download Sparks and unpack
    it manually; to do that, follow these instructions or check out the instructions
    on the GetSparks website for the latest version:'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你正在使用 Windows，那么你需要手动下载并解压 Sparks；为此，请遵循以下说明或查看 GetSparks 网站上的最新版本说明：
- en: Create a folder called `tools` in the top level (root) or in your CodeIgniter
    directory.
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在顶级（根目录）或你的 CodeIgniter 目录中创建一个名为 `tools` 的文件夹。
- en: Go to [http://getsparks.org/install](http://getsparks.org/install).
  id: totrans-59
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往 [http://getsparks.org/install](http://getsparks.org/install)。
- en: Go to the **Normal Installation** section and download the Sparks package.
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往 **常规安装** 部分，下载 Sparks 包。
- en: Unpack the download into the `tools` folder you created in step 1.
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将下载的文件解压到你在步骤 1 中创建的 `tools` 文件夹中。
- en: Download the Loader class extension from [http://getsparks.org/static/install/MY_Loader.php.txt](http://getsparks.org/static/install/MY_Loader.php.txt).
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 [http://getsparks.org/static/install/MY_Loader.php.txt](http://getsparks.org/static/install/MY_Loader.php.txt)
    下载 Loader 类扩展。
- en: Rename the file `MY_Loader.php.txt` to `MY_Loader.php` and move it to the `application/core/MY_Loader.php`
    location in your CodeIgniter instance.
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将文件 `MY_Loader.php.txt` 重命名为 `MY_Loader.php`，并将其移动到你的 CodeIgniter 实例中的 `application/core/MY_Loader.php`
    位置。
- en: Now that Sparks is installed in your CodeIgniter instance, you can begin to
    install extensions and packages.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，Sparks 已安装在你的 CodeIgniter 实例中，你可以开始安装扩展和包。
- en: 'To install a package from Sparks, type the following in the command-line window:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 要从 Sparks 安装包，请在命令行窗口中输入以下内容：
- en: '[PRE8]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Here, `Package Version` is the specific version of the Spark you wish to install.
    You are not required to state the version and, if you it out, Sparks will download
    the latest version by default. `Spark Name` is the name of the Spark you wish
    to install; for example, to install `example-spark` (version 1.0.0), which comes
    with the default installation, type the following in the command-line window:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，`Package Version` 是你希望安装的 Spark 的特定版本。你不需要声明版本，如果你不指定，Sparks 将默认下载最新版本。`Spark
    Name` 是你希望安装的 Spark 的名称；例如，要安装默认安装中包含的 `example-spark`（版本 1.0.0），在命令行窗口中输入以下内容：
- en: '[PRE9]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'If the installation was successful, you should see something similar to the
    following:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如果安装成功，你应该会看到以下类似的内容：
- en: '[PRE10]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Creating a shared header and footer view
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建共享的头部和尾部视图
- en: 'Every project throughout this book will use the common header and footer files
    that we will create here; navigation menus will be different for each project
    and, as such, we will build these in the project''s chapter themselves. But for
    now, let''s look at the common header and footer files:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的每个项目都将使用我们在这里创建的通用头部和尾部文件；导航菜单将因每个项目而异，因此我们将在这本书的项目章节中构建这些文件。但现在，让我们看看通用的头部和尾部文件：
- en: 'Create the `header.php` file at `/path/to/codeigniter/application/views/common/`
    and add the following code to it:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `/path/to/codeigniter/application/views/common/` 创建 `header.php` 文件，并将以下代码添加到其中：
- en: '[PRE11]'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The preceding view file contains the HTML for the head of a document. This is
    to say that this HTML is used throughout the book for every project, and it contains
    the HTML markup for everything from the opening `html` tag, opening and closing
    `head` tags, and the opening `body` tag.
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前面的视图文件包含文档头部部分的 HTML。也就是说，这个 HTML 在本书的每个项目中都会使用，它包含了从打开的 `html` 标签、打开和关闭 `head`
    标签，到打开 `body` 标签的 HTML 标记。
- en: 'Create the `footer.php` file at `/path/to/codeigniter/application/views/common/`
    and add the following code to it:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `/path/to/codeigniter/application/views/common/` 创建 `footer.php` 文件，并将以下代码添加到其中：
- en: '[PRE12]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The preceding block of code contains the HTML markup for the footer view file
    used for every project throughout this book.
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前面的代码块包含用于本书中每个项目的视图文件的 HTML 标记。
- en: Common language items
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通用语言项
- en: In each project throughout the book, we will create a specific language file
    containing specific language items that are relevant to that particular project.
    However, there are also common language elements that we won't repeat in each
    project (as there's no need); thus, we can have them here instead.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的每个项目中，我们将创建一个特定的语言文件，包含与该特定项目相关的特定语言项。然而，也有一些通用语言元素，我们不会在每个项目中重复（因为没有必要）；因此，我们可以在这里使用它们。
- en: The language items mostly cover screen elements such as general navigation,
    general error and success messages, and CRUD actions (edit, delete, and so on).
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 语言项主要涵盖屏幕元素，如一般导航、一般错误和成功消息，以及 CRUD 操作（编辑、删除等）。
- en: With that in mind, let's go ahead and create the base language file that will
    serve as a template for the chapters in this book.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这一点，让我们继续创建基础语言文件，它将作为本书各章节的模板。
- en: 'Create the `en_admin_lang.php` file at `/path/to/codeigniter/application/language/english/`
    and add the following code to it:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `/path/to/codeigniter/application/language/english/` 创建 `en_admin_lang.php`
    文件，并将以下代码添加到其中：
- en: '[PRE13]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The preceding language items are mostly for HTML forms and tables of data, such
    as the text for the Submit, Edit, Delete, and History buttons. Also included are
    general error or success messages. Feel free to add to them if you wish.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的语言项主要是针对 HTML 表单和数据表，例如提交、编辑、删除和历史按钮的文本。还包括一般的错误或成功消息。如果您愿意，可以随意添加。
- en: Creating the MY_Controller file
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 MY_Controller 文件
- en: All projects in this book make use of the `MY_Controller` file; this is the
    same for all projects.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的所有项目都使用 `MY_Controller` 文件；这对所有项目都是一样的。
- en: 'Create the `MY_Controller.php` file at `/path/to/codeigniter/application/core/`
    and add the following code to it:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `/path/to/codeigniter/application/core/` 创建 `MY_Controller.php` 文件，并将以下代码添加到其中：
- en: '[PRE14]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: As you can see, we load helpers that are common to all projects, such as the
    `form` helper and the `language` helper, among others. The language file is also
    loaded here.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，我们加载了适用于所有项目的通用助手，例如 `form` 助手和 `language` 助手，以及其他一些助手。语言文件也在这里加载。
- en: All the controllers in the project extend from this `MY_Controller` file rather
    than the default `CI_Controller` file.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 项目中的所有控制器都扩展自这个 `MY_Controller` 文件，而不是默认的 `CI_Controller` 文件。
- en: Autoloading common system resources
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动加载通用系统资源
- en: We also are autoloading various resources such as support for database access
    and session management. We need to specify that we're using these resources.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还自动加载了各种资源，例如数据库访问和会话管理支持。我们需要指定我们正在使用这些资源。
- en: 'Open the `autoload.php` file from `/path/to/codeigniter/application/config/`
    in your text editor and find the following line:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的文本编辑器中打开位于 `/path/to/codeigniter/application/config/` 的 `autoload.php` 文件，并找到以下行：
- en: '[PRE15]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Replace this line with the following:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 将此行替换为以下内容：
- en: '[PRE16]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: This will ensure that the resources that are required in order to access the
    database and to manage sessions are always with us.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 这将确保访问数据库和管理会话所需的资源始终在我们身边。
- en: Security considerations
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全考虑
- en: Whatever you are programming, your two main priorities are security and maintainability;
    this is to say that your application should be as secure as is necessary and should
    be written in such a way that someone else can easily program and extend on what
    you're doing. I can't discuss maintainability—that's up to you—but I can give
    you guidance on CodeIgniter and security.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: However, I should say that no security is 100 percent foolproof. Even banks
    and security agencies that spend hundreds of millions on systems still get hacked,
    so what chance do we have? Well, the best we can do is try to reduce the opportunity
    that someone might do something that could compromise our code or database.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: Moving the system folder
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You should move your system folder out of your web root. This is to make it
    as hard as possible for anything other than the web server to access. Take a look
    at the line in the main `index.php` file:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Make sure that you amend the preceding line to this:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: So, if we moved the `system` folder out of the web root one level higher, we
    would use the`../` convention, prepending it to `system`.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: Error messages
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Obviously you don't want to actually display error messages to the outside world.
    Over time, everyone will gain an understanding of the architecture of your site
    and where its weaknesses are, especially if you allow SQL errors to be displayed
    in a production environment.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: For this reason, you should change the environment variable in the main `index.php`
    file from `development` to `production`. This will suppress the reporting errors;
    404 and 500 errors will still be caught and displayed normally but SQL errors
    and other similar errors will be suppressed.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: 'For this, look at the following code in the `index.php` file:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Look at the line in bold (the first line). This line has set CodeIgniter to
    run in development mode; to change to anything else (specifically, a live mode),
    change the line in bold to the following:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: All errors will now be suppressed.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: Query binding
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Query binding is a good idea; it makes your queries easier to read; queries
    that use the CodeIgniter binding are automatically escaped, leading to more secure
    queries. The syntax is simple; for example, consider the following query:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Look at the end of the query; you can see that we use a question mark where
    we would normally use a variable; this is something that would normally look like
    this:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'How does CodeIgniter know what the question mark means, and how does CodeIgniter
    put the correct value in the query? Take a look at this second line:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: This is how it matches the value to the correct question mark. We use the `$this->db->query()`CodeIgniter
    function, passing to it two arguments. The first is the `$query` variable (containing
    the actual query), and the second is an array. Each position in the array matches
    the position of the question marks in the SQL string.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now, you will discover that we are ready to start the book and are all set to
    tackle each chapter.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: Remember that the code for each chapter is available at the Packt website, as
    is the SQL for each chapter; this will save you from having to type in all this
    stuff.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，每个章节的代码以及每个章节的SQL都可以在Packt网站上找到；这将帮助你避免需要手动输入所有这些内容。
