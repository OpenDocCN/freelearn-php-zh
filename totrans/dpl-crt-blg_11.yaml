- en: Appendix A. Deployment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录A. 部署
- en: The big day has finally arrived! By the end of this appendix your site will
    be live, and only a few minor deployment issues now stand in between you and your
    online aspirations. *Actually that's not quite true!* I should make it clear that
    there's nothing particularly complex about deployment; it's just that you need
    to keep on top of a lot of different issues. Making silly errors at this stage
    can have dramatic effects on the final product because we are dealing mainly with
    configuration issues when we deploy a fully developed application. Of course,
    making errors is not the end of the world, because we are going to test everything
    very thoroughly.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 那一天终于到来了！到附录结束时，你的网站将上线，现在只存在一些微小的部署问题，阻碍着你实现在线抱负。*实际上并不完全是这样！*我应该明确指出，部署并没有什么特别复杂的地方；只是你需要密切关注许多不同的问题。在这个阶段犯愚蠢的错误可能会对最终产品产生重大影响，因为我们主要在部署一个完全开发的应用程序时处理配置问题。当然，犯错误并不是世界末日，因为我们将会非常彻底地测试一切。
- en: At first glance, deploying a site like Drupal has got to be pretty easy—it's
    just a case of copying the `drupal` folder over to the new server! *Or is it?*
    There are a number of concerns that go hand in hand with ensuring everything goes
    smoothly during the transfer. For example, the database will also have to be rebuilt
    exactly as it is on the development machine—I'm sure that since most of you have
    spent some time configuring everything and populating tables, you'll be anxious
    to not have to do everything all over again. Apart from this, there are the connection
    parameters and some security issues to think about.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 初看之下，部署一个像Drupal这样的网站似乎很简单——只需将`drupal`文件夹复制到新服务器上！*或者不是吗？*在确保传输过程中一切顺利的过程中，有许多问题需要考虑。例如，数据库也需要按照开发机器上的样子完全重建——我相信你们中的大多数人已经花费了一些时间来配置一切并填充表格，你们肯定不愿意再次从头开始做所有的事情。除此之外，还有连接参数和一些安全问题需要考虑。
- en: 'Specifically, the appendix looks at how to:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，附录探讨了如何：
- en: Get everything ready for deployment
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为部署做好准备
- en: Transfer the files to their new home
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将文件转移到新家
- en: Set up the site, including the database
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置网站，包括数据库
- en: Test everything thoroughly
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仔细测试一切
- en: Chins up, we're nearly at the end; and it hasn't been all that bad, has it?
    I for one will no doubt start my very own blog—it's really tempting!
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 抬起头来，我们几乎就要结束了；这并没有那么糟糕，对吧？我无疑会开始我的个人博客——这真的很诱人！
- en: Getting Ready to Deploy
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备部署
- en: First thing's first; *are you sure you are completely happy with the site as
    it is?* While it is not a huge problem to make modifications to your site after
    deployment, there is no point in making things hard for yourself by having to
    recode some pages or make design changes then, when you can get them done now.
    If everything is in order, then we can begin with the preparation process.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，最重要的是；*你确定你对现在的网站完全满意吗？*虽然部署后对网站进行修改并不是什么大问题，但如果你现在就能完成这些工作，那么没有必要让自己在之后不得不重新编码某些页面或进行设计更改，从而给自己制造麻烦。如果一切就绪，那么我们可以开始准备过程。
- en: Preparation comes in three stages. In no particular order, we need to ensure
    that we have a nice, clean, working version of the site, a nice, clean, working
    copy of the database, and finally, a nice, clean file system ready for the files
    on the host site. Let's take a look at how this is done.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 准备工作分为三个阶段。不分先后顺序，我们需要确保我们有一个良好、干净、可工作的网站版本，一个良好、干净、可工作的数据库副本，最后，一个良好、干净的文件系统，为托管网站上的文件做好准备。让我们看看这是如何完成的。
- en: Make Sure the Host Is Ready
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 确保主机已准备好
- en: 'Intuitively enough, you have to make sure you have an adequate host. By this
    I mean you have a host on which you can *create a MySQL database*, and that allows
    *access to a file system*, and whatever other goodies you think you may need.
    To make your life easy, it is also nice to have an FTP account available so that
    you can transfer files across to the host file system. More often than not, you
    should be able to log on to your FTP account with your administrator''s username
    and password automatically. If you''re not sure what all this is about, then try
    the following URL in your browser (assuming your browser supports FTP):'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 足够直观的是，你必须确保你有一个足够的主机。我的意思是，你有一个可以在上面创建MySQL数据库的主机，并且允许访问文件系统，以及你可能需要的任何其他好东西。为了使你的生活更轻松，有一个FTP账户可供使用，以便你可以将文件传输到主机文件系统也是一件好事。通常情况下，你应该能够使用管理员的用户名和密码自动登录到你的FTP账户。如果你不确定这一切是什么，那么在你的浏览器中尝试以下URL（假设你的浏览器支持FTP）：
- en: '`ftp://ftp.your_domain_name.com`'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '`ftp://ftp.your_domain_name.com`'
- en: 'If you are prompted for a password or are shown the contents of your home directory,
    then congratulations, you have an FTP account. If you don''t have one, then you
    should consider getting your host to give you one, or finding out from them how
    they upload files. Incidentally, instead of being prompted for your username and
    password every time you use your FTP account, you might want to send them in the
    URL, like so:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你被提示输入密码或者看到了你的主目录内容，那么恭喜你，你有一个 FTP 账户。如果你没有，那么你应该考虑让你的主机给你一个，或者向他们询问如何上传文件。顺便说一句，每次你使用
    FTP 账户时，不必每次都提示你的用户名和密码，你可以将它们放在 URL 中，如下所示：
- en: '`ftp://username:password@hostname/`'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '`ftp://username:password@hostname/`'
- en: 'If you''re worried about security (by this I mean: you *are* worried about
    security), then it''s best to leave out the password and simply pass the username,
    because otherwise this can cause security problems if URLs are logged in a non-secure
    place. Remember that this information is already being passed in an unencrypted
    format. If you wish to do everything securely, you should speak to your host about
    how to secure file transfers.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你担心安全问题（我指的是：你确实在担心安全问题），那么最好省略密码，只传递用户名，因为否则如果 URL 在不安全的地方被记录，这可能会引起安全问题。记住，这些信息已经以未加密的格式传递。如果你希望安全地完成所有操作，你应该与你的主机讨论如何安全地传输文件。
- en: If you don't have access to an FTP account, then don't panic! Read the section
    entitled *Transfer the Files* a little later on in this appendix—it will still
    be easy to move your files to the host site.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有 FTP 账户的访问权限，那么不要慌张！稍后在这个附录中阅读名为 *Transfer the Files* 的部分——仍然可以轻松地将你的文件移动到主机站点。
- en: Once you have made sure that there is somewhere to upload the Drupal files to,
    and something to do it with, you need to create a database. Goodness only knows
    how many different ways this can be done in; so we won't go into each and every
    one here.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你确认了有地方可以上传 Drupal 文件，并且有东西可以用来上传，你需要创建一个数据库。天知道这有无数种不同的方法可以做到；所以我们不会在这里详细介绍每一种方法。
- en: 'Take a look at your site''s administrative interface and see if there is a
    section that allows you to create and control your MySQL database (you might find
    that your host provides our good friend phpMyAdmin). For example, the demo site''s
    host has the following **Manage Mysql** link in the **Databases** section that
    provides an interface used to create databases. It also provides phpMyAdmin in
    order to administer those databases:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 查看你的站点管理界面，看看是否有允许你创建和控制你的 MySQL 数据库的部分（你可能发现你的主机提供了我们的好朋友 phpMyAdmin）。例如，演示站点的宿主在
    **Databases** 部分有一个 **Manage Mysql** 链接，它提供了一个用于创建数据库的界面。它还提供了 phpMyAdmin 以管理这些数据库：
- en: '![Make Sure the Host Is Ready](img/1800_0A_01.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![确保主机已准备好](img/1800_0A_01.jpg)'
- en: 'Clicking on the **Manage MySQL** link brings up the following page. Once you
    have the database, ensure that you have made note of its name—often hosts will
    append something to the name you choose as shown here in the demo site''s database
    creation interface:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 点击 **Manage MySQL** 链接会弹出以下页面。一旦你有了数据库，确保你已经记下了它的名字——通常主机会在你选择的名字后面添加一些内容，就像在这个演示站点数据库创建界面中所示：
- en: '![Make Sure the Host Is Ready](img/1800_0A_02.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![确保主机已准备好](img/1800_0A_02.jpg)'
- en: 'As you can see, the database has been called **contechj_contechst**, where
    **contechst** is the name I chose for the live database, and **contechj_** is
    the part that was added. Before we continue, it is important to note that this
    database needs a user, so ensure that it has one, as shown here:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，数据库被命名为 **contechj_contechst**，其中 **contechst** 是我为实时数据库选择的名字，而 **contechj_**
    是添加的部分。在我们继续之前，重要的是要注意这个数据库需要一个用户，所以确保它有一个，如下所示：
- en: '![Make Sure the Host Is Ready](img/1800_0A_03.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![确保主机已准备好](img/1800_0A_03.jpg)'
- en: In this case, the **contechst** database now has the user **contechj_david**,
    and with that, the host site is pretty much ready to receive the new Drupal website.
    Remember, these usernames, passwords, and database names are all important for
    the configuration of the site, so ensure that you don't forget any of them. If
    you get stuck, get help from your host's support team; that's what they are there
    for.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，**contechst** 数据库现在有用户 **contechj_david**，有了这个，主机站点基本上已经准备好接收新的 Drupal
    网站。记住，这些用户名、密码和数据库名称对于网站的配置都很重要，所以确保你不会忘记任何一个。如果你遇到困难，请向你的主机支持团队寻求帮助；他们就是为此而存在的。
- en: Get the Files Ready
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备文件
- en: Before you do anything, you will need to make a master copy of the site before
    deployment. Make sure you zip up and store the exact version of the `drupal` directory
    that you send across.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行任何操作之前，您需要在部署之前制作一个站点的主副本。确保您将发送的`drupal`目录的精确版本压缩并存储起来。
- en: Note
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: At the moment the target URL for the Drupal index page will be something like
    [http://www.domain_name.com/drupal/](http://www.domain_name.com/drupal/). If you
    want it to be [http://www.domain_name.com/](http://www.domain_name.com/), then
    you will need to zip the files without the parent directory so that files are
    extracted directly to the `public_html` folder on the live site.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，Drupal索引页的目标URL将类似于[http://www.domain_name.com/drupal/](http://www.domain_name.com/drupal/)。如果您希望它是[http://www.domain_name.com/](http://www.domain_name.com/)，那么您需要不包含父目录地压缩文件，以便文件直接提取到现场网站的`public_html`文件夹中。
- en: While we are on the subject, you may as well clean up the Drupal file system
    properly so that you don't end up saving erroneous files.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们谈论这个话题时，您不妨将Drupal文件系统彻底清理干净，这样您就不会保存错误的文件。
- en: If you're like me, then you probably create backups of all the files you modify
    as you work. As far as Windows machines go, these are denoted by `.bak`, and placed
    in the same folder as the original file. Make a backup of your `drupal` folder
    before deleting anything, just to be safe. Then remove all backup files from the
    `drupal` folders.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您像我一样，那么您可能在工作过程中创建了所有修改过的文件的备份。对于Windows机器来说，这些备份文件以`.bak`结尾，并放置在原始文件的同一文件夹中。在删除任何内容之前，备份您的`drupal`文件夹，以确保安全。然后从`drupal`文件夹中删除所有备份文件。
- en: While it might seem a bit excessive to do this at the moment, there are a couple
    of good reasons for it. First, having any sort of unused files lying around on
    your host file system is poor security practice. Second, *why clutter up your
    brand-new installation with files you don't need?* You will find that it is a
    constant battle to keep everything neat and tidy as you go anyway—so start as
    you mean to go on. Finally, if you have worked on a lot of files over the course
    of the development phase, you are adding a lot of unnecessary size to the upload.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然现在做这件事可能看起来有点过度，但有几个很好的理由。首先，在您的托管文件系统中保留任何类型的未使用文件都是不安全的做法。其次，*为什么要在您不需要的文件中弄乱您全新的安装呢？*您会发现，无论如何，保持一切整洁有序都是一场持续的战斗——所以从您打算开始的地方开始。最后，如果您在开发阶段处理了大量文件，您正在为上传添加很多不必要的尺寸。
- en: Note
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For security reasons, you should probably move your `CHANGELOG.txt` file and
    `update.php` files to a different location—take them out of the website and hold
    them elsewhere, where hackers can't get hold of them. If you need to make use
    of the `update.php` script, then you can add it back to the site then.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 由于安全原因，您可能需要将`CHANGELOG.txt`文件和`update.php`文件移动到不同的位置——将它们从网站中移除并保存在其他地方，这样黑客就无法获取它们。如果您需要使用`update.php`脚本，那么您可以在那时将其添加回网站。
- en: Next, open up the configuration file, `settings.php`, and remove the username
    and password. As you can probably deduce, the current database name and password
    will change to the ones you set when you created a new database on your host (if
    they're not the same), but there is no point in transferring any type of sensitive
    information like this—especially since people often prefer to use the same username
    and password for a variety of things.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，打开配置文件`settings.php`，删除用户名和密码。正如您可能推断的那样，当前的数据库名称和密码将更改为您在主机上创建新数据库时设置的名称和密码（如果它们不相同），但转移任何类型的敏感信息都没有意义——尤其是当人们通常更喜欢为各种事情使用相同的用户名和密码时。
- en: Once this is done, you have to wait until the next section to add one more file
    and you can then make a master, zipped copy of your Drupal site—call it RTP (Release
    to Public) or something similar to distinguish it from other versions.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些后，您必须等待直到下一部分，然后添加一个额外的文件，您就可以制作一个主副本，压缩您的Drupal站点——可以称之为RTP（发布给公众）或类似的名称，以区分其他版本。
- en: If you are working on a Linux box, you can **tar** and **gzip** your files if
    you wish—it will obviously help with the upload time. If you are developing on
    Windows, then you might want to make sure that your host can unzip `.zip` files
    since they will more than likely be using a Linux server—there shouldn't be a
    problem, however. In the unlikely event that there is, the best thing to do is
    download and install a gzip utility for Windows at[http://www.gzip.org/](http://www.gzip.org/)
    , which you can then use to zip up your files in the `.gz` format.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在一个Linux盒子上工作，如果你愿意，可以使用**tar**和**gzip**压缩你的文件——这显然有助于上传时间。如果你在Windows上开发，那么你可能想确保你的主机可以解压`.zip`文件，因为它们很可能使用Linux服务器——不应该有问题。在极不可能的情况下，最好的做法是下载并安装Windows上的gzip实用程序，可以在[http://www.gzip.org/](http://www.gzip.org/)找到，然后你可以使用它将文件压缩成`.gz`格式。
- en: Get the Database Ready
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备数据库
- en: As it stands, the database might hold plenty of silly posts which you used for
    testing, or it may hold a few important pages. There's no hard and fast rule here;
    just try not to transfer over a whole lot of stuff that you will end up deleting
    straight away anyway.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 目前为止，数据库可能包含大量用于测试的愚蠢帖子，或者可能包含一些重要的页面。这里没有硬性规定；只是尽量不要传输太多你最终会立即删除的东西。
- en: Talking of backups, that is really the main point of this section. In order
    to deploy the database, you will need to make a backup of it. It is this backup
    file that is then transferred across to the host site and used to create a new
    database there. Since you already have all the information you need regarding
    backups, we need look at them no further here.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 谈到备份，这确实是本节的主要目的。为了部署数据库，你需要对其进行备份。然后，这个备份文件将被传输到主机网站，并用于在那里创建一个新的数据库。既然你已经有了关于备份所需的所有信息，我们就不需要在这里进一步探讨了。
- en: Once you have created your backup file of the entire Drupal database and added
    the resulting `.sql` file somewhere to the `drupal` folder (anywhere will do so
    long as you can find it again), you are now ready to begin transferring files
    across to your host. Note that you should remove the `.sql` file from your site
    as soon as you have made use of it—hold it somewhere out of the document root
    in case you need to use it again.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你创建了整个Drupal数据库的备份文件，并将生成的`.sql`文件添加到`drupal`文件夹的某个位置（只要你能再次找到它，任何地方都可以），你现在就可以开始将文件传输到你的主机上了。请注意，一旦你使用了`.sql`文件，就应该从你的网站上将其删除——将其保存在文档根目录之外的地方，以防你需要再次使用它。
- en: Transfer the Files
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 传输文件
- en: You should now have a final, clean version of your online store, with a copy
    of the database, all zipped up and ready to go. Assuming there are images and
    a fair bit of data held within the site, you can be sure that the size of the
    upload is quite substantial. For this reason, you need a reasonably high speed
    connection—dial-up connections can be slightly erratic over long periods of time,
    so it may even be worth using a friend's computer or your office connection to
    send the files to the host site.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你应该有一个最终、干净的在线商店版本，包括数据库的副本，所有内容都已打包，准备就绪。假设网站中有图像和相当多的数据，你可以确信上传的大小相当大。因此，你需要一个相当快的连接——拨号连接在长时间内可能会有些不稳定，所以甚至可能值得使用朋友的电脑或你的办公室连接将文件发送到主机网站。
- en: 'By far the easiest method would be to use a native upload feature from the
    host''s file manager over a quick connection. If this is available to you, simply
    use it to upload the archive file across to the host server. The demo site has
    this facility as shown here:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，最简单的方法是使用主机文件管理器的本地上传功能，通过快速连接上传。如果你可以使用它，只需用它上传存档文件到主机服务器。演示网站有这个功能，如下所示：
- en: '![Transfer the Files](img/1800_0A_04.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![传输文件](img/1800_0A_04.jpg)'
- en: Notice that the ZIP file is being uploaded to the `public_html` folder, since
    this is the document root from which all web pages on this server are served.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，ZIP文件正在上传到`public_html`文件夹，因为这是从该服务器上提供所有网页的文档根目录。
- en: Alternatively, assuming your site has an FTP account enabled, you can either
    attempt to use FTP drag and drop, which is exactly the same as moving files around
    on your PC in Windows, or you can use an FTP utility.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，假设你的网站启用了FTP账户，你可以尝试使用FTP拖放，这和在Windows上移动文件完全一样，或者你可以使用FTP实用程序。
- en: When in doubt, simply get in touch with your host service and ask them for information
    about how to transfer files. The administrative interface and file manager for
    the vast majority of sites are easy to use, and you will have no problems uploading
    files. Because of this, we won't waste time discussing FTP utilities in detail.
    Simply ensure that, ultimately, the ZIP file ends up in the document root of your
    host's server. Remember not to leave the zip folder lying around in the document
    root once it has been used.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有疑问，只需联系您的托管服务提供商，并询问有关如何传输文件的信息。对于绝大多数网站，其管理界面和文件管理器都易于使用，您将不会遇到上传文件的问题。因此，我们不会浪费时间详细讨论FTP工具。只需确保，最终，ZIP文件出现在您托管服务器的主目录中。记住，一旦使用过，不要在主目录中留下ZIP文件夹。
- en: Setting Up the Site
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置网站
- en: At this stage, you should have a working database and be aware of what the username
    and password are for that database on your live site. You also have your archive
    file uploaded to the host site. At last, we finally move from working on the development
    machine to working on the live site. First thing's first though; we need to…
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 到这一步，您应该有一个正在工作的数据库，并且知道在您的实时网站上该数据库的用户名和密码。您也已经将存档文件上传到了托管网站。最后，我们终于从在开发机器上工作转移到在实时网站上工作。不过，首先我们需要做的是…
- en: Set Up the Files
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置文件
- en: 'You will need to extract the archive file to your `public_html` folder—most
    likely your hosts will provide you with this functionality. Take note of the second
    option in the list shown here:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要将存档文件提取到您的`public_html`文件夹中——很可能是您的托管服务提供商会提供这项功能。注意这里显示的列表中的第二个选项：
- en: '![Set Up the Files](img/1800_0A_05.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![设置文件](img/1800_0A_05.jpg)'
- en: 'With these files extracted, you should now have a replica of the files from
    the development machine on your host''s site. Check this by browsing through the
    live site. You should also find that if you attempt to browse one of the pages
    from a web browser, you no longer get a page‑not‑found error, but some other type
    of error—most likely a MySQL error because we don''t have a database connection
    yet:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 提取这些文件后，您现在应该已经在托管网站上有了开发机器上文件的副本。通过浏览实时网站来检查这一点。您还应该发现，如果您尝试从网页浏览器浏览其中一个页面，您将不再收到页面找不到错误，而是收到其他类型的错误——很可能是MySQL错误，因为我们还没有建立数据库连接：
- en: '![Set Up the Files](img/1800_0A_06.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![设置文件](img/1800_0A_06.jpg)'
- en: This is great news because it means that we are able to browse the files that
    are now on the live site with no problem. The fact that there is a Drupal error
    message here confirms that we are in fact browsing Drupal pages—note that the
    error message shown in the previous screenshot mentions a username and server
    that are not correct. This is here to demonstrate more clearly that we are browsing
    Drupal but we have not yet entered the correct database or configuration settings.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个好消息，因为它意味着我们可以毫无问题地浏览实时网站上的文件。这里显示的Drupal错误信息证实了我们确实正在浏览Drupal页面——请注意，之前截图中的错误信息提到了一个不正确的用户名和服务器。这是为了更清楚地演示我们正在浏览Drupal，但我们还没有进入正确的数据库或配置设置。
- en: Set Up the Database
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置数据库
- en: 'If you have access to phpMyAdmin on your host site, then open it up and follow
    along:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有权访问托管网站上的phpMyAdmin，那么请打开它并按照以下步骤操作：
- en: In the left-hand panel on the phpMyAdmin home page, click on the name of the
    database you installed earlier. (Recall that for the demo site, this was entitled
    `contechj_contechst.)`
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在phpMyAdmin主页的左侧面板中，点击您之前安装的数据库名称。（回想一下，对于演示网站，这个名称是`contechj_contechst`)。
- en: In the new page that opens up, click on the **SQL** tab along the top of the
    page.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新打开的页面中，点击页面顶部的**SQL**标签。
- en: Click **Browse** under the **Location of Textfile** option.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**文本文件位置**选项下点击**浏览**。
- en: Locate the file you would like to run against the database, and click **Go**.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位您想要运行数据库的文件，然后点击**Go**。
- en: If all goes according to plan, you will get a message informing you of the successful
    modifications to the database. You can then take a look through phpMyAdmin to
    ensure that the database has got whatever tables are needed.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切按计划进行，您将收到一条消息，告知您数据库修改成功。然后您可以通过phpMyAdmin查看数据库是否已获得所需的任何表。
- en: 'It is possible that there may be issues between your host''s system and the
    one you used to create the backup. For example, I initially received the following
    error:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 可能存在您的主机系统和您用来创建备份的系统之间的问题。例如，我最初收到了以下错误：
- en: '![Set Up the Database](img/1800_0A_07.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![设置数据库](img/1800_0A_07.jpg)'
- en: This is because differing versions of MySQL sometimes use slightly differing
    syntax and it was necessary to remove all the `DEFAULT CHARSET=utf8` statements
    from the `.sql` file before everything ran smoothly.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为MySQL的不同版本有时会使用略有不同的语法，在一切顺利运行之前，有必要从`.sql`文件中删除所有的`DEFAULT CHARSET=utf8`语句。
- en: If you do not have access to phpMyAdmin, then you will simply need to install
    the database using the `.sql` file in whatever manner is appropriate for your
    particular site. Recall that you are able to run the `.sql` file from the command
    line if you have access to that—if not, it's time to get in touch with the support
    team and find out how they recommend you run the contents of your `.sql` file.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有访问phpMyAdmin的权限，那么你只需要以适合你特定网站的方式安装数据库，使用`.sql`文件。记住，如果你可以访问命令行，你能够从那里运行`.sql`文件——如果不能，那么是时候联系支持团队并了解他们推荐你如何运行你的`.sql`文件内容了。
- en: Configure the Site
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置网站
- en: With the database in place, go back to your `settings.php` file in the `sites/default/`
    folder on your live site and alter it according to your system's setup—take care
    to ensure that you add precisely the names and passwords required by your *live
    database* to `$db_url` as well as the correct URL for the live site in `$base_url
    if that is required`.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 数据库设置完成后，回到你实时网站上的`sites/default/`文件夹中的`settings.php`文件，并根据你的系统设置进行修改——务必确保你精确地添加了你的*实时数据库*所需的名称和密码到`$db_url`，以及如果需要的话，实时网站的正确URL到`$base_url`。
- en: Once you have set the configuration settings appropriately save the file and
    then try browsing some pages. With a bit of luck you will see everything more
    or less as it was on the development machine.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你适当地设置了配置设置，保存文件，然后尝试浏览一些页面。如果有幸，你将看到的东西大致和开发机器上的一样。
- en: Access Problem?
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 访问问题？
- en: 'Try to log in to the administrator''s account. I suspect that more than a few
    of you will come across a somewhat nasty surprise in that the browser will no
    doubt tell you that it cannot find the page you are looking for. If this is the
    case, it is more than likely because the `.htaccess` file was not successfully
    ported to the live site:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试登录管理员账户。我怀疑你们中的很多人都会在浏览器告诉你找不到你正在寻找的页面时遇到一些相当讨厌的惊喜。如果这种情况发生，很可能是因为`.htaccess`文件没有被成功迁移到实时网站上：
- en: Note
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '*You must ensure that Drupal''s* `.htaccess` *file is present on the live site!*
    `.htaccess` in the Drupal parent folder contains instructions and information
    vital to the healthy operation of the site. Ensure that you transfer it directly,
    or cut and paste its contents into the live site''s `.htaccess` file.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '*你必须确保Drupal的`.htaccess`文件存在于实时网站上!* Drupal父文件夹中的`.htaccess`包含对网站健康运行至关重要的指令和信息。确保你直接传输它，或者将其内容剪切并粘贴到实时网站的`.htaccess`文件中。'
- en: 'When viewing the contents of the `.htaccess` file on the live site (in Drupal''s
    parent folder, most likely in the document root depending on how you have things
    set up), you should see something like this:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在实时网站上查看`.htaccess`文件的内容（在Drupal父文件夹中，很可能是根据你的设置在文档根目录中），你应该看到类似以下内容：
- en: '[PRE0]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If that is the case, then you should find that it is possible to browse the
    live site as normal. Take heart, we are nearly done! The only thing left on the
    list of things to do for the moment is…
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 如果是这样的话，你应该会发现你可以像平常一样浏览实时网站。放心，我们几乎完成了！目前要做的最后一件事是…
- en: Testing
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试
- en: '*What is the goal of testing in this instance?* Well, between now and the end
    of the chapter, we want to go from where we are to a fully functional, and most
    importantly, live and operational site. In order to get there, we need to ensure
    not only that everything works as expected from the customer''s point of view,
    but also that the site is properly implemented and that we can administer it with
    no problems.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '*在这个例子中测试的目标是什么？* 好吧，从现在到本章结束，我们希望从我们目前的状态过渡到一个完全功能性的网站，更重要的是，一个实时且可操作的网站。为了达到这个目标，我们不仅需要确保从客户的角度看一切按预期工作，还需要确保网站得到适当的实施，并且我们可以无问题地管理它。'
- en: 'To give you an example of the type of thing that might rear its ugly head,
    take a look at the following error message I received the first time I tried to
    do a bit of administration on the live site:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了给你一个可能出现的糟糕情况的例子，看看我第一次尝试在实时网站上做一些管理操作时收到的以下错误信息：
- en: '![Testing](img/1800_0A_08.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![Testing](img/1800_0A_08.jpg)'
- en: '*Can you spot the problem straight away?* Drupal is complaining that it cannot
    write to a `files` directory that should be contained within `C:\apache2triad\temp`.
    It''s not surprising that this should be the case, because on the live site, there
    is *no* `C:\apache2triad\temp` directory. In fact, the only reason this fully
    qualified path is here is because I initially wanted to demonstrate the private
    download method despite the fact that public access to files is suitable here.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '*您能立即发现问题吗？* Drupal 抱怨它无法写入应包含在 `C:\apache2triad\temp` 中的 `files` 目录。这种情况并不奇怪，因为在实时网站上，根本不存在
    `C:\apache2triad\temp` 目录。事实上，这个完全限定的路径之所以存在，是因为我最初想展示私有下载方法，尽管在这里公共访问文件是合适的。'
- en: 'This means that we need to re-enter the settings that were made with the development
    machine in mind to reflect the specifics of the live system:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着我们需要重新输入在开发机器上设置的设置，以反映实时系统的具体要求：
- en: '![Testing](img/1800_0A_09.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![Testing](img/1800_0A_09.jpg)'
- en: Assuming you have the requisite permissions set so that Drupal can write and
    read in these folders, this particular problem is solved. (If you already have
    files on the site then you might need to move them to the directory you specify
    here.) Now, all that's left is to test out everything else in the administration
    tool to ensure it works correctly!
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您已经设置了必要的权限，使得 Drupal 可以在这些文件夹中读写，这个特定问题就解决了。（如果您已经在网站上有了文件，那么您可能需要将它们移动到您在这里指定的目录。）现在，剩下的就是测试管理工具中的所有其他功能，以确保它们能正确工作！
- en: 'Here is a checklist for you to use in order to ensure that, from a user''s
    point of view, the site works nicely:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一份检查清单，供您使用，以确保从用户的角度来看，网站运行良好：
- en: Tip
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Site Checklist
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 网站检查清单
- en: '| **Use at least two different browsers.** | One browser may implement some
    features that others do not—you might find that something you rely on heavily
    works on your browser of choice but not on others. | ![Testing](img/bracket.jpg)
    |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| **使用至少两种不同的浏览器。** | 一种浏览器可能实现了其他浏览器没有的一些功能——您可能会发现您所依赖的某些功能在您选择的浏览器上工作得很好，但在其他浏览器上则不行。
    | ![Testing](img/bracket.jpg) |'
- en: '| **Resize your browsers for a variety of pages.** | This helps to determine
    whether you have HTML elements that have not been set correctly. For example,
    some section may use the full page width, while others expand only to a certain
    limit. | ![Testing](img/bracket.jpg) |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| **调整浏览器窗口大小以适应各种页面。** | 这有助于确定您是否有未正确设置的 HTML 元素。例如，某些部分可能使用整个页面宽度，而其他部分可能只扩展到一定限制。
    | ![Testing](img/bracket.jpg) |'
- en: '| **Access pages from slow as well as fast connections.** | You might find
    that certain pages load very slowly over a dial-up connection. This might mean
    you need to rethink image and page sizes. | ![Testing](img/bracket.jpg) |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| **从慢速和快速连接访问页面。** | 您可能会发现某些页面在拨号连接上加载非常缓慢。这可能意味着您需要重新考虑图片和页面的大小。 | ![Testing](img/bracket.jpg)
    |'
- en: '| **Check all links—Text and Image.** | Often, links break during deployment
    because of differing file paths and so forth. You should:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '| **检查所有链接——文本和图片。** | 在部署过程中，由于文件路径等差异，链接经常会出现问题。您应该：'
- en: Check all links and buttons on each page
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查每个页面上的所有链接和按钮
- en: Check all links in blocks
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查块中的所有链接
- en: Check that large as well as small images display appropriately
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查大图和小图是否显示得当
- en: Check that any ads link correctly
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查所有广告链接是否正确
- en: '| ![Testing](img/bracket.jpg) |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| ![Testing](img/bracket.jpg) |'
- en: '| **Check each page''s look.** | Important, because not all browsers can render
    certain style sheet settings. | ![Testing](img/bracket.jpg) |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| **检查每个页面的外观。** | 非常重要，因为并非所有浏览器都能渲染某些样式表设置。 | ![Testing](img/bracket.jpg)
    |'
- en: '| **Use each page.** | This is vital for ensuring that users can:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '| **使用每个页面。** | 这对于确保用户能够：'
- en: Register accounts
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注册账户
- en: Manage their accounts
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理他们的账户
- en: Add content depending on permissions
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据权限添加内容
- en: Correctly access content depending on their roles
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据他们的角色正确访问内容
- en: Make use of all the site's facilities
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用网站的所有设施
- en: 'Ensure that:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 确保以下内容：
- en: The search engine works correctly
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 搜索引擎工作正常
- en: Contact emails can be sent properly
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正确发送联系邮件
- en: Privacy and conditions of use are shown along with any important copyright information.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隐私政策和使用条款将显示，以及任何重要的版权信息。
- en: '| ![Testing](img/bracket.jpg) |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| ![Testing](img/bracket.jpg) |'
- en: '| **Try to break the site (as a restricted user of course).** | Try to break
    the site (as a restricted user of course). Just as important as ensuring everything
    works properly (if not more important), is ensuring that nothing can be broken
    at will. | ![Testing](img/bracket.jpg) |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| **尝试破坏网站（当然，作为受限用户）。** | 尝试破坏网站（当然，作为受限用户）。确保一切正常工作（如果不是更重要的话），与确保没有任何东西可以随意破坏一样重要。
    | ![测试](img/bracket.jpg) |'
- en: If you can perform everything listed in this checklist with several browsers,
    with no problems, then you can be reasonably certain that the site will hold up
    when it goes live. Of course, you will need to monitor it very closely for the
    first few months of its operation to make sure that nothing drastic goes wrong.
    Providing a webmaster's email address is a good way to let users complain if they
    run into problems. Open lines of communication between you and your users will
    help foster strong ties and improve the quality of your site.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你能在几个浏览器中无问题地完成这个清单上的所有事项，那么你可以合理地确信，当网站上线时它将能够稳定运行。当然，在运营的前几个月里，你需要非常密切地监控它，以确保没有任何严重的问题发生。提供网站管理员的电子邮件地址是让用户在遇到问题时进行投诉的好方法。你与用户之间开放的沟通渠道将有助于培养牢固的联系并提高你网站的质量。
- en: Summary
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: For a task as important as building a full-featured community-driven website,
    it is necessary that you spend a lot of time considering your options, and developing
    and testing your site. Since it is not really feasible to do this sort of work
    on the live site, you need to employ a development machine to aid you. Because
    of this, the topic of deployment is an important one in the overall scheme of
    things because it is deployment that actually links your finished development
    to the live site.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 对于像构建一个功能齐全的社区驱动网站这样重要的任务，你需要花费大量时间考虑你的选择，并开发和测试你的网站。由于在实时网站上做这类工作实际上并不可行，你需要使用一台开发机器来帮助你。正因为如此，部署的话题在整个计划中非常重要，因为正是部署将你的最终开发与实时网站联系起来。
- en: This chapter outlined a solid process for preparing for deployment. It was also
    necessary to set up a new database on the host site, but this proved to be relatively
    easy because any good host makes the task fairly simple by providing a tool like
    phpMyAdmin to work with the database.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 本章概述了一个为部署做准备的良好流程。还必须在主机网站上设置一个新的数据库，但这一点相对容易，因为任何好的主机都会通过提供像phpMyAdmin这样的工具来简化这项任务。
- en: Hopefully you came to realize that the deployment process itself is not particularly
    complex for a Drupal site, since the only real configuration work that needs to
    be done is modifying the `settings.php` file to reflect your new system's configuration.
    Having the complexity of the site's deployment reduced to configuring a single
    file is a real advantage for Drupal users.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 希望你意识到，对于Drupal网站来说，部署过程本身并不特别复杂，因为唯一真正需要完成的是修改`settings.php`文件以反映你新系统的配置。将网站的部署复杂性降低到仅配置一个文件，对于Drupal用户来说确实是一个真正的优势。
- en: While the actual deployment of the site is fairly simple, it was shown that
    there were quite a few issues to deal with, and not the least of them is testing.
    It is critical that a full suite of tests is carried out on any site before it
    goes live—losing valuable users to silly errors is the last thing that any competitive
    site needs.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然网站的部署本身相当简单，但已经证明有许多问题需要处理，其中最不重要的是测试。在网站上线之前进行全面的测试套件是至关重要的——因为愚蠢的错误而失去宝贵的用户是任何竞争性网站都不希望看到的。
