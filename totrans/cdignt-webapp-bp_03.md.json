["```php\napplication/\n├── controllers/\n│   ├── discussions.php\n│   ├── comments.php\n│   ├── admin.php\n├── models/\n│   ├── comments_model.php\n│   ├── discussions_model.php\n│   ├── admin_model.php\n├── views/discussions/\n│   ├── view.php\n│   ├── new.php\n├── views/comments/\n│   ├── view.php\n├── views/admin/\n│   ├── login.php\n│   ├── dashboard.php\n├── views/nav/\n│   ├── top_nav.php\n├── views/common/\n│   ├── login_header.php\n├── language/english/\n│   ├── en_admin_lang.php\nbootstrap/\n├── css/\n    ├── signin.css\n```", "```php\nCREATE DATABASE 'discuss_forum';\nUSE 'discuss_forum';\n\nDROP TABLE IF EXISTS 'ci_sessions';\nCREATE TABLE 'ci_sessions' (\n  'session_id' varchar(40) COLLATE utf8_bin NOT NULL DEFAULT '0',\n  'ip_address' varchar(16) COLLATE utf8_bin NOT NULL DEFAULT '0',\n  'user_agent' varchar(120) COLLATE utf8_bin DEFAULT NULL,\n  'last_activity' int(10) unsigned NOT NULL DEFAULT '0',\n  'user_data' text COLLATE utf8_bin NOT NULL,\n  PRIMARY KEY ('session_id'),\n  KEY 'last_activity_idx' ('last_activity')\n) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin;\n\nDROP TABLE IF EXISTS 'comments';\nCREATE TABLE 'comments' (\n  'cm_id' int(11) NOT NULL AUTO_INCREMENT,\n  'ds_id' int(11) NOT NULL,\n  'cm_body' text NOT NULL,\n  'cm_created_at' timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  'usr_id' int(11) NOT NULL,\n  'cm_is_active' int(1) NOT NULL,\n  PRIMARY KEY ('cm_id')\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nDROP TABLE IF EXISTS 'discussions';\nCREATE TABLE 'discussions' (\n  'ds_id' int(11) NOT NULL AUTO_INCREMENT,\n  'usr_id' int(11) NOT NULL,\n  'ds_title' varchar(255) NOT NULL,\n  'ds_body' text NOT NULL,\n  'ds_created_at' timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  'ds_is_active' int(1) NOT NULL,\n  PRIMARY KEY ('ds_id')\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n\nDROP TABLE IF EXISTS 'users';\nCREATE TABLE 'users' (\n  'usr_id' int(11) NOT NULL AUTO_INCREMENT,\n  'usr_name' varchar(25) NOT NULL,\n  'usr_hash' varchar(255) NOT NULL,\n  'usr_email' varchar(125) NOT NULL,\n  'usr_created_at' timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  'usr_is_active' int(1) NOT NULL,\n  'usr_level' int(1) NOT NULL,\n  PRIMARY KEY ('usr_id')\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;\n```", "```php\n    $db['default']['hostname'] = 'localhost';\n    $db['default']['username'] = 'your username';\n    $db['default']['password'] = 'your password';\n    $db['default']['database'] = 'urls';\n    ```", "```php\n    $config['encryption_key'] = '';\n    ```", "```php\n    $config['encryption_key'] = 'a-random-string-of-alphanum-characters';\n    ```", "```php\n    $config['sess_cookie_name'] = 'ci_session';\n    $config['sess_expiration'] = 7200;\n    $config['sess_expire_on_close'] = FALSE;\n    $config['sess_encrypt_cookie'] = FALSE;\n    $config['sess_use_database'] = FALSE;\n    $config['sess_table_name'] = 'ci_sessions';\n    $config['sess_match_ip'] = FALSE;\n    $config['sess_match_useragent'] = TRUE;\n    $config['sess_time_to_update'] = 300;\n    ```", "```php\n    $config['sess_cookie_name'] = 'ci_session';\n    $config['sess_expiration'] = 7200;\n    $config['sess_expire_on_close'] = TRUE;\n    $config['sess_encrypt_cookie'] = TRUE;\n    $config['sess_use_database'] = TRUE;\n    $config['sess_table_name'] = 'ci_sessions';\n    $config['sess_match_ip'] = TRUE;\n    $config['sess_match_useragent'] = TRUE;\n    $config['sess_time_to_update'] = 300;\n    ```", "```php\n    $route['default_controller'] = \"welcome\";\n    $route['404_override'] = '';\n    ```", "```php\n    $route['default_controller'] = \"welcome\";\n    ```", "```php\n    $route['default_controller'] = \"discussions\";\n    ```", "```php\n<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Discussions_model extends CI_Model {\n  function __construct() {\n    parent::__construct();\n  }\n```", "```php\nfunction fetch_discussions($filter = null, $direction = null) {\n  $query = \"SELECT * FROM 'discussions', 'users' \n            WHERE 'discussions'.'usr_id' = 'users'.'usr_id'\n            AND 'discussions'.'ds_is_active' != '0' \";\n```", "```php\nif ($filter != null) {\n  if ($filter == 'age') {\n    $filter = 'ds_created_at';\n    switch ($direction) {\n      case 'ASC':\n        $dir = 'ASC';\n        break;\n      case 'DESC':\n        $dir = 'DESC';\n        break;\n      default:\n        $dir = 'ASC';\n    }\n  }\n} else {\n  $dir = 'ASC';\n}\n```", "```php\n$query .= \"ORDER BY 'ds_created_at' \" . $dir;\n$result = $this->db->query($query, array($dir));\n\nif ($result) {\n  return $result;\n} else {\n  return false;\n}\n}\n\nfunction fetch_discussion($ds_id) {\n  $query = \"SELECT * FROM 'discussions', 'users' WHERE 'ds_id' = ?\n            AND 'discussions'.'usr_id' = 'users'.'usr_id'\";\n  return $result = $this->db->query($query, array($ds_id));\n}\n```", "```php\nfunction create($data) {\n  // Look and see if the email address already exists in the users \n  // table, if it does return the primary key, if not create them \n  // a user account and return the primary key.\n  $usr_email = $data['usr_email'];\n  $query = \"SELECT * FROM 'users' WHERE 'usr_email' = ? \";\n  $result = $this->db->query($query,array($usr_email));\n\n  if ($result->num_rows() > 0) {\n    foreach ($result->result() as $rows) {\n      $data['usr_id'] = $rows->usr_id;\n    }\n  } else {\n```", "```php\n$password = random_string('alnum', 16);\n$hash = $this->encrypt->sha1($password);\n```", "```php\n$user_data = array('usr_email' => $data['usr_email'],\n                   'usr_name' => $data['usr_name'],\n                   'usr_is_active' => '1',\n                   'usr_level' => '1',\n                   'usr_hash' => $hash);\n```", "```php\n  if ($this->db->insert('users',$user_data)) {\n    $data['usr_id'] = $this->db->insert_id();\n    // Send email with password???\n  }\n}\n```", "```php\n$discussion_data = array('ds_title' => $data['ds_title'],\n                         'ds_body' => $data['ds_body'],\n                         'usr_id' => $data['usr_id'],\n                         'ds_is_active' => '1');\n```", "```php\n  if ($this->db->insert('discussions',$discussion_data) ) {\n    return $this->db->insert_id();\n  } else {\n    return false;\n  }\n}\n```", "```php\n  function flag($ds_id) {\n    $this->db->where('ds_id', $ds_id);\n    if ($this->db->update('discussions', array('ds_is_active' => '0'))) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n```", "```php\n<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Comments_model extends CI_Model {\n    function __construct() {\n        parent::__construct();\n    }\n```", "```php\nfunction fetch_comments($ds_id) {\n    $query = \"SELECT * FROM 'comments', 'discussions', 'users' \n              WHERE 'discussions'.'ds_id' = ?\n               AND 'comments'.'ds_id' = 'discussions'.'ds_id' \n               AND 'comments'.'usr_id' = 'users'.'usr_id' \n               AND 'comments'.'cm_is_active' = '1' \n               ORDER BY 'comments'.'cm_created_at' DESC \" ;\n\n        $result = $this->db->query($query, array($ds_id));\n```", "```php\n    if ($result) {\n        return $result;\n    } else {\n        return false;\n    }\n}\n```", "```php\nfunction new_comment($data) {\n    // Look and see if the email address already exists in the users \n    // table, if it does return the primary key, if not create them \n    // a user account and return the primary key.\n```", "```php\n        $usr_email = $data['usr_email'];\n        $query = \"SELECT * FROM 'users' WHERE 'usr_email' = ? \";\n        $result = $this->db->query($query,array($usr_email));\n\n        if ($result->num_rows() > 0) {\n```", "```php\n    foreach ($result->result() as $rows) {\n        $data['usr_id'] = $rows->usr_id;\n    }\n} else {\n```", "```php\n    $password = random_string('alnum', 16);\n    $hash = $this->encrypt->sha1($password); \n\n    $user_data = array('usr_email' => $data['usr_email'],\n                       'usr_name' => $data['usr_name'],\n                       'usr_is_active' => '1',\n                       'usr_level' => '1',\n                       'usr_hash' => $hash);\n\n    if ($this->db->insert('users',$user_data)) {\n        $data['usr_id'] = $this->db->insert_id();\n    }\n}\n\n$comment_data = array('cm_body' => $data['cm_body'],\n                      'ds_id' => $data['ds_id'],\n                      'cm_is_active' => '1',\n                      'usr_id' => $data['usr_id']);\n```", "```php\n        if ($this->db->insert('comments',$comment_data) ) {\n            return $this->db->insert_id();\n        } else {\n            return false;\n        }\n    }\n\n  function flag($cm_id) {\n    $this->db->where('cm_id', $cm_id);\n    if ($this->db->update('comments', array('cm_is_active' => '0'))) {\n      return true;\n    } else {\n      return false;\n    }\n  } \n}\n```", "```php\n<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Admin_model extends CI_Model {\n    function __construct() {\n        parent::__construct();\n    }\n```", "```php\nfunction dashboard_fetch_comments() {\n    $query = \"SELECT * FROM 'comments', 'users' \n              WHERE 'comments'.'usr_id' = 'users'.'usr_id'\n              AND 'cm_is_active' = '0' \";\n\n    $result = $this->db->query($query);\n\n    if ($result) {\n        return $result;\n    } else {\n        return false;\n    }\n}\n```", "```php\nfunction dashboard_fetch_discussions() {\n    $query = \"SELECT * FROM 'discussions', 'users' \n             WHERE 'discussions'.'usr_id' = 'users'.'usr_id'\n             AND 'ds_is_active' = '0' \";\n\n    $result = $this->db->query($query);\n\n    if ($result) {\n        return $result;\n    } else {\n        return false;\n    }\n}\n\nfunction does_user_exist($email) {\n    $this->db->where('usr_email', $email);\n    $query = $this->db->get('users');\n    return $query;\n} \n```", "```php\nfunction update_comments($is_active, $id) {\n    if ($is_active == 1) {\n        $query = \"UPDATE 'comments' SET 'cm_is_active' = ? WHERE 'cm_id' = ? \" ;\n        if ($this->db->query($query,array($is_active,$id))) {\n            return true;\n        } else {\n            return false;\n        }\n    } else {\n        $query = \"DELETE FROM 'comments' WHERE 'cm_id' = ?  \" ;\n        if ($this->db->query($query,array($id))) {\n            return true;\n        } else {\n            return false;\n        } \n    } \n}\n```", "```php\n    function update_discussions($is_active, $id) {\n        if ($is_active == 1) {\n            $query = \"UPDATE 'discussions' SET 'ds_is_active' = ? WHERE 'ds_id' = ? \" ;\n            if ($this->db->query($query, array($is_active,$id))) {\n                return true;\n            } else {\n                return false;\n            } \n        } else {\n            $query = \"DELETE FROM 'discussions' WHERE 'ds_id' = ?  \" ;\n            if ($this->db->query($query,array($id))) {\n                $query = \"DELETE FROM 'comments' WHERE 'ds_id' = ?  \" ;\n                if ($this->db->query($query,array($id))) {\n                    return true;\n                }\n            } else {\n                return false;\n            } \n        } \n    }\n}\n```", "```php\nSORT: <?php echo anchor('discussions/index/sort/age/' . (($dir == 'ASC') ? 'DESC' : 'ASC'),'Newest ' \n            . (($dir == 'ASC') ? 'DESC' : 'ASC'));?>\n\n<table class=\"table table-hover\">\n  <thead>\n    <tr>\n      <th><?php echo $this->lang->line('discussions_title') ; ?></th>\n    </tr>\n  </thead>\n  <tbody>\n\n    <?php foreach ($query->result() as $result) : ?>\n      <tr>\n        <td>\n          <?php echo anchor('comments/index/'.$result->ds_id,$result->ds_title) . ' '\n                . $this->lang->line('comments_created_by') . $result->usr_name; ?>\n\n          <?php echo anchor('discussions/flag/'.$result->ds_id,\n          $this->lang->line('discussion_flag')) ; ?>\n          <br />\n          <?php echo $result->ds_body ; ?>\n        </td>\n      </tr>\n    <?php endforeach ; ?>\n\n  </tbody>\n</table>\n```", "```php\nSORT: <?php echo anchor('discussions/index/sort/age/' . (($dir == 'ASC') ? 'DESC' : 'ASC'),'Newest ' . (($dir == 'ASC') ? 'DESC' : 'ASC'));?>\n```", "```php\n    if ($dir == 'ASC') {\n      return 'DESC';\n    } else {\n      return 'ASC';\n    }\n    ```", "```php\n<!-- Discussion - initial comment -->\n<?php foreach ($discussion_query->result() as $discussion_result) : ?>\n  <h2>\n      <?php echo $discussion_result->ds_title; ?><br />\n      <small><?php echo $this->lang->line('comments_created_by') . $discussion_result->usr_name . $this->lang->line('comments_created_at') . $discussion_result->ds_created_at; ?></small>\n  </h2>\n  <p class=\"lead\"><?php echo $discussion_result->ds_body; ?></p>\n<?php endforeach ; ?>\n\n<!-- Comment - list of comments -->\n<?php foreach ($comment_query->result() as $comment_result) : ?>\n  <li class=\"media\">\n    <a class=\"pull-left\" href=\"#\">\n      <img class=\"media-object\" src=\"img/profile.svg\" />\n    </a>\n    <div class=\"media-body\">\n      <h4 class=\"media-heading\"><?php echo $comment_result->usr_name . anchor('comments/flag/'.$comment_result->ds_id . '/' . $comment_result->cm_id,$this->lang->line('comments_flag')) ; ?></h4>\n      <?php echo $comment_result->cm_body ; ?>\n    </div>\n  </li>\n<?php endforeach ; ?>\n\n<!-- Form - begin form section -->\n<br /><br />\n<p class=\"lead\"><?php echo $this->lang->line('comments_form_instruction');?></p>\n\n<?php echo validation_errors(); ?>\n<?php echo form_open('comments/index','role=\"form\"') ; ?>\n    <div class=\"form-group col-md-5\">\n      <label for=\"comment_name\"><?php echo $this->lang->line('comments_comment_name');?></label>\n      <input type=\"text\" name=\"comment_name\" class=\"form-control\" id=\"comment_name\" value=\"<?php echo set_value('comment_name'); ?>\">\n    </div>\n    <div class=\"form-group col-md-5\">\n      <label for=\"comment_email\"><?php echo $this->lang->line('comments_comment_email');?></label>\n      <input type=\"email\" name=\"comment_email\" class=\"form-control\" id=\"comment_email\" value=\"<?php echo set_value('comment_email'); ?>\">\n    </div>\n    <div class=\"form-group  col-md-10\">\n      <label for=\"comment_body\"><?php echo $this->lang->line('comments_comment_body');?></label>\n      <textarea class=\"form-control\" rows=\"3\" name=\"comment_body\" id=\"comment_body\"><?php echo set_value('comment_body'); ?></textarea>\n    </div>\n    <div class=\"form-group  col-md-11\">\n      <button type=\"submit\" class=\"btn btn-success\"><?php echo $this->lang->line('common_form_elements_go');?></button>\n    </div>\n  <?php echo form_hidden('ds_id',$ds_id) ; ?>\n<?php echo form_close() ; ?> \n```", "```php\n<button type=\"submit\" class=\"btn btn-success\"><?php echo $this->lang->line('common_form_elements_go');?></button>\n```", "```php\n<!-- Form - begin form section -->\n<br /><br />\n<p class=\"lead\"><?php echo $this->lang->line('discussion_form_instruction');?></p>\n\n<?php echo validation_errors(); ?>\n<?php echo form_open('discussions/create','role=\"form\"') ; ?>\n    <div class=\"form-group col-md-5\">\n      <label for=\"usr_name\"><?php echo $this->lang->line('discussion_usr_name');?></label>\n      <input type=\"text\" name=\"usr_name\" class=\"form-control\" id=\"usr_name\" value=\"<?php echo set_value('usr_name'); ?>\">\n    </div>\n    <div class=\"form-group col-md-5\">\n      <label for=\"usr_email\"><?php echo $this->lang->line('discussion_usr_email');?></label>\n      <input type=\"email\" name=\"usr_email\" class=\"form-control\" id=\"usr_email\" value=\"<?php echo set_value('usr_email'); ?>\">\n    </div>\n    <div class=\"form-group col-md-10\">\n      <label for=\"ds_title\"><?php echo $this->lang->line('discussion_ds_title');?></label>\n      <input type=\"text\" name=\"ds_title\" class=\"form-control\" id=\"ds_title\" value=\"<?php echo set_value('ds_title'); ?>\">\n    </div>\n    <div class=\"form-group  col-md-10\">\n      <label for=\"ds_body\"><?php echo $this->lang->line('discussion_ds_body');?></label>\n      <textarea class=\"form-control\" rows=\"3\" name=\"ds_body\" id=\"ds_body\"><?php echo set_value('ds_body'); ?></textarea>\n    </div>\n    <div class=\"form-group  col-md-11\">\n      <button type=\"submit\" class=\"btn btn-success\"><?php echo $this->lang->line('common_form_elements_go');?></button>\n    </div>\n<?php echo form_close() ; ?>\n```", "```php\n<button type=\"submit\" class=\"btn btn-success\"><?php echo $this->lang->line('common_form_elements_go');?></button>\n```", "```php\n<!-- Fixed navbar -->\n<div class=\"navbar navbar-inverse navbar-fixed-top\" role=\"navigation\">\n  <div class=\"container\">\n    <div class=\"navbar-header\">\n      <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\".navbar-collapse\">\n        <span class=\"sr-only\">Toggle navigation</span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n      </button>\n      <a class=\"navbar-brand\" href=\"#\"><?php echo $this->lang->line('system_system_name'); ?></a>\n    </div>\n    <div class=\"navbar-collapse collapse\">\n      <ul class=\"nav navbar-nav\">\n        <li <?php if ($this->uri->segment(1) == '') {echo 'class=\"active\"';} ; ?>><?php echo anchor('/', $this->lang->line('top_nav_view_discussions')) ; ?></li>\n        <li <?php if ($this->uri->segment(1) == 'discussions') {echo 'class=\"active\"';} ; ?>><?php echo anchor('discussions/create', $this->lang->line('top_nav_new_discussion')) ; ?></li>\n      </ul>\n\n      <ul class=\"nav navbar-nav navbar-right\">\n        <li><?php echo anchor('admin/login', $this->lang->line('top_nav_login')) ; ?></li>\n      </ul>\n    </div><!--/.nav-collapse -->\n  </div>\n</div>\n\n<div class=\"container theme-showcase\" role=\"main\">\n```", "```php\n<?php if (isset($login_fail)) : ?>\n  <div class=\"alert alert-danger\"><?php echo $this->lang->line('admin_login_error') ; ?></div>\n<?php endif ; ?>\n<?php echo validation_errors(); ?>\n\n<div class=\"container\">\n  <?php echo form_open('admin/login', 'class=\"form-signin\" role=\"form\"') ; ?>\n    <h2 class=\"form-signin-heading\"><?php echo $this->lang->line('admin_login_header') ; ?></h2>\n    <input type=\"email\" name=\"usr_email\" class=\"form-control\" placeholder=\"<?php echo $this->lang->line('admin_login_email') ; ?>\" required autofocus>\n    <input type=\"password\" name=\"usr_password\" class=\"form-control\" placeholder=\"<?php echo $this->lang->line('admin_login_password') ; ?>\" required>\n    <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\"><?php echo $this->lang->line('admin_login_signin') ; ?></button>\n  <?php echo form_close() ; ?>\n</div>\n```", "```php\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta name=\"description\" content=\"\">\n    <meta name=\"author\" content=\"\">\n    <link rel=\"shortcut icon\" href=\"<?php echo base_url('bootstrap/ico/favicon.ico'); ?>\">\n\n    <title><?php echo $this->lang->line('system_system_name'); ?></title>\n\n    <!-- Bootstrap core CSS -->\n    <link href=\"<?php echo base_url('bootstrap/css/bootstrap.min.css'); ?>\" rel=\"stylesheet\">\n    <!-- Bootstrap theme -->\n    <link href=\"<?php echo base_url('bootstrap/css/bootstrap-theme.min.css'); ?>\" rel=\"stylesheet\">\n\n    <!-- Custom styles for this template -->\n    <link href=\"<?php echo base_url('bootstrap/css/signin.css');?>\" rel=\"stylesheet\">\n\n    <!-- Just for debugging purposes. Don't actually copy this line! -->\n    <!--[if lt IE 9]><script src=\"img/ie8-responsive-file-warning.js\"></script><![endif]-->\n\n    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->\n    <!--[if lt IE 9]>\n      <script src=\"img/html5shiv.js\"></script>\n      <script src=\"img/respond.min.js\"></script>\n    <![endif]-->\n  </head>\n\n  <body>\n```", "```php\n  <h1 id=\"tables\" class=\"page-header\">Dashboard</h1>\n\n<table class=\"table\">\n    <thead>\n        <tr>\n          <th>#</th>\n          <th>Name</th>\n          <th>Email</th>\n          <td>Actions</td>\n        </tr>\n    </thead>\n    <tbody>\n        <?php if ($discussion_query->num_rows() > 0) : ?>\n            <?php foreach ($discussion_query->result() as $row) : ?>\n                <tr>\n                  <td><?php echo $row->ds_id ; ?></td>\n                  <td><?php echo $row->usr_name ; ?></td>\n                  <td><?php echo $row->usr_email ; ?></td>\n                  <td><?php echo anchor('admin/update_item/ds/allow/'.\n                    $row->ds_id,$this->lang->line('admin_dash_allow')) .\n                    ' ' . anchor('admin/update_item/ds/disallow/'.\n                    $row->ds_id,$this->lang->line('admin_dash_disallow')) ; ?>\n                  </td>\n                </tr>\n                <tr>\n                  <td colspan=\"3\"><?php echo $row->ds_title; ?></td>\n                  <td></td>\n                </tr>\n                <tr>\n                   <td colspan=\"3\"><?php echo $row->ds_body; ?></td>\n                  <td></td>\n                </tr>\n            <?php endforeach ; ?>\n        <?php else : ?>\n            <tr>\n              <td colspan=\"4\">No naughty forums here, horay!</td>\n            </tr>\n        <?php endif; ?>\n    </tbody>\n</table>\n\n<table class=\"table\">\n    <thead>\n        <tr>\n          <th>#</th>\n          <th>Name</th>\n          <th>Email</th>\n         <td>Actions</td>\n        </tr>\n    </thead>\n    <tbody>\n        <?php if ($comment_query->num_rows() > 0) : ?>\n            <?php foreach ($comment_query->result() as $row) : ?>\n                <tr>\n                  <td><?php echo $row->cm_id ; ?></td>\n                  <td><?php echo $row->usr_name ; ?></td>\n                  <td><?php echo $row->usr_email ; ?></td>\n                  <td><?php echo anchor('admin/update_item/cm/allow/'.\n                    $row->cm_id,$this->lang->line('admin_dash_allow')) . \n                    ' ' . anchor('admin/update_item/cm/disallow/'.\n                    $row->cm_id,$this->lang->line('admin_dash_disallow')) ; ?>\n                  </td>\n                </tr>\n                <tr>\n                  <td colspan=\"3\"><?php echo $row->cm_body; ?></td>\n                  <td></td>\n                </tr>\n            <?php endforeach ; ?>\n        <?php else : ?>\n                <tr>\n                  <td colspan=\"4\">No naughty comments here, horay!</td>\n                </tr>\n        <?php endif; ?>\n    </tbody>\n</table>\n```", "```php\nbody {\n  padding-top: 40px;\n  padding-bottom: 40px;\n  background-color: #eee;\n}\n\n.form-signin {\n  max-width: 330px;\n  padding: 15px;\n  margin: 0 auto;\n}\n.form-signin .form-signin-heading,\n.form-signin .checkbox {\n  margin-bottom: 10px;\n}\n.form-signin .checkbox {\n  font-weight: normal;\n}\n.form-signin .form-control {\n  position: relative;\n  height: auto;\n  -webkit-box-sizing: border-box;\n     -moz-box-sizing: border-box;\n          box-sizing: border-box;\n  padding: 10px;\n  font-size: 16px;\n}\n.form-signin .form-control:focus {\n  z-index: 2;\n}\n.form-signin input[type=\"email\"] {\n  margin-bottom: -1px;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.form-signin input[type=\"password\"] {\n  margin-bottom: 10px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n}\n```", "```php\n<?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Discussions extends MY_Controller {\n    function __construct() {\n        parent::__construct();\n        $this->load->helper('string');\n        $this->load->library('encrypt');\n        $this->load->model('Discussions_model');\n        $this->load->library('form_validation');\n        $this->form_validation->set_error_delimiters('<div class=\"alert alert-danger\">', '</div>');\n    }\n\n    public function index() {\n        if ($this->uri->segment(3)) {\n            $filter = $this->uri->segment(4);\n            $direction = $this->uri->segment(5);\n            $page_data['dir'] = $this->uri->segment(5);\n        } else {\n            $filter = null;\n            $direction = null;\n            $page_data['dir'] = 'ASC';\n        }\n\n        $page_data['query'] = $this->Discussions_model->fetch_discussions($filter,$direction);\n\n        $this->load->view('common/header');\n        $this->load->view('nav/top_nav');\n        $this->load->view('discussions/view', $page_data);\n        $this->load->view('common/footer');\n    }\n\n    public function create() {\n    public function create() {\n        $this->form_validation->set_rules('usr_name', $this->lang->line('discussion_usr_name'), 'required|min_length[1]|max_length[255]');\n        $this->form_validation->set_rules('usr_email', $this->lang->line('discussion_usr_email'), 'required|min_length[1]|max_length[255]');\n        $this->form_validation->set_rules('ds_title', $this->lang->line('discussion_ds_title'), 'required|min_length[1]|max_length[255]');\n        $this->form_validation->set_rules('ds_body', $this->lang->line('discussion_ds_body'), 'required|min_length[1]|max_length[5000]');\n\n        if ($this->form_validation->run() == FALSE) { \n            $this->load->view('common/header');\n            $this->load->view('nav/top_nav');\n            $this->load->view('discussions/new');\n            $this->load->view('common/footer');\n        } else {\n            $data = array('usr_name' => $this->input->post('usr_name'),\n                          'usr_email' => $this->input->post('usr_email'),\n                          'ds_title' => $this->input->post('ds_title'),\n                          'ds_body' =>  $this->input->post('ds_body')\n                          );\n\n            if ($ds_id = $this->Discussions_model->create($data)) {\n                redirect('comments/index/'.$ds_id);\n            } else {\n                // error\n                // load view and flash sess error\n            }\n        }\n    }\n    public function flag() {\n        $ds_id = $this->uri->segment(3);\n        if ($this->Discussions_model->flag($ds_id)) {\n            redirect('discussions/');\n        } else {\n            // error\n            // load view and flash sess error\n        }\n    }\n}\n```", "```php\n$data = array('usr_name' => $this->input->post('usr_name'),\n              'usr_email' => $this->input->post('usr_email'),\n              'ds_title' => $this->input->post('ds_title'),\n              'ds_body' =>  $this->input->post('ds_body'));\n```", "```php\nif ($ds_id = $this->Discussions_model->create($data)) {\n    redirect('comments/index/'.$ds_id);\n} else {\n   ...\n```", "```php\n<?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Comments extends MY_Controller {\n    function __construct() {\n        parent::__construct();\n        $this->load->helper('string');\n        $this->load->library('form_validation');\n        $this->load->model('Discussions_model');\n        $this->load->model('Comments_model');\n        $this->form_validation->set_error_delimiters('<div class=\"alert alert-danger\">', '</div>');\n    }\n\n    public function index() {\n        if ($this->input->post()) {\n            $ds_id = $this->input->post('ds_id');\n        } else {\n            $ds_id = $this->uri->segment(3);\n        }\n\n        $page_data['discussion_query'] = $this->Discussions_model->fetch_discussion($ds_id);\n        $page_data['comment_query'] = $this->Comments_model->fetch_comments($ds_id);\n        $page_data['ds_id'] = $ds_id;\n\n        $this->form_validation->set_rules('ds_id', $this->lang->line('comments_comment_hidden_id'), 'required|min_length[1]|max_length[11]');\n        $this->form_validation->set_rules('comment_name', $this->lang->line('comments_comment_name'), 'required|min_length[1]|max_length[25]');\n        $this->form_validation->set_rules('comment_email', $this->lang->line('comments_comment_email'), 'required|min_length[1]|max_length[255]');\n        $this->form_validation->set_rules('comment_body', $this->lang->line('comments_comment_body'), 'required|min_length[1]|max_length[5000]');\n\n        if ($this->form_validation->run() == FALSE) { \n            $this->load->view('common/header');\n            $this->load->view('nav/top_nav');\n            $this->load->view('comments/view', $page_data);\n            $this->load->view('common/footer');\n        } else {\n            $data = array('cm_body' => $this->input->post('comment_body'),\n                          'usr_email' => $this->input->post('comment_email'),\n                          'usr_name' => $this->input->post('comment_name'),\n                          'ds_id' =>  $this->input->post('ds_id')\n                          );\n\n            if ($this->Comments_model->new_comment($data)) {\n                redirect('comments/index/'.$ds_id);\n            } else {\n                // error\n                // load view and flash sess error\n            }\n        }\n    }\n\n    public function flag() {\n        $cm_id = $this->uri->segment(4);\n        if ($this->Comments_model->flag($cm_id)) {\n            redirect('comments/index/'.$this->uri->segment(3));\n        } else {\n            // error\n            // load view and flash sess error\n        }\n    }\n}\n```", "```php\n<!-- Comment - list of comments -->\n<?php foreach ($comment_query->result() as $comment_result) : ?>\n  <li class=\"media\">\n    <a class=\"pull-left\" href=\"#\">\n      <img class=\"media-object\" src=\"img/profile.svg\" />\n    </a>\n    <div class=\"media-body\">\n      <h4 class=\"media-heading\"><?php echo $comment_result->usr_name . anchor('comments/flag/'.$comment_result->ds_id . '/' . $comment_result->cm_id,$this->lang-\n>line('comments_flag')) ; ?></h4>\n      <?php echo $comment_result->cm_body ; ?>\n    </div>\n  </li>\n<?php endforeach ; ?>\n```", "```php\ncomments/index/id-of-discussion\n```", "```php\nif ($this->input->post()) {\n    $ds_id = $this->input->post('ds_id');\n} else {\n    $ds_id = $this->uri->segment(3);\n}\n```", "```php\n$data = array('cm_body' => $this->input->post('comment_body'),\n              'usr_email' => $this->input->post('comment_email'),\n              'usr_name' => $this->input->post('comment_name'),\n              'ds_id' =>  $this->input->post('ds_id')\n    );\n```", "```php\nif ($this->Comments_model->new_comment($data)) {\n     redirect('comments/index/'.$ds_id);\n} else {\n     // error\n     // load view and flash sess error\n}\n```", "```php\n<!-- Comment - list of comments -->\n<?php foreach ($comment_query->result() as $comment_result) : ?>\n  <li class=\"media\">\n    <a class=\"pull-left\" href=\"#\">\n      <img class=\"media-object\" src=\"img/profile.svg\" />\n    </a>\n    <div class=\"media-body\">\n      <h4 class=\"media-heading\"><?php echo $comment_result->usr_name . anchor('comments/flag/'.$comment_result->ds_id . '/' . $comment_result->cm_id,$this->lang-\n>line('comments_flag')) ; ?></h4>\n      <?php echo $comment_result->cm_body ; ?>\n    </div>\n  </li>\n<?php endforeach ; ?>\n```", "```php\nanchor('comments/flag/'.$comment_result->ds_id . '/' . $comment_result->cm_id,$this->lang->line('comments_flag'))\n```", "```php\npublic function flag() {\n    $cm_id = $this->uri->segment(4);\n    if ($this->Comments_model->flag($cm_id)) {\n        redirect('comments/index/'.$this->uri->segment(3));\n    } else {\n        // error\n        // load view and flash sess error\n    }\n}\n```", "```php\n<?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\nclass Admin extends MY_Controller {\n    function __construct() {\n        parent::__construct();\n        $this->load->helper('string');\n        $this->load->library('form_validation');\n        $this->load->model('Admin_model');\n        $this->form_validation->set_error_delimiters('<div class=\"alert alert-danger\">', '</div>'); \n    }\n\n    public function index() {\n        if ($this->session->userdata('logged_in') == FALSE) {\n            redirect('admin/login');\n        } \n\n        redirect('admin/dashboard');\n    }\n\n    public function login() {\n        $this->form_validation->set_rules('usr_email', $this->lang->line('admin_login_email'), 'required|min_length[1]|max_length[255]');\n        $this->form_validation->set_rules('usr_password', $this->lang->line('admin_login_password'), 'required|min_length[1]|max_length[25]');\n\n        if ($this->form_validation->run() == FALSE) {\n            $this->load->view('common/login_header');\n            $this->load->view('nav/top_nav');\n            $this->load->view('admin/login');\n            $this->load->view('common/footer');\n        } else {\n            $usr_email = $this->input->post('usr_email');\n            $usr_password = $this->input->post('usr_password');\n\n            $query = $this->Admin_model->does_user_exist($usr_email);\n\n            if ($query->num_rows() == 1) { // One matching row found\n                foreach ($query->result() as $row) {\n                    // Call Encrypt library\n                    $this->load->library('encrypt');\n\n                    // Generate hash from a their password\n                    $hash = $this->encrypt->sha1($usr_password);\n\n                    // Compare the generated hash with that in the database\n                    if ($hash != $row->usr_hash) {\n                        // Didn't match so send back to login\n                        $page_data['login_fail'] = true;\n                        $this->load->view('common/login_header');\n                        $this->load->view('nav/top_nav');\n                        $this->load->view('admin/login',$page_data);\n                        $this->load->view('common/footer'); \n                    } else {\n                        $data = array(\n                            'usr_id' => $row->usr_id,\n                            'usr_email' => $row->usr_email,\n                            'logged_in' => TRUE\n                        );\n\n                        // Save data to session\n                        $this->session->set_userdata($data);\n                        redirect('admin/dashboard');\n                    }\n                }\n            }\n        }\n    }\n\n    public function dashboard() {\n        if ($this->session->userdata('logged_in') == FALSE) {\n            redirect('admin/login');\n        } \n\n        $page_data['comment_query'] = $this->Admin_model->dashboard_fetch_comments();\n        $page_data['discussion_query'] = $this->Admin_model->dashboard_fetch_discussions();\n\n        $this->load->view('common/header');\n        $this->load->view('nav/top_nav');\n        $this->load->view('admin/dashboard',$page_data);\n        $this->load->view('common/footer');\n    }\n\n    public function update_item() {\n        if ($this->session->userdata('logged_in') == FALSE) {\n            redirect('admin/login');\n        } \n\n        if ($this->uri->segment(4) == 'allow') {\n            $is_active = 1;\n        } else {\n            $is_active = 0;\n        }\n\n        if ($this->uri->segment(3) == 'ds') {\n            $result = $this->Admin_model->update_discussions($is_active, $this->uri->segment(5));\n        } else {\n            $result = $this->Admin_model->update_comments($is_active, $this->uri->segment(5));\n        }\n\n        redirect('admin');\n    }\n}\n```", "```php\nif ($this->form_validation->run() == FALSE) {\n  ...\n```", "```php\n$query = $this->Admin_model->does_user_exist($usr_email);\n  if ($query->num_rows() == 1) {\n    ...\n```", "```php\n$hash = $this->encrypt->sha1($usr_password);\n```", "```php\nif ($hash != $row->usr_hash) {\n   ...\n```", "```php\n$data = array(\n     'usr_id' => $row->usr_id,\n     'usr_email' => $row->usr_email,\n     'logged_in' => TRUE\n);\n\n// Save data to session\n$this->session->set_userdata($data);\nredirect('admin/dashboard');\n```", "```php\n<?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\n// General\n$lang['system_system_name'] = \"Forum\";\n\n// Top Nav\n$lang['top_nav_view_discussions'] = \"Home\";\n$lang['top_nav_new_discussion'] = \"New Discussion\";\n$lang['top_nav_login'] = \"Login\";\n\n// Discussions\n$lang['discussions_title'] = \"Discussions\";\n$lang['discussions_num_comments'] = 'Comments';\n\n// Comments\n$lang['comments_form_instruction'] = \"Join in, add your comment below.\";\n$lang['comments_flag'] = ' [Flag]';\n$lang['comments_created_by'] = 'Created by ';\n$lang['comments_created_at'] = ' at ';\n$lang['comments_comment_name'] = 'Your name';\n$lang['comments_comment_email'] = 'Your email';\n$lang['comments_comment_body'] = 'Comment';\n\n// Discussions\n$lang['discussion_form_instruction'] = \"Create your own discussion, fill in the form below\";\n$lang['discussion_flag'] = ' [Flag]';\n$lang['discussion_usr_name'] = 'Your name';\n$lang['discussion_usr_email'] = 'Your email';\n$lang['discussion_ds_title'] = 'Discussion title';\n$lang['discussion_ds_body'] = 'Your question, point etc';\n\n// Admin - login\n$lang['admin_login_header'] = \"Please sign in\";\n$lang['admin_login_email'] = \"Email\";\n$lang['admin_login_password'] = \"Password\";\n$lang['admin_login_signin'] = \"Signin...\";\n$lang['admin_login_error'] = \"Whoops!  Something went wrong - have another go!\";\n$lang['admin_dash_allow'] = \"Allow\";\n$lang['admin_dash_disallow'] = \"Disallow\";\n```"]