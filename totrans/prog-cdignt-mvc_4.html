<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;Libraries"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Libraries</h1></div></div></div><p>This chapter covers the CI libraries topic, and the different types of libraries and their different usage categories, with several code examples of web applications. The CI development platform provides us with the built-in libraries, enables us with an easy procedure to integrate third-party libraries, and also allows us to develop our new libraries and share them with the community, if we wish to.</p><p>The CI libraries<a id="id115" class="indexterm"/> are powering efficiency, code reusability, separation, and simplicity. The benefits achieved are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Efficiency</strong></span>: In means of minimal loaded resources. This feature achieved by the fact that the CI library, may be loaded only by the specific CI project controller(s), or even only in specific method(s), where the library's services are required. Hence, the overhead (memory) of the library resources during execution time is minimized in each controller operation state.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Reusability</strong></span>: Reusability means writing once a function code and reusing it across the project resources. The libraries can be loaded by any project controller, model, or helper (in a helper, we shall use the <code class="literal">&amp;get_instance()</code> method discussed several times before) to reuse their code anywhere in the CI project. More than that, the controller-rendered views can call those loaded library methods. Hence, great code reusability is achieved.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Separation</strong></span>: Separation prevents, accidental overlapping with same name to the parameters or functions elsewhere in the project. The Library class methods and parameters have their own name space so that they can't be overridden by a mistake outside the library in case the developer is using the same parameters in the served module such as controllers/views.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Simplicity</strong></span>: This make the code text as minimal as possible and easy to understand and maintain. The <a id="id116" class="indexterm"/>libraries' methods called from the served resources, such as controllers, models, and helpers, make the code look much simpler, and make it easy to maintain and navigate. Hence, this simplifies extending the code and maintaining it.</li></ul></div><p>The libraries give <a id="id117" class="indexterm"/>us development power and efficiency with rich-focused functionality on certain project aspects, and also enable us to have simple and concise fashion code in the served controllers by calling the library method, instead of having the service code locally in the controller. The libraries should be initially instantiated by the code using them, such as the controller, model, or helper, or if used by almost all controllers, models can be loaded using the autoload mechanism. <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>, discusses how to autoload the libraries.</p><p>Once instantiated by the autoload or controller constructor, the libraries can be used by the controller methods or by rendered views. In addition, any model, helper, or another library may use our project installed libraries using <code class="literal">&amp;get_instance()</code>, as described in the previous chapters.</p><p>The libraries power the code of the CI model-view-controller instantiated components (for more information, visit the website <a class="ulink" href="http://en.wikipedia.org/wiki/Model-view-controller">http://en.wikipedia.org/wiki/Model-view-controller</a>), regarding the functionality expansion and reusability across the project controllers, models, helpers, and views.</p><p>This chapter will primarily focus on the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The CI libraries' scope and usage:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Usage categories</li><li class="listitem" style="list-style-type: disc">Using a library</li><li class="listitem" style="list-style-type: disc">Adding a library to the project</li><li class="listitem" style="list-style-type: disc">Instantiating a library</li><li class="listitem" style="list-style-type: disc">Using library method(s)</li></ul></div></li><li class="listitem" style="list-style-type: disc">Available CI libraries</li><li class="listitem" style="list-style-type: disc">Examples:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Example 1: using the built-in libraries</li><li class="listitem" style="list-style-type: disc">Example 2: using third-party libraries such as the Google Maps CI library wrapper</li><li class="listitem" style="list-style-type: disc">Example 3: building our own library such as the Flickr API wrapper</li><li class="listitem" style="list-style-type: disc">Example 4: building our own library such as the LinkedIn API wrapper</li></ul></div></li></ul></div><p>We will begin by briefly reviewing what a library in a CI framework is, and how we can use it for our needs across the project code resources.</p><div class="section" title="The CI libraries' scope and usage"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec27"/>The CI libraries' scope and usage</h1></div></div></div><p>The CI library does not have access to the controller resources by default unless the CI <code class="literal">$ci = &amp;get_instance()</code> is called and <code class="literal">$ci</code> is used instead of <code class="literal">$this</code> to access the CI resources, for example, instead of <code class="literal">$this-&gt;db-&gt;query ($sql)</code>, we shall use <code class="literal">$ci-&gt;db-&gt;query ($sql)</code>, and so on. We can extend the CI library using the third-party libraries from where CI echo system (the CI community of developers worldwide share knowledge, sources, and solutions for code and open issues), or develop our own libraries from scratch or extending other libraries.</p><p>Any <a id="id118" class="indexterm"/>application library will be located under <code class="literal">application/libraries/</code> in the project's directory. In addition, optional resources such as the<a id="id119" class="indexterm"/> library configuration file that is required for library configurations can be placed under the project root or elsewhere. A good practice is to place them under the project root for enhanced security provided by CI. For example, <code class="literal">&lt;PROJECT_ROOT&gt;application/config/&lt;LIB_NAME&gt;_config.php</code>, or even additional resources such as the <code class="literal">images/CSS/HTML/additional</code> class libraries may be required under another <code class="literal">application/&lt;LIB_ADDITIONAL_RESOURCES&gt;</code>, such as <code class="literal">application/assets</code>.</p><p>The library integration and the usage within the CI project are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Adding the library code resources to <code class="literal">application/libraries/my_lib.php</code>, optionally adding related resources, if any, such as a library configuration file, and/or other library assets to their locations as mentioned before.</li><li class="listitem" style="list-style-type: disc">Instantiating the library class via config autoload, or instantiating it via the controller.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Automatically load a library <code class="literal">my_lib</code> for the entire CI project:<div class="informalexample"><pre class="programlisting">$autoload['libraries'] = array('database','my_lib');</pre></div></li><li class="listitem" style="list-style-type: disc">Specifically in certain controller(s), constructor(s), or method(s):<div class="informalexample"><pre class="programlisting">$this-&gt;load-&gt;library('my_lib');</pre></div></li></ul></div></li><li class="listitem" style="list-style-type: disc">Using the library methods:<div class="informalexample"><pre class="programlisting">$result=$this-&gt;my_lib-&gt;called_method ($param1, $param2);</pre></div></li><li class="listitem" style="list-style-type: disc">We can see the library scope as the ultimate OOP reusability enabler for the entire <a id="id120" class="indexterm"/>project code resources' models, views, helpers, and libraries, <a id="id121" class="indexterm"/>which govern all to address the execution requests from the user, or a scheduled request.</li></ul></div><p>As mentioned, the CI libraries enables us with great Separation and Simplicity. For example, the following code:</p><div class="informalexample"><pre class="programlisting">// Library class
class my_handler {
  private $my_lib_param;
  // Can't be accessed outside the class directly
  // but we can provide the read only service as follows:

  public function get_my_lib_param () {
    return $this-&gt;my_lib_param;}
  // The following is a library function that can't 
  // be called from outside the class!
  
  private function my_private_function () { }
  }</pre></div><div class="section" title="Available CI libraries"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec31"/>Available CI libraries</h2></div></div></div><p>CI and the CI echo system of developers provide many libraries covering a rich set of topics. We will <a id="id122" class="indexterm"/>review the CI libraries as well as known resources for the third-party CI libraries.</p><p>We are also encouraged to <a id="id123" class="indexterm"/>build our own libraries that can be used by others, and share them with the community, such as:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The Git community<a id="id124" class="indexterm"/> at <a class="ulink" href="https://github.com">https://github.com</a></li><li class="listitem" style="list-style-type: disc">CI Sparks<a id="id125" class="indexterm"/> at <a class="ulink" href="http://getsparks.org">http://getsparks.org</a></li><li class="listitem" style="list-style-type: disc">CI Forums<a id="id126" class="indexterm"/> at <a class="ulink" href="http://codeigniter.com/forums">http://codeigniter.com/forums</a></li><li class="listitem" style="list-style-type: disc">Packagist <a id="id127" class="indexterm"/>at <a class="ulink" href="https://packagist.org">https://packagist.org</a></li></ul></div><p>To call a built-in library, we shall call for example, the built-in library named <code class="literal">CI_Xxxx</code> as follows: <code class="literal">$this-&gt;load-&gt;library (xxxx)</code>;. So that CI_ prefix is not used and instead of the capitalized library name <code class="literal">Xxxx</code>, we use the lowercase library name <code class="literal">xxxx</code>. For calling a library function <code class="literal">yyyy</code> within the library <span class="strong"><strong>CI_Xxxx</strong></span>, we shall write <code class="literal">$this-&gt;xxxx-&gt;yyyy()</code>;.</p><p>The following is a list of built-in and commonly useful CI libraries (As of version 2.1.4):</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Benchmark</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Encrypt</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Migration</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Unit_test</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Cache</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Exceptions</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Model</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Upload</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Cache_apc</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Form_validation</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Output</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_URI</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Cache_dummy</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_FTP</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Pagination</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_User_agent</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Cache_file</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Hooks</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Parser</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Utf8</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Cache_memcached</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Image_lib</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Profiler</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Xmlrpc</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Calendar</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Input</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Router</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Xmlrpcs</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Cart</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Javascript</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Security</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Zip</code></p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Config</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Jquery</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Session</code></p>
</td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Controller</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Lang</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_SHA1</code></p>
</td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Driver</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Loader</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Table</code></p>
</td><td style="text-align: left" valign="top"> </td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal">CI_Driver_Library</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Log</code></p>
</td><td style="text-align: left" valign="top">
<p><code class="literal">CI_Trackback</code></p>
</td><td style="text-align: left" valign="top"> </td></tr></tbody></table></div><p>In this chapter, we will provide a usage example for Google Maps' third-party library wrapper, available at <a class="ulink" href="https://github.com/ianckc/CodeIgniter-Google-Maps-Library">https://github.com/ianckc/CodeIgniter-Google-Maps-Library</a>.</p><p>Many more third-party libraries can be found following the CI forums at <a class="ulink" href="http://codeigniter.com/forums">http://codeigniter.com/forums</a>.</p></div></div></div>
<div class="section" title="Example 1 &#x2013; using the built-in libraries"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec28"/>Example 1 – using the built-in libraries</h1></div></div></div><p>In this initial example, we <a id="id128" class="indexterm"/>will see how to use the CI built-in library. Here we <a id="id129" class="indexterm"/>will use the CI library <code class="literal">CI_Table</code> as well as the <code class="literal">CI_db</code> library, which, for a given database table/view and some optional CSS settings, will enable us to render the table nicely with all the HTML table tags and CSS settings in just a single line of code. In this example, we will use the same user's table that we used for the controller example in <a class="link" href="ch03.html" title="Chapter 3. Controller Usage and Scope">Chapter 3</a>, <span class="emphasis"><em>Usage and Scope of Controllers</em></span>.</p><p>This example will be constructed from the following controller and view:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">application/controllers/builtins.php</code>: This controller loads the built-in CI library <code class="literal">table</code> as well as the <code class="literal">db</code> library, which is autoloaded (for more information, refer to <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>) to get the user's table content, and set up the table to render using the <code class="literal">table</code> library.<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$this-&gt;load-&gt;library('table');</strong></span>
</pre></div><p>The controllers prepare vectors of map settings and the list of places and possible controllers to zoom into each of the places, and render a view named  <code class="literal">google_map_view</code>.</p></li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views/users_view.php</code>: This view will use the <code class="literal">table</code> library service to render a nicely formatted table as loaded from <code class="literal">db</code>, and configured by the controller.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note04"/>Note</h3><p>Let us assume that the URL to the project root is <code class="literal">http://mydomain.com/myproject</code>, <code class="literal">http://mydomain.com/myproject/builtins</code>.</p><p>(The source code is provided with this book via URLs.)</p></div></div></li></ul></div><div class="section" title="The controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec32"/>The controller file</h2></div></div></div><p>The following is a step-by-step <a id="id130" class="indexterm"/>example of the controller code for each operation:</p><div class="informalexample"><pre class="programlisting">&lt;?php 
/** Use CI built In libraries
class Builtins extends CI_Controller{
  function __construct(){
    parent::__construct();
    // Load the table library that generates the HTML tags for// showing the table structure within a view
    $this-&gt;load-&gt;library('table');
    }
  public function index(){
    // Load the users list from DB into the view 
    $data['users'] = $this-&gt;db-&gt;get('users');
    // Create custom header for the table 
    $header = array
    ('id', 'User Name', 'Hashed Password', 'Position' );
    // Set the headings
    $this-&gt;table-&gt;set_heading($header);
    // Set table formatting 
    $table_format = array ( 'table_open'  =&gt; '&lt;table border="1"cellpadding="2" cellspacing="1" class="mytable"&gt;' );
    $this-&gt;table-&gt;set_template($table_format);
    // Load the view and send the results
    $this-&gt;load-&gt;view('users_view', $data);
    }
  }</pre></div></div><div class="section" title="The view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec33"/>The view file</h2></div></div></div><p>To complete the operation, we will<a id="id131" class="indexterm"/> finish working on the view file.</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html"&gt;
&lt;meta http-equiv="Content-type" content="text/html;charset=utf-8"/&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;
  Showing Users Table Using CI Build-In table Library
&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id='results'&gt;
  &lt;!—All The Formatted Table is rendered by the table libraryinstance using the controller defined settings and the tableof users we have fetched from the DB &gt;
  &lt;?php echo $this-&gt;table-&gt;generate($users); ?&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Example 2 &#x2013; using third-party libraries such as the Google Maps CI library wrapper"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec29"/>Example 2 – using third-party libraries such as the Google Maps CI library wrapper</h1></div></div></div><p>In this example, we will see how to<a id="id132" class="indexterm"/> install and use the <a id="id133" class="indexterm"/>Google Maps CI library with some cool services. First, we need to download the library files from <a class="ulink" href="http://biostall.com/codeigniter-google-maps-v3-api-library">http://biostall.com/codeigniter-google-maps-v3-api-library</a>.</p><p>In the downloaded TAR file, we <a id="id134" class="indexterm"/>shall find the following libraries:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Googlemaps.php</code>: This is the <a id="id135" class="indexterm"/>Google Maps API library for CI. We shall place it at <code class="literal">application/libraries/</code>.</li><li class="listitem" style="list-style-type: disc"><code class="literal">Jsmin.php</code>: This is an<a id="id136" class="indexterm"/> auxiliary code for the library to generate the JavaScript generated code for enabling the smart Google Maps UI interaction. We shall also place it at <code class="literal">application/libraries/</code>.</li><li class="listitem" style="list-style-type: disc">Google Maps V3 API: This is a <a id="id137" class="indexterm"/>PDF file for in-depth, possible library settings and usage.</li></ul></div><p>In this example, we will provide an initial page showing several marked places together on the Google Map window that we will create in our application. In that visualized view, we will enable the user to zoom into predefined selected places we have marked on the map using the CI anchor URL helper.</p><p>This example will be constructed from the following library, controller, and view:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">application/libraries/</code>: This is the CI wrapper library for Google Maps that we downloaded. Refer to the CI library contributor website at <a class="ulink" href="http://biostall.com">http://biostall.com</a>.</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/controllers/gmaps.php</code>: This controller loads the <code class="literal">googlemaps</code> library and builds up several views for several places shown together on the Google Map, and zooms in to each of the places.<div class="informalexample"><pre class="programlisting">$this-&gt;load-&gt;library('googlemaps');</pre></div><p>The controllers prepare vectors of map settings and the list of places and possible controllers to zoom into each of the places, and render a view named  <code class="literal">google_map_view</code>.</p></li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views/google_map_view.php</code>: This is the rendered view that initially shows all the places on the Google Map, and lets the user zoom in using a menu option to a listed zoom-in location, or go back to the view of all the places together on a zoom-out map.</li></ul></div><p>Let us assume the URI to the project root is <code class="literal">http://mydomain.com/myproject</code>. <code class="literal">http://mydomain.com/myproject/gmaps</code>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip05"/>Tip</h3><p>The source code is provided with this book via URLs.</p></div></div><div class="section" title="The controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec34"/>The controller file</h2></div></div></div><p>The controller<a id="id138" class="indexterm"/> file <code class="literal">controllers/gmaps.php</code> will initially load the CI Google Maps library, then set up the maps' settings and the places to be marked and shown in different views (the same view file is rendered with different <code class="literal">$data</code> settings each time). The controller will have the <code class="literal">__construct()</code> and <code class="literal">index()</code> methods, in addition to set the zoom in on the defined places.</p><div class="informalexample"><pre class="programlisting">&lt;?php
/** Use The Google Maps CI Library Wrapper for severalmarked places altogether and zoom-in*/
class Gmaps extends CI_Controller {
  function __construct()
  {  parent::__construct();
    $this-&gt;load-&gt;library('googlemaps');
    // Set the map window sizes:
    $config['map_width']	= "1000px";
    // map window width
    $config['map_height'] = "1000px";
    // map window height
    $this-&gt;googlemaps-&gt;initialize($config);
  }
  function index() {
    /* Initialize and setup Google Maps for our App startingwith 3 marked places
    London, UK, Bombai, India, Rehovot, Israel
    */
    // Initialize our map for this use case of show 3// places altogether.
    // let the zoom be automatically decided by Google for showing// the several places on one view.
    $config['zoom'] = "auto";
    $this-&gt;googlemaps-&gt;initialize($config);
    //Define the places we want to see marked on Google Map!
    $this-&gt;add_visual_flag ('London, UK');
    $this-&gt;add_visual_flag ('Bombai, India');
    $this-&gt;add_visual_flag ('Rehovot, Israel');
    $data = $this-&gt;load_map_setting ();
    // Load our view, passing the map data that has just been//created.
    $this-&gt;load-&gt;view('google_map_view', $data);
  }
  //The class Gmaps continued with several more functions as//follows:
  function london() {
    // Initialize our map
    //Here you can also pass in additional parameters for// customizing the map (see the following code:)
    // Define the address we want to be on the map center
    $config['center'] = 'London, UK'; to be on the map center
    // Set Zoom Level - Zoom 0: World – 18 Street Level
    $config['zoom'] = "16";
    $this-&gt;googlemaps-&gt;initialize($config);
    // Add visual flag
    $this-&gt;add_visual_flag ($config['center']);
    $data = $this-&gt;load_map_setting ();
    // Load our view passing the map data that has just been//created
    $this-&gt;load-&gt;view('google_map_view', $data);
  }
  functionBombay() {
  //Initialize our map.
  //Here you can also pass in additional parameters for//customizing the map (see the following code)
  //Define the address we want to see as the map center
  $config['center'] = 'Bombay, India';
  $config['zoom'] = "16";  // City Level Zoom 
  $this-&gt;googlemaps-&gt;initialize($config);
  // Add visual flag
  $this-&gt;add_visual_flag ($config['center']);
  $data = $this-&gt;load_map_setting ();
  // Load our view passing the map data that has just been created
  $this-&gt;load-&gt;view('google_map_view', $data);
}</pre></div><p>The class <code class="literal">Gmaps</code> continues with several more functions as follows:</p><div class="informalexample"><pre class="programlisting">function rehovot()
{
  // Initialize our map.
  //Here you can also pass in additional parameters for //customizing the map (see the following code)
  $config['center'] = 'Rehovot, Israel';
  $config['zoom'] = "16";
  // City Level Zoom
  $this-&gt;googlemaps-&gt;initialize($config);
  // Add visual flag
  $this-&gt;add_visual_flag ($config['center']);
  $data = $this-&gt;load_map_setting ();
  // Load our view, passing the map data that has just been//created.
  $this-&gt;load-&gt;view('google_map_view', $data);
}
function load_map_setting ( ) {
  $data = array();
  $locations = array();
  $controllers = array();
  // Set controllers list for zoom in
  $locations[] = 'London, UK';
  $locations[] = 'Bombai, India';
  $locations[] = 'Rehovot, Israel';
  // Set controllers list for zoom in 
  $controllers[] = "london";
  $controllers[] = "bombai";
  $controllers[] = "rehovot";
  $data['map'] = $this-&gt;googlemaps-&gt;create_map();
  $data['locations'] = $locations;
  $data['controllers'] = $controllers;
  $data['map'] = $this-&gt;googlemaps-&gt;create_map();
  return $data;
}</pre></div><p>The class <code class="literal">Gmaps</code> continues <a id="id139" class="indexterm"/>with several more functions as follows:</p><div class="informalexample"><pre class="programlisting">function add_visual_flag ( $place ) {
  $marker = array();
  // Setup Marker for the place and the title as the place name
  $marker['position'] = $place;
  $marker['title'] = $place;
  $this-&gt;googlemaps-&gt;add_marker($marker);
  }
}</pre></div></div><div class="section" title="The view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec35"/>The view file</h2></div></div></div><p>The view file will<a id="id140" class="indexterm"/> render the provided Google Maps JavaScript and HTML portions as well as render the list of places. It also provides zoom-in and zoom-out navigation options to the places supported by the controller.</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html"&gt;
&lt;meta http-equiv="Content-type"
content="text/html; charset=utf-8" /&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;script src = http://code.jquery.com/jquery-latest.js &gt;&lt;/script&gt;
  &lt;!--Render all the map JS provided by rendering controller--&gt;
  &lt;?php echo $map['js']; ?&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;H3&gt;CodeIgniter Powered CI Google Maps Library : &lt;H3&gt;
&lt;HR/&gt;&lt;ul&gt;
&lt;!—Let the User Always Get Back to the default Zoom out --&gt;
&lt;li&gt;&lt;?php  echo anchor("index.php/gmaps",
'&lt;B&gt;See All Locations&lt;/B&gt;' ); ?&gt;
&lt;/li&gt;
&lt;?PHP 
$i=0;
foreach ($locations as $location ) {
  // Show to the user all the possible Zoom Ins defined places by//the controller, so that user may zoom in by issuing the// anchor.
  $controller = $controllers["$i"];
  $i++; ?&gt;
  &lt;li&gt;
  &lt;?php echo anchor
  ("index.php/gmaps/$controller", "Zoom-In to ".$location ) ?&gt;
  &lt;/li&gt;
  &lt;?PHP } ?&gt;
  }
&lt;/ul&gt;
&lt;HR&gt;&lt;/HR&gt;
&lt;?php echo $map['html']; ?&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Example 3 &#x2013; building a library such as the Flickr API wrapper"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec30"/>Example 3 – building a library such as the Flickr API wrapper</h1></div></div></div><p>The <a class="ulink" href="http://flickr.com">flickr.com</a> website<a id="id141" class="indexterm"/> by Yahoo! provides API access to the Flickr repository of public photos uploaded to the community. The API is extremely rich, and its documentation is available at <a class="ulink" href="http://www.flickr.com/services/api/">http://www.flickr.com/services/api/</a>, and is called <a id="id142" class="indexterm"/>
<span class="strong"><strong>App Garden</strong></span>.</p><p>The API is enabled<a id="id143" class="indexterm"/> for various programming languages and access methods. We<a id="id144" class="indexterm"/> will build a solution of a wrapper that can be expanded to get any Flickr API service, using the PHP REST access method.</p><p>This example will be constructed from the following library, controller, and view:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">application/libraries/flickr_wrapper.php</code>: The is the CI wrapper library that enables smooth Flickr API access via CI. This basic services library can be expanded to support the entire Flickr App Garden.</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/controllers/flickr_recent.php</code>: This is the controller that uses the <code class="literal">flickr_wrapper</code> library that we wrote and pulls the recent public photos uploaded with the EXIF photo info and the photographer-related information.</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views/flickr_recent_view.php</code>: This is the view that shows the collected information of recent photos and photographers.</li></ul></div><p>Let us assume the URI to the project root is <code class="literal">http://mydomain.com/myproject</code>. Hence, the URI to execute the auto controller for logging in will be <code class="literal">http://mydomain.com/myproject/flickr_recent</code>.</p><div class="section" title="The flickr_wrapper.php library file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec36"/>The flickr_wrapper.php library file</h2></div></div></div><p>The <code class="literal">application/libraries/flickr_wrapper.php</code> library file contains the library <code class="literal">flickr_wrapper</code> class library that we are building <a id="id145" class="indexterm"/>and using to<a id="id146" class="indexterm"/> access the Flickr App Garden API. It is mandatory to load this library with a valid Flickr <code class="literal">api_key</code> that you can get by following the Flickr App Garden documentation. The library will use the PHP REST API access, so that we can later expand any of the Flickr API services to be supported with our library. Each of the library methods returns a multidimensional keyed array of the resultant data.</p><p>The following is the code:</p><div class="informalexample"><pre class="programlisting">/**
* CodeIgniter Flickr API wrapper Library Class
*
* Enable Simple Flickr API usage 
*
* @package        CodeIgniter
* @category    Libraries
* @author        Eli Orr
* Usage:
* Via CI controller: 
* $this-&gt;load-&gt;library( 'flickr_wrapper',
* array(   'api_key'     =&gt; '&lt;YOUR_FLICKR_API_KEY&gt;',
* 'DEFAULT_RES' =&gt; '3000',
// filter 3000 pix 
* 'GPS_ENABLED' =&gt; FALSE ));
* $this-&gt;flickr_wrapper-&gt;set_params ( $keyed_array );
* $recent_photos = 
* $this-&gt;flickr_wrapper-&gt;flickrPhotosGetRecent ();
* $filter_photos = 
* $this-&gt;flickr_handler-&gt;
* filter_photos ($photos_to_filter);
* $user_info        = 
* $this-&gt;flickr_wrapper-&gt;flickrUserInfo ($uid);
* // $uid e.g. 72095130@N00
//.PRIVATE 
//We will use the following private functions:
private function _file_get_contents_curl($url);
private function _flickrRestAPI ($params);
private function _is_filtered_photo ($photo_rec );
*/</pre></div><p>The following <a id="id147" class="indexterm"/>is the <code class="literal">Flickr_wrapper</code> class that we are building:</p><div class="informalexample"><pre class="programlisting">class Flickr_wrapper {
  // parameters as part of the library instance
  private $DEFAULT_RES = 2000;
  // Width in Pixels 
  private $GPS_ENABLED = TRUE;
  // total shown photos 
  private $RECENT_PHOTOS = 500;
  // how many photos in each poll ?
  // CI instance 
  private $CI;
  // Flickr api_key to use 
  private $api_key = "" ;
  function __construct( $params = array())
  {
    // Make sure we got the api_key – otherwise exit!
    if (!isset ($params['api_key']))
    exit ('FATAL - must be constructed with api_key!');
    $this-&gt;set_params ($params);
    // Just for debugging needs, we may drop those later
    error_reporting(E_ALL);
    ini_set('display_errors', '1');
  }
  // change settings on the fly
  function set_params ( $key_array ) {
    // sets array of instance parameters 
    foreach ($key_array as $key =&gt; $val ){ 
      switch ($key) {
        case 'DEFAULT_RES': $this-&gt;DEFAULT_RES 	= $val; break;
        case 'GPS_ENABLED': $this-&gt;GPS_ENABLED 	= $val; break;
        case 'RECENT_PHOTOS': $this-&gt;RECENT_PHOTOS = $val; break;
       case 'api_key' : $this-&gt;api_key = $val; break;
       // We can add many more here.
       default: exit ("FATAL! - set_params invalid param: $key");
     }
  }
}</pre></div><p>The class code <a id="id148" class="indexterm"/>continues while shifting our focus on accessing the recent public photos.</p><div class="informalexample"><pre class="programlisting">// Pulls recent public photos as multi-dimensional array
function flickrPhotosGetRecent () {
  #
  # build the Params for API
  #
  $params = array(
    'api_key' =&gt; $this-&gt;api_key,
    'method' =&gt; 'flickr.photos.getRecent',
    'extras' =&gt; 'o_dims,owner_name,date_taken,media,
    path_alias,url_sq,geo',
    'per_page' =&gt; $this-&gt;RECENT_PHOTOS,
    'format' =&gt; 'php_serial'
  );
  $rsp_obj = $this-&gt;_flickrRestAPI ($params);
  #
  # check if ok or successful result :
  #
  if ($rsp_obj['stat'] == 'ok') {
    # Get the array of all the photo records in this cycle 
    return $recent_photos = $rsp_obj['photos']['photo'];
  }
  else 
  # Query failed we shall return NULL to the caller 
  return NULL;
}
// Get the Photo EXIF that has a lot of info related to the// photo for a given photo id</pre></div><p>The class code <a id="id149" class="indexterm"/>continues, where we will see how to access additional information related to the image.</p><div class="informalexample"><pre class="programlisting">function GetPhotoExif ($photo_id) {
  #
  # build the API URL to call
  #
  $params = array(
    'api_key' =&gt; $this-&gt;api_key,
    'method' =&gt; 'flickr.photos.getExif',
    'photo_id' =&gt; $photo_id,
    'format' =&gt; 'php_serial',
  );
  $rsp_obj = $this-&gt;_flickrRestAPI ($params);
  #
  # display the photo title (or an error if it failed)
  #
  if ($rsp_obj['stat'] == 'ok') {
    /*
    Array ([photo] =&gt; Array ([id] =&gt; 8002716747 [secret] =&gt; 559f87aea0
    [server] =&gt; 8030
    [farm] =&gt; 9
    [camera] =&gt; Casio EX-H20G
    [exif] =&gt; ... A LOT OF EXTRA INFO
    */
    
    $photo_camera = $rsp_obj['photo']['camera'];
    // We can add more interesting items for our app here
    $params = array
    ( 'camera'    =&gt; $photo_camera,
    'full_exif' =&gt; $rsp_obj
    // All EXIF info for the photo_id
  );
  return $params;
  }
  else // Request Failed We shall return error:
  return NULL;
}</pre></div><p>Let's see how we can apply photo filtering with the following code:</p><div class="informalexample"><pre class="programlisting">// apply photos filtering on a provided photos array
// based on the current settings
function filter_photos ($photos) {
  $filtered_photos = array();
  foreach ($photos  as $photo) {
    if ($this-&gt;_is_filtered_photo ($photo) )
    $filtered_photos[] = $photo;
  }
  return $filtered_photos;
}
function flickrUserInfo ($uid) {
  // UID e.g. : 72095130@N00
  // find info for this User
  #
  # build the API URL to call
  #
  $params = array(
    'api_key'	=&gt; $this-&gt;api_key,
    'method'	=&gt; 'flickr.people.getInfo',
    'user_id' 	=&gt; $uid,
    'extras'  	=&gt; 'contact,friend,family',
    'format'	=&gt; 'php_serial',
  );
  $rsp_obj = $this-&gt; _flickrRestAPI ($params);
  #
  # Check if response is OK
  #
  if ($rsp_obj['stat'] == 'ok'){ 
    // Yes! We have a good result .. let's load it to the // keyed array structure
    $real_name = @urlencode($rsp_obj['person']['realname']['_content']);
    $location = @urlencode (strtolower ($rsp_obj['person']['location']['_content']));
    $photos = @$rsp_obj['person']['photos']['count']['_content'];
    // more can be added</pre></div><p>The class <a id="id150" class="indexterm"/>code continues as follows:</p><div class="informalexample"><pre class="programlisting">    $params = array ( 
      'name' =&gt; $real_name,
      'uid' =&gt; $uid,
      'photos' =&gt; $photos,
      'location' =&gt; $location,
      'full_info' =&gt; $rsp_obj
    );
    return $params;
  }
  else // Response failed return NULL
  return NULL;
}
// PRIVATE SECTION OF ALL PRIVATE LIBRARY METHODS 
// THAT CANNOT BE CALLED DIRECTLY FROM THE LIBRARY USER 
// This is the heart of our wrapper library that makes it easy to get 
// The Flickr API access via simple keyed array based calls and response
private function _flickrRestAPI ($params) {
  $encoded_params = array();
  foreach ($params as $k =&gt; $v){
    $encoded_params[] = urlencode($k).'='.urlencode($v);
  }
  #
  # call the API and decode the response
  #
  $url = "http://api.flickr.com/services/rest/?".implode('&amp;', $encoded_params);
  // This will create get query URI …?param1=val1&amp;param2=val2// and so on
  $rsp = $this-&gt;_file_get_contents_curl($url);
  return $rsp_obj = unserialize($rsp);
}</pre></div><p>The class code<a id="id151" class="indexterm"/> continues as follows:</p><div class="informalexample"><pre class="programlisting">// This function assure we can get a url content into a buffer// it requires that a PHP curl library is installed!
private function _file_get_contents_curl($url) {
  if (! function_exists('curl_init') )
  exit ('PHP curl library is not enabled please fix!');
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_URL, $url);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}
private function _is_filtered_photo ($photo_rec ) {
  /*
  [o_width]   =&gt; 4416
  [latitude] =&gt; 0
  //More can be added 
  */
  // Photo width  shall be larger than  $this-&gt;DEFAULT_RES ?
  if ( 	(int) (@$photo_rec['o_width'] )  &lt;
  (int)  $this-&gt;DEFAULT_RES  )	 return FALSE;
  // GPS info required &amp; Found ?
  if (( $this-&gt;GPS_ENABLED &amp;&amp; ! @$photo_rec['latitude'] ))
  return FALSE;
  // if we are here the filtered photo passed successfully
  return TRUE;
  }
}</pre></div></div><div class="section" title="The flickr_recent.php controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec37"/>The flickr_recent.php controller file</h2></div></div></div><p>The <a id="id152" class="indexterm"/> <code class="literal">application/controllers/flickr_recent.php</code> controller file will load the <code class="literal">flickr_wrapper</code> API, call its services for newly uploaded <a id="id153" class="indexterm"/>public photos and photographers, and render a view to show the results.</p><p>In order to execute the controller, you should point your browser to the following URI: <code class="literal">http://mydomain.com/myproject/flickr_recent</code>.</p><p>The following is the controller code:</p><div class="informalexample"><pre class="programlisting">&lt;?php
/**
 * Flickr Recent Controller
 *
 * Provide recent uploaded public photos in flickr community
 * Enable to apply several settings and filtering
 * Enable to get photographer user profile for each photo
 * 
 * @author Eli Orr
*/
class Flickr_recent extends CI_Controller{
  function __construct()
  {
    parent::__construct();
    /* 
    Standard Libraries, database, &amp; helper url are included in theconfigs/autoload.php
    */
    // This lines are only for debugging needs we may drop them// if things are going good
    error_reporting(E_ALL);
    ini_set('display_errors', '1');
    /* ------Loading User Defined Library------------ */
    $this-&gt;load-&gt;library
    ( 'flickr_wrapper',
    array('api_key' =&gt; '&lt;YOUR_FLICKR_API&gt;',
    'DEFAULT_RES' =&gt; '3000',
    // filter 3000 pix
    'GPS_ENABLED' =&gt; FALSE
  )
  );
}</pre></div><p>The class <a id="id154" class="indexterm"/>code continues as follows:</p><div class="informalexample"><pre class="programlisting">function index () {
  $settings = array(
    'DEFAULT_RES' =&gt; '4000',  // Only 4000 pix and better
    'GPS_ENABLED' =&gt; FALSE,  // GPS Info is not mandatory
    'RECENT_PHOTOS' =&gt; 50,  // Latest 100 photo uploads
  );
  $this-&gt;flickr_wrapper-&gt;set_params ( $settings );
  $photos_to_filter = 
  $this-&gt;flickr_wrapper-&gt;flickrPhotosGetRecent ();
  $filter_photos = 
  $this-&gt;flickr_wrapper-&gt;filter_photos ($photos_to_filter);
  $data = Array();
  $data['photos'] = $filter_photos;
  $data['settings'] = $settings;
  $this-&gt;load-&gt;view('flickr_recent_view.php',$data );
  }
}</pre></div></div><div class="section" title="The flickr_recent_view.php view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec38"/>The flickr_recent_view.php view file</h2></div></div></div><p>The <code class="literal">flickr_recent_view.php</code> view file is rendered by our controller named <code class="literal">Flickr_recent</code> defined previously. This controller uses our developed <code class="literal">flickr_wrapper</code> library in order to get the recent Flickr uploaded photos with their associated information.</p><p>The view file is located at <code class="literal">application/views/flickr_recent_view.php</code>. This view uses the CI parser for the PHP inserted parameters using the <code class="literal">&lt;?=$param ?&gt;</code> notation.</p><p>The following is the code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8" /&gt;
&lt;div&gt;
&lt;H1&gt;Flickr Recent Uploads&lt;/H1&gt;
&lt;p&gt;
&lt;!--  Show the applied filter settings first --&gt;
&lt;table border="1" style='background-color:#b0c4de;' &gt;
&lt;tr&gt;
  &lt;td&gt;Photos in Poll&lt;/td&gt;&lt;td&gt;&lt;?=$settings['RECENT_PHOTOS'];?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;Min. Width Filter&lt;/td&gt;&lt;td&gt;&lt;?=$settings['DEFAULT_RES'];?&gt;Px&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;GPS Filter&lt;/td&gt;&lt;td&gt;&lt;?=$settings['GPS_ENABLED'] ? "With GPS" : "With/Without GPS"; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/p&gt;
&lt;!--  For each photo show the User name, how many photos they took till now, the original size in MP (Mega Pixels) of the photos and the Time stamp when the photo was taken by the camera (mostly loaded days or even weeks/months later)
&lt;table border="1"  style='background-color:#009900;'  &gt;
&lt;tr&gt;
  &lt;th&gt;User Uploaded&lt;/th&gt;&lt;th&gt;User photos Count&lt;/th&gt;
  &lt;th&gt;Photo ID&lt;/th&gt;&lt;th&gt;Original Size MP&lt;/th&gt;&lt;th&gt;Was Taken&lt;/th&gt;
&lt;/tr&gt;</pre></div><p>The class code <a id="id155" class="indexterm"/>continues as follows:</p><div class="informalexample"><pre class="programlisting">&lt;?PHP foreach($photos as $photo )
{
  // get the owner id
  $uid = $photo['owner'];
  // Get User Info
  $user_info = $this-&gt;flickr_wrapper-&gt;flickrUserInfo ($uid);
  $photos = number_format ($user_info["photos"]);
  $mp_res = (int) ((( $photo['o_width' ] * $photo['o_height'] )/ 1000000)  +  1);
  ?&gt; 
  &lt;tr&gt;
    &lt;td&gt; &lt;?=$photo['ownername'] ?&gt;&lt;/td&gt;
    &lt;td&gt; &lt;?=$photos ?&gt;&lt;/td&gt;
    &lt;td&gt; &lt;?=$photo['id'] ?&gt;&lt;/td&gt;
    &lt;td&gt; &lt;?=$mp_res ?&gt;&lt;/td&gt;
    &lt;td&gt; &lt;?=$photo['datetaken'] ?&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;?PHP      } ?&gt;
  &lt;/table&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Example 4 &#x2013; the LinkedIn API wrapper"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec31"/>Example 4 – the LinkedIn API wrapper</h1></div></div></div><p>In this example, <a id="id156" class="indexterm"/>we will build the CI Library wrapper to integrate with the LinkedIn API in order to query the LinkedIn information from it.</p><p>There are several challenges in doing so, one of which is to get the token to access the LinkedIn resources and access the data objects such as the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The LinkedIn user's details</li><li class="listitem" style="list-style-type: disc">The LinkedIn user's connections</li><li class="listitem" style="list-style-type: disc">The LinkedIn company's details</li><li class="listitem" style="list-style-type: disc">The LinkedIn company's updates</li></ul></div><div class="section" title="Requirements"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec39"/>Requirements</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The PHP <a id="id157" class="indexterm"/>extension <code class="literal">oauth</code> library must be installed from <a class="ulink" href="http://il1.php.net/manual/en/book.oauth.php">http://il1.php.net/manual/en/book.oauth.php</a>.</li><li class="listitem" style="list-style-type: disc">We shall register the application at LinkedIn Developers Network Homepage to receive the API key from <a class="ulink" href="http://developer.linkedin.com">http://developer.linkedin.com</a>. This unique API key is required to identify our application in order to grant access from LinkedIn for responding to our API calls to their API. Once we've registered our LinkedIn app, we will be provided with an API key and a secret key. For the safety of our application, we do not share our secret key. For more information, please refer to <a class="ulink" href="http://developer.linkedin.com/">http://developer.linkedin.com/</a>.</li></ul></div></div><div class="section" title="Authentication flowchart"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec40"/>Authentication flowchart</h2></div></div></div><p>The following steps are required to authenticate our LinkedIn application to grant access. We will refer to this project as LinkedIn app.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The LinkedIn <a id="id158" class="indexterm"/>API client sends a request to LinkedIn. The client sends the request to the LinkedIn request token URL at <a class="ulink" href="https://api.linkedin.com/uas/oauth/requestToken">https://api.linkedin.com/uas/oauth/requestToken</a> via the <code class="literal">oauth</code> object with a <code class="literal">callback URL</code> as a parameter to the LinkedIn API. The <code class="literal">callback URL</code> parameter is the URL to return to from the LinkedIn Authorization <a id="id159" class="indexterm"/>URL, where the LinkedIn user shall confirm the LinkedIn app's required permission. The LinkedIn server responds and returns the <code class="literal">oauth</code> token (public key) and the <code class="literal">ouath</code> token secret key.<div class="informalexample"><pre class="programlisting">Client &gt; Server request token URL
parameter: callback URL &lt; Server returns oauth token, ouath token secret</pre></div></li><li class="listitem">The client sends <a id="id160" class="indexterm"/>the request to the LinkedIn server auth URL using the <code class="literal">oauth_token</code> token received<a id="id161" class="indexterm"/> from <a class="ulink" href="https://api.linkedin.com/uas/oauth/authorize%20?oauth_token%20=%20oauth_token">https://api.linkedin.com/uas/oauth/authorize ?oauth_token = oauth_token</a>, where <code class="literal">oauth_token</code> is the oauth token returned from the server at phase 1.<div class="informalexample"><pre class="programlisting">Client &gt; Server auth URL
$_GET parameter: oauth token</pre></div></li><li class="listitem">The LinkedIn server returns the oauth token, the oauth token secret, and the <code class="literal">oauth_verifier</code> to the client.<div class="informalexample"><pre class="programlisting">Client &lt; Server
oauth token, oauth token secret, oauth_verifier</pre></div></li><li class="listitem">The client sends the request to the LinkedIn Server access token path at <a class="ulink" href="https://api.linkedin.com/uas/oauth/accessToken">https://api.linkedin.com/uas/oauth/accessToken</a>.<div class="informalexample"><pre class="programlisting">Client &gt; Server access token path
parameter: oauth_verifier (from phase 2) &lt; Server returns oauth token, ouath token secret</pre></div></li></ol></div><p>This example will be constructed from the following controller, library, and view:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">application/controllers/linkedinfo.php</code>: The controller that uses the LinkedIn library for authentication and displaying the output returned by the library</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/libraries/linkedin_handeler.php</code>: The <code class="literal">linkedin_handler</code> library, which enables access to the LinkedIn resources, such as the LinkedIn user's details and connections, and the companies' details</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views/linkedin-me.php</code>: The view, which displays the LinkedIn user's details</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views/linked-connections.php</code>: The view, which displays the LinkedIn user's connections</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views/linked-company.php</code>: The view, which displays the company's details</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views/linked-company-updates.php</code>: The view, which displays a company's updates</li></ul></div><p>Let us assume the URI to the project root is <code class="literal">http://mydomain.com/myproject</code>.</p><p>Hence, the URI to execute the auth controller for login will be <code class="literal">http://mydomain.com/myproject/linkedinfo</code>.</p></div><div class="section" title="The linkedin_handler.php library file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec41"/>The linkedin_handler.php library file</h2></div></div></div><p>The library <a id="id162" class="indexterm"/>file <code class="literal">application/libraries/linkedin_handler.php</code> contains the class library <code class="literal">linkedin_handler</code>.</p><p>The library<a id="id163" class="indexterm"/> contains the function for authenticating the app and accessing the LinkedIn resources.</p><p>The following is the code:</p><div class="informalexample"><pre class="programlisting">&lt;?php

if (!defined('BASEPATH')) exit('No direct script access allowed');

// The php oauth extension is required
// For more information refer to 
// http://il1.php.net/manual/en/book.oauth.php
if(!extension_loaded('oauth')) {
  throw new Exception('Simple-LinkedIn: library not compatible with installed PECL oauth extension. Please disable this extension to use the Simple-LinkedIn library.');
  }
/*
 *   CodeIgniter LinkedIn API
 *
 *   @package CodeIgniter
 *
 *   @author  Yehuda Zadik
 *
 *
 *   Enable Simple LinkedIn API usage
 */
class Linkedin_handler {
  const LINKEDIN_API_URL = 'https://api.linkedin.com';
  
  private $api_key;
  private $secret_key;
  private $on_failure_url;
  
  // Oauth class
  public $oauth_consumer;
  
  // The url to return to from LinkedIn
  // authorize url in our case is// http://mydomain.com/return_from_provider
  private $callback_url;
  
  // The request token URL
  private $request_token_url;
  
  // LinkedIn authorize URL for getting the LinkedIn user // confirmation for required permissions
  private $authorize_path;
  
  // LinkedIn URL for getting the tokens to access // the LinkedIn URL resources
  private $access_token_path;
  
  // accessory variable for accessing the LinkedIn resources
  private $api_url;
  
  // CI instance
  private $CI;
  
  /*
   *  Set the class variables
   */
  private function set_varaiables() {
    $this-&gt;request_token_url = self::LINKEDIN_API_URL . '/uas/oauth/requestToken';
    $this-&gt;authorize_path = self::LINKEDIN_API_URL . '/uas/oauth/authorize';
    $this-&gt;access_token_path = self::LINKEDIN_API_URL . '/uas/oauth/accessToken';
    
    $this-&gt;api_url = array('people' =&gt; 'http://api.linkedin.com/v1/people/~' , 'connections' =&gt; 'http://api.linkedin.com/v1/people/~/connections', 'companies' =&gt; 'http://api.linkedin.com/v1/companies/');
    
    $this-&gt;CI = &amp;get_instance();
    }
  /*
   *  Library constructor
   *
   *  Initializes the library variables
   *  and initializes oauth consumer object
   *
   *  @param $config array of the Linked configuration variables
   */
  public function __construct($config) {
    // Setting the handler's variables;
    foreach ($config as $k =&gt; $v) {
      $this-&gt;$k = $v;
      }
    
    // Setting all the class variables
    $this-&gt;set_varaiables();
    
    // Initializing the oauth consumer object
    $this-&gt;oauth_consumer = new oauth($this-&gt;api_key, $this-&gt;secret_key);
    
    // Enabling Oauth debug
    $this-&gt;oauth_consumer-&gt;enableDebug();
    
    // Checking if returned from the LinkedIn UI permission // conformation window
    if ($this-&gt;CI-&gt;input-&gt;get('oauth_verifier') || $this-&gt;CI-&gt;input-&gt;get('oauth_problem')) {
      $this-&gt;on_success();
      } elseif (!$this-&gt;CI-&gt;session-&gt;userdata('oauth_token') &amp;&amp; !$this-&gt;CI-&gt;session-&gt;userdata('oauth_token_secret')) {
      // if session variables are not set: oauth_token, // oauth_token_secret
      // call auth to start the process of getting the tokens from // LinkedIn via the oauth consumer object
      $this-&gt;auth();
      } elseif ($this-&gt;CI-&gt;session-&gt;userdata('oauth_token') &amp;&amp; $this-&gt;CI-&gt;session-&gt;userdata('oauth_token_secret')) {
      // if session variables are set: oauth_token, // oauth_token_secret initialize the oauth consumer with // $oauth_token, $oauth_token_secret
      $oauth_token = $this-&gt;CI-&gt;session-&gt;userdata('oauth_token');
      $oauth_token_secret = $this-&gt;CI-&gt;session-&gt;userdata('oauth_token_secret');
      
      // initialize oauth consumer with $oauth_token, // $oauth_token_secret
      $this-&gt;setToken($oauth_token, $oauth_token_secret);
      }
    }
  /*
   * Start the process of getting oauth token &amp; oauth token * secret so that the user
   * redirects to a LinkedIn UI permission conformation window
   */
  public function auth()  {
    // Start communication with the LinkedIn server
    $request_token_response = $this-&gt;getRequestToken();
    
    $this-&gt;CI-&gt;session-&gt;set_userdata('oauth_token_secret', $request_token_response['oauth_token_secret']);
    
    // Get the token for the LinkedIn authorization url
    $oauth_token = $request_token_response['oauth_token'];
    
    $log_message = 'yuda auth getRequestToken oauth_token: : ' . $oauth_token;
    $log_message = "oauth_token_secret: " . $request_token_response['oauth_token_secret'] . "\n";
    log_message('debug', $log_message) ;
    
    // Redirect to the LinkedIn authorization url for getting // permissions for the app
    header("Location: " . $this-&gt;generateAuthorizeUrl($oauth_token));
    }
  /*
   * This is the method called after returning
   * from the LinkedIn authorization URL
   * The returned values from the LinkedIn authorization URL are: * oauth_token, oauth_token_secret, oauth_verifier
   * Those values are used to retrieve oauth_token, * oauth_token_secret for accessing the LinkedIn resources
   *
   */
  public function on_success() {
    if ($this-&gt;CI-&gt;input-&gt;get('oauth_problem')) {
      redirect($this-&gt;on_failure_url);
      }
    
    // Set the oauth consumer tokens
    $this-&gt;setToken($this-&gt;CI-&gt;input-&gt;get('oauth_token'), $this-&gt;CI-&gt;session-&gt;userdata('oauth_token_secret'));
    
    // Sending request to the LinkedIn access_token_path to // receive the array, which it's keys are tokens: oauth_token, // oauth_token_secret for accessing the LinkedIn resources
    $access_token_reponse = $this-&gt;getAccessToken($this-&gt;CI-&gt;input-&gt;get('oauth_verifier'));
    
    // Setting the session variables with the tokens: oauth_token, // oauth_token_secret for accessing the LinkedIn resources
    $this-&gt;CI-&gt;session-&gt;set_userdata('oauth_token', $access_token_reponse['oauth_token']);
    $this-&gt;CI-&gt;session-&gt;set_userdata('oauth_token_secret',$access_token_reponse ['oauth_token_secret']);
    
    // Redirecting to the main page
    redirect('');
    }
  
  /*
   * This method sends the request token to LinkedIn
   *
   * @return array keys: oauth_token, oauth_token_secret
   */
  public function getRequestToken() {
    // The LinkedIn request token url
    $request_token_url = $this-&gt;request_token_url;
    
    // The LinkedIn app permissions
    $request_token_url = "?scope = r_basicprofile+r_emailaddress+r_network";
    
    // Getting the response from the LinkedIn request token URL.
    // The method returns the response, which is an array// with the following keys: oauth_token, oauth_token_secret
    return $this-&gt;oauth_consumer-&gt;getRequestToken($request_token_url, $this-&gt;callback_url);
    }
  /*
   * This method returns the LinkedIn authorize URL
   *
   * @param $oauth_token string oauth token for the LinkedIn * authorzation URL
   *
   * @return string URL of the LinkedIn authorization URL
   */
  public  function generateAuthorizeUrl($oauth_token) {
    return $this-&gt;authorize_path . "?oauth_token = " . $oauth_token;
    }
  /*
   * This method sets the token and secret keys of
   * the oauth object of the oauth protocol
   *
   * @param $oauth_token string oauth token
   * @param $oauth_token_secret oauth_token_secret
   *
   */
  public function setToken($oauth_token, $oauth_token_secret) {
    $this-&gt;oauth_consumer-&gt;setToken($oauth_token, $oauth_token_secret);
    }
  /*
   * This method requests the LinkedIn tokens for
   * accessing the LinkedIn resources
   * It returns an array with the following keys: oauth_token, * oauth_token_secret
   *
   * @param $oauth_verifier string
   *
   * @return array Array with the following keys: *  oauth_token, oauth_token_secret,
   * which are used to access the LinkedIn resources URL
   */
  public function getAccessToken($oauth_verifier) {
    try {
      // Returns an array with the following keys: // oauth_token, oauth_token_secret
      // These keys are used to access the LinkedIn // resources URL
      return $this-&gt;oauth_consumer-&gt;getAccessToken($this-&gt;access_token_path, '', $oauth_verifier);
      } catch(OAuthException $E) {
      echo "&lt;pre&gt;";var_dump($this-&gt;oauth_consumer);
      echo "&lt;/pre&gt;&lt;br&gt;&lt;br&gt;";
      echo "Response: ". $E-&gt;lastResponse;
      exit();
      }
    }
  /*
   * This function returns a LinkedIn user's details
   * It returns a JSON string containing these values
   *
   * @return $json string String containing user's details
   */
  public function me() {
    $params = array();
    $headers = array();
    $method = OAUTH_HTTP_METHOD_GET;
    $api_url = $this-&gt;api_url['people'] . '?format = json';
    
    try {
      // Request for a LinkedIn user's details
      $this-&gt;oauth_consumer-&gt;fetch ($api_url, $params, $method, $headers);
      
      // Receiving the last response with json // containing the user's details
      $s_json = $this-&gt;oauth_consumer-&gt;getLastResponse();
      return $s_json;
      } catch(OAuthException $E) {
      echo "&lt;pre&gt;";var_dump($this-&gt;oauth_consumer);
      echo "&lt;/pre&gt;&lt;br&gt;&lt;br&gt;";
      echo "Response: ". $E-&gt;lastResponse;
      exit();
      }
    }
  /*
   * This function returns a LinkedIn user's connections
   * It returns a JSON string containing these values
   *
   * @return $json string String containing user's connections
   */
  public function connections() {
    $params = array();
    $headers = array();
    $method = OAUTH_HTTP_METHOD_GET;
    $api_url = $this-&gt;api_url['connections'] . '?count = 10&amp;format = json';
    
    try {
      // Request for a LinkedIn user's connections
      $this-&gt;oauth_consumer-&gt;fetch($api_url, $params, $method, $headers);
      
      // Receiving the last response with json containing the user's // connections
      $s_json = $this-&gt;oauth_consumer-&gt;getLastResponse();
      return $s_json;
      } catch(OAuthException $E) {
      echo "&lt;pre&gt;";var_dump($this-&gt;oauth_consumer);
      echo "&lt;/pre&gt;&lt;br&gt;&lt;br&gt;";
      echo "Response: ". $E-&gt;lastResponse;
      exit();
      }
    }
  /*
   * This function returns a LinkedIn company' details
   * It returns a JSON string containing these values
   *
   * @param Integer $company_id - company id
   *
   * @return $json string String containing a company' details
   */
  public function company($company_id) {
    $params = array();
    $headers = array();
    $method = OAUTH_HTTP_METHOD_GET;
    $api_url = $this-&gt;api_url['companies'] . $company_id;
    
    // The following company's details are required: // company_id, number of employees, foundation year, // number of the company's followers
    $api_url = ':(id, name, website-url, twitter-id, employee-count-range, specialties, founded-year, num-followers)?format = json';
    
    try {
      // Request for a LinkedIn company's details
      $this-&gt;oauth_consumer-&gt;fetch($api_url, $params, $method, $headers);
      
      // Receiving the last response with json containing the // company's details
      $s_json = $this-&gt;oauth_consumer-&gt;getLastResponse();
      return $s_json;
      } catch(OAuthException $E) {
      echo "&lt;pre&gt;";var_dump($this-&gt;oauth_consumer);
      echo "&lt;/pre&gt;&lt;br&gt;&lt;br&gt;";
      echo "Response: ". $E-&gt;lastResponse;
      exit();
      }
    }
  /*
   * This function returns a LinkedIn company' three updates
   * It returns a JSON string containing these values
   *
   * @param Integer $company_id - company id
   *
   * @return $json string String containing company's three updates
   */
  public function company_updates($company_id) {
    $params = array();
    $headers = array();
    $method = OAUTH_HTTP_METHOD_GET;
    $api_url = $this-&gt;api_url[ 'companies'] . $company_id . '/updates?start = 0 &amp; count = 3 &amp; format = json';
    
    try {
      // Request for a LinkedIn company's three updates
      $this-&gt;oauth_consumer-&gt;fetch($api_url, $params, $method, $headers);
      
      // Receiving the last response with json // containing company's three updates
      $s_json = $this-&gt;oauth_consumer-&gt;getLastResponse();
      return $s_json;
      } catch(OAuthException $E) {
      echo "&lt;pre&gt;"; var_dump($this-&gt;oauth_consumer);
      echo "&lt;/pre&gt;&lt;br&gt;&lt;br&gt;";
      echo "Response: ". $E-&gt;lastResponse;
      exit();
      }
    }
  }
// Class closing tags
/*  End of file linkedin.php */
/* Location: ./application/libraries/linkedin_handler.php */</pre></div></div><div class="section" title="The linkedinfo.php controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec42"/>The linkedinfo.php controller file</h2></div></div></div><p>The controller<a id="id164" class="indexterm"/> file <code class="literal">application/controllers/linkedinfo.php</code> will load the LinkedIn API, call its services, <a id="id165" class="indexterm"/>and render a view to show the results.</p><p>The following is the controller code:</p><div class="informalexample"><pre class="programlisting">&lt;?php
if (!defined('BASEPATH')) exit('No direct script access allowed');

/**
 * *
 * The controller is loading our developed library * LinkedIn (wrapper)
 * Next, the following process will occur in the loaded library.
 * 1 – get oauth token &amp; oauth token secret so that the user * will be redirected to a LinkedIn UI permission conformation * window to approve our requested permission.
 * 2 – If user confirms the permissions we requested, * the method onSuccess is called with the * oauth token &amp; oauth token secret as $_GET parameters.* The tokens will be stored as session parameters. * Else we cannot proceed querying LinkedIn and the onFailure.
 *
 * Now we can access the LinkedIn resources using the retrieved .*.tokens.
 * Here are the methods that query LinkedIn resources: * me() – Get the Info of the User who confirmed the permissions
 * connections() - Get the preceding user connection records JSON * formatted
 * company() – We just gave an example how to retrieve any company * by company id we got from the results or query company * id by company id or search criteria
 * company_updates() – Let us get the latest updates of this * company
 */
class Linkedinfo extends CI_Controller {
  // array of LinkedIn configuration variables
  private $linkedin_config;
  
  // callback url from the LinkedIn authorization URL
  private $callback_url;
  /*
   * Controller constructor
   *
   * Checks if session variables are set: oauth_token, * oauth_token_secret
   * If they are set, then it initializes the oauth consumer
   * else it will call the method auth() to start the * process of setting the token
   * It also loads the LinkedIn library
   */
  public function __construct() {
    
    parent::__construct();
    
    $linked_config = array(
      // Application keys registered in the // LinkedIn developer app
      ‹api_key› =&gt; ‹esq76cosbm9x›, ‹secret_key› =&gt; ‹TyUQ2FzRRzWz9bHk›,// The url to return from the // LinkedIn confirmation URL
        ‹callback_url› =&gt; base_url() . ‹linkedinfo/on_success›,// The URL when the failure occurs
          ‹on_failure_url› =&gt; ‹linkedinfo/on_failure›);
    
    // Load the LinkedIn library
    $this-&gt;load-&gt;library(‹linkedin_handler›, $linked_config);
    }
  /*
   * Load the main menu of the application
   */
  public function index() {
    $this-&gt;load-&gt;view(‹linkedin-menu›);
    }
  /*
   * This is the method called after returning* from the LinkedIn authorization URL
   * The returned values from the LinkedIn authorization URL are: * oauth_token, oauth_token_secret, oauth_verifier
   * Those values are used to retrieve oauth_token, * oauth_token_secret for accessing the LinkedIn resources
   *
   *
   */
  public function onSucess() {
    // Set the oauth consumer tokens
    $this-&gt;linkedin-&gt;setToken($this-&gt;input-&gt;get(‹oauth_token›), $this-&gt;session-&gt;userdata(‹oauth_token_secret›));
    
    // Sending the request to the LinkedIn access_token_path to 
    // receive the array, which it's keys
    // are tokens: oauth_token, oauth_token_secret for // accessing the LinkedIn resources
    $access_token_reponse = $this-&gt;linkedin-&gt;getAccessToken($this-&gt;input-&gt;get('oauth_verifier'));
    
    // Setting the session variables with the tokens: oauth_token, // oauth_token_secret for accessing the LinkedIn resources
    $this-&gt;session-&gt;set_userdata(‹oauth_token›, $access_token_reponse[‹oauth_token›]);
    $this-&gt;session-&gt;set_userdata(‹oauth_token_secret›, $access_token_reponse[‹oauth_token_secret›]);
    
    // Redirecting to the main page
    redirect(‹›);
    }
  /*
   *
   */
  /*
   * This function calls the library method me to get
   * the LinkedIn user›s details
   */
  public function me() {
    // Get the LinkedIn user›s details
    $s_json = $this-&gt;linkedin-&gt;me();
    $o_my_details = json_decode($s_json);
    $prodile_url = $o_my_details-&gt;siteStandardProfileRequest-&gt;url;
    
    $view_params[‹my_details›] = $o_my_details;
    $view_params[‹profile_url›] = $prodile_url;
    
    // Load the view for displaying the LinkedIn user›s details
    $this-&gt;load-&gt;view(‹linkedin-me›, $view_params);
    }
  /*
   * This function calls the library method me to get
   * the LinkedIn user›s connections
   */
  public function connections() {
    // Get the LinkedIn user›s connections
    $s_json = $this-&gt;linkedin-&gt;connections();
    $o_json = json_decode($s_json);
    
    // Processing data received from the LinkedIn library
    $a_connections = array();
    for ($index = 0; $index &lt; $o_json-&gt;_count; $index++) {
      if ($o_json-&gt;values[$index]-&gt;id == ‹private›) {
        continue;
        }
      
      if (isset($o_json-&gt;values[$index]-&gt;pictureUrl)) {
        $picture_url = $o_json-&gt;values[$index]-&gt;pictureUrl;
        } else {
        $picture_url = ‹› ;
        }
      
      $a_connections[] = array(‹picture_url› =&gt; $picture_url, ‹name› =&gt; $o_json-&gt;values[$index]-&gt;firstName . « «. $o_json-&gt;values[$index]-&gt;lastName, ‹headline› =&gt; $o_json-&gt;values[$index]-&gt;headline, ‹industry› =&gt; $o_json-&gt;values[$index]-&gt;industry, ‹url› =&gt; $o_json-&gt;values[$index]-&gt;siteStandardProfileRequest-&gt;url);
      }
    
    $view_params[‹connections_count›] = $o_json-&gt;_total;
    $view_params[‹connections›] = $a_connections;
    
    // Load the view for displaying the LinkedIn user›s // connections
    $this-&gt;load-&gt;view(‹linked-connections›, $view_params);
    }
  /*
   * This function the calls library method me to get
   * the LinkedIn company›s details
   *
   * @param $company_id integer - Linkedin company id
   */
  public function companies($company_id) {
    // Get the LinkedIn company›s details
    $s_json = $this-&gt;linkedin-&gt;company($company_id);
    $o_company_details = json_decode( $s_json);
    
    $a_company_details = array (‹id› =&gt; $company_id, ‹name› =&gt; $o_company_details-&gt;name, ‹specialties› =&gt; $o_company_details-&gt;specialties-&gt;values, ‹websiteUrl› =&gt; $o_company_details-&gt;websiteUrl, ‹employeeCountRange› =&gt; $o_company_details-&gt;employeeCountRange-&gt;name, ‹foundedYear› =&gt; $o_company_details-&gt;foundedYear, ‹numFollowers› =&gt; $o_company_details-&gt;numFollowers);
    
    // Load the view for displaying the LinkedIn company›s // details
    $view_params = $a_company_details;
    $this-&gt;load-&gt;view(‹linked-company›, $view_params);
    }
  /*
   * This function calls the library method me to get
   * the LinkedIn company›s updates
   *
   *  @param $company_id integer - Linkedin company id
   */
  public function company_updates($company_id) {
    // Get the LinkedIn company›s updates
    $s_json = $this-&gt;linkedin-&gt;company_updates($company_id);
    $o_company_updates = json_decode( $s_json);
    
    // Processing the data received from the LinkedIn library
    $a_updates = array();
    $a_json_updates = $o_company_updates-&gt;values;
    for ($index = 0; $index &lt; count($a_json_updates);$index++) {
        $o_update = $a_json_updates[$index];
        
        if (isset($o_update-&gt;updateContent-&gt;companyJobUpdate)) {
          $a_updates[] = array(‹type› =&gt; ‹Job Update›, ‹position› =&gt; $o_update-&gt;updateContent-&gt;companyJobUpdate-&gt;job-&gt;position-&gt;title, ‹url› =&gt; $o_update-&gt;updateContent-&gt;companyJobUpdate-&gt;job-&gt;siteJobRequest-&gt;url);
        }
      }
    
    // Load the view for displaying the LinkedIn // company›s updates
    $view_params[‹updates›] = $a_updates;
    $this-&gt;load-&gt;view(‹linked-company-updates›, $view_params);
    }
  } // class closing tags
/* End of the file linkedinfo.php */
/* Location: ./application/controllers/linkedinfo.php */</pre></div></div><div class="section" title="The linkedin-me.php view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec43"/>The linkedin-me.php view file</h2></div></div></div><p>This view<a id="id166" class="indexterm"/> file displays the LinkedIn<a id="id167" class="indexterm"/> user's details.</p><p>The following is the view code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang = "en"&gt;
&lt;head&gt;
  &lt;meta charset = "utf-8"&gt;
  &lt;title&gt;My Details&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table&gt;
&lt;tr&gt;
  &lt;td&gt;Full Name:&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $my_details-&gt;firstName . « « . $my_details-&gt;lastName ; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;Title&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $my_details-&gt;headline ; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;My LinkedIn profile&lt;/td&gt;
  &lt;td&gt;&lt;a href = «&lt;?php echo $profile_url ?&gt;» target = «_blank»&gt;Link&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;div&gt;
  &lt;p&gt;&lt;a href = «&lt;?php echo site_url(‹›) ; ?&gt;»&gt;Back to Menu&lt;/a&gt; &lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>The view file linked-connections.php</p><p>This view<a id="id168" class="indexterm"/> file displays the LinkedIn user's connections.</p><p>The following is the view code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang = "en"&gt;
&lt;head&gt;
  &lt;meta charset = "utf-8"&gt;
  &lt;title&gt;My Connections&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;My Total connections: &lt;?php echo $connections_count ; ?&gt;&lt;/h1&gt;
&lt;div&gt;
  &lt;p&gt;&lt;a href = «&lt;?php echo site_url(‹›) ; ?&gt;»&gt;Back to Menu&lt;/a&gt; &lt;/p&gt;&lt;/div&gt;
&lt;table&gt;
&lt;tr&gt;
  &lt;td&gt;Picture&lt;/td&gt;
  &lt;td&gt;Name&lt;/td&gt;
  &lt;td&gt;Headline&lt;/td&gt;
  &lt;td&gt;Industry&lt;/td&gt;
&lt;/tr&gt;
  &lt;?php foreach ($connections as $connection): ?&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;img src = «&lt;?php echo $connection[‹picture_url›]; ?&gt;»&gt; &lt;/td&gt;
  &lt;td&gt;&lt;a href = «&lt;?php echo $connection[‹url›];?&gt;» target = «_blank»&gt;&lt;?php echo $connection[‹name›] ?&gt;&lt;/a&gt;&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $connection[‹headline›]; ?&gt;&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $connection[‹industry›]; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endforeach; ?&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>The view file linked-company.php</p><p>This view<a id="id169" class="indexterm"/> file displays the LinkedIn company's details.</p><p>The following is the view code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang = "en"&gt;
&lt;head&gt;
  &lt;meta charset = "utf-8"&gt;
  &lt;title&gt;Company&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div&gt;
  &lt;p&gt;&lt;a href = «&lt;?php echo site_url(‹›); ?&gt;»&gt;Back to Menu&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;table&gt;
&lt;tr&gt;
  &lt;td&gt;Name&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $name; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;Founded&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $foundedYear; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;employeeCountRange&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $employeeCountRange; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;Specialties&lt;td&gt;
  &lt;td&gt;
    &lt;ul&gt;
      &lt;?php foreach ($specialties as $specialty): ?&gt;
      &lt;li&gt;&lt;?php echo $specialty; ?&gt;&lt;/li&gt;
      &lt;?php endforeach; ?&gt;
    &lt;/ul&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;Website&lt;/td&gt;
  &lt;td&gt;&lt;a href = «&lt;?php echo $websiteUrl; ?&gt;»&gt;Website&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;numFollowers&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $numFollowers; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;div style = «margin-top: 10px;»&gt;
  &lt;a href = «&lt;?php echo site_url(‹linkedinfo/company_updates/7919›); ?&gt;»&gt;Updates&lt;/a&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><p>The view file linked-company-updates.php</p><p>This view file<a id="id170" class="indexterm"/> displays the three updates of the LinkedIn company.</p><p>The following is the view code:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset = "utf-8"&gt;
    &lt;title&gt;Company&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;
  &lt;p&gt;&lt;a href = "&lt;?php echo site_url('') ; ?&gt;"&gt;Back to Menu&lt;/a&gt; &lt;/p&gt;
&lt;/div&gt;
&lt;table&gt;
  &lt;?php foreach ($updates as $update): ?&gt;
  &lt;tr&gt;
    &lt;td&gt;
      &lt;ul&gt;
        &lt;?php foreach ($update as $key =&gt; $val): ?&gt;
        &lt;li&gt;&lt;?php echo $key; ?&gt;: &lt;?php echo $val; ?&gt;&lt;/li&gt;
        &lt;?php endforeach; ?&gt;
      &lt;/ul&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;?php endforeach; ?&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec32"/>Summary</h1></div></div></div><p>In this chapter, we have reviewed the CI libraries' scope, the different types of built-in CI echo system third-party libraries, and how to build our own libraries. We also reviewed the steps to load and use the library resources in our project. Eventually, we created several usage examples.</p></div></body></html>