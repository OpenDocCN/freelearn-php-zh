<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Designing Flexible Frontends with Theme Development</h1>
                </header>
            
            <article>
                
<p>The design of a website plays a vital role in attracting visitors. WordPress themes are used as a standard technique for designing the frontend of a site. The availability of thousands of existing themes makes the design process simple as well as flexible. This means that developers have the ability to build custom designs in a rapid process. Building advanced designs via the modification of existing theme files is a common problem in development, and is often realized in the late stages of site development. Developers should have the ability to turn default WordPress themes into amazing frontends and also build custom themes, while being compatible with the WordPress core and theme upgrades.</p>
<p>In this chapter, you will gain knowledge of what should be in a theme and how you should use the theme files hierarchy to build flexible designs using custom templates. You will also learn to extend themes by using child themes, actions, filters, and page templates. From there, you will learn the process of understanding and modifying the templates of various themes in existing sites. Understanding how different theme components fit into your design and modifying these components in existing sites without breaking the theme is the highlight of this chapter.</p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>Understanding the role of themes in development</li>
<li>Tracking and understanding theme components in existing sites</li>
<li>Using child themes to extend existing themes</li>
<li>An in-depth overview of the theme template hierarchy</li>
<li>Extending theme features using actions and filters</li>
<li>Techniques for conditionally changing theme design</li>
</ul>
<p>By the end of this chapter, you will have the ability to understand the role of themes and knowledge to build highly customizable theme templates to design modern websites.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p><span>You will be required to have WordPress 4.9.8 installed to follow this procedure. Even if you </span>have a later version of WordPress, the described examples should work with no significant problems.</p>
<p class="mce-root">The code files of this chapter can be found on GitHub:<br/>
<a href="https://github.com/PacktPublishing/WordPress-Development-Quick-Start-Guide/tree/master/Chapter03">https://github.com/PacktPublishing/WordPress-Development-Quick-Start-Guide/tree/master/Chapter03</a></p>
<p class="mce-root">Check out the following video to see the code in action:<br/>
<a href="http://bit.ly/2EPpNIR" target="_blank">http://bit.ly/2EPpNIR</a></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introduction to WordPress themes</h1>
                </header>
            
            <article>
                
<p>A WordPress theme is a set of files, created using a predefined structure and features, to act as the presentation layer of the website. In simple terms, the presentation layer should contain the HTML needed to generate the layout and all the data passed by the models. WordPress is built to create content management systems, and hence it doesn't focus on separating the presentation layer from its business logic.</p>
<p>Themes contain template files as a mix of both HTML code and PHP logic. As a developer, you need to have knowledge of both designing layouts and applying logic to work with themes.</p>
<p>The themes in your WordPress site are located in the <kbd>wp-content/themes</kbd> directory, with each theme using its own folder. A theme is identified by the predefined set of comments used in the <kbd>style.css</kbd> file. If this file is not available or the comment is broken, WordPress will not list it as a theme, even though the theme files have been placed in the <kbd>wp-content/themes</kbd> directory.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing and configuring themes</h1>
                </header>
            
            <article>
                
<p>The process of installing a WordPress theme is super simple, even for a person who has no prior experience with CMS. WordPress includes a few basic themes upon initial installation and activates the latest theme on your site. The Twenty Seventeen theme is the one activated by default in the latest version of WordPress.</p>
<p>Let's go through the process of installing a theme:</p>
<ol>
<li>First, you have to log in as administrator and go to the <strong><span class="packt_screen">Appearance</span></strong> | <strong><span class="packt_screen">Themes</span></strong> section. You will see a list of available themes, with the first one being the active theme. You can change the theme by clicking the <span class="packt_screen"><strong>Activate</strong></span> button of other available themes in the list.</li>
<li>Once the new theme has been activated, the previous one will be automatically deactivated. Usually, we will not be using the existing themes unless your site needs basic features. Therefore, we need a way to install new themes.</li>
<li>We can install themes by using the <span class="packt_screen"><strong>Add New</strong></span> button in the <span class="packt_screen">Appearance</span> | <span class="packt_screen">Themes</span> section. You will get a list of free themes from the WordPress theme directory, as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-304 image-border" src="assets/eaad08c7-3a29-412b-9706-1eb7a841bb27.png" style="width:60.08em;height:27.50em;"/></p>
<ol start="4">
<li>You have two options: installing a theme from the free theme directory or uploading a theme that's not available in the directory. The first option only requires you to click the <strong><span class="packt_screen">Activation</span></strong> button of the theme in the list. The other option requires you to click on the <span class="packt_screen"><strong>Upload Theme</strong></span> button and upload a .zip file with a valid WordPress theme. After installation, you can activate the theme from a separate screen.</li>
</ol>
<p>The files for the new theme will be located in the <kbd>wp-content/themes</kbd> directory, with a new directory by the theme name. Once a new theme has been installed, you will see changes in the Customize, Widgets, and Menus sections of the <strong><span class="packt_screen">Appearance</span></strong> menu. The theme-specific settings and components will be added to these menu items.</p>
<p>We will be using the default Twenty Seventeen theme throughout this chapter. Since it's a free, built-in theme, you won't find a separate options panel. In advanced premium themes, you will find an options panel in a separate menu item, where you can configure the theme's features and layouts.</p>
<p>This kind of basic installation is good enough that you can now dive into the development aspects of a theme. We will start by understanding how we can use a theme in development.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding the role of themes in development</h1>
                </header>
            
            <article>
                
<p>The ability to choose an existing theme among thousands of free and premium themes is one of the reasons for the success of WordPress as a CMS. Using an existing theme dramatically reduces both development time and cost, as opposed to designing the site from scratch.</p>
<p>The primary intention of a theme is to function as the presentation layer of the site. However, WordPress has evolved into a state where a basic theme, designed to act only as a presentation layer, no longer works. As a result, developers are including more and more advanced functionalities and logic within their themes to compete with other themes. In modern sites, the developer's role may involve customizing theme design, building themes from scratch, and even creating application-specific themes. Therefore, we need to be aware of the type of development involved in a theme. Let's take a look at some of the most common tasks as a developer:</p>
<ul>
<li><strong>Customizing post and page designs</strong>: This is the most common task developers face in the beginning of their developer role. There are millions of websites that have been created with WordPress, and a high percentage of them are created by non-technical site owners who are using existing themes and plugins. So, when there is a need for a change in theme, owners have no option other than to look for a third-party developer. In such scenarios, you will be asked to modify the existing theme designs to match a client's requirements. Therefore, developers need to be familiar with various types of modern themes and design techniques.</li>
<li><strong>Creating page templates</strong>: This is the next step for a developer, where clients ask you to create different types of landing pages to promote their products, services, and other businesses.</li>
</ul>
<ul>
<li><strong>Integrate UI components</strong>: Modern websites are filled with interactive components such as sliders, galleries, accordions, graphs, and so on. Most of these are generated from open source libraries. Many premium themes have built-in support for these types of components. But in scenarios where your site is using a basic theme, you may be asked to integrate these components to make them attractive and deliver lots of information in a limited space. Therefore, you need to be aware of the techniques for integrating these libraries into themes.</li>
<li><strong>Converting designs into a theme</strong>: This will require you to build a theme from scratch. In the old days, we got a PSD from the designer, and the developer's role was to turn it into HTML. With WordPress, you need to go the extra step and convert the HTML into a WordPress theme. It's a very difficult process unless you understand the WordPress template hierarchy, theme functions, and the necessary WordPress conventions.</li>
</ul>
<p>The preceding list goes over some of the tasks involved in working with themes in sites intended to function as a basic CMS. However, modern WordPress sites go beyond the norm by creating full-fledged web applications. In such applications, we can see the use of application themes.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What are application-specific themes?</h1>
                </header>
            
            <article>
                
<p>General-purpose WordPress themes mostly use a standard set of theme files, with the primary intention of providing awesome blog posts and page features. On the other hand, application-specific themes use a lot more application-specific files, which are intended to build application-specific features. These files include application-specific features, business logic, and templates. The advantage of such themes is the ability to use them right away in a site, as opposed to developing these features on top of a generic theme. However, the limitation of application themes is the inability to switch themes, as most features are bound to the theme. Let's take a look at some of the common application theme types to understand the concept of application themes:</p>
<ul>
<li><strong>Buddypress</strong>: This is a plugin that allows you to add social networking features to WordPress. Nowadays, BuddyPress-specific themes are built to extend basic social networking capabilities. The functionality of a BuddyPress theme includes user management, user group management, user activities, user messaging, and so on. You can check out the amazing features of BuddyPress specific-themes at <a href="https://themeforest.net/category/wordpress/buddypress">https://themeforest.net/category/wordpress/buddypress</a>.</li>
</ul>
<ul>
<li><strong>Real estate</strong>: These types of themes are built for creating property listings and selling. Apart from the basic posts and page templates, such themes contain various advanced templates and features for property maps, agent management, property comparison, and searching. You can check out the features of real estate-specific themes at <a href="https://themeforest.net/category/wordpress/real-estate">https://themeforest.net/category/wordpress/real-estate</a>.</li>
<li><strong>LMS</strong>: These types of themes are built for learning management systems where there are teachers, students, and courses. Apart from basic theme features, these themes include templates and features for managing courses, instructors, students, exams, and grades, with advanced searching features for all of the preceding data. You can check out the features of LMS-specific themes at <a href="https://themeforest.net/category/wordpress/education?term=lms">https://themeforest.net/category/wordpress/education?term=lms</a>.</li>
</ul>
<p>After looking at the use of application-specific themes, you will understand that such themes contain the functionality of an entire plugin or maybe an entire application. This might not be the ideal implementation according to development best practices. However, we have to get used to building or using such themes in order to provide cost-effective solutions.</p>
<p>As you may have noticed, your role as a developer has a very wide scope in regard to themes. More often than not, you will have to take responsibility for the design part, along with the functionalities of the theme. It's important to understand how theme components work together to build the design and functionality of the site.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding built-in theme components</h1>
                </header>
            
            <article>
                
<p>The design of any WordPress frontend screen consists of many components on top of the template files. These components act as the location placeholders for the site data. By understanding these components, you can let administrators change the content and locations dynamically based on various needs.</p>
<p>Let's take a look at these components and their roles within the theme:</p>
<ul>
<li><strong>Menu</strong>: This is a collection of links consisting of posts, pages, custom post types, and custom links. The navigation menu is a must-use feature in any site to traverse through the available pages without losing the path. In the old days, we only had one menu placed in the header section of the site. Modern websites contain multiple menus and also place the same menu in multiple locations to simplify the navigation. The number of menus in your site varies based on the supported menu locations of the theme. You have the option to use one or more menu locations that are supported by the theme. The menus supported in a theme can be identified by visiting <a href="http://www.example.com/wp-admin/nav-menus.php?action=locations">http://www.example.com/wp-admin/nav-menus.php?action=locations</a>.</li>
<li><strong>Widget</strong>: This is a block that allows you to display static content, display dynamic content from a database, capture user data, or provide specific functions for the user. Widgets can be placed in the sidebars of your site. The default set of widgets includes Archives, Calendar, Categories, Meta Info, Recent Posts, and Search. Apart from these default widgets that are provided by WordPress, you will also get a considerable amount of themes that are plugin-specific. The widgets that are available in a theme can be identified by deactivating all plugins and visiting <a href="http://www.example.com/wp-admin/widgets.php">http://www.example.com/wp-admin/widgets.php</a>.</li>
<li><strong>Sidebar</strong>: This was intended to work as a column on the left or right of any page/post in the site. The content for sidebars is added by dragging the widgets from the backend of WordPress. However, modern websites require advanced layouts and hence sidebars are used as widget areas instead of just a column. With modern themes, you can have sidebars everywhere in the site to reuse the widgets as well as dynamically change the content. The sidebars available in a theme can be identified by visiting <a href="http://www.example.com/wp-admin/widgets.php">http://www.example.com/wp-admin/widgets.php</a> and checking the right-hand side of the screen.</li>
</ul>
<p>In this section, we have had a brief overview of the functionality of built-in theme components, and where we can find them in the WordPress backend. These details will help you in the process of creating websites from scratch. However, when working with existing sites, you may have to track them down backwards by identifying them in the frontend and then moving to the backend. The next section covers the identification of these components.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Identifying theme components that are used in existing sites</h1>
                </header>
            
            <article>
                
<p>As we have already discussed, developing themes from scratch is not a main requirement in small to medium sites that are built with WordPress. On most occasions, developers will have to work in existing sites with existing themes that have been chosen by the owner. So, you should have the skills to look at any given post/page in the site, and then identify the templates and theme components used in order to rapidly convert the requirements into solutions. Let's take a look at the process of identifying important theme components that are displayed in posts or pages:</p>
<ul>
<li><strong>Menus</strong>: In existing sites, we need to be able to identify the menus in certain screens in order to customize them. We don't have built-in or external features for tracking menus.<br/>
Usually, menus are located in the header and footer parts of the site. First, you will have to look for a set of links that looks like a menu and points to the posts and pages of your site. Then, you can use browser inspection tools to look for the menu container. Generally, you will find the menu container will have the menu name in the element ID or class. Let's inspect the elements of the top menu of the Twenty Seventeen theme, as shown in the following screenshot:</li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-305 image-border" src="assets/4a5a5a4f-fada-4ecd-8c7d-8070c6852711.png" style="width:69.33em;height:30.00em;"/></p>
<p style="padding-left: 60px">As you can see, the <kbd>&lt;ul&gt;</kbd> element uses an ID called <strong>top-menu</strong>, while the <kbd>&lt;nav&gt;</kbd> element uses an <strong>Area Label</strong> called Top Menu. So, now we can go to <a href="http://www.example.com/wp-admin/nav-menus.php?action=locations">http://www.example.com/wp-admin/nav-menus.php?action=locations</a> and find <strong>Top Menu</strong>. Next, we can change the menu or menu items for that location. If you need to customize the code for the menu location, you can search for the <kbd>wp_nav_menu</kbd> function in the theme with <strong>menu_id</strong> as <strong>top-menu</strong>. The use of these menu names in elements differs from one theme to another. However, you should be able to find hints about the menu's location by inspecting the elements.</p>
<ul>
<li><strong>Used templates</strong>: When we are asked to do a customization for an existing site screen, the most difficult part is identifying the theme templates used to generate the screen. However, we have the option of using the <strong>What The File</strong> (<a href="https://wordpress.org/plugins/what-the-file/">https://wordpress.org/plugins/what-the-file/</a>) plugin, which we discussed in <a href="205a9625-512c-4925-a3a8-bfe8a1784773.xhtml" target="_blank">Chapter 1</a>, <em>Introduction to WordPress Development</em>. Once this plugin is installed, you will get a menu item called <span class="packt_screen">What The File</span> on each frontend screen. Then, you can view a screen and hover over the What The File menu item to see the templates used for that screen, as shown in the following screenshot:</li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-306 image-border" src="assets/c827de68-c603-4ac9-834f-66a04eb6c4a9.png" style="width:71.83em;height:29.92em;"/></p>
<p class="CDPAlignLeft CDPAlign" style="padding-left: 60px">The preceding screenshot shows a single post of a premium theme. You can easily notice the main template and sub-templates that are used for the given screen. You can find these templates within the theme to make the necessary modifications.</p>
<ul>
<li><strong>Sidebars and widgets</strong>: Usually, the sidebars are located at the left or right of any screen with widgets placed inside them. However, modern themes use many dynamic widget areas and hence sidebars can be placed anywhere in the site. This makes it difficult to track the sidebars without a tool. Fortunately, we can use the <span class="packt_screen">Debug Bar</span> (<a href="https://wordpress.org/plugins/debug-bar/">https://wordpress.org/plugins/debug-bar/</a>) plugin, which we discussed in <a href="205a9625-512c-4925-a3a8-bfe8a1784773.xhtml" target="_blank">Chapter 1</a>, <em>Introduction to WordPress Development</em>, along with an add-on called <span class="packt_screen">Debug Bar – Sidebars &amp; Widgets</span> (<a href="https://wordpress.org/plugins/debug-bar-sidebars-widgets/">https://wordpress.org/plugins/debug-bar-sidebars-widgets/</a>). This add-on plugin hasn't been updated in four years. However, it seems to work well and it's the best tool I found for this task.<br/>
Once both plugins have been installed, you can view a screen and click on <strong><span class="packt_screen">Debug | Sidebars</span></strong> from the top menu. You will get a screen similar to the following:</li>
</ul>
<p class="CDPAlignCenter CDPAlign" style="padding-left: 30px"><img class="alignnone size-full wp-image-307 image-border" src="assets/ad39a7b9-3d64-45a2-8566-174a11c3ebad.png" style="width:47.42em;height:24.50em;"/></p>
<p class="CDPAlignLeft CDPAlign" style="padding-left: 60px">This tool clearly displays the details of the sidebars loaded in any given screen and a widget loaded within each sidebar with its details. Now, we can use this information to visit the backend widgets section and make the necessary modifications for the current screen.</p>
<p>You should use these techniques to quickly track the components in any existing site and build solutions in a rapid process.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting started with developing themes</h1>
                </header>
            
            <article>
                
<p>We discussed the development tasks involved in themes in the preceding section. Building a theme from scratch is a process with a very wide scope and hence not feasible to discuss in this type of book. <span><span>Therefore</span></span>, we will focus on customizing existing themes while providing the necessary knowledge to build themes from scratch. There are two ways of adding or modifying features in an existing theme:</p>
<ul>
<li>Building and customizing features of a design by modifying template files</li>
<li>Extending theme features through available filters and actions</li>
</ul>
<p>Both of these techniques require us to modify the files of an existing theme. In most sites, we will be using existing, free, or premium themes that have developed by third-party developers. So, it's obvious that we will receive updated versions of the theme with more features, bug fixes, and improved code. The theme update process wipes out all of the changes that have been made to core theme files. This means that we need a way to customize a theme without losing the changes on theme updates. This is where the concept of a child theme is used.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What is a child theme?</h1>
                </header>
            
            <article>
                
<p>A child theme is a sub-version of a theme, inheriting its features, design, and styles. We call the main theme the parent theme. Based on its name and purpose, you may think that a child theme is part of a parent theme. However, a child theme has its own directory inside the <kbd>wp-content/themes</kbd> directory, and relates to the parent theme through a few lines of comments. The child theme doesn't get updated with the parent theme and hence we can use it for custom development.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a child theme</h1>
                </header>
            
            <article>
                
<p>Developers who are new to WordPress may assume that this is a considerable process involving many steps and configurations. However, it's a straightforward process that takes less than a minute. Let's create a child theme called <kbd>WPQuickStart</kbd> for the existing <strong>Twenty Seventeen</strong> theme.</p>
<p>The first step is creating a directory in the <kbd>wp-content/themes</kbd> directory and naming it <kbd>wpquickstart</kbd>. Next, we need to create a <kbd>style.css</kbd> file inside the <kbd>wpquickstart</kbd> directory and add the following comment:</p>
<pre>/*<br/>Theme Name: WPQuickStart<br/>Theme URI:<br/>Description: Twenty Seventeen Child Theme<br/>Author: Rakhitha Nimesh<br/>Author URI: http://example.com<br/><strong>Template: twentyseventeen<br/></strong>Version: 1.0.0 */</pre>
<p>The highlighted line in the code defines the directory as a child theme and defines the parent theme. You should use the directory name of the parent theme for the <span class="packt_screen">Template</span> setting. The final step of this process is to create a <kbd>functions.php</kbd> file in the <kbd>wpquickstart</kbd> directory and add the following code to load the parent theme styles:</p>
<pre>add_action( 'wp_enqueue_scripts', 'wpquickstart_enqueue_styles' ); 
function wpquickstart_enqueue_styles() { 
    wp_enqueue_style( 'twenty-seventeen-style', get_template_directory_uri() . '/style.css' ); 
    wp_enqueue_style( 'wpquickstart-style',    get_stylesheet_directory_uri() . '/style.css', 
        array('twenty-seventeen-style')    ); 
}  </pre>
<p>The preceding code includes the <kbd>style.css</kbd> file of both the parent and child themes. We have added a dependency to the child theme style file by passing <kbd>twenty-seventeen-style</kbd> to the dependency array. As the child theme's <kbd>style.css</kbd> file is dependent on the parent theme, it will load after the <kbd>style.css</kbd> of the <strong>Twenty Seventeen</strong> theme. Therefore, we override the necessary parent theme styles using the <kbd>WPQuickStart style.css</kbd> file.</p>
<p>In just three steps, our child theme is ready to function with all of the features of the parent theme. The other files follow the opposite process, with the exception of the <kbd>functions.php</kbd> file. If a template file is available in the child theme, it will be loaded instead of the parent file template. On the other hand, missing template files in the child theme will be loaded from the parent theme.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Modifying parent themes with a child theme</h1>
                </header>
            
            <article>
                
<p>Now, the most important thing to know is how a child theme can be used to implement the two techniques discussed in the preceding section. Let's start by using template files.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Building and customizing designs by modifying template files</h1>
                </header>
            
            <article>
                
<p>We created a child theme to customize the designs of parent themes without losing the changes on theme updates. This can be achieved by either modifying the entire template of the parent theme or part of the template in the parent theme. Let's learn this by using an example template design change. Consider the following screenshot for our requirements:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-308 image-border" src="assets/f5e0d1af-14e9-4596-9e4e-c54039965e70.png" style="width:111.17em;height:52.67em;"/></p>
<p>The screen on the left displays the default single post design of the <strong>Twenty Seventeen</strong> theme. Let's assume that we want to change the post template to remove the sidebar and display the comment form in a way that the user can add comments while reading the post. So, we have to change the left screen to match the screen on the right.</p>
<p>In order to achieve our requirement, we have to override the parent file template. So, we need to copy the <kbd>single.php</kbd> file of the Twenty Seventeen theme to the root folder of the WPQuickStart child theme. We don't need the sidebar for the new design and hence the following line needs to be removed from the <kbd>single.php</kbd> file we created in our child theme:</p>
<pre>&lt;?php get_sidebar(); ?&gt;</pre>
<p>Instead, we need to add the comment form to the same location. The comment template is already loaded inside <kbd>single.php</kbd> using the following code, after the post content:</p>
<pre>if ( comments_open() || get_comments_number() ) : 
  comments_template(); 
endif; </pre>
<p>We need to remove this code from the existing location of the <kbd>single.php</kbd> file and add it to the location where we had the sidebar. Consider the following code, where we have placed the <kbd>comments</kbd> code within a container element called <kbd>wpquickstart-comments</kbd>:</p>
<pre>&lt;div id="wpquickstart-comments" &gt;             
  &lt;?php if ( comments_open() || get_comments_number() ) :       
          comments_template();                      
        endif; ?&gt;     
&lt;/div&gt; </pre>
<p>Finally, we need to change the CSS class of the element with the <kbd>primary</kbd> ID from <kbd>content-area</kbd> to <kbd>wpquickstart-content-area</kbd>. Now, we can apply the CSS to reduce the size of the post content elements and get the comments to the right of the post content. Add the following CSS to the <kbd>style.css</kbd> file of the child theme:</p>
<pre>.wpquickstart-content-area{ 
    width:50% !important; float:left; 
} 
#wpquickstart-comments{ 
    width: 45%;    float: left;    padding: 0 3%; 
} 
#wpquickstart-comments #comments{ 
    padding-top: 0 !important; 
} </pre>
<p>Now, you can refresh the browser to check the new design with the comment form on the right side. This is a very basic example of how we can change the designs of parent themes for our needs. By using a few lines of styles and moving the existing elements, we were able to create a new design in minutes. In real site development, you can turn simple designs into advanced, feature-rich designs by using the same process.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Extending theme features through available filters and actions</h1>
                </header>
            
            <article>
                
<p>We already discussed the importance of using child themes to customize and extend theme templates. Using the WordPress filter and action hooks is another way of customizing theme features. We will mainly use these hooks to extend the functions provided by the theme. However, we can use some of the filter and action hooks to change parts of templates without needing to replace them completely.</p>
<div class="packt_infobox">In WordPress, an action is a PHP function that is executed at specific points in a process. A filter is a function that is used to modify the existing data or features in a process. Even though actions are intended to do something before or after an event, they are used frequently to add content to templates. More about actions and filters will be covered in upcoming chapters.</div>
<p>Once we choose a theme, we can explore the actions and filters within the theme to understand its extendable features and locations. The simplest way to identify these actions and filters is to use the directory or project search feature in your code editor. Most quality code editors provide this feature by default. You should use the term <kbd>apply_filters</kbd> to search for filters in the theme, and <kbd>do_action</kbd> to find out the actions defined in it. You may find a small number of these hooks in free themes and hundreds in premium themes. These hooks consist of built-in WordPress hooks as well as theme-specific hooks. As a developer, you need to have a thorough knowledge of the common built-in WordPress hooks in themes. Let's take a look at some of the common filters and actions used in themes:</p>
<ul>
<li><kbd>the_content</kbd>: This is the most commonly used filter in themes, intended to modify the post content. We can either modify the entire post content or add dynamic content before or after a post. Usually, this is used to display additional data for posts such as related posts, advertisements, and social sharing buttons. Consider the following code for adding custom content after each post. This code should be placed in the <kbd>functions.php</kbd> file of the child theme:</li>
</ul>
<pre>add_filter( 'the_content', 'wpquickstart_add_custom_text_single_posts' );  
function wpquickstart_add_custom_text_single_posts( $content ) { 
    if ( is_single() &amp;&amp; in_the_loop() &amp;&amp; is_main_query() ) { 
        return $content . "Custom Text After Post"; 
    }  
    return $content; 
} </pre>
<ul>
<li>The post content is passed as a parameter to this function. Here, we use the <kbd>is_single</kbd> template tag to make sure that the custom content is only applied to individual posts, and not to archives. The other two conditions restrict this text from applying to posts outside the main query and loop. This is a very basic illustration of the functionality of the <kbd>the_content</kbd> filter. You can add more content and different conditions to handle various requirements.</li>
<li><kbd>the_permalink</kbd>: This filters the display of the permalink for the current post. You can use code similar to the preceding example for modifying a post link.</li>
<li><kbd>the_title</kbd>: This filters the title of the post. Used for modifying a post title based on certain conditions.</li>
<li><kbd>comment_form_default_fields</kbd>: This filters the fields of a comment form. By default, the comment form contains fields for comment, name, email, and website. The fields are passed as an array type parameter to this filter. You can use this filter to add new fields or remove existing fields from the comment form. The following code removes the <kbd>website</kbd> field from the comment form using this filter:</li>
</ul>
<pre>function wpquickstart_remove_website_field($fields) { 
    unset($fields['url']); 
    return $fields; 
}  
add_filter('comment_form_default_fields', 'wpquickstart_remove_website_field'); </pre>
<ul>
<li><kbd>wp_nav_menu_item_custom_fields</kbd>: The name suggests that this as a filter, but it's actually an action executed in WordPress. The process of adding custom fields to menu items is one of the common tasks for features such as menu item-specific CSS and menu item restrictions. In such cases, we can use this action to add custom fields, as shown in the following code:</li>
</ul>
<pre>add_action( 'wp_nav_menu_item_custom_fields', 'wpquickstart_menu_button_fields', 10, 4 ); 
function wpquickstart_menu_button_fields( $item_id, $item, $depth, $args ) {     ?&gt; 
  &lt;div class="fusion-menu-options-container"&gt; 
   &lt;div class="option-details"&gt; 
     &lt;h3&gt;&lt;?php _e( 'Menu Class', 'wpquickstart' ); ?&gt;&lt;/h3&gt; 
     &lt;p class="description"&gt;&lt;?php _e( 'Add custom css class.', 'wpquickstart' ); ?&gt;&lt;/p&gt; 
   &lt;/div&gt; 
   &lt;div class=""&gt; 
     &lt;input type="text" id="wpquick-menu-class" name="wpquick-menu-class" value="" /&gt; 
   &lt;/div&gt; 
  &lt;/div&gt; 
&lt;?php } ?&gt; </pre>
<ul>
<li>The preceding code will add a new text field named <kbd>Menu Class</kbd> to menu items in the backend menu.</li>
</ul>
<p>These are some of the frequently used ones, among hundreds of possible WordPress actions and filters. You should explore these hooks by using various WordPress themes in order to identify the necessary ones for your implementations.</p>
<p>The filters and actions discussed in the preceding section are used for common WordPress purposes and hence can be used in any theme. Theme-specific actions and filters, on the other hand, are designed for advanced theme features. Most of these actions and filters cannot be used in other themes. We can easily identify theme-specific hooks by looking at the prefix used for hook names. The <strong>Twenty Seventeen</strong> theme uses <kbd>twentyseventeen_</kbd> as the prefix for theme-specific hooks. Let's consider one of the filters that's available in the Twenty Seventeen theme to understand the use of theme-specific hooks:</p>
<pre>apply_filters( 'twentyseventeen_content_width', $content_width ); </pre>
<p>This filter is used to customize the width of the page based on page layout. Let's see how we can implement this filter to modify the width:</p>
<pre>add_filter( 'twentyseventeen_content_width', 'wpquickstart_content_width' ); 
function wpquickstart_content_width($content_width){ 
  if(is_page()) { 
    $content_width = "800"; 
  } 
  return $content_width; 
} </pre>
<p>In the preceding code, we changed the width of pages in the <strong>Twenty Seventeen</strong> theme by using the theme-specific filter. We can add more conditions to change the width and display different types of layouts.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Steps for extending theme-specific hooks</h1>
                </header>
            
            <article>
                
<p>Now, you should have a brief understanding of built-in hooks in themes, as well as theme-specific hooks. Let's take a look at the basic steps for customizing themes using these hooks:</p>
<ol>
<li>Execute a directory search on the theme and identify the hooks by tracking the <kbd>apply_filters</kbd> and <kbd>do_action</kbd> functions.</li>
<li>For the filters, check whether more than two parameters have been passed to the <kbd>apply_filters</kbd> function. The second parameter will be the variable you will be filtering, and additional parameters will be used to support the filtering process.</li>
<li>If the <kbd>apply_filters</kbd> function contains two parameters, you can implement it by using following code:</li>
</ol>
<pre><span>    add_filter( 'filter_hook_name', 'filter_implementation_function_name' ); 
    function filter_implementation_function_name ($param1){ 
         // Modify $param1 based on your preferences 
         return $param1; 
    }</span></pre>
<ol start="4">
<li>If the <kbd>apply_filters</kbd> function contains more than two parameters, you can use following code:</li>
</ol>
<pre>    add_filter( 'filter_hook_name', 'filter_implementation_function_name',10,3 ); 
    function filter_implementation_function_name ($param1,$param2,$param3){ 
         // Modify $param1 based on your preferences and help of $param2 and $param3 
         return $param1; 
    }</pre>
<ol start="5">
<li>In the preceding code, 10 will be the priority. The number 3 will be the number of parameters used in the <kbd>apply_filters</kbd> function, after the hook name.</li>
<li>For actions, check whether more than one parameter has been passed to the <kbd>do_action</kbd> function. These parameters will be used to support the execution of our custom action code.</li>
</ol>
<ol start="7">
<li>Use the following code to implement the actions:</li>
</ol>
<pre>    add_action( 'filter_hook_name', 'action_implementation_function_name',10,2 ); 
    function action_implementation_function_name ($param1,$param2){ 
         // execute some code related to action - Ex: send emails, save data to database 
         echo 'Custom Content' ; // you can add content to location where action hook is executed 
    }    </pre>
<ol start="8">
<li>You should change 2 based on the number of parameters. If the hook contains only one parameter, you can omit both 10 and 2.</li>
</ol>
<p>In this section, we have looked at two techniques for modifying or extending theme features. You should check the requirements of the site and decide whether you can do certain customizations with existing hooks or whether you need a complete replacement of template files in child themes.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Working with the WordPress theme template hierarchy</h1>
                </header>
            
            <article>
                
<p>A WordPress theme can be built with just three files: <strong>style.css</strong>, <strong>index.php</strong>, and <strong>comments.php</strong>. However, the complete template hierarchy can support quite a large number of sub-templates, flexible enough to cater for the advanced requirements of many sites. More often than not, developers will be working on less than ten files in this hierarchy. However, the knowledge of the complete template hierarchy may come handy in projects with advanced requirements. Let's take a look at the following diagram, which consists of the types of pages used in WordPress to handle the initial request:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-309 image-border" src="assets/09c260b3-6d13-415b-814a-7a31dc4efd85.png" style="width:33.17em;height:11.58em;"/></p>
<p>There are six paths to handle the user request based on the loaded content. <strong>Archive Page</strong> and <strong>Singular Page</strong> are the most complex yet flexible among these, and have a tall structure. Let's identify the main purpose of each of these pages before moving into the complete template hierarchy:</p>
<ul>
<li><strong>Archive Page</strong>: This is usually used to display the posts list, category posts, tag posts, author posts, and custom post types, with a short summary about the post</li>
<li><strong>Singular Page</strong>: This is used to display individual posts, pages, or custom post types</li>
<li><strong>Site Front Page</strong>: This is used to display the home page of your site</li>
<li><strong>Blog Posts Index Page</strong>: This is used to display the list of posts on your site</li>
<li><strong>Error 404 Page</strong>: This is used when WordPress can't find a matching template for the request</li>
<li><strong>Search Result Page</strong>: This displays the search results that contain a list of posts and pages</li>
</ul>
<p>You can find more details about template hierarchy at <a href="https://developer.wordpress.org/themes/basics/template-hierarchy/">https://developer.wordpress.org/themes/basics/template-hierarchy/</a>. Now, we need to go through the complete hierarchy for each of these page types to get the knowledge to handle advanced application requirements. Let's start with the <strong>Archive Page</strong>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Archive Page hierarchy</h1>
                </header>
            
            <article>
                
<p>This path is divided into six sub-types, and WordPress will use one of these sub-types for any given request with a collection of post data. Let's consider the following diagram for the Archive Page's hierarchy:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-310 image-border" src="assets/ea6f5787-9fe5-4a2c-9178-734ac31fee70.png" style="width:31.75em;height:41.92em;"/></div>
<p>We use the <kbd>archive.php</kbd> file as the main template in this path. It's an optional file for a theme, with the <kbd>index.php</kbd> file handling the archives when this template is missing in a theme. However, almost all of these themes will include the <kbd>archive.php</kbd> file for handling the collection of data. Let's take a look at the various types of Archive Pages, starting with Author Archive.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Author archive pages</h1>
                </header>
            
            <article>
                
<p>In WordPress, posts are created by an administrator or users with post creation capabilities. In most themes, you will see a linked author name alongside the post title. Once you click on the link, you will be redirected to a page with all the posts that have been created by the specified user. This is the Author Archive page, and it's usually handled by the <kbd>archive.php</kbd> file. Let's take a look at the author archive page of the Twenty Seventeen theme.</p>
<p>Basically, we have the display name of the author and the description. This might be good enough for basic WordPress sites with blogs and one or two authors. In situations where you have a large number of writers with the primary site feature being publishing articles, this might look modest. Instead, such sites requires you to have a well-designed profile, including a profile image, website details, and social account details. The following screenshot is a preview of a modified author template from a popular theme:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/24de8d7f-dd29-4816-808c-5acbfc7d3e35.png"/></p>
<p>As you can see, this site uses a complete user profile as well as a modified post list with two columns. We can't build such a design using <kbd>archive.php</kbd> without complicating the template with lots of conditions. Instead, we can leverage the additional templates in the author archive path, as shown in the preceding diagram. There are three templates in the author archive path, as follows:</p>
<ul>
<li><kbd>author.php</kbd>: This is the main template for customizing the author archive. Many themes, including premium themes, use <kbd>archive.php</kbd> to generate the author archive, instead of a separate template. Therefore, we can add our own <kbd>author.php</kbd> file to the child theme and design a separate author archive. This template is executed before <kbd>archive.php</kbd> and <kbd>index.php</kbd>.</li>
<li><kbd>author-$id.php</kbd>: This is one of two dynamic templates that's executed before the <kbd>author.php</kbd> template. The ID of the user is used as part of the template name and hence this template will only be loaded for a single user. Since this is a dynamic template, you won't find it in any of the themes. This is something a developer should create to cater for the specific requirements of a site. Creating a theme template for each author is not practical, unless you have a limited and fixed number of authors. Therefore, you will rarely find requirements to use this kind of template in development.</li>
<li><kbd>author-$nicename.php</kbd>: This is similar to <kbd>author-$id.php</kbd> and is executed before the preceding template. This template uses a WordPress nicename instead of ID.</li>
</ul>
<p>In scenarios where you need a custom author archive page, you should copy the content of the <kbd>archive.php</kbd> page into the <kbd>author.php</kbd> file and change the design as needed. More about author templates and the implementation of author data is available at <a href="https://codex.wordpress.org/Author_Templates">https://codex.wordpress.org/Author_Templates</a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Categories, tags, and custom taxonomy archives</h1>
                </header>
            
            <article>
                
<p>Taxonomy is a term used by WordPress to group things into different sections. If you have already worked with WordPress posts, you should be familiar with <strong>Categories</strong> and <strong>Post Tags</strong> in the post creation screen. These are two built-in taxonomies that are assigned to normal posts by default. On the other hand, custom taxonomies are the grouping types we create for certain post types based on the requirements in different sites. We can assign one or more taxonomy values to posts or custom post type items. Once posts are assigned, we get an archive page with a list of posts for the specific taxonomy.</p>
<p>Categories, tags, and custom taxonomies work in the exact same way, with similar template hierarchies. The <kbd>archive.php</kbd> file is used to load these three types by default, by using taxonomy title and description. In the author archive, we needed a way to display complete author details with an attractive design. In this case, we don't need to focus on such details, as taxonomies rarely use additional details. Instead, we might need to change the design and display of posts in taxonomy archive pages. We can use the <kbd>category.php</kbd>, <kbd>tag.php</kbd>, and <kbd>taxonomy.php</kbd> templates in such scenarios, similar to the way we used <kbd>author.php</kbd>. These templates need to be added to child themes based on your requirements as most of the themes only use the <kbd>archive.php</kbd> file for all three types.</p>
<p>Similar to author archives, each of these three types also has two dynamic sub-templates that use a taxonomy ID or slug. However, we rarely use them as the template needs to be created dynamically based on the taxonomies we use in development.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Date Archive pages</h1>
                </header>
            
            <article>
                
<p>This is another type of archive page where we can see a list of posts for year, month, or date. We are using the <strong>Twenty Seventeen</strong> theme and hence you will see a widget in the sidebar called <strong>Archives</strong> with a list of values, such as August 2018, July 2018, and so on. Once you click on one of these links, it will load the posts that were created in that month. The URL of the site may look similar to <kbd>http://www.example.com/2018/07</kbd>. We can check yearly archives by removing 07 from the URL and daily archives by adding the date after 07. One again, <kbd>archive.php</kbd> is used by default to handle all three of these archive pages.</p>
<p>Now, if you consider our archive page diagram, you will notice the use of the <kbd>date.php</kbd> file to separate the date archives from the <kbd>archive.php</kbd> file. This template works similar to the author and taxonomy templates that we have discussed so far. Even though it's not used frequently, we can add the <kbd>date.php</kbd> file to our child theme and display any additional information about each year, month, or date.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Custom Post Type Archive</h1>
                </header>
            
            <article>
                
<p>The use of custom post types is common in modern WordPress sites. Unlike a normal blog post, custom post types can contain a considerable amount of data and design requirements. Therefore, it may not be feasible to use <kbd>archive.php</kbd> to load the list of custom posts in most scenarios.</p>
<p>Instead, we can observe the preceding diagram to identify the use of additional template files. Unlike the previous paths, we only have one dynamic template for custom post archives, called <kbd>archive-$post_type.php</kbd>. The post type variable should be replaced by post types in your sites such as product, topic, and forum. Even though this is a dynamic template type, we can create and add this template to child themes, since custom post types in a site are fixed in most scenarios. In this case, WordPress will only load archive.php when it can't find a template with <kbd>archive-$post_type.php</kbd>. Nowadays, many premium themes comes with built-in custom post type support and hence you will find such templates within the theme files. Let's take a look at the following screenshot for use as the archive page:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-311 image-border" src="assets/c631376e-be8b-43dc-8a7f-1cb51173b23a.png" style="width:111.83em;height:53.50em;"/></p>
<p>The screen on the left displays a normal blog post archive, which is displayed using the <kbd>archive.php</kbd> file. The screen on the right displays a custom post type, with a completely different design and various pieces of data, in a user-friendly manner. We need <kbd>archive-$post_type.php</kbd> to build such designs as it's not possible to generate both screens using the same <kbd>archive.php</kbd> file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Singular Page Hierarchy</h1>
                </header>
            
            <article>
                
<p>This path is divided into two sub-types for displaying the data for individual posts or pages. Let's consider the following diagram for the <strong>Singular page</strong> hierarchy:</p>
<div class="packt_figref CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-312 image-border" src="assets/ba70fe80-baad-4194-9177-51e02b032c9f.png" style="width:33.42em;height:46.92em;"/></div>
<p>In the archives, we displayed a collection of posts with summarized details. In this path, we need to display the complete data for an individual post or page. We use the <kbd>single.php</kbd> file as the main template in this path. It's an optional file for a theme, with the <kbd>index.php</kbd> file handling the posts and pages when this template is missing in a theme. However, almost all of the themes will include the <kbd>single.php</kbd> file for individual post data. Let's take a look at the various types of Singular Pages, starting with the Static Page.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Static Page Hierarchy</h1>
                </header>
            
            <article>
                
<p>In WordPress, pages are used to manage the structure of the website and contain timeless content. Usually, we call pages static, even though they're not as same as the pages of pure HTML websites we had in the old days. However, the content doesn't change often and hence is considered static compared to posts. In a basic site, you will find WordPress pages for contact, about, services, and so on. This path is divided into two types called <strong>Custom Template</strong> and <strong>Default Template</strong>. Let's start with <strong>Default Template</strong> so that we can understand the need for custom templates.</p>
<p>By default, WordPress pages are handled by either <kbd>page.php</kbd>, <kbd>singular.php</kbd>, or <kbd>index.php</kbd>. Most themes contain a separate <kbd>page.php</kbd> file for handling pages and hence <kbd>singular.php</kbd> and <kbd>index.php</kbd> may not be used.</p>
<p>We can build most of our page designs with the <kbd>page.php</kbd> file. However, there are two other optional templates preceding <kbd>page.php</kbd> in cases where you want to handle different pages with a different design:</p>
<ul>
<li><kbd>page-$slug.php</kbd>: This uses the slug to identify the page and provide a separate design. This template can only be used to design one page.</li>
<li><kbd>page-$id.php</kbd>: This uses the page ID to provide a separate design for chosen pages. This template can only be used to design one page.</li>
</ul>
<p>Many sites contain a limited number of pages, and the design of these pages is usually different from one another. So, it's possible to use different page templates by specifying the ID or slug. However, these two templates might not be used in modern sites as the same functionality can be achieved with custom page templates, which will be discussed in the next section. The default template works for most sites where the page design is simple and only intended to provide content to the user.</p>
<p>The custom page templates, on the other hand, are templates varying from the default design, and are used to change the look and feel of one or more pages in the site. This template is loaded before the <kbd>page.php</kbd> template. Unlike other templates in the hierarchy, there is no predefined naming pattern for page templates. Instead, we can name it whatever we like and specify it as a template using PHP comments in the template file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating and using custom page templates</h1>
                </header>
            
            <article>
                
<p>The process of creating a new page template is relatively simple. First, we need to create a file on the root folder of the theme. Let's name the template <kbd>fullwidth.php</kbd>. Next, we need to add the following comment to the top of the <kbd>fullwidth.php</kbd> file, as follows:</p>
<pre><strong>/* Template Name: WPQuickStart Full Width */</strong></pre>
<p>The preceding comment will register this as a page template, and WordPress will load it as an option in the page creation screen. In the <strong>Twenty Seventeen</strong> theme, page design contains two columns where the title is displayed on the left and the content is displayed on the right. The left column takes almost half of the page and hence is not ideal for some pages in websites. Therefore, our full width template will remove the left column and increase the width of the content section to 100%.</p>
<p>First, we have to copy the content from the <kbd>page.php</kbd> file and add it to our <kbd>fullwidth.php</kbd> template. Next, replace the following line with the content from the <kbd>twentyseventeen/template-parts/post/content.php</kbd> file:</p>
<pre><strong>get_template_part( 'template-parts/page/content', 'page' );</strong></pre>
<p>Next, we have to remove the complete header tag to omit the left column. Then, we need to increase the width of the <kbd>&lt;div&gt;</kbd> element containing the <strong>entry-content</strong> class to 100%. Finally, add the page title within the <strong>entry-content</strong> div element. Now, we have a full width page template ready.</p>
<p>Now, we can go to <span class="packt_screen">Pages</span> | <span class="packt_screen">Add New</span> from the admin section to create a new page. The available page templates of your theme will be listed, as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-313 image-border" src="assets/3c3f424f-d3ee-44f3-94bb-ed4eb7b39fd3.png" style="width:67.50em;height:37.67em;"/></p>
<p>The Template setting allows us to assign a page template for any given page. Therefore, we can use such templates when multiple pages require the same design. In the default template section, we discussed the availability of the <kbd>page-$slug.php</kbd> and <kbd>page-$id.php</kbd> files. With this technique, we have to create templates for each and every page we need. We also have to manually modify the templates when we remove or change the existing pages. Custom page templates don't have these limitations and we can use one template to design multiple pages. We can also quickly change the template from the page creation section. So, we should prefer custom page templates over the dynamic page types that are available in the default path.</p>
<p>In their basic form, we use page templates to change the structure of pages. We already changed the structure of the page by introducing a full width template. The most basic types of templates include t<span>wo columns, three columns, f</span><span>ull width, s</span><span>idebar on the right, and sidebar on the left templates.</span> These are very basic types of templates compared to what we get in modern premium themes. These modern themes include templates such as <span>portfolios with lists, grids and galleries,</span> <span>contact forms, h</span><span>ome page templates with various sliders, and so on.</span></p>
<p>This is a just a list of template types, and you need to check out these template designs in order to understand the real power of page templates. You can find these types of templates in many premium themes. I recommend that you visit <a href="https://themeforest.net/category/wordpress">https://themeforest.net/category/wordpress</a> and check out the page types provided by the modern themes. You will be amazed by the innovative use of page templates.</p>
<p>It's very important to know how to build a page template from scratch. Basically, you can add anything after the <strong>Template Name</strong> comment. As you are starting WordPress development, you can use the various functions from the <kbd>page.php</kbd> file in your template and build on top of them. Once you are experienced, you should create advanced templates from scratch without needing any code from existing templates.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Single Post Page hierarchy</h1>
                </header>
            
            <article>
                
<p>In the preceding section, we discussed pages as static elements. On the other hand, posts are highly dynamic and provide time critical information. Usually, the post list page changes frequently, with the new posts being displayed at the top of the list. In this path, we are considering the display of the complete details for individual posts or custom post types.</p>
<p>By default, WordPress posts are handled by either <kbd>single.php</kbd>, <kbd>singular.php</kbd>, or <kbd>index.php</kbd>, depending on the availability of the preceding template files in the hierarchy. Most themes contain a separate <kbd>single.php</kbd> file for handling posts and hence <kbd>singular.php</kbd> and <kbd>index.php</kbd> may not be used. The <kbd>single.php</kbd> template is quite similar to <kbd>page.php</kbd>. However, posts have options such as categories, tags, featured images, and pagination for other posts. So, including these details changes <kbd>single.php</kbd> from <kbd>page.php</kbd>.</p>
<p>This path is divided into three types called <strong>Attachment Post, Custom Post</strong>, and <strong>Blog Post</strong>. Let's start with <strong>Attachment Post</strong>-specific templates.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Attachment Post hierarchy</h1>
                </header>
            
            <article>
                
<p>In WordPress, files uploaded to the media library or assigned to posts are considered attachments. The diagram shows templates going up to seven levels for attachments. However, we rarely use these templates unless the primary feature of the site is managing attachments. Therefore, the <kbd>single.php</kbd> template will be responsible for handling attachments in most themes. We are not going to discuss the optional templates due to their lack of use.</p>
<p>You can go to <span class="packt_screen">Media</span> | <span class="packt_screen">Library</span> and click on one of the attachments. Then, you can click the <span class="packt_screen">View Attachment Page</span> link to view the attachment using the <kbd>single.php</kbd> file. If your site requires that you change the default template, you should add the <kbd>attachment.php</kbd> file to the child theme and try out the custom designs.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Blog post hierarchy</h1>
                </header>
            
            <article>
                
<p>The default post in WordPress is often known as a blog post, as it's intended to provide content for blogs. By default, the <kbd>single.php</kbd> file is responsible for handling the template for blog posts. In the archives section, we understood the difference between the normal post list and the custom post type list with regard to advanced features. Similarly, we need even more specific templates for custom post types, and hence using <kbd>single.php</kbd> for all three types may not possible. In such scenarios, we can make use of the <kbd>single-post.php</kbd> template, which was designed exactly for normal blog posts. The content of the <kbd>single-post.php</kbd> file will be similar to <kbd>single.php</kbd>, and we can add more elements and styles to change the design.</p>
<p>We can also find the optional <kbd>$custom.php</kbd> template in the blog post path. This is a variation of page templates, where we can specify templates for specific post types. This feature was introduced in WordPress version 4.7.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating and assigning page templates for posts</h1>
                </header>
            
            <article>
                
<p>The process of creating post-specific templates is similar to the process we used earlier. We can just create a template file with the preferred name in the root folder of the theme and add the following comments to the top of the file:</p>
<pre>/* Template Name: Featured Post<br/>Template Post Type: post, product */</pre>
<p>In this template, we have to add an additional comment called <strong>Template Post Type</strong>, with the list of supported post types. Based on our comment, this template will be available for both normal blog posts and the product custom post type. The process of assigning a template to a post is the same as the process we used for pages.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Custom post hierarchy</h1>
                </header>
            
            <article>
                
<p>This is the path for custom post types that are used in the website, with <kbd>single.php</kbd> being the default template. Usually, custom post type designs differ considerably from the blog post designs, and hence the use of the dynamic <kbd>single-$post_type.php</kbd> template is almost guaranteed. We have to create a new template inside the root folder of the theme and name it with the slug post type. These templates are frequently used in premium themes and hence you can look for templates with the <strong>single-</strong> preference.</p>
<p>Apart from the main template, we also get the two preceding templates by using the slug of the post and using post templates, as we discussed in the previous section. The use of <kbd>single-$post_type-$slug.php</kbd> will not be essential as the same functionality can be achieved by using the <kbd>$custom.php</kbd> template with additional benefits. Let's take a look at the following screenshot so that we can understand the difference between a normal <kbd>single.php</kbd> template and a custom designed <kbd>single-$post_type.php</kbd> template:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-314 image-border" src="assets/b656e788-9104-46e6-ab0f-c49c74ac94e6.png" style="width:112.75em;height:54.75em;"/></p>
<p>The screen on the left displays a normal blog post using the <kbd>single.php</kbd> design. The screen on the right contains advanced designs for the <kbd>Vehicle</kbd> custom post type with the use of the <kbd>single-vehicle.php</kbd> template. You can clearly see the difference in designs and the need for the <kbd>single-$post_type.php</kbd> template in custom post types. In WordPress site development, you will need the skills to build advanced templates for custom post types and hence it's very important to know these additional templates and their code.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Other Pages in the template hierarchy</h1>
                </header>
            
            <article>
                
<p>So far, we have discussed the hierarchy of the two main starting template types of WordPress. There are four other page types with limited depth that play a lesser role than the archive and singular page types. Let's take a look at the following diagram to understand the hierarchy of these four types:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-315 image-border" src="assets/bc815581-1ec6-4f3b-80be-f814af23bc0e.png" style="width:56.50em;height:16.33em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Site Front Page template path</h1>
                </header>
            
            <article>
                
<p>In basic themes, the front page of the site is handled by <kbd>index.php</kbd>, where all of the blog posts are shown as a list. Unless your primary site functionality is blogging, it will require a separate template for the front page's design. According to the template hierarchy, <kbd>home.php</kbd> can be used to design the front page of the site. This template is available in most premium themes and contains very advanced designs. There is also an optional template in this path called <kbd>front-page.php</kbd>. However, it's not available in most themes and hence you may not have to use it in common development tasks.</p>
<p>Apart from using either the <kbd>home.php</kbd> or <kbd>front-page.php</kbd> templates, we can also use any default page as the homepage of our site. This is handled by a setting in the WordPress backend. We can use WordPress' <span class="packt_screen">Settings</span> | <span class="packt_screen">Reading</span> | Your homepage displays setting to change the front page, as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><strong><br/>
<img class="alignnone size-full wp-image-316 image-border" src="assets/88cdb2b3-3b12-444d-b844-9d13af45af67.png" style="width:37.58em;height:15.33em;"/><br/></strong></p>
<p>By default, this setting will use the <span class="packt_screen">Your latest posts</span> option. It's a common technique to change this setting to <span class="packt_screen">A static page</span> and use custom pages.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Blog Posts Index Page template path</h1>
                </header>
            
            <article>
                
<p>This path defines the template used for the main blog page, where a list of normal posts is displayed. By default, this is handled by the <kbd>index.php</kbd> file and loads as the home page of the site. We have the ability to create any page and use it as the blog post index by using the setting explained in the preceding section. This template path is straightforward and generally doesn't change based on different scenarios.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Error 404 Page template path</h1>
                </header>
            
            <article>
                
<p>This path is used when WordPress is unable to find a suitable template within the template hierarchy or within any template modification hooks. Most themes have a built-in 404 template containing a <kbd>content not found</kbd> message. It's essential to have this template in a theme in order to help the user with a meaningful message and provide links to other important content on your site.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Search Result Page template path</h1>
                </header>
            
            <article>
                
<p>WordPress has a built-in search feature, and the search results usually contain posts and pages. These results are similar to the archive page, with searched text on the top. By default, this path is handled by the <kbd>index.php</kbd> file. However, there can be scenarios where the search results page needs to differ from the normal archive page. The need for highlighting search tem in content, are some of the instances where we need a separate design. In such scenarios, we can use the <kbd>search.php</kbd> file, which includes the same content as the <kbd>index.php</kbd> file, and modify it according to the client's custom requirements.</p>
<p>In this section, we had an extensive walkthrough of the complete WordPress theme template hierarchy. You might be exhausted by all of the theoretical aspects of templates. However, knowing about these templates in depth is crucial for building advanced site designs as well as customizing existing sites, where you will need to work with new themes all the time.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Conditionally changing template design and content</h1>
                </header>
            
            <article>
                
<p>The main purpose of the theme is to provide consistent layouts for your site. We can only use one theme, as mixing different layouts from different themes creates contrasting designs, confusing the end user. Instead, we can conditionally change the designs within the theme without losing consistency.</p>
<p>Now, you may be wondering, what are consistent layouts? Basically, the elements in the design should be similar across all screens. Let's say we have a form in a page built with a UI component library. Then, it should be stated that forms on other parts of your site should use the same UI component library. If you use different UI elements in other parts of the site, users may feel confused. Similarly, every other element in the design needs to be consistent. However, this doesn't mean that we can't change the design in different parts of the site. More on this will be discussed in the following sections.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What is conditional template design?</h1>
                </header>
            
            <article>
                
<p>In site development, we may have to change the design and content in different sections in order to do the following:</p>
<ul>
<li><strong>Match user preferences</strong>: Many modern sites allow users to choose content preferences. Therefore, the user has various options, such as choosing which components are displayed on any given screen, filtering content from certain categories, and even the layout and color scheme.</li>
<li><strong>Display only relevant content for a post/page</strong>: Usually, we have a sidebar filled with many widgets. In some scenarios, this content may not be directly related to the main content. Let's assume that we have normal articles and another post type called books. In books, we may have a sidebar widget for displaying information such as ratings, ISBN, number of pages, and paper type. This is not relevant to normal articles and hence needs to be removed conditionally.</li>
<li><strong>Highlight different sections in various content types</strong>: Different content types require content-specific layouts. Let's assume we have normal articles and electronic products on our site. For normal articles, we display the title, image, and content. This style is not going to work for products as we need a way to attract customers. Therefore, we need to highlight product features by using image galleries, image sliders, or expandable tabs. All in all, we need to conditionally change the layout to highlight content based on the content type.</li>
</ul>
<p>We already discussed the WordPress template hierarchy. The built-in template hierarchy provides many template types for conditional changes. It's important to know the possibilities for template and content changes without requiring major effort as a developer. We can apply conditional changes from basic styles to headers, footers, sidebars, menus, and even entire templates.</p>
<p>There are several ways to conditionally change the design based on the type of change. In this section, we are going to discuss two simple techniques.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding conditions to theme files</h1>
                </header>
            
            <article>
                
<p>This is the simplest way to start as a developer. In this technique, we modify the existing theme files, add the conditions, and load different elements and content within those conditions. We already discussed the disadvantages of changing core theme files. Here, we need to implement this technique within the child theme. You can implement these techniques in the Twenty Seventeen child theme we created earlier in this chapter.</p>
<p>Let's understand this technique by creating conditional headers for our site. Usually, pages on a WordPress site are static and provide information about the site. About us, services, and contact are some of the common uses of such pages. On the other hand, posts or custom post type pages are highly dynamic and filled with various pieces of content such as promotions, advertisements, social sharing options, and so on. So, there are scenarios where we need different headers for posts and pages. Let's keep the header for pages as it is for now and modify the header for posts with advertisements on top. Consider the following screenshot for the default header section of the <strong>Twenty Seventeen</strong> theme:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-317 image-border" src="assets/bd0da049-2250-4fa3-8530-19ee5e9bd743.png" style="width:37.33em;height:10.25em;"/></p>
<p>First, you need to copy the <kbd>header.php</kbd> file of <strong>Twenty Seventeen</strong> to the root directory of the child theme. Next, you can define the conditions to change the header section for posts. The following code adds an advertisement bar to the top of the header section for the normal post template:</p>
<pre>&lt;?php if(is_single()) { ?&gt; 
  &lt;div id="wpquick-article-ads" style="padding:20px;text-align:center;font-size:20px;background:red;color:#FFF;"&gt; GET MEMBERSHIP WITH 30% DISCOUNT &lt;/div&gt; 
&lt;?php } ?&gt; </pre>
<p>The preceding code should be added right after the <kbd>&lt;header&gt;</kbd> tag of the <kbd>header.php</kbd> file in the child theme. Now, you can view a single post and the header will contain the dynamic advertisement bar, as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-318 image-border" src="assets/43215c28-cd5e-4274-ac34-053b51742bdb.png" style="width:36.33em;height:13.17em;"/></p>
<p>This technique can be used effectively to conditionally change templates in scenarios where you have a limited number of different conditions. However, it's not feasible for handling complex conditions as it complicates the template file.</p>
<p>We can use the same process to conditionally change other important parts of the site. Let's a take quick look at the steps involved in changing each of those parts:</p>
<ul>
<li><strong>Footer</strong>: We need to copy the <kbd>footer.php</kbd> file from the parent theme to the child theme. Then, we follow the same process for adding/removing content based on the necessary conditions.</li>
<li><strong>Sidebar</strong>: We need to copy the <kbd>sidebar.php</kbd> file from the parent theme to the child theme. Then, we follow the same process for loading different sidebars or adding static content to the existing sidebar template based on the necessary conditions.</li>
<li><strong>Menu</strong>: Usually, the menu is generated by the <kbd>wp_nav_menu</kbd> function, which is located in the <kbd>header.php</kbd> file of the theme. In this case, we are using the <strong>Twenty Seventeen</strong> theme and hence you can find this function inside the <kbd>template-parts/navigation/navigation-top.php</kbd> file. You can copy this template and modify it to load different menus based on the necessary conditions.</li>
</ul>
<p>In this section, we looked at the process of conditionally changing the header of the site. You can extend this technique to make major design changes in headers, as well as use other conditions such as front page, category pages, specific pages, and so on. You can find a list of available template tags for adding various types of conditions at <a href="https://codex.wordpress.org/Template:Conditional_Tags">https://codex.wordpress.org/Template:Conditional_Tags</a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Conditionally loading template files</h1>
                </header>
            
            <article>
                
<p>In this technique, we use existing WordPress filters to dynamically change the template based on custom conditions. WordPress executes a filter called <kbd>template_include</kbd>, just before loading the default template, based on the hierarchy we discussed earlier. In the template hierarchy section, we changed the template by using the preceding templates in a given path. The use of this filter allows us to change any template in any given path. Let's take a look the following code to understand the implementation of this technique:</p>
<pre>add_filter( 'template_include', 'wpquickstart_conditional_template', 99 ); 
function wpquickstart_conditional_template( $template ) { 
   if ( is_page( 'portfolio' ) ) { 
         $new_template = locate_template( array( 'portfolio-page-template.php' ) ); 
         if ( !empty( $new_template ) ) {  
               return $new_template; 
         } 
   } 
   return $template; 
} </pre>
<p>The location of the default template is passed as the parameter to this filter. In this scenario, we check whether the page with the name <kbd>portfolio</kbd> is loaded. If the condition is matched, we return a dynamic new template instead of the default template. The preceding code will look for the template in the root folder of the theme. The advantage of this method is the ability to use different conditions on different template paths at once and load the necessary templates. We can also use this technique to load dynamic templates based on conditions such as <span>URL parameters, the l</span><span>ogged in user or user role, and the r</span><span>eferrer of a request.</span></p>
<p>As a developer, you must be aware of this technique. There may be sites that use this technique in the <kbd>functions.php</kbd> file of the theme, as well as with custom plugins. If you are not aware of this technique, you will have to waste considerable time going through the template hierarchy to find out the template that is loaded.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p style="color: black">The frontend of an application is the main interaction point for users and hence the possibility of requesting frontend changes is relatively high. Therefore, it's important to use the existing features of a theme to make templates as flexible as possible. In this chapter, we looked at the importance of a theme and its components in development. Then, we started extending existing themes with the use of child themes, actions, and filters. Next, we had an in-depth overview of the theme template hierarchy in order to build new themes as well as customize existing themes in a flexible way. Finally, we looked at the techniques for conditionally changing the design to cater for advanced site requirements.</p>
<p>In <a href="6bc0e5d5-b12d-4710-ac11-a600af054efa.xhtml" target="_blank">Chapter 4</a>, <em>Building Custom Modules with Plugin Development</em>, we will be looking at the process of building different types of WordPress plugins and adding the features, beyond the functionality of a them.</p>


            </article>

            
        </section>
    </body></html>