- en: Multilingual and Internationalization
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多语言和国际化
- en: 'In this chapter, we will cover the following recipes to make sure that your
    site is multilingual and internationalized:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下菜谱，以确保您的网站是多语言的并且是国际化的：
- en: Translating administrative interfaces
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 翻译管理界面
- en: Translating configurations
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 翻译配置
- en: Translating content
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 翻译内容
- en: Creating multilingual views
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建多语言视图
- en: Introduction
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: This chapter will cover the multilingual and internationalization features of
    Drupal 8, which have been greatly enhanced since Drupal 7\. The preceding version
    of Drupal required many extra modules to provide internationalization efforts,
    but now the majority is provided by Drupal core.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍 Drupal 8 的多语言和国际化功能，这些功能自 Drupal 7 以来得到了极大的增强。之前的 Drupal 版本需要许多额外的模块来提供国际化工作，但现在大多数工作都由
    Drupal 核心提供。
- en: 'Drupal core provides the following multilingual modules:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal 核心提供了以下多语言模块：
- en: '**Language**: This provides you with the ability to detect and support multiple
    languages'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语言**：这为您提供了检测和支持多种语言的能力'
- en: '**Interface translation**: This takes installed languages and translates strings
    that are presented through the user interface'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**界面翻译**：这会将已安装的语言翻译成通过用户界面呈现的字符串'
- en: '**Configuration translation**: This allows you to translate configuration entities,
    such as date formats and views'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**配置翻译**：这允许您翻译配置实体，例如日期格式和视图'
- en: '**Content translation**: This brings the power of providing content in different
    languages and displaying it according to the current language of the user'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**内容翻译**：这带来了提供不同语言内容并根据用户当前语言显示内容的能力'
- en: Each module serves a specific purpose in creating the multilingual experience
    for your Drupal site. Behind the scenes, Drupal supports the language code for
    all entities and cache contexts. These modules expose the interfaces to implement
    and deliver internationalized experiences.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 每个模块在为您的 Drupal 网站创建多语言体验方面都发挥着特定的作用。在幕后，Drupal 支持所有实体和缓存上下文的语言代码。这些模块公开接口以实现和提供国际化体验。
- en: Translating administrative interfaces
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译管理界面
- en: The interface translation module provides a method to translate strings found
    in the Drupal user interface. Harnessing the Language module, interface translations
    are automatically downloaded from the Drupal translation server. By default, the
    interface language is loaded through the language code as a path prefix. With
    the default **Language** configuration, paths will be prefixed with the default
    language.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 界面翻译模块提供了一种翻译在 Drupal 用户界面中找到的字符串的方法。利用语言模块，界面翻译会自动从 Drupal 翻译服务器下载。默认情况下，界面语言通过语言代码作为路径前缀加载。使用默认的
    **语言** 配置，路径将以默认语言为前缀。
- en: Interface translations are based on strings provided in the code that are passed
    through the internal translation functions.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 界面翻译基于代码中提供的字符串，这些字符串通过内部翻译函数传递。
- en: In this recipe, we will enable Spanish, import the language files, and review
    the translated interface strings to provide missing or custom translations.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在本菜谱中，我们将启用西班牙语，导入语言文件，并审查翻译的界面字符串，以提供缺失或自定义翻译。
- en: Getting ready
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Drupal 8 provides an automated installation process of translation files. For
    this to work, your web server must be able to communicate with [https://localize.drupal.org/](https://localize.drupal.org/).
    If your web server cannot automatically download the files from the translation
    server, you can refer to the manual installation instructions, which will be covered
    in the *There's more...* section of this recipe.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal 8 提供了翻译文件的自动化安装过程。为此，您的 Web 服务器必须能够与 [https://localize.drupal.org/](https://localize.drupal.org/)
    进行通信。如果您的 Web 服务器无法从翻译服务器自动下载文件，您可以参考手动安装说明，这些说明将在本菜谱的 *还有更多...* 部分中介绍。
- en: How to do it...
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Go to Extend and install the Interface Translation module. It will prompt you
    to enable the Language, File, and Field modules to be installed, if they are not.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往扩展并安装界面翻译模块。如果尚未安装，它将提示您启用语言、文件和字段模块。
- en: After the module is installed, click on Configuration. Go to the Languages page
    under the Regional and Language section.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模块安装完成后，点击配置。在区域和语言部分下转到语言页面。
- en: 'Click on Add language in the languages overview table:'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在语言概述表中点击添加语言：
- en: '![](img/bd4bb6fc-208b-47d9-8323-489ac9f7244c.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bd4bb6fc-208b-47d9-8323-489ac9f7244c.png)'
- en: The Add language page provides a select list of all available languages that
    the interface can be translated to. Select Spanish, and then click on Add language.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加语言页面提供了一个可供选择的所有可用语言的列表，界面可以翻译成这些语言。选择西班牙语，然后点击添加语言。
- en: A batch process will run, install the translation language files, and import
    them.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将运行一个批处理过程，安装翻译语言文件并将它们导入。
- en: 'The INTERFACE TRANSLATION column specifies the percentage of active translatable
    interface strings that have a matching translation. Clicking on the link allows
    you to view the User interface translation form:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**接口翻译**列指定了具有匹配翻译的活跃可翻译界面字符串的百分比。点击链接可以查看用户界面翻译表单：'
- en: '![](img/08b05839-9e92-4b83-9770-cbb6820f87d5.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/08b05839-9e92-4b83-9770-cbb6820f87d5.png)'
- en: The Filter Translatable Strings form allows you to search for translated strings
    or untranslated strings. Select Only untranslated strings from the Search in list
    and click on Filter.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 过滤可翻译字符串表单允许你搜索已翻译字符串或未翻译字符串。从搜索列表中选择“仅未翻译字符串”，然后点击过滤。
- en: 'Using the textbox on the right-hand side of the screen, a custom translation
    can be added to Only untranslated strings. Type in a translation for the item:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用屏幕右侧的文本框，可以添加自定义翻译到“仅未翻译字符串”。为该条目输入翻译：
- en: '![](img/281b1f93-81c5-43a9-8378-485bd8144cb6.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/281b1f93-81c5-43a9-8378-485bd8144cb6.png)'
- en: Click on Save translations to save the modification.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击保存翻译以保存修改。
- en: Go to `/es/node/add`, and you will note that the **Basic page** content type
    description will now match your translation.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往 `/es/node/add`，你会注意到**基本页面**内容类型的描述现在将与你的翻译相匹配。
- en: How it works...
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The interface translation module provides `\Drupal\locale\LocaleTranslation`,
    which implements `\Drupal\Core\StringTranslation\Translator\TranslatorInterface`.
    This class is registered under the `string_translation` service as an available
    lookup method.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 接口翻译模块提供了 `\Drupal\locale\LocaleTranslation`，它实现了 `\Drupal\Core\StringTranslation\Translator\TranslatorInterface`。这个类在
    `string_translation` 服务下注册为可用的查找方法。
- en: When the `t` function or the `\Drupal\Core\StringTranslation\StringTranslationTrait::t`
    method is invoked, the `string_translation` service is called to provide a translated
    string. The `string_translation` service will iterate through the available translators
    and return a translated string, if possible.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 当调用 `t` 函数或 `\Drupal\Core\StringTranslation\StringTranslationTrait::t` 方法时，`string_translation`
    服务会被调用以提供翻译后的字符串。`string_translation` 服务将遍历所有可用的翻译器，并在可能的情况下返回一个翻译后的字符串。
- en: Developers need to note that this is a key reason to ensure that module strings
    are passed through translation functions. It allows you to identify strings that
    need to be translated.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 开发者需要注意，这是确保模块字符串通过翻译函数传递的关键原因。这允许你识别需要翻译的字符串。
- en: The translator provided in the interface translation will then attempt to resolve
    the provided string against known translations for the current language. If a
    translation has been saved, it will be returned.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 接口翻译中提供的翻译器将尝试将提供的字符串与当前语言的已知翻译进行匹配。如果已保存翻译，则将返回该翻译。
- en: There's more...
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多内容...
- en: We will explore ways to install other languages, check translation statuses,
    and do much more in the following sections.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将探讨安装其他语言、检查翻译状态以及做更多的事情的方法。
- en: Manually installing language files
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 手动安装语言文件
- en: Translation files can be manually installed by downloading them from the Drupal.org
    translation server and uploading them through the language interface. You can
    also use the import interface to upload custom **gettext portable object** (**.po**)
    files.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过从 Drupal.org 翻译服务器下载并通过语言界面上传来手动安装翻译文件。你也可以使用导入界面上传自定义的 **gettext 可移植对象**（**.po**）文件。
- en: 'Drupal core and most contributed projects have `.po` files available at the
    Drupal translations site, [https://localize.drupal.org](https://localize.drupal.org).
    On the site, click on Download to download a `.po` file for Drupal core in all
    available languages. Additionally, clicking on a language will provide more translations
    for a specific language across projects, as follows:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Drupal 核心和大多数贡献项目在 Drupal 翻译网站上都有 `.po` 文件，[https://localize.drupal.org](https://localize.drupal.org)。在网站上，点击下载以下载所有语言的
    Drupal 核心文件的 `.po` 文件。此外，点击一个语言将提供跨项目的特定语言的更多翻译，如下所示：
- en: '![](img/1fb6a0ef-184e-4ad0-b2d7-1466a4a53ba4.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/1fb6a0ef-184e-4ad0-b2d7-1466a4a53ba4.png)'
- en: You can import a `.po` file by going to the `User interface translation` form
    and selecting the `Import` tab. You will need to select the `.po` file and then
    the appropriate language. You can treat the uploaded files as custom-created translations.
    This is recommended if you are providing a custom translation file that was not
    provided by Drupal.org. If you are updating Drupal.org translations manually,
    make sure that you check the box that overwrites existing noncustom translations.
    The final option allows you to replace customized translations if the `.po` file
    provides them. This can be useful if you have translated missing strings that
    might now be provided by the official translation file.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过访问`用户界面翻译`表单并选择`导入`选项卡来导入`.po`文件。你需要选择`.po`文件和适当的语言。你可以将上传的文件视为自定义创建的翻译。如果你提供的是由Drupal.org未提供的自定义翻译文件，这建议这样做。如果你正在手动更新Drupal.org的翻译，请确保勾选覆盖现有非定制翻译的复选框。最后一个选项允许你在`.po`文件提供的情况下替换定制翻译。如果你已经翻译了可能现在由官方翻译文件提供的缺失字符串，这可能很有用。
- en: Checking translation status
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检查翻译状态
- en: As you add new modules, the available translations will grow. The `Interface
    translation` module provides a translation status report that is accessible from
    the `Reports` page. This will check the default translation server for the project
    and check whether there is a `.po` available or if it has changed. In the event
    of a custom module, you can provide a custom translation server, which is covered
    in *P**roviding translations for a custom module*.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 随着你添加新的模块，可用的翻译将不断增加。`界面翻译`模块提供了一个可以从`报告`页面访问的翻译状态报告。这将检查项目的默认翻译服务器，并检查是否存在`.po`文件或它是否已更改。在自定义模块的情况下，你可以提供一个自定义翻译服务器，这在*提供自定义模块的翻译*中有所介绍。
- en: If an update is available, you will be alerted. You can then import the translation
    file updates automatically or download and manually import them.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有更新可用，你会收到通知。然后你可以自动导入翻译文件更新，或者下载并手动导入它们。
- en: Exporting translations
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导出翻译
- en: In the `User interface translation` form, there is an `Export` tab. This form
    will provide a `Gettext Portable Object` (`.po`) file. You can export all the
    available source text that is discovered in your current Drupal site without translations.
    This will provide a base `.po` for translators to work on.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在`用户界面翻译`表单中，有一个`导出`选项卡。此表单将提供一个`Gettext便携对象`（`.po`）文件。你可以导出在你当前Drupal网站上发现的所有未翻译的源文本。这将提供一个基础`.po`文件，供翻译者工作。
- en: Additionally, you can download a specific language. Specific language downloads
    can include uncustomized translations, customized translations, and missing translations.
    Downloading customized translations can be used to help make contributions to
    the multilingual and internationalization efforts of the Drupal community.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你可以下载特定语言。特定语言的下载可以包括未定制的翻译、定制的翻译和缺失的翻译。下载定制的翻译可以帮助你为Drupal社区的多语言和国际化的努力做出贡献。
- en: Interface translation permissions
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 界面翻译权限
- en: The interface translation module provides a single permission called **Translate
    interface text**. This permission grants users the permission to interact with
    all the module's capabilities. It is flagged with a security warning, as it allows
    users with this permission to customize all the output text presented to them.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '`界面翻译`模块提供了一个名为**翻译界面文本**的单个权限。这个权限授予用户与模块所有功能交互的权限。它带有安全警告标志，因为它允许具有此权限的用户自定义所有展示给他们的输出文本。'
- en: However, it does allow you to provide a role for translators and limits their
    access to just translation interfaces.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，它确实允许你为翻译者提供一个角色，并限制他们仅能访问翻译界面。
- en: Using interface translation to customize default English strings
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用界面翻译来自定义默认的英文字符串
- en: The interface translation module is useful beyond its typical multilingual purposes.
    You can use it to customize strings in the interface that are not available to
    be modified through typical hook methods, or if you are not a developer.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '`界面翻译`模块在其典型的多语言用途之外也非常有用。你可以用它来自定义那些无法通过典型钩子方法修改的界面字符串，或者如果你不是开发者的话。'
- en: Firstly, you will need to edit the English language from the Languages screen.
    Check the checkbox for Enable interface translation for English and click on Save
    language. You will now have the ability to customize existing interface strings.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您需要从语言屏幕编辑英语语言。勾选启用英语界面翻译的复选框并点击保存语言。现在您将能够自定义现有的界面字符串。
- en: This is only recommended for areas of the interface that cannot already be customized
    through the normal user interface or provided API mechanisms.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这仅建议用于无法通过正常用户界面或提供的API机制进行定制的界面区域。
- en: Interface text language detection
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 界面文本语言检测
- en: 'The `Language` module provides detection and selection rules. By default, the
    module will detect the current language based on the URL, with the language code
    acting as a prefix to the current path. For example, `/es/node` will display the
    node listing page in Spanish, as seen in the following screenshot:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '`Language`模块提供检测和选择规则。默认情况下，该模块将根据URL检测当前语言，语言代码作为当前路径的前缀。例如，`/es/node`将显示西班牙语的节点列表页面，如下面的截图所示：'
- en: '![](img/ca433927-a762-48ce-b330-5a14973db728.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ca433927-a762-48ce-b330-5a14973db728.png)'
- en: You can have multiple detection options enabled at once and use the ordering
    to decide which takes precedence. This can allow you to use the language code
    in the URL first, but, if they are missing, a fallback to the language is specified
    by the user's browser.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以同时启用多个检测选项，并使用排序来决定哪个优先。这可以允许您首先使用URL中的语言代码，但如果它们缺失，则回退到用户浏览器指定的语言。
- en: Some detection methods have settings. For instance, the URL detection method
    can be based on the default path prefix or subdomains.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 一些检测方法有设置。例如，URL检测方法可以基于默认路径前缀或子域。
- en: Providing translations for a custom module
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为自定义模块提供翻译
- en: Modules can provide custom translations in their directories or point to a remote
    file. These definitions are added to the module's `info.yml` file. First, you
    will need to specify the `interface translation project` key if it differs from
    the project's machine name.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 模块可以在它们的目录中提供自定义翻译或指向远程文件。这些定义添加到模块的`info.yml`文件中。首先，您需要指定`interface translation
    project`键，如果它与项目的机器名称不同。
- en: You will then need to specify a server pattern through the `interface translation
    server pattern` key. This can be a relative path to Drupal's root, such as `modules/custom/mymodule/translation.po`,
    or a remote file URL at `http://example.com/files/translations/mymodule/translation.po`.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，您需要通过`interface translation server pattern`键指定一个服务器模式。这可以是一个指向Drupal根目录的相对路径，例如`modules/custom/mymodule/translation.po`，或者一个远程文件URL，例如`http://example.com/files/translations/mymodule/translation.po`。
- en: Distributions (or other modules) can implement `hook_locale_translation_projects_alter`
    to provide this information on behalf of modules or to alter defaults.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 分布式（或其他模块）可以实现`hook_locale_translation_projects_alter`来代表模块提供此信息或更改默认值。
- en: 'The server pattern accepts the following different tokens:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器模式接受以下不同的标记：
- en: '`%core`: Indicates the version of a course (for example, 8.x)'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`%core`：表示课程的版本（例如，8.x）'
- en: '`%project`: Indicates the project''s name'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`%project`：表示项目的名称'
- en: '`%version`: Indicates the current version string'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`%version`：表示当前版本字符串'
- en: '`%language`: Indicates the language code'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`%language`：表示语言代码'
- en: More information on the interface translation keys and variables can be found
    in the `local.api.php` document file located in the interface translation module's
    base folder.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 更多关于界面翻译键和变量的信息可以在界面翻译模块基本文件夹中的`local.api.php`文档文件中找到。
- en: See also
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考信息
- en: Refer to the Drupal translation server at [https://localize.drupal.org/translate/drupal8](https://localize.drupal.org/translate/drupal8%20)
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考Drupal翻译服务器[https://localize.drupal.org/translate/drupal8](https://localize.drupal.org/translate/drupal8%20)
- en: You can contribute using the localization server at [https://www.drupal.org/node/302194](https://www.drupal.org/node/302194)
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以使用位于[https://www.drupal.org/node/302194](https://www.drupal.org/node/302194)的本地化服务器进行贡献
- en: Refer to the `locale.api.php` documentation at [https://api.drupal.org/api/drupal/core%21modules%21locale%21locale.api.php/8](https://api.drupal.org/api/drupal/core%21modules%21locale%21locale.api.php/8)
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考位于[https://api.drupal.org/api/drupal/core%21modules%21locale%21locale.api.php/8](https://api.drupal.org/api/drupal/core%21modules%21locale%21locale.api.php/8)的`locale.api.php`文档
- en: Refer to PO and POT files at [https://www.drupal.org/node/1814954](https://www.drupal.org/node/1814954)
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考PO和POT文件[https://www.drupal.org/node/1814954](https://www.drupal.org/node/1814954)
- en: Translating configuration
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译配置
- en: The **Configuration translation** module provides an interface to translate
    configurations with interface translation and language as dependencies. This module
    allows us to translate configuration entities. The ability to translate configuration
    entities adds an extra level of internationalization.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '**配置翻译**模块提供了一个界面，用于通过接口翻译和语言依赖来翻译配置。此模块允许我们翻译配置实体。翻译配置实体的能力增加了国际化的一层。'
- en: Interface translation allows us to translate strings provided in our Drupal
    site's code base. Configuration translation allows us to translate importable
    and exportable configuration items that we created, such as site title or date
    formats.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 接口翻译允许我们翻译在Drupal网站代码库中提供的字符串。配置翻译允许我们翻译我们创建的可导入和可导出的配置项，例如网站标题或日期格式。
- en: In this recipe, we will translate date format configuration entities. We will
    provide localized date formats for Danish to provide a more internationalized
    experience.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将翻译日期格式配置实体。我们将为丹麦语提供本地化的日期格式，以提供更国际化的体验。
- en: Getting ready
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Your Drupal site needs to have two languages enabled in order to use Configuration
    Translation. Install Danish from the Languages interface.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 您的Drupal网站需要启用两种语言才能使用配置翻译。从语言界面安装丹麦语。
- en: How to do it...
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Go to Extend and install the Configuration Translation module. It will prompt
    you to enable the Interface Translation, Language, File, and Field modules to
    be installed, if they are not.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往扩展并安装配置翻译模块。如果尚未安装，它将提示您启用接口翻译、语言、文件和字段模块。
- en: After the module is installed, go to Configuration. Then, go to the Configuration
    translation page under the Regional and Language section.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模块安装后，转到配置。然后，转到区域和语言部分下的配置翻译页面。
- en: 'Click on the list for the Date format option in the configuration entity option
    table:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在配置实体选项表中点击日期格式选项的列表：
- en: '![](img/89c4343e-febd-4b52-9a1c-4764915fea71.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/89c4343e-febd-4b52-9a1c-4764915fea71.png)'
- en: We will translate the Default long date format to represent the Danish format.
    Click on the Translate for the Default long date format row.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将翻译默认的长日期格式以表示丹麦格式。点击“翻译”以翻译默认长日期格式行。
- en: 'Click on Add to create a Danish translation:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“添加”以创建丹麦语翻译：
- en: '![](img/4888dbe3-8322-445a-9160-0018adb68ad8.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4888dbe3-8322-445a-9160-0018adb68ad8.png)'
- en: 'For Danish, we will provide the following PHP date format: `l j. F, Y - H.i`.
    This will display the day of the week, the day of the month, the month, the full
    year, and the 24-hour notation for the time.'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于丹麦语，我们将提供以下PHP日期格式：`l j. F, Y - H.i`。这将显示星期几、月份中的日期、月份、完整年份以及时间的24小时制表示。
- en: Click on Save translation.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“保存翻译”。
- en: Whenever a user is browsing your Drupal site with Danish as their language,
    the date format will now be localized for their experience.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当用户使用丹麦语浏览您的Drupal网站时，日期格式现在将根据他们的体验进行本地化。
- en: How it works...
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Configuration Translation module requires Interface Translation; however,
    it does not work in the same fashion. The module modifies all entity types that
    extend the `\Drupal\Core\Config\Entity\ConfigEntityInterface` interface. It adds
    a new handler under the `config_translation_list` key. This is used to build a
    list of available configuration entities and their bundles.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 配置翻译模块需要接口翻译；然而，它的工作方式并不相同。该模块修改了所有扩展`\Drupal\Core\Config\Entity\ConfigEntityInterface`接口的实体类型。它在`config_translation_list`键下添加了一个新的处理器。这用于构建可用配置实体及其捆绑包的列表。
- en: The module alters the configuration schema in Drupal, and updates the default
    configuration element definitions to use a specified class under `\Drupal\config_translation\Form`.
    This allows `\Drupal\config_translation\Form\ConfigTranslationFormBase` and its
    child classes to properly save translated configuration data, which can then be
    modified through the configuration translation screens.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 该模块修改Drupal的配置架构，并更新默认配置元素定义以使用`\Drupal\config_translation\Form`下的指定类。这允许`\Drupal\config_translation\Form\ConfigTranslationFormBase`及其子类正确保存翻译后的配置数据，然后可以通过配置翻译屏幕进行修改。
- en: 'When the configuration is saved, it is identified as being part of a collection.
    The collection is identified as `language.LANGCODE`, and all translated configuration
    entities are saved and loaded by this identifier. The following is an example
    of how the configuration items are stored in the database:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当配置保存时，它被识别为集合的一部分。该集合被标识为`language.LANGCODE`，所有翻译后的配置实体都通过此标识符保存和加载。以下是如何在数据库中存储配置项的示例：
- en: '![](img/beb3fb72-cc08-45b7-a0f7-3ca8cf64e5ee.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/beb3fb72-cc08-45b7-a0f7-3ca8cf64e5ee.png)'
- en: When browsing the site in the `es` language code, the appropriate `block.block.bartik_account_menu`
    configuration entity will be loaded. If you are using the default site, or no
    language code, the configuration entity with an empty collection will be used.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用`es`语言代码浏览站点时，将加载适当的`block.block.bartik_account_menu`配置实体。如果您使用的是默认站点或没有语言代码，将使用空集合的配置实体。
- en: There's more...
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多内容...
- en: Configuration entities and the ability to translate them are a big part of Drupal
    8's multilingual capabilities. We'll explore them in detail in the next recipe.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 配置实体和翻译它们的能力是Drupal 8多语言功能的重要组成部分。我们将在下一个配方中详细探讨它们。
- en: Altering configuration translation info definitions
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修改配置翻译信息定义
- en: 'Modules can invoke the `hook_config_translation_info_alter` hook to alter discovered
    configuration mappers. For instance, the **Node** module does this to modify the
    `node_type` configuration entity:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 模块可以调用`hook_config_translation_info_alter`钩子来修改发现的配置映射器。例如，**节点**模块就是这样做的，以修改`node_type`配置实体：
- en: '[PRE0]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This updates the `node_type` definition to use the `\Drupal\node\ConfigTranslation\NodeTypeMapper`
    custom mapper class. This class adds the node type's title as a configurable translation
    item.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 这将更新`node_type`定义，使用`\Drupal\node\ConfigTranslation\NodeTypeMapper`自定义映射类。此类将节点类型的标题添加为可配置的翻译项。
- en: Translating views
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译视图
- en: Views are configuration entities. When the Configuration translation module
    is enabled, it is possible to translate Views. This will allow you to translate
    display titles, exposed form labels, and other items. Refer to the `Creating a
    multilingual view` recipe in this chapter for more information.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 视图是配置实体。当配置翻译模块启用时，可以翻译视图。这将允许您翻译显示标题、暴露表单标签和其他项目。有关更多信息，请参阅本章中的`创建多语言视图`配方。
- en: See also
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 相关内容
- en: Refer to the *Creating a Multilingual View* recipe of [*Chapter 8*](459ccdb8-7d36-44a8-b476-e34649e310a2.xhtml),
    *Multilingual and Internationalization.*
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 请参阅[*第8章*](459ccdb8-7d36-44a8-b476-e34649e310a2.xhtml)的*创建多语言视图*配方，*多语言和国际化*。
- en: Translating content
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译内容
- en: The content translation module provides a method to translate content entities,
    such as nodes and blocks. Each content entity needs to have translation enabled,
    which allows you to granularly decide what properties and fields are translated.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 内容翻译模块提供了一种翻译内容实体（如节点和块）的方法。每个内容实体都需要启用翻译，这样您可以细粒度地决定哪些属性和字段需要翻译。
- en: Content translations are duplications of the existing entity, but are flagged
    with a proper language code. When a visitor uses a language code, Drupal attempts
    to load content entities using that language code. If a translation is not present,
    Drupal will render the default untranslated entity.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 内容翻译是对现有实体的重复，但会使用适当的语言代码进行标记。当访客使用语言代码时，Drupal会尝试使用该语言代码加载内容实体。如果不存在翻译，Drupal将渲染默认未翻译的实体。
- en: Getting ready
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Your Drupal site needs to have two languages enabled to use Content translation.
    Install Spanish from the Languages interface.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 您的Drupal站点需要启用两种语言才能使用内容翻译。从语言界面安装西班牙语。
- en: How to do it...
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Go to Extend and install the Content translation module. It will prompt you
    to enable the Language modules to be installed, if they are not.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往“扩展”并安装内容翻译模块。如果尚未安装，它将提示您安装语言模块。
- en: After the module is installed, go to Configuration and then to the Content language
    and translation page under the Regional and Language section.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模块安装后，前往配置，然后在区域和语言部分下转到内容语言和翻译页面。
- en: Check the checkbox next to Content to expose settings for the current content
    types.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“内容”旁边的复选框中勾选，以显示当前内容类型的设置。
- en: 'Enable the content translation for the Basic page and keep the provided default
    settings that enable translation for each field. Click on Save configuration:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用基本页面的内容翻译，并保留提供的默认设置，这些设置使每个字段都启用翻译。点击保存配置：
- en: '![](img/2f612655-ee3e-476d-9140-b4dd0a74a218.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2f612655-ee3e-476d-9140-b4dd0a74a218.png)'
- en: Create a new Basic page node. We will create this in the site's default language.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的基本页面节点。我们将使用网站的默认语言创建此节点。
- en: 'When viewing the new node, click on the Translate tab. From the Spanish language
    row, click on Add to create a translated version of the node:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在查看新节点时，点击翻译标签。从西班牙语语言行，点击添加以创建节点的翻译版本：
- en: '![](img/06703719-0a07-444d-841c-44fa2a355cc2.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/06703719-0a07-444d-841c-44fa2a355cc2.png)'
- en: 'The content will be prepopulated with the default language''s content. Replace
    the title and body with the translated text:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 内容将预先填充为默认语言的内容。用翻译文本替换标题和正文：
- en: '![](img/26d04112-75f2-43eb-96d0-ffcd9abf118f.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/26d04112-75f2-43eb-96d0-ffcd9abf118f.png)'
- en: Click on Save and keep published (this translation) to save the new translation.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击保存并保持已发布（此翻译）以保存新的翻译。
- en: How it works
  id: totrans-129
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理
- en: The Content translation module works by utilizing language code flags. All content
    entities and field definitions have a language code key. A content entity has
    a language code column, which specifies what language the content entity is for.
    Field definitions also have a language code column, which is used to identify
    the translation for the content entity. Content entities can provide handler definitions
    to handle translations, or else the Content translation module will provide its
    own.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 内容翻译模块通过利用语言代码标志来工作。所有内容实体和字段定义都有一个语言代码键。内容实体有一个语言代码列，指定内容实体是哪种语言。字段定义也有一个语言代码列，用于识别内容实体的翻译。内容实体可以提供处理器定义来处理翻译，否则内容翻译模块将提供自己的。
- en: Each entity and field record is saved with the proper language code to use.
    When an entity is loaded, the current language code is taken into consideration
    to ensure that the proper entity is loaded.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 每个实体和字段记录都保存了适当的语言代码以使用。当加载实体时，会考虑当前的语言代码以确保加载正确的实体。
- en: There's more...
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多...
- en: There are additional operations to translate content; we will cover them in
    the next sections.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 有额外的操作来翻译内容；我们将在下一节中介绍它们。
- en: Flagging translations as outdated
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 标记翻译为过时
- en: 'The Content translation module provides a mechanism to flag translated entities
    as possibly being outdated. The Flag other translations as outdated flag provides
    a way to make a note of entities that will need updated translations:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 内容翻译模块提供了一个机制来标记翻译实体可能已过时。标记其他翻译为过时的标志提供了一个记录需要更新翻译的实体的方式：
- en: '![](img/3687cf10-3325-4832-b750-468d5feb86e8.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/3687cf10-3325-4832-b750-468d5feb86e8.png)'
- en: This flag does not change any data, but rather provides a moderation tool. This
    makes it easy for translators to identify content, which has been changed and
    requires updating. The translation tab for the content entity will highlight all
    translations, which are still marked as outdated. As they are changed, the editor
    can uncheck the flag.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 此标志不会更改任何数据，而是一种审核工具。这使得翻译者能够轻松识别已更改并需要更新的内容。内容实体的翻译标签将突出显示所有仍标记为过时的翻译。随着它们的更改，编辑者可以取消选中标志。
- en: Translating content links
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译内容链接
- en: Mostly, Drupal menus contain links to nodes. Menu links are not translated by
    default, and the Custom menu links option must be enabled under Content translation.
    You will need to translate node links manually from the menu administration interface.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，Drupal菜单包含指向节点的链接。菜单链接默认不翻译，必须在内容翻译中启用自定义菜单链接选项。您需要从菜单管理界面手动翻译节点链接。
- en: Enabling a menu link from the node create and edit form will not work with translations.
    If you edit the menu settings from a translation, it will edit the untranslated
    menu link.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 从节点创建和编辑表单启用菜单链接与翻译不兼容。如果您从翻译编辑菜单设置，它将编辑未翻译的菜单链接。
- en: Defining translation handlers for entities
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为实体定义翻译处理器
- en: The Content translation module requires entity definitions to provide information
    about translation handlers. If this information is missing, it will provide its
    own defaults. The *Entity API* is covered in [*Chapter 10*](2f5fe169-0ba6-4746-9586-896f00f0bb28.xhtml),
    *The Entity API*, but we will quickly discuss how the content translation module
    interacts with the Entity API.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 内容翻译模块需要实体定义来提供关于翻译处理器的信息。如果缺少此信息，它将提供自己的默认值。*实体API*在[*第10章*](2f5fe169-0ba6-4746-9586-896f00f0bb28.xhtml)，*实体API*中有介绍，但我们将快速讨论内容翻译模块如何与实体API交互。
- en: Content entity definitions can provide a `translation` handler. If not provided,
    it will default to `\Drupal\content_translation\ContentTranslationHandler`. A
    node provides this definition and uses it to place the content translation information
    into the vertical tabs.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 内容实体定义可以提供 `translation` 处理器。如果没有提供，它将默认为 `\Drupal\content_translation\ContentTranslationHandler`。一个节点提供此定义并使用它将内容翻译信息放入垂直标签中。
- en: The `content_translation_metadata` key defines how to interact with translation
    metadata information, such as flagging other entities as outdated. The `content_translation_deletion`
    key provides a form class to handle entity translation deletion.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '`content_translation_metadata` 键定义了如何与翻译元数据信息交互，例如标记其他实体为过时。`content_translation_deletion`
    键提供了一个表单类来处理实体翻译删除。'
- en: Currently, as of 8.0.1, no core modules provide implementations that override
    the default `content_translation_metadata` or `content_translation_deletion`.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，截至 8.0.1 版本，没有核心模块提供覆盖默认的 `content_translation_metadata` 或 `content_translation_deletion`
    的实现。
- en: See also
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 相关内容
- en: Refer to [*Chapter 10*](2f5fe169-0ba6-4746-9586-896f00f0bb28.xhtml), *The Entity
    API*.
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考 [*第10章*](2f5fe169-0ba6-4746-9586-896f00f0bb28.xhtml)，*实体API*。
- en: Creating multilingual views
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建多语言视图
- en: Views, being configuration entities, are available for translation. However,
    the power of multilingual views does not lie just in configuration translation.
    Views allow you to build filters that react to the current language code. This
    ensures that the content, which has been translated into the user's language,
    is displayed.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 视图作为配置实体，可以进行翻译。然而，多语言视图的力量并不仅仅在于配置翻译。视图允许您构建对当前语言代码做出反应的过滤器。这确保了翻译成用户语言的内容被显示。
- en: In this recipe, we will create a multilingual view that provides a block showing
    recent articles. If there is no content, we will display a translated `no results`
    message.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将创建一个多语言视图，显示最近的文章块。如果没有内容，我们将显示翻译后的 `无结果` 消息。
- en: Getting ready
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Your Drupal site needs to have two languages enabled in order to use Content
    Translation. Install Spanish from the Languages interface. Enable content translation
    for Articles. You will also need to have some translated content.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 您的 Drupal 网站需要启用两种语言才能使用内容翻译。从语言界面安装西班牙语。为文章启用内容翻译。您还需要一些翻译内容。
- en: How to do it...
  id: totrans-153
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Go to Views from Structure, and click on Add view.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从结构转到视图，并点击添加视图。
- en: Provide a view name, such as `Recent articles`, and change the type of content
    to Article. Mark that you would like to Create a block and then click on Save
    and edit.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供一个视图名称，例如 `Recent articles`，并将内容类型更改为文章。标记您想要创建一个块，然后点击保存并编辑。
- en: 'Add a new Filter criteria. Search for Translation language and add the filter
    for the Content category. Click on Add and configure filter criteria. Set the
    filter to check the Interface text language selected for page. This will only
    display that the content that has been translated or the base language is the
    current language:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加新的过滤器标准。搜索翻译语言，并为内容类别添加过滤器。点击添加并配置过滤器标准。将过滤器设置为检查页面选择的界面文本语言。这将仅显示已翻译的内容或基本语言是当前语言：
- en: '![](img/80007260-af25-43f2-bbe9-f23b94cc27a3.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/80007260-af25-43f2-bbe9-f23b94cc27a3.png)'
- en: Click on Add next to No Results and search for Text area. Check the checkbox
    and click on Add and configure no results behavior. Provide some sample text,
    such as `Currently no recent articles`.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击无结果旁边的添加，搜索文本区域。勾选复选框，然后点击添加并配置无结果行为。提供一些示例文本，例如 `目前没有最近的文章`。
- en: Save the view.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存视图。
- en: Click on the Translate view tab. Click on Add for the Spanish row to translate
    the view for the language.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击翻译视图标签。点击西班牙语行的添加以翻译该语言的视图。
- en: 'Expand the Master display settings and then the Recent articles display options
    fieldsets. Modify the Display title option to provide a translated title:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开主显示设置，然后展开最近的文章显示选项字段集。修改显示标题选项以提供翻译的标题：
- en: '![](img/4c3cc463-801a-42a0-9f6a-8764e8cac093.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4c3cc463-801a-42a0-9f6a-8764e8cac093.png)'
- en: 'Expand No results behavior to modify the text on the right-hand side of the
    screen using the textbox on the left-hand side of the screen as the source for
    the original text:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将无结果行为展开以修改屏幕右侧的文本，使用屏幕左侧的文本框作为原始文本的来源：
- en: '![](img/10c296fb-ea80-41f0-9b87-958b3c44bb3e.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/10c296fb-ea80-41f0-9b87-958b3c44bb3e.png)'
- en: Click on Save translation.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击保存翻译。
- en: Place the block on your Drupal site by going to Structure and then to Block
    Layout.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过转到结构然后转到块布局来在您的Drupal网站上放置该块。
- en: 'Go to the site through `/es` and note the translated `Views` block:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过`/es`访问网站并注意翻译后的`视图`块：
- en: '![](img/b3b2996d-189e-4a06-a092-0c6936577bff.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b3b2996d-189e-4a06-a092-0c6936577bff.png)'
- en: How it works...
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Views provide the Translation language filter that builds off this element.
    The Views plugin systems provide a mechanism to gather and display all available
    languages. These will be saved as a token internally and then substituted with
    the actual language code when the query is executed. If a language code is no
    longer available, the `Content language for selected` page and views will fall
    back to the current language when viewed.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 视图提供了基于此元素的翻译语言过滤器。视图插件系统提供了一个机制来收集和显示所有可用的语言。这些语言将作为令牌内部保存，并在查询执行时替换为实际的语言代码。如果某个语言代码不再可用，则选择页面和视图的内容语言将回退到当前语言。
- en: You will come across this option when editing views provided by Drupal core
    or contributed modules. Although this is not an option in the user interface,
    it is a default practice to add a language filter defined as `***LANGUAGE_language_content***`,
    which will force the view to be multilingual.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 当您编辑Drupal核心或贡献模块提供的视图时，您会遇到此选项。尽管这不是用户界面中的选项，但将定义为`***LANGUAGE_language_content***`的语言过滤器添加为默认做法，这将强制视图为多语言。
- en: The filter tells Views to query based on the language code of the entity and
    its fields.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 过滤器告诉视图根据实体的语言代码及其字段进行查询。
- en: Views are configuration entities. The Configuration translation module allows
    you to translate views. Views can be translated from the main Configuration translation
    screens from the `Configuration` area or by editing individual views.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 视图是配置实体。配置翻译模块允许您翻译视图。您可以从`配置`区域的`配置翻译`主屏幕或通过编辑单个视图来翻译视图。
- en: Most translation items will be under the Master display settings tab unless
    overridden in specific displays. Each display type will also have its own specific
    settings.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数翻译项都将位于主显示设置选项卡下，除非在特定显示中进行了覆盖。每种显示类型也将有自己的特定设置。
- en: There's more...
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Even more can be done to translate your views; we will discuss in the following
    section.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 可以对视图进行更多翻译；我们将在下一节中讨论。
- en: Translating exposed form items and filters
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译暴露的表单项和过滤器
- en: Each view can translate the exposed form from the `Exposed Form` section. This
    does not translate the labels on the form but the form elements. You can translate
    the `submit` button text, `reset` button label, `sort` label, and `ascending`
    or `descending` .
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 每个视图都可以从`暴露表单`部分翻译暴露的表单。这不会翻译表单上的标签，而是翻译表单元素。您可以翻译`提交`按钮文本、`重置`按钮标签、`排序`标签以及`升序`或`降序`。
- en: You can translate the labels for exposed filters from the `Filters` section.
    Each exposed filter will show up as a collapsible fieldset, allowing you to configure
    the administrative label and front-facing label.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从`过滤器`部分翻译暴露过滤器的标签。每个暴露的过滤器将显示为一个可折叠的字段集，允许您配置管理标签和前端标签。
- en: '![](img/41784ca9-6035-4b2a-8b52-18d18e479de6.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/41784ca9-6035-4b2a-8b52-18d18e479de6.png)'
- en: By default, available translations need to be imported through the global interface
    translation context.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，需要通过全局界面翻译上下文导入可用的翻译。
- en: Translating display and row format items
  id: totrans-182
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译显示和行格式项
- en: 'Some display formats have translatable items. These can be translated in each
    display mode''s section. For example, the following items can be translated with
    their display format:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 一些显示格式有可翻译项。这些可以在每个显示模式的相应部分进行翻译。例如，以下项可以使用其显示格式进行翻译：
- en: The `Table` format allows you to translate the table summary
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`表格`格式允许您翻译表格摘要'
- en: The `RSS feed` format allows you to translate the feed description
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RSS源`格式允许您翻译源描述'
- en: The `Page` format allows you to translate the page's title
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`页面`格式允许您翻译页面的标题'
- en: The `Block` format allows you to translate the block's title
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`块`格式允许您翻译块的标题'
- en: Translating page display menu items
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译页面显示菜单项
- en: 'Custom menu links can be translated through the Content translation module.
    Views which use a page display do not create custom menu link entities. So it
    must be translated through the View itself. The `Views` module takes all views
    with a page display and registers their paths into the routing system directly
    as if defined in a module''s `routing.yml` file:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义菜单链接可以通过内容翻译模块进行翻译。使用页面显示的视图不会创建自定义菜单链接实体。因此，必须通过视图本身进行翻译。`视图`模块将所有具有页面显示的视图直接注册到路由系统中，就像在模块的`routing.yml`文件中定义一样：
- en: '![](img/b0b187c4-b6ec-43d3-a43d-118776ae5d9d.png)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b0b187c4-b6ec-43d3-a43d-118776ae5d9d.png)'
- en: For example, the **People** view that lists all users can be translated to have
    an updated tab name and link description.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，列出所有用户的**人员**视图可以被翻译成具有更新的标签名称和链接描述。
- en: See also
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: Refer to [*Chapter 3*](2015063a-2e03-45d2-822d-892e87f10e41.xhtml), *Displaying
    Content through Views*.
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 请参阅[*第3章*](2015063a-2e03-45d2-822d-892e87f10e41.xhtml)，*通过视图显示内容*。
