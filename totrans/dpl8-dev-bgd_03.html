<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Drupal Views and Configuration Management"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Drupal Views and Configuration Management</h1></div></div></div><p><span class="emphasis"><em>In the last chapter, we learned how to create basic custom modules as well as create new content types. Now let's explore the new configuration management introduced in Drupal 8 for better version control. We will learn how to use the Devel module to generate content for testing purposes, along with learning the basics of new and improved views.</em></span></p><p>In these chapter, we will learn these topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Using built-in Drupal 8 views</li><li class="listitem" style="list-style-type: disc">What is new configuration management in Drupal?</li><li class="listitem" style="list-style-type: disc">Using the configuration management module to export and import site configuration through the user interface</li><li class="listitem" style="list-style-type: disc">Using the Devel module to autogenerate content for testing purposes</li></ul></div><div class="section" title="A quick introduction to Views"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec41"/>A quick introduction to Views</h1></div></div></div><p>Views in Drupal 7 was<a class="indexterm" id="id173"/> the most installed and most used contributed module. Using views, it is easy to create pages and blocks that list a variety of content on the site. You can create a photo gallery or an event calendar, or list out users logged in to your site. Here are a few points listed when we need views:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">We like the default front page view, but we want to sort it differently</li><li class="listitem" style="list-style-type: disc">We want to provide an "unread forum posts" option</li><li class="listitem" style="list-style-type: disc">We like the default taxonomy/term view, but we want to sort it differently, for example, alphabetically</li><li class="listitem" style="list-style-type: disc">We want a way to display a block with the five most recent posts of a particular type</li></ul></div><p>In Drupal 8, views has been moved to the core module system. Creating a view in Drupal 8 is similar to the process followed in Drupal 7. Now the Views module will get installed as part of the <a class="indexterm" id="id174"/>default core module installation.</p></div></div>
<div class="section" title="Time for action &#x2013; creating a recipe listing block using views"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec42"/>Time for action – creating a recipe listing block using views</h1></div></div></div><p>We will see <a class="indexterm" id="id175"/>how easy the new Views <a class="indexterm" id="id176"/>module makes it to display a list of recipes on our site:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">If you aren't already logged in to your site, log in as admin and navigate to <span class="strong"><strong>Manage</strong></span> | <span class="strong"><strong>Structure</strong></span> at <code class="literal">http://yourdrupal8site.com/admin/structure</code>.<div class="mediaobject"><img alt="Time for action – creating a recipe listing block using views" src="graphics/4659_03_01.jpg"/></div></li><li class="listitem">Select the <span class="strong"><strong>Views</strong></span> link to create a new view. It will take you to the <span class="strong"><strong>Views</strong></span> configuration page, <code class="literal">http://yourdrupal8site.com/admin/structure/views</code>.<div class="mediaobject"><img alt="Time for action – creating a recipe listing block using views" src="graphics/4659_03_02.jpg"/></div><p>Here, you <a class="indexterm" id="id177"/>will find a minor difference in style from the Drupal 7 Views configuration page. There <a class="indexterm" id="id178"/>are many default views. According to your requirement, you can either duplicate or edit and use these predefined views. Or you can create an entirely new one by clicking on the <span class="strong"><strong>Add new view</strong></span> button.</p></li><li class="listitem">Now we are going to create our own view for listing the article content type. Go to this path: <code class="literal">http://yourdrupal8site.com/admin/structure/views/addorhttp://yourdrupal8site.com/admin/structure/views</code>. Click on the <span class="strong"><strong>Add new view</strong></span> button.</li><li class="listitem">You will get a form similar to the one shown next. Fill in the <span class="strong"><strong>View name</strong></span> field. In this example, I am giving the view's name as <code class="literal">Recipe List</code>. For the <span class="strong"><strong>Show</strong></span> and <span class="strong"><strong>of type</strong></span> fields, I have selected <span class="strong"><strong>Content</strong></span> and <span class="strong"><strong>Recipe</strong></span>, respectively.</li><li class="listitem">Check the <span class="strong"><strong>Create a block</strong></span> checkbox.</li><li class="listitem">Click on the <span class="strong"><strong>Save and edit</strong></span> button. Accepting all the default values for creating a block, your page should look similar to this:<div class="mediaobject"><img alt="Time for action – creating a recipe listing block using views" src="graphics/4659_03_03.jpg"/></div></li><li class="listitem">It will<a class="indexterm" id="id179"/> take <a class="indexterm" id="id180"/>you to the views configuration page at <code class="literal">http://yourdrupal8site.comadmin/structure/views/view/recipe_list</code>. There, you have to click on the <span class="strong"><strong>Save</strong></span> button at the bottom of the page:<div class="mediaobject"><img alt="Time for action – creating a recipe listing block using views" src="graphics/4659_03_04.jpg"/></div><p>Now, we <a class="indexterm" id="id181"/>need to configure our d8dev site so that our Recipe List views-based block shows up on the front page.</p></li><li class="listitem">Click on <a class="indexterm" id="id182"/>the <span class="strong"><strong>Structure</strong></span> link in the <span class="strong"><strong>Admin</strong></span> toolbar and select <span class="strong"><strong>Block layout</strong></span>:<div class="mediaobject"><img alt="Time for action – creating a recipe listing block using views" src="graphics/4659_03_05.jpg"/></div></li><li class="listitem">On the next page, click on the +<span class="strong"><strong>Recipe List</strong></span> on the right-hand side of the page under <span class="strong"><strong>LISTS (VIEWS)</strong></span>:<div class="mediaobject"><img alt="Time for action – creating a recipe listing block using views" src="graphics/4659_03_06.jpg"/></div></li><li class="listitem">On the <a class="indexterm" id="id183"/>next page, leave the <span class="strong"><strong>Block title</strong></span> field <a class="indexterm" id="id184"/>blank because that way the title will default to the title we added previously in the view creation wizard.</li><li class="listitem">Under the <span class="strong"><strong>Region</strong></span> settings, select <span class="strong"><strong>Sidebar second</strong></span> from the dropdown:<div class="mediaobject"><img alt="Time for action – creating a recipe listing block using views" src="graphics/4659_03_07.jpg"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec31"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>You have now created a views-based block of recipes and configured it so that it will only be displayed on the front page. Now, when you visit the front page of our d8dev site, you will have a nice <span class="strong"><strong>Recipe List</strong></span> block on the right-hand side of the page:</p><div class="mediaobject"><img alt="What just happened?" src="graphics/4659_03_08.jpg"/></div></div></div>
<div class="section" title="Configuration management in Drupal 8"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec43"/>Configuration management in Drupal 8</h1></div></div></div><p>As <a class="indexterm" id="id185"/>developers, we <a class="indexterm" id="id186"/>have always have faced the situation of how to do incremental development or work around staging and deployment issues in Drupal projects. An even bigger challenge has been, "What to classify as content and what as configuration?" Though we have configuration as a separate menu to identify this problem, what about views, taxonomy, or theme configuration?</p><p>It's not that we do not have a solution in Drupal 7. To address this issue, the Features &amp; Strongarm module was introduced during the Drupal 6 days, and it has made great improvements in the last couple of years. This was a savior in most of the cases. Still, we had to recreate a few configurations manually, making it error-prone.</p><p>But documenting the configuration required for the feature export itself has always been challenging when there is user-generated content being added periodically, and we have multiple teams working on the same project, sometimes in different time zones. We cannot export the complete site configuration from one installation to another.</p><p>Besides, there are many contributed modules that store specific configurations in their own ways, making it more difficult to consolidate feature exports in an incremental manner.</p><p>To improve the development process, a new configuration management initiative was started in Drupal 8. Now, because of this, we have an easier way to manage configuration in Drupal sites. We have the entire configuration saved in files instead of database tables. This makes it easier to follow version control systems in the true way. Now we can store history and roll back changes if required.</p><p>Let's start by understanding what has been defined as content and what is configuration in a Drupal project:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Content</strong></span>: Everything <a class="indexterm" id="id187"/>that we display on the site's frontend is content, for example, articles, basic pages, blog posts, images, video, and audio</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Sessions</strong></span>: Sessions <a class="indexterm" id="id188"/>store information about specific users when logged in while they are interacting with the Drupal site</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>State</strong></span>: This holds<a class="indexterm" id="id189"/> the information about the site in different scenarios that are temporary in nature, for example, the state when site permission is rebuilt or before a cron job is run</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Configuration</strong></span>: This<a class="indexterm" id="id190"/> is all of the information that is not content and is specific to your website, for example, the site name, content types used, fields, vocabularies, image styles, text formats, menu, menu links, permission system, and even the views you have created<p>It is best <a class="indexterm" id="id191"/>to use a version control system, for example, <code class="literal">git</code> or <code class="literal">svn</code>, to make best use of configuration management, especially when you are working with a distributed team.</p><p>Besides adding configuration in files, you can also add configuration manually. But this is best avoided as you will have to remember every step to be recreated during migration from staging to deployment. You cannot even use any version control system.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>Avoid using manual configuration management.</p></div></div></li></ul></div></div>
<div class="section" title="Using the Configuration Management interface"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec44"/>Using the Configuration Management interface</h1></div></div></div><p>In Drupal 8 we have a <a class="indexterm" id="id192"/>Configuration Manager module, which provides an easy interface to export and import site configurations and share between different environments of the project, such as development, staging, and deployment. You can easily verify the changes from your production environment using this module.</p><p>This module assumes your different environment; for example, dev, staging, testing, and production are the same site. Each site is identified using a <a class="indexterm" id="id193"/>
<span class="strong"><strong>Universally Unique Identifier</strong></span> (<span class="strong"><strong>UUID</strong></span>). The module will allow importing of configuration between different sites only when the UUID matches the target site.</p><p>By default, Drupal 8 saves all site configurations in the database. When installing the new Drupal site, it creates a new folder in <code class="literal">sites/default/files</code> named <code class="literal">config_HASH</code>. Here, HASH is a randomly generated long string of numbers and letters. Refer to this screenshot:</p><div class="mediaobject"><img alt="Using the Configuration Management interface" src="graphics/4659_03_09.jpg"/></div><p>This is where the <a class="indexterm" id="id194"/>configuration of different states of the site is saved.</p><p>Let us use the module UI to export the configuration we created in the previous chapter in the following section.</p></div>
<div class="section" title="Time for action &#x2013; importing, exporting, and synchronizing configurations"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec45"/>Time for action – importing, exporting, and synchronizing configurations</h1></div></div></div><p>The goal of the <a class="indexterm" id="id195"/>configuration system in Drupal 8 is to make taking a copy of the site configuration easy to set up a <a class="indexterm" id="id196"/>development <a class="indexterm" id="id197"/>site where you make changes. Then, importing those changes to the other site is also made simple.</p><p>To export Recipe content type, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In <a class="link" href="ch02.html" title="Chapter 2. Custom Module Development">Chapter 2</a>, <span class="emphasis"><em>Custom Module Development</em></span>, we created the Recipe content type. We will export this content type using configuration management. Browse to the module page at <code class="literal">http://yourdrupal8site.com/admin/config/development/configuration</code>.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_10.jpg"/></div></li><li class="listitem">Click <a class="indexterm" id="id198"/>on the <span class="strong"><strong>Single import/Export</strong></span> tab and then <span class="strong"><strong>Export</strong></span>.<p>On the <a class="indexterm" id="id199"/>configuration management module UI, the first tab is <span class="strong"><strong>Synchronize</strong></span>. When you are using this feature for the first time, you will see: <span class="strong"><strong>There are no configuration changes to import</strong></span>. This implies that your dev site is <a class="indexterm" id="id200"/>using the configurations from the database itself.</p><p>You will see that there are no configuration changes, which means that your site is using the configuration files from the database and that no changes were made to the site.</p></li><li class="listitem">Select the <span class="strong"><strong>Configuration type</strong></span> as <span class="strong"><strong>Content type</strong></span> and <span class="strong"><strong>Configuration name</strong></span> as <span class="strong"><strong>Recipe</strong></span>. You will see YAML-formatted configurations in the text area box. Save these YAML configurations in a separate file, <code class="literal">node.type.recipe.yml</code>. This file contains all the configurations related to our content type.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_11.jpg"/></div><p>However, <code class="literal">node.type.recipe.yml</code> doesn't <a class="indexterm" id="id201"/>include any fields used in the same. We <a class="indexterm" id="id202"/>need <a class="indexterm" id="id203"/>to export them too.</p></li><li class="listitem">To export, select <span class="strong"><strong>Field</strong></span> from the dropdown on the same page.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_12.jpg"/></div></li><li class="listitem">In the <a class="indexterm" id="id204"/>same <a class="indexterm" id="id205"/>way, export the form display of the Recipe content <a class="indexterm" id="id206"/>type. Select the <span class="strong"><strong>Configuration type</strong></span> as <span class="strong"><strong>Entity form display</strong></span> and <span class="strong"><strong>Configuration name</strong></span> as <span class="strong"><strong>node.recipe.default</strong></span>. Save the YAML configuration in <code class="literal">core.entity_form_display.node.recipe.default.yml</code>.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_13.jpg"/></div></li><li class="listitem">Export <a class="indexterm" id="id207"/>the default view teaser of the Recipe content type. Select the <span class="strong"><strong>Configuration</strong></span><a class="indexterm" id="id208"/><span class="strong"><strong> type</strong></span> as <span class="strong"><strong>Entity view display</strong></span> and <span class="strong"><strong>Configuration name</strong></span> as <span class="strong"><strong>node.recipe.teaser</strong></span>. Save <a class="indexterm" id="id209"/>the YAML configuration in <code class="literal">core.entity_view_display.node.recipe.default.yml</code>.</li><li class="listitem">Export the view Recipe List. Select the <span class="strong"><strong>Configuration type</strong></span> as <span class="strong"><strong>View</strong></span> and <span class="strong"><strong>Configuration name</strong></span> as <span class="strong"><strong>Recipe List</strong></span>. Save the YAML configuration in <code class="literal">views.view.recipe_list.yml</code>.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_14.jpg"/></div></li></ol></div><p><span class="strong"><strong>Importing configurations in other dev sites</strong></span></p><p>Install <a class="indexterm" id="id210"/>another Drupal site on your local machine which we will be using as target site to import all the <a class="indexterm" id="id211"/>features. Now import the content <a class="indexterm" id="id212"/>type Recipe from the configuration management:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to <span class="strong"><strong>Administration</strong></span> | <span class="strong"><strong>Configuration</strong></span> | <span class="strong"><strong>Development</strong></span> | <span class="strong"><strong>Synchronize</strong></span> | <span class="strong"><strong>Import</strong></span> at <code class="literal">http://yourstagingsite.com/admin/config/development/configuration/single/import</code>. Select the <span class="strong"><strong>Configuration type</strong></span> as <span class="strong"><strong>Content type</strong></span>, paste the YAML from <code class="literal">node.type.recipe.yml</code>, and click on <span class="strong"><strong>Import</strong></span>.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_15.jpg"/></div><p>You will <a class="indexterm" id="id213"/>get a<a class="indexterm" id="id214"/> confirmation <a class="indexterm" id="id215"/>page asking you to create a new content type.</p><div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_16.jpg"/></div><p>On <a class="indexterm" id="id216"/>successful <a class="indexterm" id="id217"/>import, you<a class="indexterm" id="id218"/> should see the following screen:</p><div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_17.jpg"/></div></li><li class="listitem">In a similar way, import fields of the Recipe content type. Select the <span class="strong"><strong>Configuration type</strong></span> as <span class="strong"><strong>Field</strong></span>, paste the YAML configurations, and click on <span class="strong"><strong>Import</strong></span>.</li><li class="listitem">Import <a class="indexterm" id="id219"/>the view modes and form modes using the file we saved after exporting from our initial dev site.</li></ol></div><p>In the <a class="indexterm" id="id220"/>preceding steps, we <a class="indexterm" id="id221"/>saw how <span class="strong"><strong>Single Import/Export</strong></span> works. Let's explore the other option of <span class="strong"><strong>Full Import/Export:</strong></span></p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Browse to the module configuration page again: <code class="literal">http://yourdrupal8site.com/admin/config/development/configuration</code>. This time we will focus on the third tab, <span class="strong"><strong>Full Import/Export</strong></span>. As earlier, there are two options, <span class="strong"><strong>Import</strong></span> and <span class="strong"><strong>Export</strong></span>.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_18.jpg"/></div></li><li class="listitem">Export your site configuration by clicking on the option. This will create a <code class="literal">config.tar.gz</code> file and prompt you to download the same on your machine.</li><li class="listitem">The next step would be to create another Drupal 8 site, if you have not created one already, where we will be importing the <code class="literal">config.tar.gz</code> file.</li><li class="listitem">Browse to <code class="literal">http://yourstagingsite.com/admin/config/development/configuration/full/import</code>. Select <code class="literal">config.tar.gz</code> and upload it as shown in this screenshot:<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_18a.jpg"/></div></li><li class="listitem">Now <a class="indexterm" id="id222"/>that <a class="indexterm" id="id223"/>we have imported our site configuration to the new site, let's <a class="indexterm" id="id224"/>check out the first tab, <span class="strong"><strong>Synchronize</strong></span>, again. Visit <code class="literal">http://yourstagingsite.com/admin/config/development/configuration</code>. Now it should display something like this:<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_18b.jpg"/></div><p>This <a class="indexterm" id="id225"/>page is basically displaying all the configuration changes. It helps us to verify that everything was imported as expected.</p><p>You can <a class="indexterm" id="id226"/>click on <span class="strong"><strong>View differences</strong></span>, which will open a popup listing out the various configurations imported/changed. After making sure that everything<a class="indexterm" id="id227"/> is as expected, close the pop-up window and select <span class="strong"><strong>Import all</strong></span>.</p><p>This will take a couple of minutes depending on the volume of tasks.</p><div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_19.jpg"/></div></li><li class="listitem">Once the import is complete, you should be back on the configuration page, in the first tab and with a success message.<div class="mediaobject"><img alt="Time for action – importing, exporting, and synchronizing configurations" src="graphics/4659_03_20.jpg"/></div></li></ol></div><p>Now, just <a class="indexterm" id="id228"/>verify that the <a class="indexterm" id="id229"/>new <a class="indexterm" id="id230"/>configuration has been implemented.</p><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec32"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>You have imported the Recipe content type from your dev site to a new instance of the Drupal site using an easy-to-use configuration management module UI, without using database import or the features module.</p></div></div>
<div class="section" title="Working of Configuration Management in Drupal 8"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec46"/>Working of Configuration Management in Drupal 8</h1></div></div></div><p>As <a class="indexterm" id="id231"/>developers, let's explore how configuration management works in Drupal 8. As mentioned earlier in the chapter, by default, Drupal <a class="indexterm" id="id232"/>keeps all configurations in the database. While installing, it creates a folder called <code class="literal">config_HASH</code> within <code class="literal">/sites/default/files</code>, where <code class="literal">HASH</code> is a randomly generated long string consisting of numbers and letters. Randomly generated HASH ensures additional protection for the website.</p><div class="mediaobject"><img alt="Working of Configuration Management in Drupal 8" src="graphics/4659_03_21.jpg"/></div><p>Within <a class="indexterm" id="id233"/>the <code class="literal">Config</code> folder, there are two additional folders: <code class="literal">active</code> and <code class="literal">staging</code>. Both are empty by default and contain only <code class="literal">.htaccessandREADME.txt</code>.</p><p>Generally, <a class="indexterm" id="id234"/>Drupal 8 uses the database to store the active configuration, unless we change it. If we change the default behavior, the <code class="literal">active</code> folder will contain the configuration of the default Drupal installation.</p><p>Another directory, <code class="literal">staging</code>, is used to store the configuration of the Drupal site imported from your dev environment.</p><p>By default, Drupal and the associated module store the configuration under active storage during installation. These configurations are sets of files that maintain the configuration required to run your Drupal site. These configurations are stored in YAML format.</p><p>If you explore the Drupal installation folder on your machine, you will find that there is a <code class="literal">config</code> folder under each module and profile. This folder contains two or more folders, <code class="literal">install</code> and <code class="literal">schema</code>.</p><div class="mediaobject"><img alt="Working of Configuration Management in Drupal 8" src="graphics/4659_03_22.jpg"/></div><p>Both the folders contain the set of <code class="literal">.yml</code> files that hold the respective configuration for the module or profiles.</p><p>During the site installation process, values stored in these files are copied to the active configuration of your Drupal site. In case we are using default Drupal configuration storage, the<a class="indexterm" id="id235"/> values will be copied to config tables, and if we have selected file-based storage, these <a class="indexterm" id="id236"/>configuration values will be copied to respective directories in active.</p></div>
<div class="section" title="Changing the active configuration storage"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec47"/>Changing the active configuration storage</h1></div></div></div><p>Even <a class="indexterm" id="id237"/>though it is not advisable to change the default active configuration storage from database to files, you can make this change in your <code class="literal">settings.php</code> file.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip07"/>Tip</h3><p>You can make this change only before installing your Drupal site. You will not be able to change the configuration storage after completion of the installation process.</p></div></div><p>Open <code class="literal">settings.php</code> in your editor and search for active configuration settings. Now you just have to uncomment the line <code class="literal">$settings['bootstrap_ config_storage']</code> to enable the file-based system for active configuration. In addition to this, you also have to copy <code class="literal">default.services.yml</code> to <code class="literal">services.yml</code> and enable to file-based configuration storage:</p><div class="informalexample"><pre class="programlisting">services: 
   # Override configuration storage. 
  config.storage: 
    class: Drupal\Core\Config\CachedStorage
    arguments: ['@config.storage.active', '@cache.config']
  config.storage.active:
    # Use file storage for active configuration.
    alias: config.storage.file</pre></div><p>This will enable Drupal to change the default configuration storage setting from the database to a file-based system and use the <code class="literal">config.storage.file</code> as active storage.</p><p>After changing the configuration storage setting, install your Drupal 8 site by following the same standard steps. Now let's have a look at our <code class="literal">active</code> folder under <code class="literal">sites/default/files</code>.</p><div class="mediaobject"><img alt="Changing the active configuration storage" src="graphics/4659_03_23.jpg"/></div><p>Now the<a class="indexterm" id="id238"/> active directory contains the site configuration of the entire site. These files have been copied here during the installation process. Now, whenever you make the change to your site configuration, changes will be made in these files too. You can use a version control system to track changes in your site actively.</p><p>But changing the storage system will not change the way we export/import the site configuration.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>Learn more about <a class="indexterm" id="id239"/>configuration management at <a class="ulink" href="https://www.drupal.org/documentation/administer/config">https://www.drupal.org/documentation/administer/config</a>.</p></div></div></div>
<div class="section" title="Introducing the Devel module"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec48"/>Introducing the Devel module</h1></div></div></div><p>So, in the <a class="indexterm" id="id240"/>previous section, we saw how easy it was to create a custom Views-based block for displaying a list of the recipes on the front page. One thing that you will notice right away is that there is only one recipe showing up, because so far we have only created one.</p><p>You may also recall that when we created the Recipe List block with Views, we left the setting for items per page at the default value of 5. Now, it would be nice to be able to test that setting without needing to manually create four more recipe items. Enter the Devel <a class="indexterm" id="id241"/>module at <a class="ulink" href="http://drupal.org/project/devel">http://drupal.org/project/devel</a>.</p><p>The Devel module<a class="indexterm" id="id242"/> includes a number of submodules that make Drupal development easier; and the one we are interested in to help us out with content creation for development purposes is the <code class="literal">devel_generate</code> module.</p><div class="section" title="Installing the Devel module"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec33"/>Installing the Devel module</h2></div></div></div><p>This should <a class="indexterm" id="id243"/>be an easy step. Just download the module and enable the <span class="strong"><strong>Extend</strong></span> page.</p><div class="mediaobject"><img alt="Installing the Devel module" src="graphics/4659_03_24.jpg"/></div><p>Devel is installed and ready to do some magic.</p></div></div>
<div class="section" title="Time for action &#x2013; generating dummy content using the devel_generate module"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec49"/>Time for action – generating dummy content using the devel_generate module</h1></div></div></div><p>Now, with <a class="indexterm" id="id244"/>the <code class="literal">devel_generate</code> module enabled, we are going to generate some Recipe content so that we can test the number of items in our Recipe List block:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, click on the <span class="strong"><strong>Configuration</strong></span> link in the admin toolbar, and then click on the <span class="strong"><strong>Generate content</strong></span> link under the <span class="strong"><strong>Development</strong></span> section.</li><li class="listitem">On the <span class="strong"><strong>Generate content</strong></span> page, uncheck all the <span class="strong"><strong>Content type</strong></span> checkboxes except the one for <span class="strong"><strong>Recipe</strong></span>.<div class="mediaobject"><img alt="Time for action – generating dummy content using the devel_generate module" src="graphics/4659_03_25.jpg"/></div></li><li class="listitem">Stick with the default values for all the rest of the settings, and click on the <span class="strong"><strong>Generate</strong></span> button at the bottom of the page.</li><li class="listitem">Now, navigate to the home page and you will see the <span class="strong"><strong>Recipe List</strong></span> block fully populated.<div class="mediaobject"><img alt="Time for action – generating dummy content using the devel_generate module" src="graphics/4659_03_26.jpg"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec34"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>Although this<a class="indexterm" id="id245"/> is a very simple example of using the <code class="literal">devel_generate</code> module, being able to generate content can be a big time saver when testing custom code that requires multiple content items. We just used the <code class="literal">devel_generate</code> module to generate some dummy content, based on our custom Recipe content type, and now our <span class="strong"><strong>Recipe List</strong></span> block on the home page is fully populated with five recipes.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec50"/>Summary</h1></div></div></div><p>In this chapter, we learned to create view blocks using the views module, which is a part of the Drupal 8 core now. We also explored newly introduced configuration management for better version control of our Drupal site. Now we can set up the development, staging, and production environments separately and add new features to the site incrementally. We explored how to use the Devel module to generate a lot of content for testing purposes.</p><p>In the next chapter, we are going to learn about HTML5, which is one of the five major initiatives outlined by Dries for Drupal 8.</p></div></body></html>