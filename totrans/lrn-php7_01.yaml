- en: Chapter 1. Setting Up the Environment
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章. 设置环境
- en: 'You are about to start a journey—a long one, in which you will learn how to
    write web applications with PHP. However, first, you need to set up your environment,
    something that has proven to be tricky at times. This task includes installing
    PHP 7, the language of choice for this book; MySQL, the database that we will
    use in some chapters; Nginx, the web server that will allow us to visualize our
    applications with a browser; and Composer, the favorite PHP dependencies management
    tool. We will do all of this with Vagrant and also on three different platforms:
    Windows, OS X, and Ubuntu.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 你即将开始一段旅程——这是一段漫长的旅程，你将学习如何使用PHP编写Web应用程序。然而，首先，你需要设置你的环境，这在某些时候已被证明是棘手的。这项任务包括安装PHP
    7，这本书的首选语言；MySQL，我们将用于一些章节的数据库；Nginx，将允许我们通过浏览器可视化我们的应用程序的Web服务器；以及Composer，最受欢迎的PHP依赖关系管理工具。我们将使用Vagrant并在三个不同的平台上完成所有这些：Windows、OS
    X和Ubuntu。
- en: 'In this chapter, you will learn about:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将了解：
- en: Using Vagrant to set up a development environment
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Vagrant设置开发环境
- en: Setting up your environment manually on the main platforms
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在主要平台上手动设置环境
- en: Setting up the environment with Vagrant
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Vagrant设置环境
- en: Not so long ago, every time you started working for a new company, you would
    spend an important part of your first few days setting up your new environment—that
    is, installing all the necessary tools on your new computer in order to be able
    to code. This was incredibly frustrating because even though the software to install
    was the same, there was always something that failed or was missing, and you would
    spend less time being productive.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 不久前，每次你为一家新公司开始工作时，你都会在最初的几天里花很多时间来设置你的新环境——也就是说，在你的新电脑上安装所有必要的工具以便能够编码。这非常令人沮丧，因为尽管要安装的软件是相同的，但总是会有一些失败或缺失的地方，你将花费较少的时间来提高生产力。
- en: Introducing Vagrant
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 介绍Vagrant
- en: Luckily for us, people tried to fix this big problem. First, we have virtual
    machines, which are emulations of computers inside your own computer. With this,
    we can have Linux inside our MacBook, which allows developers to share environments.
    It was a good step, but it still had some problems; for example, VMs were quite
    big to move between different environments, and if developers wanted to make a
    change, they had to apply the same change to all the existing virtual machines
    in the organization.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，人们试图解决这个问题。首先，我们有虚拟机，这是你电脑内的计算机仿真。有了这个，我们可以在MacBook中运行Linux，这允许开发者共享环境。这是一个好的步骤，但它仍然有一些问题；例如，VMs在移动到不同环境时相当大，如果开发者想要进行更改，他们必须将相同的更改应用到组织中的所有现有虚拟机上。
- en: 'After some deliberation, a group of engineers came up with a solution to these
    issues and we got **Vagrant**. This amazing software allows you to manage virtual
    machines with simple configuration files. The idea is simple: a configuration
    file specifies which base virtual machine we need to use from a set of available
    ones online and how you would like to customize it—that is, which commands you
    will want to run the first time you start the machine—this is called "provisioning".
    You will probably get the Vagrant configuration from a public repository, and
    if this configuration ever changes, you can get the changes and reprovision your
    machine. It''s easy, right?'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 经过一番深思熟虑，一群工程师提出了解决这些问题的方案，我们得到了**Vagrant**。这款惊人的软件允许你通过简单的配置文件来管理虚拟机。想法很简单：一个配置文件指定了我们需要从在线可用的一组基本虚拟机中选择哪一个，以及你希望如何自定义它——也就是说，你希望在启动机器时运行哪些命令——这被称为“配置”。你可能会从公共仓库中获得Vagrant配置，如果这个配置有任何更改，你可以获取这些更改并重新配置你的机器。很简单，对吧？
- en: Installing Vagrant
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装Vagrant
- en: If you still do not have Vagrant, installing it is quite easy. You will need
    to visit the Vagrant download page at [https://www.vagrantup.com/downloads.html](https://www.vagrantup.com/downloads.html)
    and select the operating system that you are working with. Execute the installer,
    which does not require any extra configuration, and you are good to go.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还没有安装Vagrant，安装它相当简单。你需要访问Vagrant下载页面[https://www.vagrantup.com/downloads.html](https://www.vagrantup.com/downloads.html)并选择你正在使用的操作系统。执行安装程序，它不需要任何额外的配置，然后你就可以开始了。
- en: Using Vagrant
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Vagrant
- en: Using Vagrant is quite easy. The most important piece is the `Vagrantfile` file.
    This file contains the name of the base image we want to use and the rest of the
    configuration that we want to apply. The following content is the configuration
    needed in order to get an Ubuntu VM with PHP 7, MySQL, Nginx, and Composer. Save
    it as `Vagrantfile` at the root of the directory for the examples of this book.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Vagrant相当简单。最重要的部分是`Vagrantfile`文件。此文件包含我们想要使用的基镜像的名称以及我们想要应用的其余配置。以下内容是为了获取具有PHP
    7、MySQL、Nginx和Composer的Ubuntu虚拟机所需的配置。将其保存为`Vagrantfile`在本书示例的目录根中。
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'As you can see, the file is quite small. The base image''s name is `ubuntu/trusty32`,
    messages to our port `8080` will be redirected to the port `80` of the virtual
    machine, and the provision will be based on the `provisioner.sh` script. You will
    need to create this file, which will be the one that contains all the setup of
    the different components that we need. This is what you need to add to this file:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，文件相当小。基本镜像的名称是`ubuntu/trusty32`，发送到我们的端口`8080`的消息将被重定向到虚拟机的端口`80`，配置将基于`provisioner.sh`脚本。您需要创建此文件，它将包含我们需要的不同组件的所有设置。这就是您需要添加到该文件中的内容：
- en: '[PRE1]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The file looks quite long, but we will do quite a lot of stuff with it. With
    the first part of the file, we will add the necessary repositories to be able
    to fetch PHP 7, as it does not come with the official ones, and then install it.
    Then, we will try to install MySQL, server and client. We will set the root password
    on this provisioning because we cannot introduce it manually with Vagrant. As
    this is a development machine, it is not really a problem, but you can always
    change the password once you are done. Finally, we will install and configure
    Nginx to listen to the port `8080`.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 文件看起来相当长，但我们将用它做很多事情。在文件的第一部分，我们将添加必要的仓库以便能够获取PHP 7，因为它不包括在官方的仓库中，然后安装它。然后，我们将尝试安装MySQL服务器和客户端。由于我们无法使用Vagrant手动引入它，因此在此配置中我们将设置root密码。由于这是一个开发机器，这并不是真正的问题，但您完成之后可以随时更改密码。最后，我们将安装和配置Nginx以监听端口`8080`。
- en: 'To start the virtual machine, you need to execute the following command in
    the same directory where `Vagrantfile` is:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动虚拟机，您需要在`Vagrantfile`所在的同一目录下执行以下命令：
- en: '[PRE2]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The first time you execute it, it will take some time as it will have to download
    the image from the repository, and then it will execute the `provisioner.sh` file.
    The output should be something similar to this one followed by some more output
    messages:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次执行时，它将花费一些时间，因为它需要从仓库下载镜像，然后执行`provisioner.sh`文件。输出应该类似于以下内容，然后是更多的输出消息：
- en: '![Using Vagrant](img/00002.jpeg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![使用Vagrant](img/00002.jpeg)'
- en: 'In order to access your new VM, run the following command on the same directory
    where you have your `Vagrantfile` file:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 为了访问您的新虚拟机，请在包含您的`Vagrantfile`文件的同一目录下运行以下命令：
- en: '[PRE3]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Vagrant will start an SSH session to the VM, which means that you are inside
    the VM. You can do anything you would do with the command line of an Ubuntu system.
    To exit, just press *Ctrl* + *D*.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Vagrant将启动到虚拟机的SSH会话，这意味着您已经进入了虚拟机。您可以执行任何您会用Ubuntu系统命令行执行的操作。要退出，只需按*Ctrl*
    + *D*。
- en: Sharing files from your laptop to the VM is easy; just move or copy them to
    the same directory where your `Vagrantfile` file is, and they will "magically"
    appear on the `/vagrant` directory of your VM. They will be synchronized, so any
    changes that you make while in your VM will be reflected on the files of your
    laptop.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 从您的笔记本电脑共享文件到虚拟机非常简单；只需将它们移动或复制到包含您的`Vagrantfile`文件的同一目录，它们就会“神奇地”出现在您的虚拟机的`/vagrant`目录中。它们将同步，所以您在虚拟机中进行的任何更改都会反映在您的笔记本电脑上的文件中。
- en: 'Once you have a web application and you want to test it through a web browser,
    remember that we will forward the ports. This means that in order to access the
    port `80` of your VM, the common one for web applications, you will have to point
    to the port `8080` on your browsers; here''s an example: `http://localhost:8080`.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 当您有一个Web应用程序并且想要通过Web浏览器测试它时，请记住我们将转发端口。这意味着为了访问您的虚拟机的端口`80`（Web应用程序的常用端口），您需要将浏览器指向端口`8080`；以下是一个示例：`http://localhost:8080`。
- en: Setting up the environment on OS X
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在OS X上设置环境
- en: If you are not convinced with Vagrant and prefer to use a Mac to develop PHP
    applications, this is your section. Installing all the necessary tools on a Mac
    might be a bit tricky, depending on the version of your OS X. At the time of writing
    this book, Oracle has not released a MySQL client that you can use via the command
    line that works with El Capitan, so we will describe how to install another tool
    that can do a similar job.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不太相信 Vagrant 并且更喜欢使用 Mac 开发 PHP 应用程序，这部分内容就是为你准备的。根据你的 OS X 版本，在 Mac 上安装所有必要的工具可能有点棘手。在撰写本书时，Oracle
    没有发布一个可以在 El Capitan 上通过命令行使用的 MySQL 客户端，所以我们将描述如何安装另一个可以完成类似工作的工具。
- en: Installing PHP
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 PHP
- en: 'If it is the first time you are using a Mac to develop applications of any
    kind, you will have to start by installing Xcode. You can find this application
    for free on the App Store:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这是你第一次使用 Mac 开发任何类型的应用程序，你将不得不从安装 Xcode 开始。你可以在 App Store 中免费找到这个应用程序：
- en: '![Installing PHP](img/00003.jpeg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![安装 PHP](img/00003.jpeg)'
- en: 'Another indispensable tool for Mac users is Brew. This is the package manager
    for OS X and will help us install PHP with almost no pain. To install it, run
    the following command on your command line:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Mac 用户来说，另一个不可或缺的工具是 Brew。这是 OS X 的包管理器，将帮助我们几乎无痛地安装 PHP。要安装它，请在你的命令行上运行以下命令：
- en: '[PRE4]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'If you already have Brew installed, you can make sure that everything works
    fine by running these two commands:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经安装了 Brew，你可以通过运行这两个命令来确保一切正常：
- en: '[PRE5]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'It is time to install PHP 7 using Brew. To do so, you will just need to run
    one command, as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候使用 Brew 安装 PHP 7 了。为此，你只需要运行一个命令，如下所示：
- en: '[PRE6]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The result should be as shown in the following screenshot:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 结果应该如下所示：
- en: '![Installing PHP](img/00004.jpeg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![安装 PHP](img/00004.jpeg)'
- en: 'Make sure to add the binary to your `PATH` environment variable by executing
    this command:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 确保通过执行此命令将二进制文件添加到你的 `PATH` 环境变量中：
- en: '[PRE7]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: You can check whether your installation was successful by asking which version
    of PHP your system is using with the `$ php –v` command.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过使用 `$ php –v` 命令询问你的系统正在使用哪个版本的 PHP 来检查你的安装是否成功。
- en: Installing MySQL
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 MySQL
- en: 'As pointed out at the beginning of this section, MySQL is a tricky one for
    Mac users. You need to download the MySQL server installer and MySQL Workbench
    as the client. The MySQL server installer can be found at [https://dev.mysql.com/downloads/mysql/](https://dev.mysql.com/downloads/mysql/).
    You should find a list of different options, as shown here:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 如本节开头所指出的，MySQL 对于 Mac 用户来说有点棘手。你需要下载 MySQL 服务器安装程序和 MySQL Workbench 作为客户端。MySQL
    服务器安装程序可以在 [https://dev.mysql.com/downloads/mysql/](https://dev.mysql.com/downloads/mysql/)
    找到。你应该会找到一个不同的选项列表，如下所示：
- en: '![Installing MySQL](img/00005.jpeg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![安装 MySQL](img/00005.jpeg)'
- en: 'The easiest way to go is to download **DMG Archive**. You will be asked to
    log in with your Oracle account; you can create one if you do not have any. After
    this, the download will start. As with any DMG package, just double-click on it
    and go through the options—in this case, just click on **Next** all the time.
    Be careful because at the end of the process, you will be prompted with a message
    similar to this:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的方法是下载 **DMG 存档**。你将需要使用你的 Oracle 账户登录；如果你没有，你可以创建一个。之后，下载将开始。与任何 DMG 包一样，只需双击它，然后按照选项进行操作——在这种情况下，只需一直点击
    **下一步**。请注意，因为过程结束时，你将收到类似以下的消息：
- en: '![Installing MySQL](img/00006.jpeg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![安装 MySQL](img/00006.jpeg)'
- en: 'Make a note of it; otherwise, you will have to reset the root password. The
    next one is MySQL Workbench, which you can find at [http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/).
    The process is the same; you will be asked to log in, and then you will get a
    DMG file. Click on **Next** until the end of the installation wizard. Once done,
    you can launch the application; it should look similar to this:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 记下它；否则，你可能需要重置根密码。下一个是 MySQL Workbench，你可以在 [http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)
    找到它。过程是相同的；你将被要求登录，然后你会得到一个 DMG 文件。点击 **下一步** 直到安装向导结束。一旦完成，你可以启动应用程序；它应该看起来像这样：
- en: '![Installing MySQL](img/00007.jpeg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![安装 MySQL](img/00007.jpeg)'
- en: Installing Nginx
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Nginx
- en: 'In order to install Nginx, we will use Brew, as we did with PHP. The command
    is the following:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 为了安装 Nginx，我们将使用 Brew，就像我们安装 PHP 一样。命令如下：
- en: '[PRE8]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you want to make Nginx start every time you start your laptop, run the following
    command:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想让 Nginx 在你启动笔记本电脑时启动，请运行以下命令：
- en: '[PRE9]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: If you have to change the configuration of Nginx, you will find the file in
    `/usr/local/etc/nginx/nginx.conf`. You can change things, such as the port that
    Nginx is listening to or the root directory where your code is (the default directory
    is `/usr/local/Cellar/nginx/1.8.1/html/`). Remember to restart Nginx to apply
    the changes with the `sudo nginx` command.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要更改 Nginx 的配置，你将在 `/usr/local/etc/nginx/nginx.conf` 文件中找到它。你可以更改一些事情，比如
    Nginx 监听哪个端口或你的代码所在的根目录（默认目录是 `/usr/local/Cellar/nginx/1.8.1/html/`）。记得使用 `sudo
    nginx` 命令重新启动 Nginx 以应用更改。
- en: Installing Composer
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Composer
- en: 'Installing Composer is as easy as downloading it with the `curl` command; move
    the binary to `/usr/local/bin/` with the following two commands:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Composer 与使用 `curl` 命令下载一样简单；使用以下两个命令将二进制文件移动到 `/usr/local/bin/`：
- en: '[PRE10]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Setting up the environment on Windows
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Windows 上设置环境
- en: Even though it is not very professional to pick sides based on personal opinions,
    it is well known among developers how hard it can be to use Windows as a developer
    machine. They prove to be extremely tricky when it comes to installing all the
    software since the installation mode is always very different from OS X and Linux
    systems, and quite often, there are dependency or configuration problems. In addition,
    the command line has different interpreters than Unix systems, which makes things
    a bit more confusing. This is why most developers would recommend you use a virtual
    machine with Linux if you only have a Windows machine at your disposal.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然基于个人观点选择立场并不太专业，但开发者之间众所周知，使用 Windows 作为开发机器可能会非常困难。当涉及到安装所有软件时，它们证明非常棘手，因为安装模式始终与
    OS X 和 Linux 系统大不相同，而且经常会出现依赖或配置问题。此外，命令行与 Unix 系统有不同的解释器，这使得事情变得更加复杂。这就是为什么大多数开发者会建议你如果只有一台
    Windows 机器可用，就使用带有 Linux 的虚拟机。
- en: However, to be fair, PHP 7 is the exception to the rule. It is surprisingly
    simple to install it, so if you are really comfortable with your Windows and would
    prefer not to use Vagrant, here you have a short explanation on how to set up
    your environment.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，为了公平起见，PHP 7 是一个例外。安装它出奇地简单，所以如果你真的很熟悉 Windows 并且不想使用 Vagrant，这里有一个简短的说明，告诉你如何设置你的环境。
- en: Installing PHP
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 PHP
- en: 'In order to install PHP 7, you will first download the installer from the official
    website. For this, go to [http://windows.php.net/download](http://windows.php.net/download).
    The options should be similar to the following screenshot:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 为了安装 PHP 7，你首先需要从官方网站下载安装程序。为此，请访问 [http://windows.php.net/download](http://windows.php.net/download)。选项应该类似于以下截图：
- en: '![Installing PHP](img/00008.jpeg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![安装 PHP](img/00008.jpeg)'
- en: Choose **x86 Thread Safe** for Windows 32-bit or **x64 Thread Safe** for the
    64-bit one. Once downloaded, uncompress it in `C:\php7`. Yes, that is it!
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Windows 32 位，选择**x86 Thread Safe**，对于 64 位，选择**x64 Thread Safe**。下载后，将其解压缩到
    `C:\php7`。是的，就是这样！
- en: Installing MySQL
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 MySQL
- en: 'Installing MySQL is a little more complex. Download the installer from [http://dev.mysql.com/downloads/installer/](http://dev.mysql.com/downloads/installer/)
    and execute it. After accepting the license agreement, you will get a window similar
    to the following one:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 MySQL 稍微复杂一些。从 [http://dev.mysql.com/downloads/installer/](http://dev.mysql.com/downloads/installer/)
    下载安装程序并执行它。在接受许可协议后，你会得到一个类似于以下窗口：
- en: '![Installing MySQL](img/00009.jpeg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![安装 MySQL](img/00009.jpeg)'
- en: 'For the purposes of the book—and actually for any development environment—you
    should go for the first option: **Developer Default**. Keep going forward, leaving
    all the default options, until you get a window similar to this:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 为了本书的目的——实际上对于任何开发环境——你应该选择第一个选项：**开发者默认**。继续前进，保留所有默认选项，直到你得到一个类似以下窗口：
- en: '![Installing MySQL](img/00010.jpeg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![安装 MySQL](img/00010.jpeg)'
- en: 'Depending on your preferences, you can either just set a password for the root
    user, which is enough as it is only a development machine, or you can add an extra
    user by clicking on **Add User**. Make sure to set the correct name, password,
    and permissions. A user named `test` with administration permissions should look
    similar to the following screenshot:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你的偏好，你可以只为 root 用户设置一个密码，这对于开发机器来说已经足够了，或者你可以通过点击**添加用户**来添加一个额外的用户。确保设置正确的名称、密码和权限。一个名为
    `test` 的具有管理员权限的用户应该看起来像以下截图：
- en: '![Installing MySQL](img/00011.jpeg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![安装 MySQL](img/00011.jpeg)'
- en: For the rest of the installation process, you can select all the default options.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 对于安装过程的其余部分，你可以选择所有默认选项。
- en: Installing Nginx
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Nginx
- en: 'The installation for Nginx is almost identical to the PHP 7 one. First, download
    the ZIP file from [http://nginx.org/en/download.html](http://nginx.org/en/download.html).
    At the time of writing, the versions available are as follows:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: Nginx的安装几乎与PHP 7的安装相同。首先，从[http://nginx.org/en/download.html](http://nginx.org/en/download.html)下载ZIP文件。在撰写本文时，可用的版本如下：
- en: '![Installing Nginx](img/00012.jpeg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![安装Nginx](img/00012.jpeg)'
- en: 'You can safely download the mainline version 1.9.10 or a later one if it is
    stable. Once the file is downloaded, uncompress it in `C:\nginx` and run the following
    commands to start the web server:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以安全地下载主线版本1.9.10或更高版本，如果它是稳定的话。一旦文件下载完成，在`C:\nginx`中解压它，然后运行以下命令以启动Web服务器：
- en: '[PRE11]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Installing Composer
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装Composer
- en: To finish with the setup, we need to install Composer. To go for the automatic
    installation, just download the installer from [https://getcomposer.org/Composer-Setup.exe](https://getcomposer.org/Composer-Setup.exe).
    Once downloaded, execute it in order to install Composer on your system and to
    update your `PATH` environment variable.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成设置，我们需要安装Composer。要进行自动安装，只需从[https://getcomposer.org/Composer-Setup.exe](https://getcomposer.org/Composer-Setup.exe)下载安装程序。下载后，执行它以在您的系统上安装Composer并更新您的`PATH`环境变量。
- en: Setting up the environment on Ubuntu
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Ubuntu上设置环境
- en: Setting up your environment on Ubuntu is the easiest of the three platforms.
    In fact, you could take the `provisioner.sh` script from the *Setting up the environment
    with Vagrant* section and execute it on your laptop. That should do the trick.
    However, just in case you already have some of the tools installed or you want
    to have a sense of control on what is going on, we will detail each step.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在Ubuntu上设置环境是最简单的三个平台之一。实际上，您可以从*使用Vagrant设置环境*部分获取`provisioner.sh`脚本并在您的笔记本电脑上执行它。这应该就可以了。然而，以防您已经安装了一些工具或者您想要对正在发生的事情有更多的控制感，我们将详细说明每个步骤。
- en: Installing PHP
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装PHP
- en: 'The only thing to consider in this section is to remove any previous PHP versions
    on your system. To do so, you can run the following command:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中需要考虑的唯一事情是删除系统上任何之前的PHP版本。为此，您可以运行以下命令：
- en: '[PRE12]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The next step is to add the necessary repositories in order to fetch the correct
    PHP version. The commands to add and update them are:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是添加必要的仓库以获取正确的PHP版本。添加和更新它们的命令如下：
- en: '[PRE13]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Finally, we need to install PHP 7 together with the driver for MySQL. For this,
    just execute the following three commands:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们需要安装PHP 7以及MySQL的驱动程序。为此，只需执行以下三个命令：
- en: '[PRE14]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Installing MySQL
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装MySQL
- en: 'Installing MySQL manually can be slightly different than with the Vagrant script.
    As we can interact with the console, we do not have to specify the root password
    previously; instead, we can force MySQL to prompt for it. Run the following command
    and keep in mind that the installer will ask you for the password:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 手动安装MySQL可能略不同于Vagrant脚本。由于我们可以与控制台交互，我们不需要事先指定root密码；相反，我们可以强制MySQL提示输入密码。运行以下命令，并记住安装程序将要求你输入密码：
- en: '[PRE15]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Once done, if you need to start the MySQL server, you can do it with the following
    command:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，如果您需要启动MySQL服务器，可以使用以下命令：
- en: '[PRE16]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Installing Nginx
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装Nginx
- en: 'The first thing that you need to know is that you can only have one web server
    listening on the same port. As port `80` is the default one for web applications,
    if you are running Apache on your Ubuntu machine, you will not be able to start
    an Nginx web server listening on the same port `80`. To fix this, you can either
    change the ports for Nginx or Apache, stop Apache, or uninstall it. Either way,
    the installation command for Nginx is as follows:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要知道的第一件事是，您只能有一个Web服务器监听相同的端口。由于端口`80`是Web应用的默认端口，如果您在Ubuntu机器上运行Apache，您将无法启动一个监听相同端口`80`的Nginx
    Web服务器。为了解决这个问题，您可以更改Nginx或Apache的端口，停止Apache或卸载它。无论如何，Nginx的安装命令如下：
- en: '[PRE17]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Now, you will need to enable a site with Nginx. The sites are files under `/etc/nginx/sites-available`.
    There is already one file there, `default`, which you can safely replace with
    the following content:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您需要启用Nginx上的一个站点。这些站点位于`/etc/nginx/sites-available`目录下。那里已经有一个文件，`default`，您可以安全地将其替换为以下内容：
- en: '[PRE18]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'This configuration basically points the root directory of your web application
    to the `/var/www/html` directory. You can choose the one that you prefer, but
    make sure that it has the right permissions. It also listens on the port `80`,
    which you can change with the one you prefer; just keep this in mind that when
    you try to access your application via a browser. Finally, to apply all the changes,
    run the following command:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 此配置基本上将您的Web应用程序的根目录指向`/var/www/html`目录。您可以选择您喜欢的选项，但请确保它具有正确的权限。它还监听端口`80`，您可以使用您喜欢的端口进行更改；只需记住，当您尝试通过浏览器访问您的应用程序时。最后，要应用所有更改，请运行以下命令：
- en: '[PRE19]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Tip
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**Downloading the example code**'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '**下载示例代码**'
- en: You can download the example code files for this book from your account at [http://www.packtpub.com](http://www.packtpub.com).
    If you purchased this book elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从您的账户中下载此书的示例代码文件[http://www.packtpub.com](http://www.packtpub.com)。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。
- en: 'You can download the code files by following these steps:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过以下步骤下载代码文件：
- en: Log in or register to our website using your e-mail address and password.
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用您的电子邮件地址和密码登录或注册我们的网站。
- en: Hover the mouse pointer on the **SUPPORT** tab at the top.
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将鼠标指针悬停在顶部的**支持**标签上。
- en: Click on **Code Downloads & Errata**.
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击**代码下载与勘误表**。
- en: Enter the name of the book in the **Search** box.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**搜索**框中输入书籍名称。
- en: Select the book for which you're looking to download the code files.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择您想要下载代码文件的书籍。
- en: Choose from the drop-down menu where you purchased this book from.
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从下拉菜单中选择您购买此书的来源。
- en: Click on **Code Download**.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击**代码下载**。
- en: 'Once the file is downloaded, please make sure that you unzip or extract the
    folder using the latest version of:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 文件下载完成后，请确保使用最新版本的软件解压或提取文件夹：
- en: WinRAR / 7-Zip for Windows
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows系统使用WinRAR / 7-Zip
- en: Zipeg / iZip / UnRarX for Mac
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mac系统使用Zipeg / iZip / UnRarX
- en: 7-Zip / PeaZip for Linux
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux系统使用7-Zip / PeaZip
- en: Summary
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned how easy it is to set up a development environment
    using Vagrant. If this did not convince you, you still got the chance to set up
    all the tools manually. Either way, now you are able to work on the next chapters.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您学习了如何轻松地使用Vagrant设置开发环境。如果您还没有被说服，您仍然有机会手动设置所有工具。无论哪种方式，现在您都可以开始下一章的工作。
- en: In the next chapter, we will take a look at the idea of web applications with
    PHP, going from the protocols used to how the web server serves requests, thus
    setting the foundation for the following chapters.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨使用PHP的Web应用程序的概念，从使用的协议到Web服务器如何处理请求，从而为以下章节奠定基础。
