["```php\nmysql> ALTER TABLE book ADD INDEX (title);\nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\n```", "```php\nmysql> INSERT INTO customer (firstname, surname, email, type)\n -> VALUES (\"Han\", \"Solo\", \"han@tatooine.com\", \"premium\");\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> INSERT INTO customer (firstname, surname, email, type)\n -> VALUES (\"James\", \"Kirk\", \"enter@prise\", \"basic\");\nQuery OK, 1 row affected (0.00 sec)\n\n```", "```php\nmysql> INSERT INTO customer (firstname, surname, email, type)\n -> VALUES (\"Mr\", \"Spock\", \"enter@prise\", \"basic\");\nERROR 1062 (23000): Duplicate entry 'enter@prise' for key 'email'\n\n```", "```php\nmysql> INSERT INTO book (isbn,title,author,stock,price) VALUES\n -> (\"9780882339726\",\"1984\",\"George Orwell\",12,7.50),\n -> (\"9789724621081\",\"1Q84\",\"Haruki Murakami\",9,9.75),\n -> (\"9780736692427\",\"Animal Farm\",\"George Orwell\",8,3.50),\n -> (\"9780307350169\",\"Dracula\",\"Bram Stoker\",30,10.15),\n -> (\"9780753179246\",\"19 minutes\",\"Jodi Picoult\",0,10);\nQuery OK, 5 rows affected (0.01 sec)\nRecords: 5  Duplicates: 0  Warnings: 0\n\n```", "```php\nmysql> INSERT INTO book (isbn,title,author,price) VALUES\n -> (\"9781416500360\", \"Odyssey\", \"Homer\", 4.23);\nQuery OK, 1 row affected (0.00 sec)\n\n```", "```php\nmysql> INSERT INTO borrowed_books(book_id,customer_id,start,end)\n -> VALUES\n -> (1, 1, \"2014-12-12\", \"2014-12-28\"),\n -> (4, 1, \"2015-01-10\", \"2015-01-13\"),\n -> (4, 2, \"2015-02-01\", \"2015-02-10\"),\n -> (1, 2, \"2015-03-12\", NULL);\nQuery OK, 3 rows affected (0.00 sec)\nRecords: 3  Duplicates: 0  Warnings: 0\n\n```", "```php\nmysql> SELECT firstname, surname, type FROM customer;\n+-----------+---------+---------+\n| firstname | surname | type    |\n+-----------+---------+---------+\n| Han       | Solo    | premium |\n| James     | Kirk    | basic   |\n+-----------+---------+---------+\n2 rows in set (0.00 sec)\n\n```", "```php\nmysql> SELECT firstname, surname, type FROM customer\n -> WHERE id = 1;\n+-----------+---------+---------+\n| firstname | surname | type    |\n+-----------+---------+---------+\n| Han       | Solo    | premium |\n+-----------+---------+---------+\n1 row in set (0.00 sec)\n\n```", "```php\nmysql> SELECT title, author, price FROM book\n -> WHERE title LIKE \"1%\";\n+------------+-----------------+-------+\n| title      | author          | price |\n+------------+-----------------+-------+\n| 1984       | George Orwell   |   7.5 |\n| 1Q84       | Haruki Murakami |  9.75 |\n| 19 minutes | Jodi Picoult    |    10 |\n+------------+-----------------+-------+\n3 rows in set (0.00 sec)\n\n```", "```php\nmysql> SELECT title, author, price FROM book\n -> WHERE title LIKE \"1%\" AND stock > 0;\n+------------+-----------------+-------+\n| title      | author          | price |\n+------------+-----------------+-------+\n| 1984       | George Orwell   |   7.5 |\n| 1Q84       | Haruki Murakami |  9.75 |\n+------------+-----------------+-------+\n2 rows in set (0.00 sec)\n\n```", "```php\nmysql> SELECT * FROM customer \\G\n*************************** 1\\. row ***************************\n id: 1\nfirstname: Han\n surname: Solo\n email: han@tatooine.com\n type: premium\n*************************** 2\\. row ***************************\n id: 2\nfirstname: James\n surname: Kirk\n email: enter@prise\n type: basic\n2 rows in set (0.00 sec)\n\n```", "```php\nmysql> SELECT COUNT(*) FROM borrowed_books\n -> WHERE customer_id = 1 AND end IS NOT NULL;\n+----------+\n| COUNT(*) |\n+----------+\n|        1 |\n+----------+\n1 row in set (0.00 sec)\n\n```", "```php\nmysql> SELECT id, title, author, isbn FROM book\n -> ORDER BY title LIMIT 4;\n+----+-------------+-----------------+---------------+\n| id | title       | author          | isbn          |\n+----+-------------+-----------------+---------------+\n|  5 | 19 minutes  | Jodi Picoult    | 9780753179246 |\n|  1 | 1984        | George Orwell   | 9780882339726 |\n|  2 | 1Q84        | Haruki Murakami | 9789724621081 |\n|  3 | Animal Farm | George Orwell   | 9780736692427 |\n+----+-------------+-----------------+---------------+\n4 rows in set (0.00 sec)\n\n```", "```php\n{\n  \"db\": {\n    \"user\": \"root\",\n    \"password\": \"\"\n  }\n}\n```", "```php\n$dbConfig = Config::getInstance()->get('db');\n$db = new PDO(\n 'mysql:host=127.0.0.1;dbname=bookstore',\n $dbConfig['user'],\n $dbConfig['password']\n);\n$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);\n```", "```php\n$rows = $db->query('SELECT * FROM book ORDER BY title');\nforeach ($rows as $row) {\n    var_dump($row);\n}\n```", "```php\n$query = <<<SQL\nINSERT INTO book (isbn, title, author, price)\nVALUES (\"9788187981954\", \"Peter Pan\", \"J. M. Barrie\", 2.34)\nSQL;\n$result = $db->exec($query);\nvar_dump($result); // true\n```", "```php\n$query = <<<SQL\nINSERT INTO book (isbn, title, author, price)\nVALUES (\"9788187981954\", \"Peter Pan\", \"J. M. Barrie\", 2.34)\nSQL;\n$result = $db->exec($query); \nvar_dump($result); // false\n$error = $db->errorInfo()[2];\nvar_dump($error); // Duplicate entry '9788187981954' for key 'isbn'\n```", "```php\n$query = 'SELECT * FROM book WHERE author = :author';\n$statement = $db->prepare($query);\n$statement->bindValue('author', 'George Orwell');\n$statement->execute();\n$rows = $statement->fetchAll();\nvar_dump($rows);\n```", "```php\n$query = <<<SQL\nINSERT INTO book (isbn, title, author, price)\nVALUES (:isbn, :title, :author, :price)\nSQL;\n$statement = $db->prepare($query);\n$params = [\n    'isbn' => '9781412108614',\n    'title' => 'Iliad',\n    'author' => 'Homer',\n    'price' => 9.25\n];\n$statement->execute($params);\necho $db->lastInsertId(); // 8\n\n```", "```php\nmysql> SELECT CONCAT(c.firstname, ' ', c.surname) AS name,\n ->     b.title,\n ->     b.author,\n ->     DATE_FORMAT(bb.start, '%d-%m-%y') AS start,\n ->     DATE_FORMAT(bb.end, '%d-%m-%y') AS end\n -> FROM borrowed_books bb\n ->     LEFT JOIN customer c ON bb.customer_id = c.id\n ->     LEFT JOIN book b ON b.id = bb.book_id\n -> WHERE bb.start >= \"2015-01-01\";\n+------------+---------+---------------+----------+----------+\n| name       | title   | author        | start    | end      |\n+------------+---------+---------------+----------+----------+\n| Han Solo   | Dracula | Bram Stoker   | 10-01-15 | 13-01-15 |\n| James Kirk | Dracula | Bram Stoker   | 01-02-15 | 10-02-15 |\n| James Kirk | 1984    | George Orwell | 12-03-15 | NULL     |\n+------------+---------+---------------+----------+----------+\n3 rows in set (0.00 sec)\n\n```", "```php\nmysql> SELECT\n -> author,\n -> COUNT(*) AS amount,\n -> GROUP_CONCAT(title SEPARATOR ', ') AS titles\n -> FROM book\n -> GROUP BY author\n -> ORDER BY amount DESC, author;\n+-----------------+--------+-------------------+\n| author          | amount | titles            |\n+-----------------+--------+-------------------+\n| George Orwell   |      2 | 1984, Animal Farm |\n| Homer           |      2 | Odyssey, Iliad    |\n| Bram Stoker     |      1 | Dracula           |\n| Haruki Murakami |      1 | 1Q84              |\n| J. M. Barrie    |      1 | Peter Pan         |\n| Jodi Picoult    |      1 | 19 minutes        |\n+-----------------+--------+-------------------+\n5 rows in set (0.00 sec)\n\n```", "```php\nmysql> UPDATE book SET price = 12.75 WHERE id = 2;\nQuery OK, 1 row affected (0.00 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\n```", "```php\nmysql> UPDATE book SET price = 12.75 WHERE id = 2;\nQuery OK, 0 rows affected (0.00 sec)\nRows matched: 1  Changed: 0  Warnings: 0\n\n```", "```php\nmysql> UPDATE book SET price = price * 1.16;\nQuery OK, 8 rows affected (0.00 sec)\nRows matched: 8  Changed: 8  Warnings: 0\n\n```", "```php\nfunction addBook(int $id, int $amount = 1): void {\n    $db = new PDO(\n        'mysql:host=127.0.0.1;dbname=bookstore',\n        'root',\n        ''\n    );\n\n    $query = 'UPDATE book SET stock = stock + :n WHERE id = :id';\n    $statement = $db->prepare($query);\n    $statement->bindValue('id', $id);\n    $statement->bindValue('n', $amount);\n\n    if (!$statement->execute()) {\n        throw new Exception($statement->errorInfo()[2]);\n    }\n}\n```", "```php\nmysql> SHOW CREATE TABLE borrowed_books \\G\n*************************** 1\\. row ***************************\n Table: borrowed_books\nCreate Table: CREATE TABLE `borrowed_books` (\n `book_id` int(10) unsigned NOT NULL,\n `customer_id` int(10) unsigned NOT NULL,\n `start` datetime NOT NULL,\n `end` datetime DEFAULT NULL,\n KEY `book_id` (`book_id`),\n KEY `customer_id` (`customer_id`),\n CONSTRAINT `borrowed_books_ibfk_1` FOREIGN KEY (`book_id`) REFERENCES `book` (`id`),\n CONSTRAINT `borrowed_books_ibfk_2` FOREIGN KEY (`customer_id`) REFERENCES `customer` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1\n1 row in set (0.00 sec)\n\n```", "```php\nmysql> ALTER TABLE borrowed_books\n -> DROP FOREIGN KEY borrowed_books_ibfk_1;\nQuery OK, 4 rows affected (0.02 sec)\nRecords: 4  Duplicates: 0  Warnings: 0\n\nmysql> ALTER TABLE borrowed_books\n -> DROP FOREIGN KEY borrowed_books_ibfk_2;\nQuery OK, 4 rows affected (0.01 sec)\nRecords: 4  Duplicates: 0  Warnings: 0\n\n```", "```php\nmysql> ALTER TABLE borrowed_books\n -> ADD FOREIGN KEY (book_id) REFERENCES book (id)\n -> ON DELETE CASCADE ON UPDATE CASCADE,\n -> ADD FOREIGN KEY (customer_id) REFERENCES customer (id)\n -> ON DELETE CASCADE ON UPDATE CASCADE;\nQuery OK, 4 rows affected (0.01 sec)\nRecords: 4  Duplicates: 0  Warnings: 0\n\n```", "```php\nmysql> SELECT book_id, customer_id FROM borrowed_books;\n+---------+-------------+\n| book_id | customer_id |\n+---------+-------------+\n|       1 |           1 |\n|       4 |           1 |\n|       4 |           2 |\n|       1 |           2 |\n+---------+-------------+\n4 rows in set (0.00 sec)\n\n```", "```php\nmysql> DELETE FROM book WHERE id = 4;\nQuery OK, 1 row affected (0.02 sec)\n\n```", "```php\nmysql> SELECT book_id, customer_id FROM borrowed_books;\n+---------+-------------+\n| book_id | customer_id |\n+---------+-------------+\n|       1 |           1 |\n|       1 |           2 |\n+---------+-------------+\n2 rows in set (0.00 sec)\n\n```", "```php\nfunction addSale(int $userId, array $bookIds): void {\n    $db = new PDO(\n        'mysql:host=127.0.0.1;dbname=bookstore',\n        'root',\n        ''\n    );\n\n $db->beginTransaction();\n    try {\n        $query = 'INSERT INTO sale (customer_id, date) '\n            . 'VALUES(:id, NOW())';\n        $statement = $db->prepare($query);\n        if (!$statement->execute(['id' => $userId])) {\n            throw new Exception($statement->errorInfo()[2]);\n        }\n        $saleId = $db->lastInsertId();\n\n        $query = 'INSERT INTO sale_book (book_id, sale_id) '\n            . 'VALUES(:book, :sale)';\n        $statement = $db->prepare($query);\n        $statement->bindValue('sale', $saleId);\n        foreach ($bookIds as $bookId) {\n            $statement->bindValue('book', $bookId);\n            if (!$statement->execute()) {\n                throw new Exception($statement->errorInfo()[2]);\n            }\n        }\n\n $db->commit();\n    } catch (Exception $e) {\n $db->rollBack();\n        throw $e;\n    }\n}\n```", "```php\ntry {\n    addSale(1, [1, 2, 200]);\n} catch (Exception $e) {\n    echo 'Error adding sale: ' . $e->getMessage();\n}\n```", "```php\ntry {\n    addSale(1, [1, 2, 3]);\n} catch (Exception $e) {\n    echo 'Error adding sale: ' . $e->getMessage();\n}\n```"]