- en: '1'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '1'
- en: Installing Moodle
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Moodle
- en: In this first chapter, we’ll start by installing Moodle.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的第一部分，我们将开始安装Moodle。
- en: 'After providing an overview describing the most suitable setup, we will outline
    the necessary software and hardware requirements before covering the following
    installations:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在提供概述描述最合适的设置之后，我们将概述必要的软件和硬件要求，然后再介绍以下安装：
- en: Installing Moodle in a LAMP environment
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在LAMP环境中安装Moodle
- en: Installing Moodle via the **command-line** **interface** (**CLI**)
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过**命令行****界面**（**CLI**）安装Moodle
- en: Upgrading Moodle manually and via the CLI and Git
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 手动和通过CLI以及Git升级Moodle
- en: We won’t be covering the installation on operating systems other than Linux,
    but we will provide some pointers to resources for Windows and macOS.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会涵盖除Linux以外的操作系统的安装，但我们将提供一些针对Windows和macOS的资源指南。
- en: Moodle can be scaled from a single instructor to an entire institution. We will
    only cover *basic* installations and present solutions to some common problems.
    We will also assume you are familiar with basic Linux system administration.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle可以从单个讲师扩展到整个机构。我们只会涵盖*基本*安装，并介绍一些常见问题的解决方案。我们还将假设您熟悉基本的Linux系统管理。
- en: 'In this chapter, we will be covering the following topics:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Preparing your Moodle installation
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备您的Moodle安装
- en: Installation in a LAMP environment
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在LAMP环境中安装
- en: Installation via the command-line interface
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过命令行界面安装
- en: Updating Moodle
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新Moodle
- en: Preparing your Moodle installation
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备您的Moodle安装
- en: Before you start installing Moodle, you have to decide which setup is right
    for your organization. Once you have decided, there are several hardware and software
    prerequisites you have to fulfill before you can get started.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始安装Moodle之前，您必须决定哪种设置最适合您的组织。一旦您做出了决定，在您开始之前，您必须满足一些硬件和软件先决条件。
- en: Choosing your best setup
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择您的最佳设置
- en: 'There are many different environments in which you can set up Moodle. The three
    main criteria that will help you determine the correct setup are as follows:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在许多不同的环境中设置Moodle。以下三个主要标准将帮助您确定正确的设置：
- en: '**Flexibility**: If you want to have complete control over your system, install
    plugins, be able to tweak system settings, and make frequent changes to the setup,
    you should host your own server. However, if your preferred choice is to only
    administer Moodle while somebody else is looking after the operating system, the
    web server, and backups, it is better to opt for a professionally-hosted setup,
    particularly the offerings provided by authorized Moodle Partners.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**灵活性**：如果您希望完全控制自己的系统，安装插件，能够调整系统设置，并频繁更改设置，您应该托管自己的服务器。然而，如果您更愿意只管理Moodle，而其他人则负责操作系统、Web服务器和备份，那么选择专业托管设置会更好，尤其是由授权Moodle合作伙伴提供的方案。'
- en: '**Scalability**: This is entirely driven by the number of active learners and
    educators logged in to Moodle simultaneously. Moodle on a small server will not
    be able to cope with hundreds of concurrently logged-in users. On the other hand,
    a load-balanced cluster would be overkill for a small institution with a few dozen
    learners. The following table provides some indicative setups for different types
    of educational organizations:'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可扩展性**：这完全取决于同时登录到Moodle的活跃学习者和教育者的数量。小型服务器上的Moodle将无法应对数百个同时登录的用户。另一方面，对于只有几十个学习者的小型机构来说，负载均衡集群将是过度配置。以下表格提供了一些针对不同类型教育组织的指示性设置：'
- en: '![Figure 1.1 – Moodle setups depending on user numbers ](img/Figure_1.01_B18779.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图1.1 – 根据用户数量确定的Moodle设置](img/Figure_1.01_B18779.jpg)'
- en: Figure 1.1 – Moodle setups depending on user numbers
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1 – 根据用户数量确定的Moodle设置
- en: Please bear in mind that these are only indicative numbers that are not written
    in stone and also depend on the other factors mentioned here.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，这些只是指示性数字，并非一成不变，还取决于这里提到的其他因素。
- en: Each Moodle instance must be installed on a dedicated or shared server, either
    hosted in-house or externally. If you decide to go down the hosted route, avoiding
    a cheap hosting package is highly recommended as those systems are not optimized
    for Moodle usage; their one-size-fits-all approach will significantly impact the
    system’s performance, especially with an increasing number of concurrent users.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 每个 Moodle 实例都必须安装在专用或共享服务器上，无论是内部托管还是外部托管。如果您决定走托管路线，强烈建议避免选择便宜的托管套餐，因为这些系统没有针对
    Moodle 使用进行优化；它们的“一刀切”方法将显著影响系统的性能，尤其是在并发用户数量增加的情况下。
- en: 'Moodle HQ offers hosting on [moodlecloud.com](http://moodlecloud.com); however,
    these packages come with some limitations (the numbers depend on the chosen plan):
    user limits, storage limits, no way to install plugins or custom themes, and the
    inability to modify some hard-coded admin settings. If these restrictions are
    acceptable, hosting on [moodlecloud.com](http://moodlecloud.com) might be suitable
    for your organization.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle HQ 提供在 [moodlecloud.com](http://moodlecloud.com) 上的托管服务；然而，这些套餐有一些限制（具体数字取决于选择的计划）：用户限制、存储限制、无法安装插件或自定义主题，以及无法修改一些硬编码的管理设置。如果这些限制可以接受，那么在
    [moodlecloud.com](http://moodlecloud.com) 上托管可能适合您的组织。
- en: '**Cost**: Budgetary constraints will undoubtedly play an important role. Unless
    you already have the appropriate infrastructure in place, it will likely be more
    cost effective to host your Moodle system externally as it saves you from purchasing
    servers and renting a 24/7 data connection that caters to your users’ needs. The
    licensing cost will be significantly higher if you use commercial operating systems,
    web servers, and database systems instead of an open source solution. Either way,
    Moodle is designed to support a wide range of possible infrastructures suitable
    to your organization’s IT policy.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**成本**：预算限制无疑将发挥重要作用。除非您已经建立了适当的基础设施，否则将您的 Moodle 系统外部托管可能更经济有效，因为它可以节省您购买服务器和租赁24/7满足用户需求的数据连接的费用。如果您使用的是商业操作系统、Web
    服务器和数据库系统而不是开源解决方案，许可费用将显著更高。无论如何，Moodle 都旨在支持适合您组织 IT 政策的广泛可能的底层基础设施。'
- en: In addition to these three criteria, which influence the decision about the
    underlying infrastructure, other factors, such as **in-house expertise**, **compatibility
    with other systems**, **IT policies**, **personal preference**, and **existing
    resources**, will impact your decision.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些三个影响底层基础设施决策的标准之外，其他因素，如**内部专业知识**、**与其他系统的兼容性**、**IT 政策**、**个人偏好**和**现有资源**，也会影响您的决策。
- en: We will be covering the most popular operating system for hosting Moodle – Linux.
    For other operating systems or setups, such as in virtualized environments or
    on multi-server clusters, please consult your local Moodle Partner ([moodle.com/solutions/certified-service-providers](http://moodle.com/solutions/certified-service-providers)).
    Some hosting companies offer quick one-click installations; while the resulting
    Moodle system is sufficient for experimental sites, it is certainly unsuitable
    for production environments.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将介绍托管 Moodle 最受欢迎的操作系统——Linux。对于其他操作系统或配置，例如在虚拟化环境中或在多服务器集群上，请咨询您当地的 Moodle
    合作伙伴（[moodle.com/solutions/certified-service-providers](http://moodle.com/solutions/certified-service-providers)）。一些托管公司提供一键快速安装；虽然由此产生的
    Moodle 系统足以用于实验性站点，但它绝对不适合生产环境。
- en: Fulfilling Moodle prerequisites
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 满足 Moodle 预先条件
- en: Several hardware and software requirements must be satisfied before we can start
    installing Moodle.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始安装 Moodle 之前，必须满足一些硬件和软件要求。
- en: Hardware requirements
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 硬件要求
- en: 'These requirements apply if you host Moodle yourself or if it is hosted on
    an external server (shared, virtual, dedicated, or clustered). On cheaper hosting
    packages, the hardware configuration is often insufficient to run Moodle efficiently:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这些要求适用于您自己托管 Moodle 或在外部服务器（共享、虚拟、专用或集群）上托管的情况。在更便宜的托管套餐中，硬件配置通常不足以高效运行 Moodle：
- en: '![Figure 1.2 – Moodle hardware ](img/Figure_1.02_B18779.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.2 – Moodle 硬件](img/Figure_1.02_B18779.jpg)'
- en: Figure 1.2 – Moodle hardware
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.2 – Moodle 硬件
- en: 'Let’s take a look at these requirements in more detail:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更详细地看看这些要求：
- en: '**Disk space**: Moodle itself takes up approximately 1 GB of disk space. However,
    this only provides you with a naked system and does not consider the space you
    require for any learning resources. The faster the disks, the better. RAIDed disks
    are recommended but are not essential on smaller installations.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**磁盘空间**：Moodle 本身大约占用 1 GB 的磁盘空间。然而，这仅为您提供一个裸系统，并不考虑您所需的任何学习资源空间。磁盘越快越好。RAID
    磁盘推荐，但在较小安装中不是必需的。'
- en: '**Memory**: A good rule of thumb is to have 1 GB of RAM for every 5 to 10 **concurrent**
    users. You have to double this calculation on Windows-based systems due to the
    higher overhead of the operating system. Of all the hardware components, RAM will
    impact Moodle’s performance the most.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**内存**：一个很好的经验法则是为每 5 到 10 个**并发**用户配备 1 GB 的 RAM。在基于 Windows 的系统上，由于操作系统的高开销，您必须将此计算加倍。在所有硬件组件中，RAM
    对 Moodle 的性能影响最大。'
- en: Important note
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The more RAM, the better; the faster the RAM, the better.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 内存越多越好；内存越快越好。
- en: '**CPUs**: Processor type and speed are essential too, but not as important
    as RAM. As always, the faster the CPU, the better, and the more cores a CPU has,
    the more powerful it will be.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CPU**：处理器类型和速度也很重要，但不如内存重要。一如既往，CPU 越快越好，CPU 的核心越多，性能越强大。'
- en: '**Network**: While Moodle can run on a standalone machine, its full potential
    is in a networked environment. Fast network cards are essential, as is good upload
    and download speed if the LMS is accessed over the internet.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网络**：虽然 Moodle 可以在独立机器上运行，但其全部潜力在于网络环境中。快速的网络卡是必不可少的，如果 LMS 通过互联网访问，则良好的上传和下载速度也是必要的。'
- en: Now, let’s look at the software requirements.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看软件要求。
- en: Software requirements
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 软件要求
- en: 'While it is recommended to have the latest version installed, for Moodle 4,
    you must have the following components up and running on your server (release-specific
    notes can be found at [moodledev.io/general/releases](http://moodledev.io/general/releases)):'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然建议安装最新版本，但对于 Moodle 4，您必须在您的服务器上运行以下组件（有关特定版本的说明，请参阅 moodledev.io/general/releases）：
- en: '**Database**: Moodle officially supports the following database systems: MySQL
    (version 5.7 or later utilizing the ACID-compliant InnoDB storage engine), PostgreSQL
    10+, MariaDB 10.2.29+, Aurora MySQL (on Amazon Web Services), Microsoft SQL Server
    2017+, and Oracle 11.2+.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库**：Moodle 正式支持以下数据库系统：MySQL（版本 5.7 或更高版本，使用符合 ACID 的 InnoDB 存储引擎）、PostgreSQL
    10+、MariaDB 10.2.29+、Aurora MySQL（在亚马逊网络服务上）、Microsoft SQL Server 2017+ 和 Oracle
    11.2+。'
- en: '**Web server**: Apache is the preferred web server option, but Moodle works
    well with any other web server that supports PHP, such as Microsoft IIS.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Web 服务器**：Apache 是首选的 Web 服务器选项，但 Moodle 与支持 PHP 的任何其他 Web 服务器都兼容，例如 Microsoft
    IIS。'
- en: '`php.ini` or `.htaccess` file (for more details, see docs.moodle.org/en/Installing_Moodle).'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`php.ini` 或 `.htaccess` 文件（更多详情请参阅 docs.moodle.org/en/Installing_Moodle）。'
- en: '`curl`, `ctype`, `dom`, `fileinfo`, `gd`, `hash`, `iconv`, `intl`, `json`,
    `mbstring`, `openssl`, `pcre`, `simplexml`, `spl`, `xml`, `xmlreader`, `zip`,
    and `zlib`'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`curl`, `ctype`, `dom`, `fileinfo`, `gd`, `hash`, `iconv`, `intl`, `json`,
    `mbstring`, `openssl`, `pcre`, `simplexml`, `spl`, `xml`, `xmlreader`, `zip`,
    和 `zlib`'
- en: '`exif`, `soap`, `sodium`, `tokenizer`, and `xmlrpc`'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exif`, `soap`, `sodium`, `tokenizer`, 和 `xmlrpc`'
- en: '`mysql`, `odbc`, and `pgsql` (depending on the database) and `ldap`, `ntlm`,
    and others (depending on the authentication mechanism used)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql`, `odbc`, 和 `pgsql`（根据数据库）以及 `ldap`, `ntlm` 和其他（根据所使用的身份验证机制）'
- en: Depending on your specific setup, additional software might be required. It
    is assumed that the database, web server, PHP, and extensions have been installed
    correctly, as this is not an LMS administrator task. Once this is the case, we
    are ready to go.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您的具体配置，可能需要额外的软件。假设数据库、Web 服务器、PHP 和扩展已经正确安装，因为这不是 LMS 管理员的任务。一旦这样，我们就可以开始了。
- en: Important note
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: To access Moodle, a modern web browser (the latest version of Firefox, Google
    Chrome, Edge, or Safari) is required.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问 Moodle，需要一个现代的 Web 浏览器（Firefox、Google Chrome、Edge 或 Safari 的最新版本）。
- en: Before we start the installation process, it is worth familiarizing yourself
    with Moodle’s releases and versions.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始安装过程之前，熟悉 Moodle 的发布和版本是有益的。
- en: Understanding Moodle versions
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解 Moodle 版本
- en: Moodle versions follow a strict calendar that is published and updated regularly
    on [moodledev.io/general/releases](http://moodledev.io/general/releases). If a
    planned feature is not ready for the imminent release, it will be moved to the
    next version; that is, a release date will never be changed, but the time when
    features will be introduced might be.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 版本遵循严格的日历，该日历定期在 [moodledev.io/general/releases](http://moodledev.io/general/releases)
    上发布和更新。如果计划中的功能尚未准备好进行即将发布的版本，它将被移至下一个版本；也就是说，发布日期永远不会改变，但引入功能的时间可能会变化。
- en: The release frequency for **major versions** (4.0, 4.1, and so on) is twice
    a year (the second Monday of May and November).
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**主要版本**（4.0、4.1 等）的发布频率为每年两次（五月的第二个星期一和十一月的第二个星期一）。'
- en: Moodle releases **minor versions** (4.1.1, 4.1.2, and so on) on the second Monday
    of March, May, July, September, and November. The same applies to unscheduled
    releases in the case of a severe security issue or serious regression being fixed.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 在三月的第二个星期一、五月的第二个星期一、七月的第二个星期一、九月的第二个星期一和十一月的第二个星期一发布 **次要版本**（4.1.1、4.1.2
    等）。在严重安全问题或重大回归被修复的情况下，也适用于非计划发布。
- en: 'Moodle distinguishes between two types of releases:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 区分两种类型的发布：
- en: '**Standard support release**: Bugs will be fixed for 12 months, and security
    issues will be provided for 18 months'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准支持版本**：将修复 12 个月的错误，并提供 18 个月的安全支持'
- en: '**Long-term support release**: Bugs will be fixed for 12 months, and security
    issues will be provided for 36 months'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**长期支持版本**：将修复 12 个月的错误，并提供 36 个月的安全支持'
- en: 'The simplified release calendar is shown in the following timeline; you can
    find a more detailed version at [moodledev.io/general/releases](http://moodledev.io/general/releases):'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 简化的发布日历如下所示；更详细版本可在 [moodledev.io/general/releases](http://moodledev.io/general/releases)
    找到：
- en: '![Figure 1.3 – Moodle releases ](img/Figure_1.03_B18779.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.3 – Moodle 发布](img/Figure_1.03_B18779.jpg)'
- en: Figure 1.3 – Moodle releases
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.3 – Moodle 发布
- en: When Moodle 4.0 was released in April 2022, versions 3.9 to 3.11 were still
    supported. By the time Moodle 4.1 is released, only version 3.9 will be supported
    since its lifetime has been extended (hence the long-long-term support label)
    to give admins more time to upgrade to the version 4 branch.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 当 Moodle 4.0 在 2022 年 4 月发布时，版本 3.9 到 3.11 仍然受到支持。到 Moodle 4.1 发布时，只有版本 3.9
    将受到支持，因为其生命周期已被延长（因此有长期支持标签），以便管理员有更多时间升级到 4 分支。
- en: If you wish to stay up-to-date with future releases, check Moodle’s roadmap
    at [moodledev.io/general/community/roadmap](http://moodledev.io/general/community/roadmap),
    where you will find the current plans for the future technical development of
    all Moodle’s products and services.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你希望了解未来的发布情况，请查看 Moodle 的路线图 [moodledev.io/general/community/roadmap](http://moodledev.io/general/community/roadmap)，在那里你可以找到所有
    Moodle 产品和服务的未来技术发展的当前计划。
- en: OK, enough of version numbers and release dates. Let’s learn how to install
    (the latest version of) Moodle.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，版本号和发布日期就说到这里。让我们学习如何安装（最新版本的）Moodle。
- en: Installation in a LAMP environment
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 LAMP 环境中的安装
- en: Moodle is developed in Linux using Apache, MySQL, and PHP (known as the **LAMP
    stack**). If you have a choice, this is the preferred environment to use. There
    is an ongoing debate about whether PostgreSQL is the more suitable database option,
    but we will stick with MySQL/MariaDB as this is the system most administrators
    are familiar with. Also, some organizations are bound to Microsoft SQL or Oracle.
    If this is the case, please refer to the respective installation guide, as this
    is beyond the scope of this book.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 使用 Apache、MySQL 和 PHP（称为 **LAMP 堆栈**）在 Linux 上开发。如果你有选择，这是首选的环境。关于 PostgreSQL
    是否是更合适的数据库选项，目前存在持续的争论，但我们将坚持使用 MySQL/MariaDB，因为这是大多数管理员熟悉的系统。此外，一些组织可能绑定在 Microsoft
    SQL 或 Oracle 上。如果这种情况适用，请参阅相应的安装指南，因为这超出了本书的范围。
- en: 'The high-level installation process is shown in the following process diagram:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 高级安装过程在以下流程图中展示：
- en: '![Figure 1.4 – Moodle installation process ](img/Figure_1.04_B18779.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.4 – Moodle 安装过程](img/Figure_1.04_B18779.jpg)'
- en: Figure 1.4 – Moodle installation process
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4 – Moodle 安装过程
- en: 'We will go through each phase in the remaining subsections, covering each installation
    step in a Linux environment. The process is the same for other operating systems,
    which we won’t cover; here are some pointers that should get you started:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在接下来的子节中逐一介绍每个阶段，涵盖 Linux 环境中的每个安装步骤。对于其他操作系统，我们不会涉及；以下是一些应该能帮助你开始的提示：
- en: For Windows servers with a small number of users, the **XAMPP**-based Moodle
    distribution is suitable. XAMPP is a free Apache distribution that contains MySQL
    and PHP (as well as Perl) and exists for several operating systems. The Moodle
    distribution for Windows makes full use of XAMPP and is located at [download.moodle.org/windows](http://download.moodle.org/windows).
    The installation works on all the latest Windows PCs and server variants.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于用户数量较少的 Windows 服务器，基于 **XAMPP** 的 Moodle 发行版是合适的。XAMPP 是一个免费的 Apache 发行版，包含
    MySQL 和 PHP（以及 Perl），适用于多个操作系统。Windows 的 Moodle 发行版充分利用了 XAMPP，位于 [download.moodle.org/windows](http://download.moodle.org/windows)。该安装适用于所有最新的
    Windows PC 和服务器版本。
- en: For larger **Windows** installations, you have to install Moodle manually, which
    involves installing a database server (MS SQL or any other supported system),
    a web server (Microsoft IIS or Apache), and PHP separately. You can find details
    about this process at [docs.moodle.org/en/Windows_installation](http://docs.moodle.org/en/Windows_installation).
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于较大的 **Windows** 安装，您必须手动安装 Moodle，这涉及到安装数据库服务器（MS SQL 或任何其他支持的系统）、一个网络服务器（Microsoft
    IIS 或 Apache）和 PHP。您可以在 [docs.moodle.org/en/Windows_installation](http://docs.moodle.org/en/Windows_installation)
    找到有关此过程的详细信息。
- en: '**MAMP** is a free distribution that contains Apache (and Nginx), MySQL, and
    PHP for macOS. Like its Windows counterpart, the Moodle distributions for macOS
    are only intended for local installations and not for production environments.
    Moodle4Mac is available as universal binaries via MAMP, located at [download.moodle.org/macosx](http://download.moodle.org/macosx).'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MAMP** 是一个免费的发行版，包含 Apache（以及 Nginx）、MySQL 和 PHP，适用于 macOS。与它的 Windows 版本类似，macOS
    的 Moodle 发行版仅适用于本地安装，而不适用于生产环境。Moodle4Mac 通过 MAMP 提供通用二进制文件，位于 [download.moodle.org/macosx](http://download.moodle.org/macosx)。'
- en: Now, let’s go through the installation process, starting with downloading Moodle.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '现在，让我们通过下载 Moodle 开始安装过程。 '
- en: Downloading Moodle
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 下载 Moodle
- en: 'Go to [download.moodle.org](http://download.moodle.org) and select the latest
    release:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 访问 [download.moodle.org](http://download.moodle.org) 并选择最新版本：
- en: '![Figure 1.5 – Moodle downloads ](img/Figure_1.05_B18779.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.5 – Moodle 下载](img/Figure_1.05_B18779.jpg)'
- en: Figure 1.5 – Moodle downloads
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.5 – Moodle 下载
- en: A newer version is likely to be available by the time you read this. If you
    wish to go with the 4.0.x version this book has been written for, select **Other
    supported releases**; otherwise, feel free to go with the latest stable build;
    most content in this book will still be applicable.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 新版本可能在您阅读此内容时已经可用。如果您想使用本书所写的 4.0.x 版本，请选择 **其他支持的版本**；否则，您可以自由选择最新的稳定构建；本书中的大多数内容仍然适用。
- en: 'There are five types of builds available on Moodle’s download site:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 的下载站点上有五种类型的构建版本可供选择：
- en: '**Latest release**: There are two releases for the current version of Moodle:
    the latest stable build and the latest official release. The latest stable version
    is created weekly (every Wednesday) and is the best choice for a new server. The
    latest official release contains the stable build and new fixes, but the version
    will not have gone through the weekly code review and might contain unresolved
    issues.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最新版本**：当前 Moodle 版本有两个版本：最新的稳定构建和最新的官方版本。最新的稳定版本每周（每周三）创建一次，是新建服务器的最佳选择。最新的官方版本包含稳定构建和新修复，但该版本尚未经过每周代码审查，可能包含未解决的问题。'
- en: '**Other supported releases**: The Moodle development team maintains older versions
    than the current ones, as outlined in the release schedule earlier.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**其他支持的版本**：Moodle 开发团队维护比当前版本更早的版本，如前面的发布计划中所述。'
- en: '**Security-only-supported releases**: Critical fixes impacting security or
    data loss will be provided for one further release, but no other bug fixes will
    be back-ported. See the information on Moodle versions provided earlier.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仅支持安全的版本**：影响安全或数据丢失的关键修复将提供给下一个版本，但不会回滚其他错误修复。请参阅之前提供的 Moodle 版本信息。'
- en: '**Legacy releases**: For older versions, the last build is made available.
    However, these are not maintained any further.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**旧版本**：对于旧版本，将提供最后一个构建。然而，这些版本不再维护。'
- en: '**Development releases**: Moodle also gives you the option to download beta
    releases of the software (if available) and the latest development release. These
    should only be downloaded for testing or development purposes, never in production
    environments!'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开发版本**：Moodle 还提供了下载软件的测试版（如果可用）和最新开发版本的选项。这些版本仅应下载用于测试或开发目的，绝不应在生产环境中使用！'
- en: 'Each version is made available in two compressed formats: TGZ (use the `tar`
    command to uncompress) and ZIP (use the `unzip` command to extract it). You can
    download them by clicking on the respective link or, if you have (secure) shell
    access, retrieving the file directly by using the `wget` command:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 每个版本都提供两种压缩格式：TGZ（使用`tar`命令解压）和ZIP（使用`unzip`命令提取）。您可以通过点击相应的链接下载它们，或者如果您有（安全的）shell访问权限，可以使用`wget`命令直接检索文件：
- en: '[PRE0]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Important note
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The location where you install Moodle is referred to as **dirroot**.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 您安装Moodle的位置被称为**dirroot**。
- en: 'If you make use of **Moodle Shell** (**MOOSH**), which is described in more
    detail in [*Chapter 17*](B18779_17.xhtml#_idTextAnchor325), *Working with Moodle
    Admin Tools*, you can use the following command to download the latest stable
    branch of Moodle:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用**Moodle Shell**（**MOOSH**），这在[*第17章*](B18779_17.xhtml#_idTextAnchor325)中详细描述，*使用Moodle管理工具*，您可以使用以下命令下载Moodle的最新稳定分支：
- en: '[PRE1]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Once you have moved the file to the location where you want to install it on
    your web server (`dirroot`), extract the file using the `unzip` command or `tar`
    if you downloaded the TGZ version:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您将文件移动到您想在Web服务器上安装的位置（`dirroot`），请使用`unzip`命令或`tar`（如果您下载了TGZ版本）提取文件：
- en: '[PRE2]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: If you place the entire folder in your web server documents directory, the site
    will be located at www.yourwebserver.com/moodle. To access your site from www.yourwebserver.com,
    copy the contents directly into the main web server’s documents directory.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您将整个文件夹放置在您的Web服务器文档目录中，网站将位于www.yourwebserver.com/moodle。要从www.yourwebserver.com访问您的网站，请直接将内容复制到主Web服务器的文档目录中。
- en: Important note
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The URL via which Moodle is accessed is referred to as **wwwroot**.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 通过该URL访问Moodle被称为**wwwroot**。
- en: Once the download step has been completed, you must create the database that
    Moodle uses to store its data.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 下载步骤完成后，您必须创建Moodle用于存储其数据的数据库。
- en: Creating the Moodle database
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建Moodle数据库
- en: Moodle requires a database where it can store its information. While sharing
    an existing database is possible, creating a separate database for Moodle is highly
    recommended. Adding a new database can either be done via a web interface, as
    provided for hosted servers, or via the command line.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle需要一个数据库来存储其信息。虽然共享现有数据库是可能的，但为Moodle创建一个单独的数据库强烈推荐。添加新数据库可以通过托管服务器提供的Web界面完成，或者通过命令行。
- en: Using a hosted server
  id: totrans-103
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用托管服务器
- en: Most hosting providers provide a dedicated web interface to carry out basic
    database operations. Alternatively, you can use **phpMyAdmin**, open source software
    that allows you to manage MySQL databases over the web. phpMyAdmin is part of
    most Linux distributions and many control panels, but it is often configured not
    to allow new databases to be created. If this is the case, you must create the
    database from the database manager in your control panel.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数托管提供商都提供了一个专用的Web界面来执行基本的数据库操作。或者，您可以使用**phpMyAdmin**，这是一种开源软件，允许您通过Web管理MySQL数据库。phpMyAdmin是大多数Linux发行版和许多控制面板的一部分，但它通常配置为不允许创建新数据库。如果这种情况发生，您必须从控制面板中的数据库管理器创建数据库。
- en: 'phpMyAdmin allows you to perform both steps – creating a database and adding
    a new user – in a single action, as shown in the following screenshot. We will
    create a user, `packt`, and also check the **Create database with same name and
    grant all** **privileges** option:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: phpMyAdmin允许您在单个操作中执行两个步骤——创建数据库和添加新用户，如下面的屏幕截图所示。我们将创建一个用户`packt`，并检查**使用相同名称创建数据库并授予所有**
    **权限**选项：
- en: '![Figure 1.6 – Creating a Moodle database and user in phpMyAdmin ](img/Figure_1.06_B18779.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![图1.6 – 在phpMyAdmin中创建Moodle数据库和用户](img/Figure_1.06_B18779.jpg)'
- en: Figure 1.6 – Creating a Moodle database and user in phpMyAdmin
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6 – 在phpMyAdmin中创建Moodle数据库和用户
- en: While you can use an existing database user account, creating a dedicated user
    for the Moodle database is good practice.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然您可以使用现有的数据库用户账户，但为Moodle数据库创建一个专用用户是良好的实践。
- en: Important note
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Do not use the MySQL root account for your Moodle database!
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 不要使用MySQL root账户为您的Moodle数据库！
- en: You don’t need to create any tables; Moodle will populate the database during
    installation.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 您不需要创建任何表；Moodle将在安装过程中填充数据库。
- en: Creating the Moodle database via a web interface is simple, but most technical
    administrators prefer to work via the command line.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 通过Web界面创建Moodle数据库很简单，但大多数技术管理员更喜欢通过命令行工作。
- en: Using the command line
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用命令行
- en: 'If you don’t have access to a web interface to create MySQL databases and user
    accounts, or if you prefer to use a Linux shell, you can perform these steps via
    the command line:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有访问创建 MySQL 数据库和用户账户的 Web 界面，或者如果您更喜欢使用 Linux shell，您可以通过命令行执行这些步骤：
- en: Start the database command-line tool by entering `mysql -root -p` and enter
    the password at the prompt.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入 `mysql -root -p` 启动数据库命令行工具，并在提示符下输入密码。
- en: Create a database (called `packt`) by entering `CREATE DATABASE packt;` (all
    MySQL commands must be terminated with a semicolon).
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入 `CREATE DATABASE packt;`（所有 MySQL 命令都必须以分号结尾）创建一个数据库（称为 `packt`）。
- en: Set the default character and collation order to `UTF8` by entering `ALTER DATABASE
    packt DEFAULT CHARACTER SET utf8 COLLATE` `utf8_unicode_ ci;`.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入 `ALTER DATABASE packt DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;`
    将默认字符集和校对顺序设置为 `UTF8`。
- en: Create a user and password (here, packt@localhost and password, respectively)
    and grant database access permissions by entering `GRANT SELECT, INSERT, UPDATE,
    DELETE, CREATE, CREATE TEMPORARY TABLES, DROP, INDEX, ALTER ON packt.* TO packt@localhost
    IDENTIFIED` `BY 'password';`.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个用户和密码（此处为 packt@localhost 和 password），并通过输入 `GRANT SELECT, INSERT, UPDATE,
    DELETE, CREATE, CREATE TEMPORARY TABLES, DROP, INDEX, ALTER ON packt.* TO packt@localhost
    IDENTIFIED BY 'password';` 授予数据库访问权限。
- en: Exit the MySQL command tool by entering `QUIT`.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入 `QUIT` 退出 MySQL 命令工具。
- en: 'It is necessary to reload the grant tables using the following command line:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 必须使用以下命令行重新加载授权表：
- en: '[PRE4]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: With that, you have set up the database. All you have to do now is create Moodle’s
    data directory. Then, you can start installing Moodle itself.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这样，您已经设置了数据库。现在您需要做的就是创建 Moodle 的数据目录。然后，您就可以开始安装 Moodle 本身了。
- en: Creating the Moodle data directory
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 Moodle 数据目录
- en: Moodle stores most of its information in the database you have just created.
    However, uploaded files such as assignments, course images, or user pictures are
    stored in a separate directory. This data directory in Moodle is usually referred
    to as **moodledata**.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 将其大部分信息存储在您刚刚创建的数据库中。然而，上传的文件，如作业、课程图片或用户图片，则存储在单独的目录中。Moodle 中的此数据目录通常被称为
    **moodledata**。
- en: Important note
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The location that holds your Moodle data files is referred to as `dataroot`.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 存放您的 Moodle 数据文件的地址被称为 `dataroot`。
- en: Later, the Moodle installer will attempt to create this directory, but in some
    setups, this operation will fail due to security restrictions. To be on the safe
    side, it is better to create `moodledata` manually or via a web-based file manager,
    as provided by some systems.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，Moodle 安装程序将尝试创建此目录，但在某些配置中，由于安全限制，此操作可能会失败。为了安全起见，最好手动创建 `moodledata` 或通过某些系统提供的基于
    Web 的文件管理器创建。
- en: Important note
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: It is crucial to create `moodledata` on your server where it cannot be accessed
    publicly – that is, outside your web directory.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的服务器上创建 `moodledata` 的位置至关重要，这样它就不能被公开访问——也就是说，在您的网页目录之外。
- en: '`moodledata` is where all the uploaded files by course authors and learners
    will be stored, so ensure this is adequately dimensioned. You may also consider
    creating `moodledata` in a separate partition.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '`moodledata` 是所有课程作者和学习者上传的文件存储的地方，因此请确保其尺寸足够。您还可以考虑在单独的分区中创建 `moodledata`。'
- en: Any `moodledata` permissions should be `rwxrwx---` (`chmod –R 0770 moodledata`).
    If you use `0777`, everybody on the server will have access to the files.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 任何 `moodledata` 权限应该是 `rwxrwx---`（`chmod –R 0770 moodledata`）。如果您使用 `0777`，服务器上的每个人都将能够访问这些文件。
- en: Change the user and group of the directory to that of your web server (usually,
    this will be `apache` or `www-data` and `nobody` or `www-data`) by entering `chown
    –R` `apache:nobody moodledata`.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 通过输入 `chown –R apache:nobody moodledata` 将目录的用户和组更改为您的 Web 服务器（通常将是 `apache`
    或 `www-data` 和 `nobody` 或 `www-data`）。
- en: 'If you don’t have permission to create the data directory in a secure location,
    create the `.htaccess` file in your home directory and ensure it contains the
    following two lines:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有权限在安全位置创建数据目录，请在您的家目录中创建 `.htaccess` 文件，并确保它包含以下两行：
- en: '[PRE5]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: These two settings prevent files from being accessed without users having permission
    to do so.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个设置可以防止用户在没有相应权限的情况下访问文件。
- en: We have completed the first three steps – downloading Moodle, creating the database,
    and preparing `moodledata` – which are the prerequisites for running the installer
    script.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经完成了前三个步骤——下载 Moodle、创建数据库和准备 `moodledata`——这些是运行安装脚本的前提条件。
- en: Running the installer script
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 运行安装脚本
- en: The installer script performs two main actions – populating the database and
    creating the configuration file, `config.php`. The Moodle installer is initiated
    by entering the URL of `wwwroot` (the location where you copied Moodle) into your
    web browser; Moodle will recognize that it hasn’t been installed yet and start
    the process automatically.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 安装脚本执行两个主要操作 – 填充数据库和创建配置文件 `config.php`。通过在您的网页浏览器中输入 `wwwroot`（您复制 Moodle
    的位置）的 URL 来启动 Moodle 安装程序；Moodle 将识别它尚未安装，并自动开始此过程。
- en: The Moodle installer has to set a session cookie. If your browser has been configured
    to trigger a warning, make sure you accept that cookie.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 安装程序必须设置一个会话 cookie。如果您的浏览器已被配置为触发警告，请确保您接受该 cookie。
- en: 'The first screen lets you choose the language to be used during installation
    – this is not the locale used for Moodle, only the language for the installation:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个屏幕允许您选择安装过程中要使用的语言 – 这不是 Moodle 所使用的区域设置，只是安装的语言：
- en: '![Figure 1.7 – Moodle installation – Choose a language ](img/Figure_1.07_B18779.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.7 – Moodle 安装 – 选择语言](img/Figure_1.07_B18779.jpg)'
- en: Figure 1.7 – Moodle installation – Choose a language
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.7 – Moodle 安装 – 选择语言
- en: 'The following screenshot displays the expected values for the `wwwroot`), the
    `dirroot`) entry, and the `dataroot`) entry; you might have to modify the `moodledata`
    differs:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了 `wwwroot`（`dirroot`）条目和 `dataroot` 条目的预期值；您可能需要修改 `moodledata` 的不同之处：
- en: '![Figure 1.8 – Moodle installation – Confirm paths ](img/Figure_1.08_B18779.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.8 – Moodle 安装 – 确认路径](img/Figure_1.08_B18779.jpg)'
- en: Figure 1.8 – Moodle installation – Confirm paths
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.8 – Moodle 安装 – 确认路径
- en: If `dataroot` cannot be located or does not have the correct permissions, an
    error message containing details will be displayed. The same applies if `dataroot`
    is accessible directly via the web and is not secure.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 `dataroot` 无法找到或没有正确的权限，将显示包含详细信息的错误消息。如果 `dataroot` 可以直接通过网页访问且不安全，也适用同样的情况。
- en: 'You must select which database you wish to use on the following screen. Only
    the drivers for MySQL, MariaDB, Aurora MySQL, and PostgresSQL are installed on
    my system. The respective PHP extension must be installed first if you wish to
    use other database systems such as Oracle or MS SQL Server:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 您必须在以下屏幕上选择您希望使用的数据库。在我的系统上仅安装了 MySQL、MariaDB、Aurora MySQL 和 PostgreSQL 驱动程序。如果您想使用
    Oracle 或 MS SQL Server 等其他数据库系统，则必须首先安装相应的 PHP 扩展：
- en: '![Figure 1.9 – Moodle installation – Choose database driver ](img/Figure_1.09_B18779.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.9 – Moodle 安装 – 选择数据库驱动](img/Figure_1.09_B18779.jpg)'
- en: Figure 1.9 – Moodle installation – Choose database driver
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.9 – Moodle 安装 – 选择数据库驱动
- en: 'This interface uses the configuration details previously established. The following
    screenshot shows the required fields but will look slightly different if you have
    chosen a database driver other than MySQL:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 此界面使用之前已建立的配置详情。以下截图显示了所需的字段，但如果您选择了除 MySQL 之外的其他数据库驱动程序，则外观可能略有不同：
- en: '![Figure 1.10 – Moodle installation – Database settings ](img/Figure_1.10_B18779.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.10 – Moodle 安装 – 数据库设置](img/Figure_1.10_B18779.jpg)'
- en: Figure 1.10 – Moodle installation – Database settings
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.10 – Moodle 安装 – 数据库设置
- en: The `localhost` (`127.0.0.1`), which is correct if the database is located on
    the same server as the web server. If it is located on a separate server, specify
    the IP address (preferably unresolved to improve performance).
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '`localhost` (`127.0.0.1`)，如果数据库位于与网页服务器相同的服务器上，这是正确的。如果它位于不同的服务器上，请指定 IP 地址（最好不解析以提高性能）。'
- en: All the tables the Moodle installer will create will be prefixed with `mdl_`.
    The **Tables prefix** entry should only be changed if you run multiple Moodle
    installations using the same database.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: Moodle 安装程序将创建的所有表都将以前缀 `mdl_` 开头。只有当您使用同一数据库运行多个 Moodle 安装时，才应更改 `Tables prefix`
    条目。
- en: 'Next, the Moodle installer checks whether certain components have been installed.
    Not all the modules are compulsory – see the *Moodle prerequisites* section of
    this chapter and the notice on-screen. The installer also verifies the critical
    PHP settings. If any of the tests have not passed, you must go back to the *Software
    requirements* section to resolve any problems and restart the installation process
    after the issues have been fixed. Otherwise, some features may not work, or the
    installer will not continue, depending on the importance of the module:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.11 – Moodle installation – Server checks ](img/Figure_1.11_B18779.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
- en: Figure 1.11 – Moodle installation – Server checks
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: When you have confirmed the server check screen, the installer will display
    Moodle’s copyright notice, which you must confirm. The appearance of this screen
    also means that the Moodle configuration file, `config.php`, has been successfully
    created. The installer will display the config file’s content if the creation
    fails (usually because of incorrect permissions). You will have to copy the text
    from the screen and paste it manually into `config.php` in your `dirroot`.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: Once you have accepted the agreement (you can find the full text of the GPL
    license at [docs.moodle.org/dev/License](http://docs.moodle.org/dev/License)),
    all the database tables will be created. This process might take a few minutes.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: 'Once the table has been created and populated, you will see the screen where
    you can set up the administrator account. The default **Username** is admin, which
    should be changed for security reasons. You must fill in the following self-explanatory
    fields: **New password**, **First name**, **Surname**, and **Email address**.
    In [*Chapter 5*](B18779_05.xhtml#_idTextAnchor092), *Managing Users, Cohorts,
    and Authentication*, all other fields will be explained in great detail:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.12 – Moodle installation – setting up the admin account ](img/Figure_1.12_B18779.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
- en: Figure 1.12 – Moodle installation – setting up the admin account
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: The last screen of the installation script asks you to enter some home page
    settings; namely, **Full site name**, **Short name for site**, and **Site home
    summary**. These home page settings can be modified later (see [*Chapter 7*](B18779_07.xhtml#_idTextAnchor140),
    *Enhancing Moodle’s Look* *and Feel*).
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: Change the **Default timezone** entry to the location of your server, not your
    location. The installer allows you to turn on **Self registration**. Leave this
    disabled for now until you have read [*Chapter 5*](B18779_05.xhtml#_idTextAnchor092),
    *Managing Users, Cohorts, and Authentication*. You must also provide a **Support
    email** (for your user queries) and a **No-reply address** (to avoid email issues).
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
- en: Once this information has been entered and the screen has been confirmed, you
    are ready to start using Moodle. However, first, you must set up the execution
    of Moodle’s maintenance script.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
- en: Setting up the cron process
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Moodle has to perform plenty of background tasks regularly.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
- en: The **cron script**, executed by the **cron process**, performs Moodle’s background
    tasks.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: An entire page has been dedicated to cron in the Moodle documentation; you can
    find it at [docs.moodle.org/en/Cron](http://docs.moodle.org/en/Cron). You must
    set up the cron process; otherwise, any timed Moodle features, such as scheduled
    backups, sending forum notifications, statistics processing, and so on, will not
    work.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: The script, `cron.php`, is located in the admin directory and can be triggered
    manually through a web browser (if allowed in the security settings). Once executed,
    the output from the script (`<yoursite>/admin/cron.php`) is shown on-screen, and
    you have to navigate back to your Moodle system manually.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: 'There are several ways to call the cron script. The most popular option is
    via the `wget` command:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: However, if this does not suit your setup, check out [docs.moodle.org/en/Cron](http://docs.moodle.org/en/Cron)
    for alternatives.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: Most control panels allow you to set up scheduled tasks via a cron job management
    tool. Bear in mind that this is not part of Moodle but part of your hosting package.
    Alternatively, you can create a crontab entry, a file located in the `/etc` directory
    that contains all the system-wide cron entries. This file can also be edited manually
    using `crontab -e`, but ensure you get the syntax right!
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: 'To run the CLI cron script every minute, add the following line, replacing
    `<yourpath>` with the directory where your Moodle system is located (`dirroot`):'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Important note
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: It is highly recommended to run the cron process every minute!
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: That’s it. Moodle is now ready to go. Two optional steps you should quickly
    run through are covered in the next section.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
- en: Finalizing the installation
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To make sure that Moodle is running without problems, go to **Notifications**
    in the **Site administration** menu of the **General** tab:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.13 – Moodle installation – checking system notifications ](img/Figure_1.13_B18779.jpg)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
- en: Figure 1.13 – Moodle installation – checking system notifications
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
- en: In the case of my installation, there are two issues – the cron script has not
    been configured and the mobile app is not enabled. I need to fix the former issue;
    the latter can wait until [*Chapter 11*](B18779_11.xhtml#_idTextAnchor216), *Enabling
    Mobile Learning*. Other messages might appear in the **Notifications** area, and
    you should resolve them promptly.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
- en: Moodle provides some statistics about its usage on [moodle.net/stats](http://moodle.net/stats),
    and to be included in these figures, you have to register your Moodle site via
    **Site administration** | **General** | **Registration**. Registration with Moodle
    is optional and free, and you decide what information will be made public.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
- en: Even if you opt out of providing any usage patterns for your site, it is still
    highly recommended to register to receive information on new Moodle releases,
    security alerts, and other important news.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: 'The following is the registration form, alongside a screenshot from the public
    statistics:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.14 – Moodle registration and statistics ](img/Figure_1.14_B18779.jpg)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
- en: Figure 1.14 – Moodle registration and statistics
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
- en: This concludes the installation process for Moodle in a LAMP environment. If
    you have encountered any issues that have not been covered in these instructions
    or if your setup differs from the one described, go to [docs.moodle.org/en/Installing_Moodle](http://docs.moodle.org/en/Installing_Moodle),
    where more installation details are provided, and exceptions are covered in great
    detail.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: An alternative to installing Moodle via the web interface is via the **command-line
    interface** (**CLI**), which is the topic of the following section.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: Installation via the command-line interface
  id: totrans-195
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Moodle provides a CLI that lets you perform several administrative tasks from
    the Unix shell prompt. There is no CLI for Windows-based systems. CLI-based installations
    are useful if you need to automate setups, for example, in an environment where
    you host multiple Moodle instances.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: The CLI is not for the faint-hearted, so be careful when using it. You must
    execute the installation script as the web server user, usually `www-data` or
    `apache`. You can run the installation script, `install.php`, in interactive mode
    (you will have to enter any parameters by hand) or in non-interactive mode, where
    the script will run silently.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
- en: 'From your `dirroot`, you can initiate the interactive script as follows:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Something more interesting is the CLI’s non-interactive mode, as this can be
    used for scripting and automation purposes. A list of all the available parameters
    can be displayed using the `--``help` command:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The output of the executed command is shown in the following screenshot:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.15 – Moodle installation via the CLI ](img/Figure_1.15_B18779.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
- en: Figure 1.15 – Moodle installation via the CLI
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: 'An example command line would look similar to the following, where you will
    have to adjust the parameters to your local setup:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: More Moodle tasks can be administered via the CLI, for example, resetting passwords
    or putting Moodle in maintenance mode. We will show the relevant syntax at the
    appropriate places throughout this book and have also dedicated a section to the
    CLI in [*Chapter 17*](B18779_17.xhtml#_idTextAnchor325), *Working with Moodle*
    *Admin Tools*.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: Once your Moodle system is up and running, you need to ensure that it is kept
    up to date. Updating Moodle manually and via the command line is covered in the
    following section.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: Updating Moodle
  id: totrans-209
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We provided an overview of Moodle’s release calendar earlier in this chapter.
    There is usually no need to install every single minor point release; however,
    there are several scenarios when you should upgrade your Moodle system:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: Security patches have been issued
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: New features have been added
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bugs have been fixed that affect your setup
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A major version is released
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The support cycle of your setup comes to an end
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'There are principally two ways Moodle systems can be updated: you can run updates
    manually (using the web interface or the CLI) or stay up to date using Git commands.
    Both procedures will be described in this section.'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: 'Either way, before you start, ensure you put Moodle in maintenance mode to
    ensure that no other user is logged in during the update. Go to **Site administration**
    | **Server** | **Maintenance mode**, choose **Enable** for **Maintenance mode**,
    and enter a maintenance message:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.16 – Enabling maintenance mode ](img/Figure_1.16_B18779.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
- en: Figure 1.16 – Enabling maintenance mode
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
- en: 'You can also put Moodle in maintenance mode using its CLI, as follows:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Using the `--enablelater=MINUTES` flag, you can specify the period before entering
    CLI maintenance mode, which is useful when you run an automatic update.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
- en: 'To change back to normal mode, use the `--disable` parameter instead of `--enable`,
    as follows:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Once Moodle has been put in maintenance mode, you are ready to update your Moodle
    system.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
- en: Updating Moodle manually
  id: totrans-226
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The high-level process for updating Moodle manually is as follows:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.17 – Updating Moodle ](img/Figure_1.17_B18779.jpg)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
- en: Figure 1.17 – Updating Moodle
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
- en: If you update from a previous version of Moodle, the process is the same. However,
    double-check the upgrading document at [docs.moodle.org/en/Upgrading](http://docs.moodle.org/en/Upgrading)
    for any version-specific issues.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
- en: You have to be at least on version 3.6 to update directly to Moodle 4\. If you’re
    upgrading from earlier versions, you must upgrade to 3.6 as a first step.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
- en: Before you install a new update, it is highly recommended that you run a `moodledata`,
    and `dirroot` (in particular, `config.php`).
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let’s go through the update workflow step by step:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
- en: '**New version**'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you have created a backup, it is time to replace the old version of `dirroot`
    with the latest code. Simply copy the new files over the existing ones; existing
    files will be overridden, except `config.php`, which is not part of the download
    bundle.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
- en: 'Alternatively, you can rename the old `dirroot` folder and create a new directory.
    However, you must copy the following files and directories from your old directory
    to your new `dirroot`:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
- en: '`config.php`'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`.htaccess` (if present)'
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Any theme folders that have been created
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Any modified language packs
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The content of the local directory
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Any third-party modules and custom code not located in `local`
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Once you go to the location of your Moodle site and log in as an administrator,
    the system will recognize that a new version is available and kick off the installer
    automatically.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
- en: 'The first screen displays the build of the new version (here, 4.0.2) and asks
    you to confirm that you wish to go ahead with the upgrade:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.18 – Updating Moodle – New version ](img/Figure_1.18_B18779.jpg)'
  id: totrans-246
  prefs: []
  type: TYPE_IMG
- en: Figure 1.18 – Updating Moodle – New version
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
- en: '**Server checks**'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, a screen is displayed that links the release notes and performs the same
    server check as the one described during installation.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
- en: '**Plugins check**'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Moodle plugins, whether core (**Standard**) or third-party (**Additional**),
    sometimes cause problems when upgrading Moodle. The **Source/Status** column highlights
    any actions required or problems found, and you should resolve any issues. Refer
    to [*Chapter 8*](B18779_08.xhtml#_idTextAnchor168), *Understanding Moodle Plugins*,
    for more details:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.19 – Updating Moodle – Plugins check ](img/Figure_1.19_B18779.jpg)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
- en: Figure 1.19 – Updating Moodle – Plugins check
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
- en: '**System upgrade**'
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once this screen has been confirmed, the actual system upgrade starts, during
    which new database fields are created, and data is modified if and when necessary.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
- en: '**New settings**'
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Any new system settings added to Moodle are shown and can be changed straight
    away. For example, in the following screenshot, a new **Number of participants
    per page** parameter has been added:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.20 – Updating Moodle – New settings ](img/Figure_1.20_B18779.jpg)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
- en: Figure 1.20 – Updating Moodle – New settings
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
- en: Once the upgrade process has been completed, check the **Notifications** page.
    Also, don’t forget to turn off **Maintenance mode**!
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
- en: An alternative to manually updating Moodle is to utilize the CLI, which we will
    cover in the following subsection.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
- en: Updating Moodle via the CLI
  id: totrans-262
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'As expected, Moodle updates can also be run using the already-discussed CLI.
    Once you have backed up your data and updated to the latest version, all you need
    to do is run the following script:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Updating Moodle via the CLI is even more powerful when combined with the Git
    checkout of the Moodle source code. That is what we’ll look at next.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
- en: An alternative approach exists to keep a current version up to date, which uses
    the open source versioning system **Git**. All checked-in Moodle code is made
    available via this method, which only allows you to update the modules that have
    changed.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
- en: 'Setting up Git is a cumbersome process, which is beyond the scope of this book.
    You can find details at [docs.moodle.org/en/Git_for_Administrators](http://docs.moodle.org/en/Git_for_Administrators).
    However, once set up, Git is a very streamlined system, particularly in conjunction
    with the CLI mentioned earlier. The following is a sample script that gets the
    latest version of the source code, puts Moodle in maintenance mode, merges the
    old code with the new, runs the upgrade script, and disables maintenance mode:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The execution of the `git fetch` command can be seen in the following screenshot:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.21 – Fetching the new Moodle version ](img/Figure_1.21_B18779.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
- en: Figure 1.21 – Fetching the new Moodle version
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
- en: If you have changed any core code, potential conflicts might arise and must
    be resolved (Git will prompt you to do so).
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
- en: Most commercial Moodle providers use Git to keep their Moodle instances up to
    date. If you feel comfortable using shell scripts, this should be your preferred
    method since it streamlines the update workflow and reduces the number of issues
    that can arise.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
- en: 'There is one last issue we haven’t covered yet: when do you know that updates
    are available? That’s what update notifications are there for.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
- en: Update notifications
  id: totrans-281
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Moodle can notify you about a newly available version via email or message.
    To support this feature, the **Automatically check for available updates** setting
    under **Site administration** | **Server** | **Update notifications** has to remain
    enabled, as follows:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.22 – Update notifications ](img/Figure_1.22_B18779.jpg)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
- en: Figure 1.22 – Update notifications
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
- en: On your production site, the **Required code maturity** option should be set
    to **Stable version**; other maturity levels should only be considered on test
    instances. The same holds for the **Notify about new** **builds** parameter.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
- en: 'Alternatively, you can check for updates (core and plugins) by going to **Site
    administration** | **General** | **Notifications**. This information is updated
    every 24 hours via the cron process you set up earlier and takes into account
    the update notification settings. You can also initiate the request via the **Check
    for available** **updates** button:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.23 – Update notifications ](img/Figure_1.23_B18779.jpg)'
  id: totrans-287
  prefs: []
  type: TYPE_IMG
- en: Figure 1.23 – Update notifications
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
- en: This concludes this section on updating your Moodle site, both manually and
    via the command line.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter taught you how to install and update Moodle.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
- en: After providing an overview describing the most suitable setup, we outlined
    the necessary software and hardware requirements and described Moodle’s versioning
    strategy and release calendar.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
- en: Then, we covered Moodle’s installation via the web and its powerful CLI. We
    did the same for Moodle upgrades, where we briefly introduced Git.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
- en: The fact that Moodle uses a portable software architecture and facilitates standard
    open source components allows it to be installed on multiple platforms. However,
    this also means that different peculiarities and quirks must be considered in
    different environments.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
- en: Now that your system is up and running, in the next chapter, we’ll look at the
    components of Moodle, which will give you a better understanding of the system
    and how to administer it.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
