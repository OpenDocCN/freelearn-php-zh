- en: Chapter 2. Theming
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第二章 主题化
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Configuring Magento themes and packages
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 Magento 主题和包
- en: Creating your first theme
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建您的第一个主题
- en: Adding extra files to your theme
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向您的主题添加额外文件
- en: Adding jQuery support
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加 jQuery 支持
- en: Changing a page title
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改页面标题
- en: Working with translations
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与翻译一起工作
- en: Understanding the theming block system
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解主题块系统
- en: Adding widgets to the layout
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将小部件添加到布局中
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: When you want to make your sample Magento site ready for use, the first thing
    most people want to change is the look and feel of the shop. The first impression
    a visitor has of your site is the look and feel.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 当您想使您的示例 Magento 网站准备就绪时，大多数人首先想要改变的是商店的外观和感觉。访客对您的网站的第一印象就是外观和感觉。
- en: In this chapter, we will cover the most important things you can do with a Magento
    theme. Customizing the standard theme is not so difficult but building a theme
    from scratch is a lot of work.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍您可以使用 Magento 主题做的最重要的事情。自定义标准主题并不难，但从头开始构建一个主题则需要大量工作。
- en: Configuring Magento themes and packages
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置 Magento 主题和包
- en: Magento works with multiple themes. You can configure more themes in the same
    store. A common case is that you have a theme of your shop and some inherited
    themes based on the shop theme.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Magento 与多个主题一起工作。您可以在同一商店中配置更多主题。一个常见的情况是您有一个商店主题，以及基于商店主题的一些继承主题。
- en: Getting ready
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Log in to the backend and go to the theme configuration section that you can
    find at **System** | **Configuration** | **Design**.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 登录到后端，前往您可以在 **系统** | **配置** | **设计** 下找到的主题配置部分。
- en: How to do it...
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following instructions describe how to manage the different Magento themes
    of a webshop:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 以下说明描述了如何管理网店的不同 Magento 主题：
- en: Change the theme field to `modern` and clear the cache. Go to your frontend
    and your shop will look as follows:![How to do it...](img/3329OS_02_01.jpg)
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将主题字段更改为 `modern` 并清除缓存。前往您的前端，您的商店将如下所示：![如何操作...](img/3329OS_02_01.jpg)
- en: You have now configured the `modern` theme in the `default` package. This theme
    will extend things from the `default` theme and, in the last case, from the `base/default`
    theme. This process is called the **theme fallback system**.
  id: totrans-20
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您现在已配置了 `default` 包中的 `modern` 主题。此主题将扩展 `default` 主题中的内容，在最后的情况下，从 `base/default`
    主题扩展。这个过程被称为 **主题回退系统**。
- en: Make the theme field empty and add the following configuration:![How to do it...](img/3329OS_02_02.jpg)
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将主题字段留空，并添加以下配置：![如何操作...](img/3329OS_02_02.jpg)
- en: Reload the frontend:![How to do it...](img/3329OS_02_03.jpg)
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新加载前端：![如何操作...](img/3329OS_02_03.jpg)
- en: Your shop will look like the `default` theme but with some different CSS styles.
    We have configured the `default` theme but with another `skin` folder that contains
    the CSS files.
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您的商店将看起来像 `default` 主题，但有一些不同的 CSS 样式。我们已经配置了 `default` 主题，但使用了包含 CSS 文件的另一个
    `skin` 文件夹。
- en: How it works...
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: 'There are three levels of themes in Magento: the base theme, the package''s
    default theme, and the other themes in the package.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: Magento 中有三种主题级别：基础主题、包的默认主题和包中的其他主题。
- en: 'The following diagram shows how the theme fallback system works when you have
    configured a theme:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了配置主题时主题回退系统的工作原理：
- en: '![How it works...](img/3329OS_02_04.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理...](img/3329OS_02_04.jpg)'
- en: 'When the `winter` theme is configured, Magento will look at files in the following
    order:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 当配置 `winter` 主题时，Magento 将按以下顺序查看文件：
- en: The theme (`packt/winter`)
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主题 (`packt/winter`)
- en: The package's default theme (`packt/default`)
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含的默认主题 (`packt/default`)
- en: The base theme (`base/default`)
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础主题 (`base/default`)
- en: 'It is possible to configure a default theme in the configuration page by navigating
    to **System** | **Configuration** | **Design**. If this is set (for example, `packt/summer`),
    the fallback system will loop through the themes in the following order:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在配置页面配置默认主题，通过导航到 **系统** | **配置** | **设计**。如果已设置（例如，`packt/summer`），回退系统将按以下顺序遍历主题：
- en: The theme (`packt/winter`)
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主题 (`packt/winter`)
- en: The configured default theme (`packt/summer`)
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置的默认主题 (`packt/summer`)
- en: The package's default theme (`packt/default`)
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含的默认主题 (`packt/default`)
- en: The base theme (`base/default`)
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础主题 (`base/default`)
- en: The directory where the theme is stored is `app/design/frontend` for the template
    files (rendering HTML) and `skin/frontend` for the static files (CSS, images,
    fonts, and so on).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 存储主题的目录是 `app/design/frontend`（模板文件，渲染 HTML）和 `skin/frontend`（静态文件，CSS、图像、字体等）。
- en: Practically, the default theme of a package will contain the theme of the webshop.
    The subthemes in that package mostly have the same layout but differ in some small
    things. For example, a winter theme has a background with snow and the summer
    theme has a background with a beach. The rest of the theme is exactly the same
    because this uses the same files of the default theme.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，包的默认主题将包含网店的主题。该包中的子主题大多具有相同的布局，但在一些小细节上有所不同。例如，冬季主题有雪的背景，而夏季主题有海滩的背景。其余的主题完全相同，因为这是使用默认主题的相同文件。
- en: Note
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: When your theme is not in the default package, nothing happens on the frontend
    after installing a Magento extension.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的主题不在默认包中时，安装 Magento 扩展后前端不会发生任何变化。
- en: The reason could be that the theme files of the module are in the default package.
    Magento looks only at the configured and base packages. The default package is
    just like every other package such as `packt` or `music`. When a module has custom
    theme files, the best practice is to store these files in the base theme to avoid
    this problem.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 原因可能是模块的主题文件位于默认包中。Magento 只查看配置和基本包。默认包就像其他任何包一样，例如 `packt` 或 `music`。当模块有自定义主题文件时，最佳实践是将这些文件存储在基本主题中，以避免这个问题。
- en: You can configure Magento themes on different levels to show up on the frontend.
    In most cases, the theme settings are configured on the configuration page by
    navigating to **System** | **Configuration** | **Design**.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在不同的级别配置 Magento 主题，以便在前端显示。在大多数情况下，主题设置是在配置页面上配置的，通过导航到 **系统** | **配置**
    | **设计**。
- en: You can add exceptions on the page by navigating to **System** | **Design**.
    On this page, you can configure a theme for a store with a from date and to date.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过导航到 **系统** | **设计** 在页面上添加例外。在此页面上，你可以为具有开始日期和结束日期的商店配置主题。
- en: It is also possible to configure a specific theme for a product, category, or
    CMS page. You can change the settings on the edit pages of a product, category,
    or CMS page.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以为产品、类别或 CMS 页面配置特定的主题。你可以在产品、类别或 CMS 页面的编辑页面上更改设置。
- en: Creating your first theme
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建你的第一个主题
- en: We will create a package with a default theme in it. At a later stage, we can
    add more themes in this package, which extend the default theme that we will create
    in this chapter.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建一个包含默认主题的包。在后续阶段，我们可以在该包中添加更多主题，这些主题将扩展我们在本章中创建的默认主题。
- en: Getting ready
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Open your IDE and navigate to the theme folder (`app/design/frontend and skin/frontend/default`).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 打开你的 IDE 并导航到主题文件夹 (`app/design/frontend and skin/frontend/default`)。
- en: How to do it...
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following procedure shows you which actions are required to create a custom
    theme:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤展示了创建自定义主题所需的操作：
- en: 'Create the following folders:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建以下文件夹：
- en: '`app/design/frontend/packt/default`'
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`app/design/frontend/packt/default`'
- en: '`app/design/frontend/packt/default/layout`'
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`app/design/frontend/packt/default/layout`'
- en: '`app/design/frontend/packt/default/template`'
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`app/design/frontend/packt/default/template`'
- en: '`skin/frontend/packt/default`'
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`skin/frontend/packt/default`'
- en: Copy the content of the folder `skin/frontend/default/blank/` to `skin/frontend/packt/default`.
    The folder looks as follows:![How to do it...](img/3329OS_02_05.jpg)
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `skin/frontend/default/blank/` 文件夹的内容复制到 `skin/frontend/packt/default`。文件夹看起来如下：![如何操作...](img/3329OS_02_05.jpg)
- en: Configure the new theme and package in the backend. Navigate to **System** |
    **Configuration** | **Design** and configure as follows:![How to do it...](img/3329OS_02_06.jpg)
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在后端配置新主题和包。导航到 **系统** | **配置** | **设计** 并按以下方式配置：![如何操作...](img/3329OS_02_06.jpg)
- en: Tip
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**Downloading the example code**'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**下载示例代码**'
- en: You can download the example code files for all Packt books you have purchased
    from your account at [http://www.packtpub.com](http://www.packtpub.com). If you
    purchased this book elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/suppor)
    and register to have the files e-mailed directly to you.
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以从你购买的所有 Packt 书籍的账户中下载示例代码文件。[http://www.packtpub.com](http://www.packtpub.com)。如果你在其他地方购买了这本书，你可以访问[http://www.packtpub.com/support](http://www.packtpub.com/suppor)并注册，以便直接将文件通过电子邮件发送给你。
- en: Save the configuration and your site will look as follows:![How to do it...](img/3329OS_02_07.jpg)
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存配置后，你的网站将看起来如下：![如何操作...](img/3329OS_02_07.jpg)
- en: The theme is now installed and ready for further development.
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 主题现在已安装并准备好进一步开发。
- en: How it works...
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: 'We have just created a blank theme; a theme with only structural CSS. When
    we want to customize the look and feel with CSS, we have to work in the following
    folders and files:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚刚创建了一个空白主题；一个只有结构化CSS的主题。当我们想用CSS自定义外观和感觉时，我们必须在以下文件夹和文件中工作：
- en: '`skin/frontend/packt/default/css`'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`skin/frontend/packt/default/css`'
- en: '`skin/frontend/packt/default/css/styles.css (the main css file)`'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`skin/frontend/packt/default/css/styles.css (主要CSS文件)`'
- en: '`skin/frontend/packt/default/images (the css images folder)`'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`skin/frontend/packt/default/images (CSS图像文件夹)`'
- en: With these files, you can change the CSS look and feel of the shop. If you want
    to change some of the HTML code, you have to work in the `app/design/frontend/packt/default`
    folder.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些文件，您可以更改商店的CSS外观和感觉。如果您想更改一些HTML代码，您必须在`app/design/frontend/packt/default`文件夹中工作。
- en: This folder is inherited from the `app/design/frontend/base/default` folder
    where the standard files are stored. If you want to change a file in the `base`
    folder, you need to copy the file with the same folder structure from the `base`
    folder to your theme.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 此文件夹是从存储标准文件的`app/design/frontend/base/default`文件夹继承而来的。如果您想更改`base`文件夹中的文件，您需要从`base`文件夹复制具有相同文件夹结构的文件到您的主题。
- en: Tip
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Changing the code of the base package files will also work but this is not recommended
    because these files are part of the Magento core. When these files are changed,
    your changes will be lost after a Magento upgrade and your code maintainability
    becomes low.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 修改基础包文件的代码也会起作用，但这样做不推荐，因为这些文件是Magento核心的一部分。当这些文件被更改时，您的更改将在Magento升级后丢失，并且您的代码可维护性会降低。
- en: If you want to change the `header.phtml` file that is located at `app/design/frontend/base/default/template/page/html/header.phtml`,
    you have to copy it to `app/design/frontend/packt/default/template/page/html/header.phtml`.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想更改位于`app/design/frontend/base/default/template/page/html/header.phtml`的`header.phtml`文件，您必须将其复制到`app/design/frontend/packt/default/template/page/html/header.phtml`。
- en: When it is located there, clear your caches. Now, the file of your theme is
    loaded instead of the one in the base folder.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 当它位于那里时，清除您的缓存。现在，您的主题文件已加载，而不是基本文件夹中的文件。
- en: Tip
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: In the Magento development process, you have to clear the caches to see your
    changes. It is also possible to disable the cache. If so, you don't have to clear
    the cache many times when developing but you will have longer page loads.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在Magento开发过程中，您必须清除缓存以查看您的更改。您还可以禁用缓存。如果这样做，在开发过程中不需要多次清除缓存，但页面加载时间会更长。
- en: There's more…
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: To see from where every file is loaded, you can turn on **Template Path Hints**.
    To do this, go to the backend and navigate to **System** | **Configuration** |
    **Developer**.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看每个文件是从哪里加载的，您可以开启**模板路径提示**。为此，请转到后端并导航到**系统** | **配置** | **开发者**。
- en: 'Navigate to your store view in the top-left corner and set the following configuration:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在左上角导航到您的商店视图，并设置以下配置：
- en: '![There''s more…](img/3329OS_02_08.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![还有更多…](img/3329OS_02_08.jpg)'
- en: When this is set, navigate to the frontend and you will see red columns around
    every block.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 当此设置生效时，导航到前端，您将看到每个块周围都有红色列。
- en: Adding extra files to your theme
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将额外文件添加到您的主题中
- en: In the previous recipe, we set up our theme with one CSS file. Mostly, you want
    to add some more files to it (when you are using a JavaScript plugin or something).
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的菜谱中，我们使用一个CSS文件设置了我们的主题。通常，您可能还想添加一些其他文件（当您使用JavaScript插件或其他东西时）。
- en: Getting ready
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'We will add an extra CSS and JavaScript file to our theme. To do this, we have
    to work in the following two directories:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将向我们的主题添加额外的CSS和JavaScript文件。为此，我们必须在以下两个目录中工作：
- en: '`app/design/frontend/packt/default/layout`'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`app/design/frontend/packt/default/layout`'
- en: '`skin/frontend/packt/default`'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`skin/frontend/packt/default`'
- en: How to do it...
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'In the following steps, we will see how we can add extra files to a theme:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下步骤中，我们将看到如何向主题添加额外文件：
- en: Copy the `page.xml` file. The declarations of all the CSS and JavaScript files
    that need to be included are stored in the file `app/design/frontend/base/default/layout/page.xml`.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制`page.xml`文件。所有需要包含的CSS和JavaScript文件的声明都存储在`app/design/frontend/base/default/layout/page.xml`文件中。
- en: Tip
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: It is possible that there are other CSS and JavaScript declarations in other
    layout XML files. The `page.xml` file is used to set up the default layout structure.
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 可能还有其他CSS和JavaScript声明在其他布局XML文件中。`page.xml`文件用于设置默认布局结构。
- en: We need to add something. So we need to copy this file with the same folder
    structure to our theme folder. Copy the file to `app/design/frontend/packt/default/layout/page.xml`.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要添加一些内容。因此，我们需要将这个文件及其相同的文件夹结构复制到我们的主题文件夹中。将文件复制到`app/design/frontend/packt/default/layout/page.xml`。
- en: Add the CSS declaration.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加CSS声明。
- en: 'If you open the `page.xml` file and look in the `<default>` tag, you will see
    a lot of lines with `"addCss"`. We need to add the following line in that section:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你打开`page.xml`文件并查看`<default>`标签，你将看到很多带有`"addCss"`的行。我们需要在该部分添加以下行：
- en: '[PRE0]'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The path we specify here is the path starting from our theme root folder, so
    it is `css/packt.css`. Magento will use the theme fallback to find the file in
    the `theme`, `package`, or `base` folder.
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们在这里指定的路径是从我们的主题根文件夹开始的路径，因此它是`css/packt.css`。Magento将使用主题回退来在`theme`、`package`或`base`文件夹中查找文件。
- en: Don't forget to create the CSS file. Create the `packt.css` file in the `skin/frontend/packt/default/css/`
    folder.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不要忘记创建CSS文件。在`skin/frontend/packt/default/css/`文件夹中创建`packt.css`文件。
- en: Clear the Magento cache.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清除Magento缓存。
- en: Tip
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: When you change something in the XML files, you will always have to clear the
    cache to see the effect of your changes. It is also possible to disable the cache.
    The purpose is that you don't have to clear the cache many times as the page loads
    are slower.
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当你在XML文件中更改某些内容时，你将始终需要清除缓存以查看更改的效果。也可以禁用缓存。目的是你不需要在页面加载较慢时多次清除缓存。
- en: Reload the frontend and look at the HTML source. Your file should be added.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新加载前端并查看HTML源代码。你的文件应该被添加。
- en: How it works...
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `addCss` function is one of the functions in the head block of Magento.
    This block will generate the HTML head section of a page.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '`addCss`函数是Magento头部块中的一个函数。此块将生成页面的HTML头部部分。'
- en: 'The following functions are useful when working with extra CSS and JS files:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当处理额外的CSS和JS文件时，以下函数很有用：
- en: '`addJs`: This function will add a JS file from the `js` folder (folder in the
    root directory) to the head of the page.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`addJs`：这个函数将`js`文件夹（根目录中的文件夹）中的JS文件添加到页面头部。'
- en: '`addItem`: This is a function that will add a JS or CSS file to the head of
    the page. The function has two required parameters: the type and the filename.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`addItem`：这是一个将JS或CSS文件添加到页面头部的函数。该函数有两个必需的参数：类型和文件名。'
- en: 'The type can have the following values:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 类型可以有以下值：
- en: '`skin_js`: This is a JavaScript file in the `skin` folder'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`skin_js`：这是一个位于`skin`文件夹中的JavaScript文件'
- en: '`js_css`: This is a CSS file in the `js` folder'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`js_css`：这是一个位于`js`文件夹中的CSS文件'
- en: '`js`: This is a JavaScript file in the `js` folder'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`js`：这是一个位于`js`文件夹中的JavaScript文件'
- en: '`css`: This is a CSS file in the `skin` folder'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`css`：这是一个位于`skin`文件夹中的CSS文件'
- en: '`rss`: This creates a `<link>` HTML tag with an attribute `type="application/rss+xml"`'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rss`：这创建了一个带有`type="application/rss+xml"`属性的`<link>` HTML标签'
- en: The `addItem` function has three other optional parameters to customize the
    output of the tag in the `head` tag.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '`addItem`函数有三个其他可选参数，用于自定义`head`标签中标签的输出。'
- en: There's more...
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: 'When you use the right functions to include images, JavaScript, and CSS, you
    have the following advantages over adding HTML code in a `.phtml` file:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用正确的函数来包含图片、JavaScript和CSS时，与在`.phtml`文件中添加HTML代码相比，你将获得以下优势：
- en: You can merge the CSS and JavaScript files to one file when you configure it
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你配置时，你可以将CSS和JavaScript文件合并到一个文件中
- en: It always contains the right absolute URL to the file (it contains the right
    domain and protocol)
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它始终包含到文件的正确绝对URL（它包含正确的域名和协议）
- en: It uses the theme fallback system
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使用主题回退系统
- en: Adding jQuery support
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加jQuery支持
- en: Magento 1.8 and earlier versions didn't use jQuery in the frontend and backend.
    The library that Magento uses for the JavaScript functionality is Prototype. When
    you want to use some jQuery code, you need to add the jQuery library in your theme.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: Magento 1.8及更早版本在前端和后端都没有使用jQuery。Magento用于JavaScript功能的库是Prototype。当你想要使用一些jQuery代码时，你需要将jQuery库添加到你的主题中。
- en: Getting ready
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Go to the jQuery website and get the latest version.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 前往jQuery网站并获取最新版本。
- en: How to do it...
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: By default, Magento loads the Prototype library. Excluding this will cause JavaScript
    errors on every page, so we need to use both libraries. The problem with jQuery
    and Prototype is that they both use the dollar sign (`$`) as the namespace for
    their functions.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Magento加载Prototype库。排除它将在每个页面上引起JavaScript错误，因此我们需要使用这两个库。jQuery和Prototype的问题是它们都使用美元符号（`$`）作为它们函数的命名空间。
- en: 'To avoid the conflict, we have to use jQuery in the noconflict mode:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免冲突，我们必须在noconflict模式下使用jQuery：
- en: Put the jQuery library in the `js/jquery` folder.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将jQuery库放在`js/jquery`文件夹中。
- en: We will create a `local.xml` file in our theme folder to add extra layout instructions.
    Create the `app/design/frontend/packt/default/local.xml` file.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将在主题文件夹中创建一个`local.xml`文件来添加额外的布局指令。创建`app/design/frontend/packt/default/local.xml`文件。
- en: 'Add the following content in that file:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在该文件中添加以下内容：
- en: '[PRE1]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Create a `jquery.noconflict.js` file in the `js/jquery` folder with the following
    content:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`js/jquery`文件夹中创建一个`jquery.noconflict.js`文件，内容如下：
- en: '[PRE2]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Add this file, after adding the jQuery file, in your `local.xml` file. The
    file contains the following code snippet:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在添加jQuery文件后，将此文件添加到您的`local.xml`文件中。该文件包含以下代码片段：
- en: '[PRE3]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Clear your caches and look at the source of your frontend.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清除您的缓存并查看您的前端源代码。
- en: The jQuery file and the `noconflict` file should be added in the head section.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: jQuery文件和`noconflict`文件应添加到头部部分。
- en: You can now use jQuery in your webshop.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在可以在您的网店中使用jQuery了。
- en: Tip
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Keep in mind that you have to call jQuery with the `jQuery` namespace instead
    of the `$` namespace.
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请记住，您必须使用`jQuery`命名空间而不是`$`命名空间来调用jQuery。
- en: Also keep in mind that third-party extensions of Magento could include jQuery
    in the frontend. Make sure the version is compatible with your code.
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 还要注意，Magento的第三方扩展可能包含前端中的jQuery。请确保版本与您的代码兼容。
- en: 'We normally use the following code snippet:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们通常使用以下代码片段：
- en: '[PRE4]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'But, we will instead use the following line with the jQuery namespace:'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 但是，我们将使用以下带有jQuery命名空间的行：
- en: '[PRE5]'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: How it works...
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: We added two files to the theme that contains the jQuery library. We had to
    use the noconflict mode to avoid conflicts with the prototype library.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 我们向主题添加了包含jQuery库的两个文件。我们必须使用noconflict模式来避免与prototype库的冲突。
- en: To add files to the layout, we created a `local.xml` file. In that file, we
    added instructions to add the JavaScript files to the head of the HTML code.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 要将文件添加到布局中，我们创建了一个`local.xml`文件。在该文件中，我们添加了将JavaScript文件添加到HTML代码头部的指令。
- en: The main advantage of using a `local.xml` file for this is that you don't have
    to overwrite an entire XML file from the base folder to add just two lines of
    code.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`local.xml`文件进行此操作的主要优势是您不必从基础文件夹覆盖整个XML文件，只需添加两行代码。
- en: Changing a page title
  id: totrans-149
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更改页面标题
- en: In the previous chapter, we added some CSS and JavaScript files to the `<head>`
    tag of the HTML. To change the page title, we have to do it in a similar way.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们向HTML的`<head>`标签添加了一些CSS和JavaScript文件。要更改页面标题，我们必须以类似的方式进行操作。
- en: We will change the page title of the contacts page that is available at `http://magento-dev.local/contacts`.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将更改位于`http://magento-dev.local/contacts`的联系人页面的页面标题。
- en: How to do it...
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To change the page title of the contacts page, have a look at the following
    steps:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要更改联系页面标题，请查看以下步骤：
- en: Go to the contacts page in the frontend. This is available at `http://magento-dev.local/contacts`.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往前端中的联系人页面。这是在`http://magento-dev.local/contacts`可用的。
- en: You see that the page title reads **Contact Us**. We will change this to **Give
    us a message**.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以看到页面标题为**联系我们**。我们将将其更改为**给我们留言**。
- en: 'Copy the `layout/contacts.xml` file from the base theme to our theme and open
    the file. In this file, there is an xml tag `<contacts_index_index>`:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`layout/contacts.xml`文件从基础主题复制到我们的主题，并打开该文件。在该文件中，有一个xml标签`<contacts_index_index>`：
- en: '[PRE6]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'In the `<reference name="head">` tag, you will see a `setTitle` method. Set
    this line as follows:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`<reference name="head">`标签中，您将看到一个`setTitle`方法。将此行设置为以下内容：
- en: '[PRE7]'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Clear your cache and reload the page. The title in your browser is now changed
    to **Give us a message.**
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清除您的缓存并重新加载页面。现在您的浏览器中的标题已更改为**给我们留言**。
- en: How it works...
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `<title>` tag in the HTML page is in the head section. This head section
    is generated by the Magento head block.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: HTML页面中的`<title>`标签位于头部部分。此头部部分由Magento头部块生成。
- en: 'In the template file, the code looks as follows:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在模板文件中，代码如下所示：
- en: '[PRE8]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: This means that Magento will print the title of that object in the tag. To set
    the title of that object, we use the `setTitle` function.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着Magento将在标签中打印该对象的标题。要设置该对象的标题，我们使用`setTitle`函数。
- en: Working with translations
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 翻译工作
- en: Magento has the ability to run multiple stores in different languages. In the
    sample store, you can see English, French, and a German store view.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: Magento具有在多种语言中运行多个商店的能力。在示例商店中，您可以查看英语、法语和德语商店视图。
- en: Getting ready
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Open the backend and go to the general configuration section (**System** | **Configuration**
    | **General**). We will configure the languages for the store views and do some
    inline translations.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 打开后台并转到常规配置部分（**系统** | **配置** | **常规**）。我们将配置商店视图的语言并进行一些内联翻译。
- en: How to do it...
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The following steps show you how you can translate strings in a Magento store:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤展示了如何在 Magento 商店中翻译字符串：
- en: Configure the languages for each store view.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为每个商店视图配置语言。
- en: At the top-left corner, you will see a store switcher where you can switch the
    configuration for a store. Set the French language for the French store view and
    the German language for the German store view.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左上角，你会看到一个商店切换器，你可以切换商店的配置。为法语商店视图设置法语语言，为德语商店视图设置德语语言。
- en: Clear the cache and reload your frontend.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清除缓存并重新加载你的前端。
- en: Tip
  id: totrans-175
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: You will see no changes because there is no language pack installed by default
    for French and German. Language packs are available in Magento Connect.
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你不会看到任何变化，因为没有为法语和德语安装默认的语言包。语言包可在 Magento Connect 中找到。
- en: Enable the inline translation. We will translate our store with the inline translation
    tool that you can configure from **System** | **Configuration** | **Developer**
    (the last tab). In the default configuration scope, configure the following:![How
    to do it...](img/3329OS_02_09.jpg)
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用内联翻译。我们将使用可以从 **系统** | **配置** | **开发者**（最后一个选项卡）配置的内联翻译工具来翻译我们的商店。在默认配置范围内，配置以下内容：![如何操作...](img/3329OS_02_09.jpg)
- en: Reload your frontend. You will see red frames around a lot of strings in the
    frontend. When you hover and click on the icon, a pop-up window will show the
    translation form:![How to do it...](img/3329OS_02_10.jpg)
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新加载你的前端。你会在前端看到很多字符串周围有红色边框。当你悬停并点击图标时，会弹出一个窗口显示翻译表单：![如何操作...](img/3329OS_02_10.jpg)
- en: With this translation form, you can create your own translations for the language
    of the current store.
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用这个翻译表单，你可以为当前商店的语言创建自己的翻译。
- en: Click on **Submit**, clear the caches, and reload the page.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**提交**，清除缓存，并重新加载页面。
- en: If everything goes well, you will see that the text is translated into the string
    you just entered. Make sure you always clear the cache when editing a translation.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切顺利，你会看到文本已翻译成你刚刚输入的字符串。确保在编辑翻译时始终清除缓存。
- en: How it works...
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'Magento has a very powerful translate function. To create a string in this
    translate function, you have to use the following syntax:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: Magento 有一个非常强大的翻译功能。要在翻译函数中创建字符串，你必须使用以下语法：
- en: '[PRE9]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'This syntax always works, but when working in template files, you can also
    use the shorter syntax:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 这种语法总是有效的，但在处理模板文件时，你也可以使用更短的语法：
- en: '[PRE10]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The translate function will search for the string in the following ways:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 翻译函数将按以下方式搜索字符串：
- en: First, Magento will look into the `core_translate` table of the database. In
    this table, only those translations which you have translated inline are added
    (like we did in this recipe).
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，Magento 将查看数据库中的 `core_translate` 表。在这个表中，只有那些你已内联翻译的翻译被添加（就像我们在本食谱中所做的那样）。
- en: If no matching string is found in the `core_translate` table, Magento will look
    at the `translate.csv` file in the theme. This file is located under `app/design/frontend/<<my_package>>/<<my_theme>>/locale/<<language>>/translate.csv`.
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果在 `core_translate` 表中没有找到匹配的字符串，Magento 将查看主题中的 `translate.csv` 文件。此文件位于 `app/design/frontend/<<my_package>>/<<my_theme>>/locale/<<language>>/translate.csv`。
- en: If the string is not found in the theme translation file, Magento will search
    for the string in the `app/locale/<<language>>` folder. In this folder, you can
    find all the translation files. A translate package will contain some of the module's
    translate files (`.csv`).
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果字符串在主题翻译文件中未找到，Magento 将在 `app/locale/<<language>>` 文件夹中搜索该字符串。在这个文件夹中，你可以找到所有的翻译文件。一个翻译包将包含一些模块的翻译文件（`.csv`）。
- en: If no string is found in the module's translate files, Magento will print the
    original string that is passed as an argument to the translation function.
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果在模块的翻译文件中没有找到字符串，Magento 将打印传递给翻译函数的原始字符串。
- en: Understanding the theming block system
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解主题块系统
- en: The Magento frontend is not a single file. It is a combination of blocks nested
    in each other. Each block is an object you can play with.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: Magento 前端不是一个单独的文件。它是嵌套在一起的块的组合。每个块都是一个你可以与之交互的对象。
- en: Getting ready
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Open a category page in your shop and you see a lot of frames which all represent
    a block. Some blocks are structural (left column, right column, content, and footer)
    and others contain content (product list, cart, navigation, and so on).
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的商店中打开一个分类页面，你会看到很多框架，它们都代表一个块。一些块是结构性的（左侧列、右侧列、内容、页脚等），而其他块包含内容（产品列表、购物车、导航等）。
- en: How to do it...
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: In the next two steps, we will enable the frontend hints to get an idea of the
    used blocks on a page.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的两个步骤中，我们将启用前端提示，以了解页面上的使用块。
- en: Enable your frontend **Template Path Hints**. Go to **System** | **Configuration**
    | **Developer** and enable the template and block names.
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用你的前端 **模板路径提示**。转到 **系统** | **配置** | **开发者** 并启用模板和块名称。
- en: Reload the frontend. When the frontend hints are enabled, a frontend page will
    have red frames around each block.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新加载前端。当前端提示启用时，前端页面将围绕每个块有红色框架。
- en: Each block with a template is in a red frame. The title in white is the template
    file and the blue title is the classname of the block object.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 每个带有模板的块都在一个红色框架中。白色标题是模板文件，蓝色标题是块对象的类名。
- en: When you want to edit the content of a block, you will have to look at the files
    displayed in the red frames. Make sure when a template file is in the base theme,
    you copy it to your theme.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 当你想编辑块的內容时，你将不得不查看显示在红色框架中的文件。确保当模板文件位于基本主题中时，你将其复制到你的主题中。
- en: How it works...
  id: totrans-202
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: All the blocks are declared in layout XML files. These layout files are stored
    in the layout folder of a theme.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 所有块都在布局 XML 文件中声明。这些布局文件存储在主题的布局文件夹中。
- en: When you open a layout file, everything is stored in the layout XML tag. The
    children of this tag are layout handles.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 当你打开布局文件时，所有内容都存储在布局 XML 标签中。此标签的子标签是布局处理器。
- en: 'A layout handle is a set of layout instructions that can be loaded on a page.
    When you look at the `contacts.xml` file, you see two handles. Layout handles
    are always in the second level of the `<layout>` XML tree:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 布局处理器是一组可以加载到页面上的布局指令。当你查看 `contacts.xml` 文件时，你会看到两个处理器。布局处理器始终位于 `<layout>`
    XML 树的第二级：
- en: '`default`'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`default`'
- en: '`contacts_index_index`'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`contacts_index_index`'
- en: The default handle will be loaded on every page. The `contacts_index_index`
    handle will be loaded on the contacts page.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 默认处理器将加载到每个页面上。`contacts_index_index` 处理器将加载到联系人页面上。
- en: 'When you want to load a layout instruction on a page, you have to name your
    handle as follows:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 当你想在页面上加载布局指令时，你必须按照以下方式命名你的处理器：
- en: '[PRE11]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'For the contacts page, you have to enter following values:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 对于联系人页面，你必须输入以下值：
- en: 'Module: `contacts`'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模块：`contacts`
- en: 'Controller: `IndexController`'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 控制器：`IndexController`
- en: 'Action: `indexAction`'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动作：`indexAction`
- en: 'For the login page, it is as follows:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 对于登录页面，如下所示：
- en: 'Module: `customer`'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模块：`customer`
- en: 'Controller: `AccountController`'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 控制器：`AccountController`
- en: 'Action: `loginAction`'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动作：`loginAction`
- en: So, the name of the handle is `customer_account_login`.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，处理器的名称是 `customer_account_login`。
- en: You can find more information about controllers and their actions in the *Adding
    a new page* recipe in [Chapter 4](ch04.html "Chapter 4. Creating a Module"), *Creating
    a Module*.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在第 4 章 *添加新页面* 的配方中找到有关控制器及其操作的信息，*创建模块*。
- en: When you look at the `customer.xml` file in the theme, you will see this handle
    with the instructions for the login page. When you look inside a handle, you will
    see the `<reference>` tags. Inside these tags, you see the `<block>` tags.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 当你查看主题中的 `customer.xml` 文件时，你会看到这个处理器以及登录页面的指令。当你查看处理器内部时，你会看到 `<reference>`
    标签。在这些标签内部，你会看到 `<block>` 标签。
- en: A reference is a block. When you have `<reference name="left">`, you are performing
    actions in the block with the name `left`. This block with the name `left` is
    declared in the `page.xml` file of the theme.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 引用是一个块。当你有 `<reference name="left">` 时，你正在对名为 `left` 的块执行操作。这个名为 `left` 的块在主题的
    `page.xml` 文件中声明。
- en: 'Actions that you can perform are as follows:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以执行的操作如下：
- en: Calling methods on the block object with `<action method="methodName">`
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 `<action method="methodName">` 在块对象上调用方法
- en: Adding child blocks
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加子块
- en: Removing child blocks
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移除子块
- en: Setting a template
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置模板
- en: The Magento frontend is built with blocks. The main block where everything starts
    from is called root. If you look at the `page.xml` file in our theme, in the default
    handle, you will see how the structural blocks are initialized.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: Magento 前端是用块构建的。一切开始的主要块被称为根。如果你查看我们主题中的 `page.xml` 文件，在默认处理器中，你会看到结构块是如何初始化的。
- en: Adding widgets to the layout
  id: totrans-229
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将小部件添加到布局中
- en: In the previous recipe, we described the Magento layout blocks. Writing layout
    XML files is not so easy as there is a graphical interface to add blocks to the
    layout. This interface is called **widgets**.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一个菜谱中，我们描述了 Magento 布局块。编写布局 XML 文件并不像添加块到布局中的图形界面那样简单。这个界面被称为**小部件**。
- en: Getting ready
  id: totrans-231
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will add a product link to the left column of the category page. Go to the
    backend and navigate to **CMS** | **Widgets**.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在分类页面的左侧列添加一个产品链接。转到后端，导航到 **CMS** | **小部件**。
- en: How to do it...
  id: totrans-233
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: In the following steps, we will configure a widget for the category pages.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下步骤中，我们将为分类页面配置一个小部件。
- en: Choose **Add new widget instance**.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**添加新小部件实例**。
- en: In the next form, choose the configuration shown in the following screenshot:![How
    to do it...](img/3329OS_02_12.jpg)
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个表格中，选择以下截图所示的配置：![如何操作...](img/3329OS_02_12.jpg)
- en: Click on **Continue** and the following screen shows up:![How to do it...](img/3329OS_02_13.jpg)
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**继续**，随后屏幕显示如下：![如何操作...](img/3329OS_02_13.jpg)
- en: 'Fill in the form with the following values:'
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下值填写表格：
- en: '**Widget Instance Title**: `Widget-category-left-product`'
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**小部件实例标题**：`Widget-category-left-product`'
- en: This is the title of the widget in the backend. A structural name is easy when
    working with a lot of widgets.
  id: totrans-240
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这是后端中该小部件的标题。当与许多小部件一起工作时，结构名称很容易确定。
- en: '**Assign to Store Views**: **All Store Views**'
  id: totrans-241
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分配到商店视图**：**所有商店视图**'
- en: In the **Widget Options** tab, you have to choose the product.
  id: totrans-242
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在**小部件选项**选项卡中，您必须选择产品。
- en: Save the widget. Click on **Save and Continue Edit**. The widget instance is
    now saved but nothing will show up in the frontend because there is no layout
    update set.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存小部件。点击**保存并继续编辑**。小部件实例现在已保存，但在前端不会显示任何内容，因为没有设置布局更新。
- en: To show the widget in the frontend, we have to create a layout update by clicking
    on the **Add Layout Update** button.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在前端显示小部件，我们必须通过点击**添加布局更新**按钮来创建一个布局更新。
- en: Fill in the form as follows:![How to do it...](img/3329OS_02_14.jpg)
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下方式填写表格：![如何操作...](img/3329OS_02_14.jpg)
- en: Clear the cache and go to a category page. A product link will show up in the
    left column.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 清除缓存并转到分类页面。左侧列将显示一个产品链接。
- en: How it works...
  id: totrans-247
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: In the left column, a new block is added to the frontend. Like each block on
    the frontend, this widget has a block class and a template similar to the other
    blocks.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 在左侧列中，向前端添加了一个新块。就像前端上的每个块一样，这个小部件也有一个块类和一个与其他块类似的模板。
- en: The only difference is that this block is not generated by an XML file but by
    an XML layout instruction in the database.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 唯一的区别是，这个块不是由 XML 文件生成的，而是由数据库中的 XML 布局指令生成的。
- en: The widget interface will generate a layout XML that is stored in the database.
    The block class and template are similar to other blocks in the XML files.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 小部件界面将生成一个存储在数据库中的布局 XML。块类和模板与 XML 文件中的其他块类似。
