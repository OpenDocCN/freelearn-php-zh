["```php\n    CREATE TABLE IF NOT EXISTS `sessions` (\n      `session_id` varchar(40) COLLATE utf8_bin NOT NULL DEFAULT '0',\n      `ip_address` varchar(16) COLLATE utf8_bin NOT NULL DEFAULT '0',\n      `user_agent` varchar(120) COLLATE utf8_bin DEFAULT NULL,\n      `last_activity` int(10) unsigned NOT NULL DEFAULT '0',\n      `user_data` text COLLATE utf8_bin NOT NULL,\n      PRIMARY KEY (`session_id`),\n      KEY `last_activity_idx` (`last_activity`)\n    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;\n\n    CREATE TABLE IF NOT EXISTS `products` (\n      `product_id` int(11) NOT NULL AUTO_INCREMENT,\n      `product_name` varchar(255) NOT NULL,\n      `product_code` int(11) NOT NULL,\n      `product_description` varchar(255) NOT NULL,\n      `category_id` int(11) NOT NULL,\n      `product_price` int(11) NOT NULL,\n      PRIMARY KEY (`product_id`)\n    ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3;\n\n    INSERT INTO `products` (`product_id`, `product_name`, `product_code`, `product_description`, `category_id`, `product_price`) VALUES\n    (1, 'Running Shoes', 423423, 'These are some shoes', 2, 50),\n    (2, 'Hawaiian Shirt', 34234, 'This is a shirt', 1, 25);\n\n    CREATE TABLE IF NOT EXISTS `categories` (\n      `cat_id` int(11) NOT NULL AUTO_INCREMENT,\n      `cat_name` varchar(50) NOT NULL,\n      PRIMARY KEY (`cat_id`)\n    ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3;\n\n    INSERT INTO `categories` (`cat_id`, `cat_name`) VALUES\n    (1, 'Shirts'),\n    (2, 'Footware');\n    ```", "```php\n    <?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\n    class Shop extends CI_Controller {\n        function __construct() {\n            parent::__construct();\n            $this->load->library('cart');\n            $this->load->helper('form');\n            $this->load->helper('url');\n            $this->load->helper('security');\n            $this->load->model('Shop_model');\n        }\n\n        public function index() {\n            $data['query'] = $this->Shop_model->get_all_products();\n            $this->load->view('shop/display_products', $data);\n        }\n\n        public function add() {\n            $product_id = $this->uri->segment(3);\n            $query = $this->Shop_model->get_product_details($product_id);\n            foreach($query->result() as $row) {\n                $data = array(\n                    'id'   => $row->product_id,\n                    'qty' => 1,\n                    'price'  => $row->product_price,\n                    'name' => $row->product_name,\n                 );\n            }\n\n            $this->cart->insert($data);\n            $this->load->view('shop/display_cart', $data);\n        }\n\n        public function update_cart() {\n            $data = array();\n            $i = 0;\n\n            foreach($this->input->post() as $item) {\n                    $data[$i]['rowid']  = $item['rowid'];\n                    $data[$i]['qty']    = $item['qty'];\n                    $i++;\n            }\n\n            $this->cart->update($data);\n            redirect('shop/display_cart');\n        }\n\n        public function display_cart() {\n            $this->load->view('shop/display_cart');\n        }\n\n        public function clear_cart() {\n            $this->cart->destroy();\n            redirect('index');\n        }\n    }\n    ```", "```php\n    <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n    class Shop_model extends CI_Model {\n\n        function __construct() {\n            parent::__construct();\n            $this->load->helper('url');\n        }\n\n        public function get_product_details($product_id) {\n            $this->db->where('product_id', $product_id);\n            $query = $this->db->get('products');\n            return $query;\n        }\n\n        public function get_all_products() {\n            $query = $this->db->get('products');\n            return $query;\n        }\n    }\n    ```", "```php\n    <?php echo form_open('shop/update_cart'); ?>\n\n    <table cellpadding=\"6\" cellspacing=\"1\" style=\"width:50%\" border=\"1\">\n\n      <tr>\n        <th>Quantity</th>\n        <th>Description</th>\n        <th>Item Price</th>\n        <th>Sub-Total</th>\n      </tr>\n\n      <?php $i = 1; ?>\n\n      <?php foreach ($this->cart->contents() as $items): ?>\n\n        <?php echo form_hidden($i . '[rowid]', $items['rowid']); ?>\n\n        <tr>\n          <td><?php echo form_input(array('name' => $i . '[qty]', 'value' => $items['qty'], 'maxlength' => '3', 'size' => '5')); ?></td>\n          <td>\n            <?php echo $items['name']; ?>\n\n            <?php if ($this->cart->has_options($items['rowid']) == TRUE): ?>\n\n              <p>\n                <?php foreach ($this->cart->product_options($items['rowid']) as $option_name => $option_value): ?>\n\n                  <strong><?php echo $option_name; ?>:</strong> <?php echo $option_value; ?><br/>\n\n                <?php endforeach; ?>\n              </p>\n\n            <?php endif; ?>\n\n          </td>\n          <td><?php echo $this->cart->format_number($items['price']); ?></td>\n          <td>$<?php echo $this->cart->format_number($items['subtotal']); ?></td>\n        </tr>\n\n        <?php $i++; ?>\n\n      <?php endforeach; ?>\n\n      <tr>\n        <td colspan=\"2\"> </td>\n        <td><strong>Total</strong></td>\n        <td>$<?php echo $this->cart->format_number($this->cart->total()); ?></td>\n      </tr>\n\n    </table>\n\n    <p><?php echo form_submit('', 'Update Cart'); ?></p>\n    <?php echo form_close() ; ?>\n    ```", "```php\n    <body>\n        <table>\n        <?php foreach ($query->result() as $row) : ?>\n            <tr>\n            <td><?php echo $row->product_id ; ?></td>\n            <td><?php echo $row->product_name ; ?></td>\n            <td><?php echo $row->product_description ; ?></td>\n            <td><?php echo anchor('shop/add/'.$row->product_id, 'Add to cart') ; ?></td>\n            </tr>\n        <?php endforeach ; ?>\n        </table>\n    </body>\n    ```", "```php\nCREATE TABLE IF NOT EXISTS `categories` (\n  `cat_id` int(11) NOT NULL AUTO_INCREMENT,\n  `cat_name` varchar(50) NOT NULL,\n  PRIMARY KEY (`cat_id`)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3;\n\nINSERT INTO `categories` (`cat_id`, `cat_name`) VALUES\n(1, 'Shirts'),\n(2, 'Footware');\n```", "```php\n    <?php echo form_open('shop/index') ; ?>\n      <select name=\"cat\">\n        <?php foreach ($cat_query->result() as $cat_row) : ?>\n           <option value=\"<?php echo $cat_row->cat_id;?>\"><?php echo $cat_row->cat_name;?></option>\n        <?php endforeach ; ?>\n     </select>\n    <?php echo form_submit('', 'Search') ; ?>\n        <?php echo form_close() ; ?>\n    ```", "```php\n        <?php echo form_open('shop/index') ; ?>\n            <select name=\"cat\">\n                <?php foreach ($cat_query->result() as $cat_row) : ?>\n                    <option value=\"<?php echo $cat_row->cat_id;?>\"><?php echo $cat_row->cat_name;?></option>\n                <?php endforeach ; ?>\n            </select>\n        <?php echo form_submit('', 'Search') ; ?>\n        <?php echo form_close() ; ?>\n    ```", "```php\n        public function index() {\n            $this->load->library('form_validation');\n            $this->form_validation->set_error_delimiters('', '<br />');\n\n            if ($this->input->post()) {\n                $category_id = $this->input->post('cat');\n            } else {\n                $category_id = null;\n            }\n\n            $this->form_validation->set_rules('cat', 'Category', 'required|min_length[1]|max_length[125]|integer');\n\n            if ($this->form_validation->run() == FALSE) {\n                $data['query'] = $this->Shop_model->get_all_products($category_id);\n                $data['cat_query'] = $this->Shop_model->get_all_categories();\n                $this->load->view('shop/display_products', $data); \n            } else {\n                $data['query'] = $this->Shop_model->get_all_products($category_id);\n                $data['cat_query'] = $this->Shop_model->get_all_categories();\n                $this->load->view('shop/display_products', $data);\n            }\n        }\n    ```", "```php\n    public function add() {\n            $product_id = $this->uri->segment(3);\n            $query = $this->Shop_model->get_product_details($product_id);\n            foreach($query->result() as $row) {\n                $data = array(\n                    'id' => $row->product_id,\n                    'qty' => 1,\n                    'price' => $row->product_price,\n                    'name' => $row->product_name,\n                 );\n            }\n\n            $this->cart->insert($data);\n     $data['cat_query'] = $this->Shop_model->get_all_categories();\n\n            $this->load->view('shop/display_cart', $data);\n        }\n    ```", "```php\n    public function display_cart() {\n     $data['cat_query'] = $this->Shop_model->get_all_categories();\n            $this->load->view('shop/display_cart', $data);\n        }\n    ```", "```php\n    public function get_all_products($category_id = null) {\n            if ($category_id) {\n                $this->db->where('category_id', $category_id);\n            }\n            $query = $this->db->get('products');\n            return $query;\n        }\n    ```", "```php\n    public function get_all_categories() {\n            $query = $this->db->get('categories');\n            return $query;\n        }\n    ```", "```php\n  if ($this->input->post()) { \n            $category_id = $this->input->post('cat'); \n        } else { \n            $category_id = null; \n        }\n```", "```php\n    CREATE TABLE IF NOT EXISTS `customer` (\n      `cust_id` int(11) NOT NULL AUTO_INCREMENT,\n      `cust_first_name` varchar(125) NOT NULL,\n      `cust_last_name` varchar(125) NOT NULL,\n      `cust_email` varchar(255) NOT NULL,\n      `cust_created_at` int(11) NOT NULL,\n      `cust_address` text NOT NULL COMMENT 'card holder address',\n      PRIMARY KEY (`cust_id`)\n    ) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n    CREATE TABLE `orders` (\n      `order_id` int(11) NOT NULL AUTO_INCREMENT,\n      `cust_id` int(11) NOT NULL,\n      `order_details` text NOT NULL,\n      `order_created_at` int(11) NOT NULL,\n      `order_closed` int(1) NOT NULL COMMENT '0 = open, 1 = closed',\n      `order_fulfilment_code` varchar(255) NOT NULL COMMENT 'the unique code sent to a payment provider',\n      `order_delivery_address` text NOT NULL,\n      PRIMARY KEY (`order_id`)\n    ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1;\n    ```", "```php\n    <?php if (!defined('BASEPATH')) exit('No direct script access allowed');\n\n    class Cust extends CI_Controller {\n        function __construct() {\n            parent::__construct();\n            $this->load->library('cart');\n            $this->load->helper('form');\n            $this->load->helper('url');\n            $this->load->helper('security');\n            $this->load->model('Shop_model');\n        }\n\n        public function index() {\n            redirect('cust/user_details');\n        }\n\n        public function user_details() {\n            $this->load->library('form_validation');\n            $this->form_validation->set_error_delimiters();\n\n            // Set validation rules\n            $this->form_validation->set_rules('first_name', 'First Name', 'required|min_length[1]|max_length[125]');\n            $this->form_validation->set_rules('last_name', 'Last Name', 'required|min_length[1]|max_length[125]');\n            $this->form_validation->set_rules('email', \n              'Email Address', 'required|min_length[1]|max_length[255]|valid_email');\n            $this->form_validation->set_rules('email_confirm', 'Comfirmation Email Address', \n                'required|min_length[1]|max_length[255]|valid_email|matches[email]');\n            $this->form_validation->set_rules('payment_address', 'Payment Address', 'required|min_length[1]|max_length[1000]');\n            $this->form_validation->set_rules('delivery_address', 'Delivery Address', 'min_length[1]|max_length[1000]');\n\n            // Begin validation\n            if ($this->form_validation->run() == FALSE) {\n                $this->load->view('shop/user_details');\n            } else {\n                $cust_data = array(\n                'cust_first_name' => $this->input->post('cust_first_name'),\n                'cust_last_name' => $this->input->post('cust_last_name'),\n                'cust_email'=> $this->input->post('cust_email'),\n                'cust_address'  => $this->input->post('payment_address'),\n                'cust_created_at' => time());\n\n                $payment_code = mt_rand();\n\n                $order_data = array(\n                'order_details' => serialize($this->cart->contents()),\n                'order_delivery_address' => $this->input->post('delivery_address'),\n                'order_created_at' => time(),\n                'order_closed' => '0',\n                'order_fulfilment_code' => $payment_code,\n                'order_delivery_address' => $this->input->post('payment_address'));\n\n                if ($this->Shop_model->save_cart_to_database($cust_data, $order_data)) {\n                    echo 'Order and Customer saved to DB';\n                } else {\n                    echo 'Could not save to DB';\n                }\n            }\n        }\n    }\n    ```", "```php\n        public function save_cart_to_database($cust_data, $order_data) {\n            $this->db->insert('customer', $cust_data);\n            $order_data['cust_id'] = $this->db->insert_id();\n            if ($this->db->insert('orders', $order_data)) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    ```", "```php\n    <?php echo anchor('cust/user_details', 'Proceed to checkout') ; ?>\n    ```", "```php\n    <body>\n        <?php echo validation_errors(); ?>\n        <?php echo form_open('/cust/user_details') ; ?>\n            <?php echo form_input(array('name' => 'first_name', 'value' => 'First Name', 'maxlength' => '125', 'size' => '50')); ?><br />\n            <?php echo form_input(array('name' => 'last_name', 'value' => 'Last Name', 'maxlength' => '125', 'size' => '50')); ?><br />\n            <?php echo form_input(array('name' => 'email', 'value' => 'Email Address', 'maxlength' => '255', 'size' => '50')); ?><br />\n            <?php echo form_input(array('name' => 'email_confirm', 'value' => 'Confirm Email', 'maxlength' => '255', 'size' => '50')); ?><br />\n            <?php echo form_textarea(array('name' => 'payment_address', 'value' => 'Payment Address', 'rows' => '6', 'cols' => '40', 'size' => '50')); ?><br />\n            <?php echo form_submit('', 'Enter') ; ?><br />\n            <?php echo form_close() ; ?>\n        </form>\n    </body>\n    ```"]