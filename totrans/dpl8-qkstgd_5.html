<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Making Drupal Even More Useful</h1>
                </header>
            
            <article>
                
<p>In the previous chapter we learned how to create content, the mainstay of the Drupal website. Creating content can be accomplished using a simple build-in process. <span>Drupal is fully usable out-of-the-box as a content management without the requirement of any customization. However, your site or business model can call for additional functionality. Perhaps you want to schedule events, or accept payments, or display a product catalog. For this reason, there is a galaxy of add-on features available that can be greatly increase its utility and flexibility.</span></p>
<p>Perhaps you have added functionality to your browser by way of a browser plugin, or to your smartphone by way of an app. With Drupal, feature expansion is also accomplished by pieces of add-on code, called modules. A module is arranged in a folder that contains program code and other files that, when placed in the correct location within the Drupal folder, provide a feature or service above and beyond those included with Drupal. As is the case with Drupal itself, modules are open source and free of charge, though some serve the purpose of connecting Drupal to a paid, third-party service.</p>
<p>Modules come from one of three sources:</p>
<ul>
<li><strong>Core</strong>: Included with Drupal, sometimes being optional to use</li>
<li><strong>Contributed</strong>: Not part of the core Drupal package, but typically made available from Drupal's module library at <a href="https://drupal.org/project/project_module">https://drupal.org/project/project_module</a></li>
<li><strong>Custom</strong>: Typically developed specifically for the site on which the module is used</li>
</ul>
<p class="mce-root"/>
<p class="mce-root"/>
<p><span>The modules cover a cornucopia of categories, features, and services, from social media integration to image editing and appointment scheduling. </span><span>This chapter explores a few of the more popular modules that extend Drupal's usefulness for users focused on content. </span>Custom modules are not within the scope of this book. <span>The modules that we will use and look at in this chapter are as follows:</span></p>
<ul>
<li><strong>Pathauto (contributed, but included with Drupal)</strong>: A<span>utomatically generates URI/path aliases for content based on rules created by you</span></li>
<li><strong>Paragraphs (contributed)</strong>: Provides an easy way to add pre-formatted pieces of content to your larger content </li>
<li><strong>Content moderation (core)</strong>: Facilitates a process for approving content before it can be published</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Pathauto</h1>
                </header>
            
            <article>
                
<p>There are many ways to install modules, and all require some administrative capability. The installation of the contributed module is outside the scope of this book. We'll start from the point of the module files being in the correct place.</p>
<p>Because the <span class="packt_screen">pathauto</span> module is included with Drupal, the files certainly will be present. We can verify this by navigating to <span class="packt_screen">Extend</span> on the admin menu, or <kbd>/admin/modules</kbd><span>. </span><span>Once there, enter</span> <span class="packt_screen">pathauto</span> <span>in the filter text box at the top of the page. You should see the following entry listed:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d036bc19-3618-48ae-8883-2641df3b1b6c.png" style="width:31.25em;height:9.50em;"/></p>
<p>Let's check the box beside it and click the <span class="packt_screen">Install</span> button. Depending on what other modules have been enabled on your site, you might receive the following message:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e115b72e-ca85-4b2b-b8b4-c75f97286781.png" style="width:28.75em;height:5.50em;"/></p>
<p>If you do receive this message, or a similar one when you are installing a module, it is because the module is dependent on other modules, and one or more of them isn't enabled. If the necessary modules are present, Drupal will offer to enable them as well. Simply click <span class="packt_screen">Continue</span>. In this case, if all goes well, you will receive a status message at the top of the reloaded page stating that three modules have been enabled: <span class="packt_screen">p<span class="packt_screen">athauto</span></span>, <span class="packt_screen">Chaos tools</span>, and <span class="packt_screen">Token</span>.</p>
<p>At this point, we can configure Pathauto. Most modules have a configuration page, but not all. Scroll down to the Pathauto entry, or use the filter text box to find it, and click the arrow just to the left of the module description. An accordion control will open and reveal a configuration link, among other things. Click it, and you will be redirected to Pathauto's configuration page at <kbd>/admin/config/search/path/patterns</kbd>. The page will be sparse, because no pattern exists yet. Let's create one.</p>
<p>Click the <span class="packt_screen">+</span><span class="packt_screen">A</span><span class="packt_screen">dd</span> <span class="packt_screen">Path</span><span class="packt_screen">auto</span> <span class="packt_screen">pattern</span> button. The resulting page, with the same title as the button that you just clicked, contains a dropdown selection that offers various entity types that are suitable for path patterns. Initially, the option are Content, Taxonomy, Term, and User. For any of those, a path pattern can be specified for creating meaningful URLs. We are going to create a pattern for Content, and select the same.</p>
<p>Our selection causes the page to change a bit, as each content type is now listed. You can check the box for Article, as we are creating a pattern for it.</p>
<p>We need to define the pattern that we want to use. There are many possibilities. We will choose a simple pattern. We'll have article URLs containing the word "content" and the article title in the form <kbd>content/my-article-title</kbd>. How will we get the article title to be used too? Click the link to <span class="packt_screen">Br</span><span class="packt_screen">owse</span> <span class="packt_screen">avail</span><span class="packt_screen">able</span> <span class="packt_screen">tokens</span>. </p>
<p>Tokens are placeholders that will make a specific type of value available at the proper time. A pop-up will appear that contains a number of token categories. We are interested in <em>Nodes</em>, so click the arrow beside it. An expanded list will appear, and in it you will find <em>Title</em>, referring to the title of the node, or in this case, the article title. To the right of that is a link containing the token for the node title, [node:title]. Click inside the pattern text box, and then click the link for the token. It will appear in the text box. Now, place your cursor to the left of the token and <span>type </span><kbd>content/</kbd>.</p>
<p>Lastly, type <em>articles</em> in the <span class="packt_screen">Label</span> text box to identify this pattern. The form should look similar to the following screenshot, though your content type list might vary:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/986aaba5-3a59-4a6b-ac43-fd697565273a.png" style="width:41.08em;height:26.92em;"/></p>
<p>Click <span class="packt_screen">Save</span> to save your pattern, and you will be returned to the pattern list, which will now have one entry. Let's test it by creating an article. Navigate to <kbd>/node/add/article</kbd>.</p>
<p>Add whatever title and body text you'd like. I'm naming my article <em>My New Article</em>. The magic comes when you save it. When I do, instead of having a URL like <kbd><em>http://d8quickstart/node/5</em></kbd>, I have <kbd><em>http://d8quickstart/content/my-new-article</em></kbd>. Note that the original URL will still exist and can still be used. The Pathauto list at /admin/config/search/path lists both the alias based on the pattern and the original URL for each node. In my case, the node I created has a node ID of 2, and so I could still enter <kbd>http://d8quickstart/node/2</kbd> as the URL if I so desired. </p>
<p>Notice that Pathauto automatically converted the article title to a URL-friendly string by replacing spaces with hyphens and making the title lower case. The settings for this can be controlled under the <span class="packt_screen">Settings</span> tab on the Pathauto config page. There is an addition tab there that is very important: <span class="packt_screen">B</span><span class="packt_screen">ulk</span> <span class="packt_screen">generate</span>. Let's say that you create a pattern <em>after</em> a number of nodes have already been created. Rather than editing each and changing the URL to match your pattern, you can instruct Drupal to generate a patterned URL for every existing article.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Paragraphs</h1>
                </header>
            
            <article>
                
<p>Paragraphs is a contributed module, which means that it was developed by someone in the Drupal community and was contributed back to Drupal.org. It provides a way to create pre-formatted content that can be easily reused. </p>
<p>Once the files have been deposited in the correct folder, which is typically in <kbd>/modules/contrib</kbd>, we will enable it as we did Pathauto, via the <span class="packt_screen">Extend</span> page at <kbd>/admin/modules</kbd>. You may receive a message indicating that the <em>Entry Reference Revisions</em> module must be enabled as well. Simply click <span class="packt_screen">Continue</span>.</p>
<p>Navigate to <span class="packt_screen">Structure</span> (<kbd>/admin/structure</kbd>) and you will see a new entry at the bottom of the list: <span class="packt_screen">Paragra</span><span class="packt_screen">ph</span> <span class="packt_screen">types</span>. Click on it, which will bring you to the <span class="packt_screen">Paragraph types</span> page at <kbd>/admin/structure/paragraphs_type</kbd>. You will see a message where a list would normally be indicating that there isn't a Paragraph type yet. So, let's create one.</p>
<p>Click on the <em><span class="packt_screen">+Add paragraph type</span></em> button. We're going to create a paragraph type for an image and text, so in the <em><span class="packt_screen">Label</span></em> text box let's enter <kbd>Image and text</kbd>, and then click <span class="packt_screen">Save and</span> <span class="packt_screen">manage fields</span>. We will need to create two fields for our Paragraph type: one to contain the image, and another for the text.</p>
<p>Click the <span class="packt_screen">+</span><span class="packt_screen">Add field</span> button. From the select list, choose <span class="packt_screen">Image</span>. You can enter <kbd>Image</kbd> as the label, or any value you would prefer. Click <span class="packt_screen">Save and continue</span>. Leave the settings on the page that follows as is, and click <span class="packt_screen">Save field settings</span>. On the next settings page, leave those as is too, and click the <span class="packt_screen">Save settings</span> button.</p>
<p>Click the <span class="packt_screen">+A</span><span class="packt_screen">dd</span> <span class="packt_screen">field</span> button once more. Choose <span class="packt_screen">T</span><span class="packt_screen">ext</span> (<span class="packt_screen">format</span><span class="packt_screen">ted,</span> <span class="packt_screen">long</span>) from the select list, and enter <span class="packt_screen">body text</span> for the label. Click the <span class="packt_screen">Sa</span><span class="packt_screen">ve</span> <span class="packt_screen">a</span><span class="packt_screen">nd</span> <span class="packt_screen">continue</span> button, and the on the following page, click the <span class="packt_screen">Save field settings</span> button. Finally, click the <span class="packt_screen">S</span><span class="packt_screen">ave</span> <span class="packt_screen">settings</span> button. We now have our paragraph type defined.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>The list page will look something like it does in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d5155faa-10f7-430c-a64c-e91efbcc4d8e.png" style="width:39.17em;height:8.50em;"/></p>
<p>At this point, we have defined a paragraph type. Now, we need to add it to a content type so that users creating that type of content can use the paragraph type. Let's navigate to <span class="packt_screen">Structure</span> | <span class="packt_screen">Content types</span> (<kbd>/admin/structure/types</kbd>) and click <span class="packt_screen">Manage fields</span> beside the <span class="packt_screen">Article</span> content type.</p>
<p>Click <span class="packt_screen">+</span><span class="packt_screen">Add field</span> and from the <span class="packt_screen">Ad</span><span class="packt_screen">d</span> <span class="packt_screen">a new field</span> select list, choose <span class="packt_screen">Paragraph</span>. For the label, let's enter <kbd>Paragraph type</kbd>, and click <span class="packt_screen">Save and continue</span>. Leave the settings on the following page as is, though make certain that the <span class="packt_screen">Type of item to reference</span> field has <span class="packt_screen">Paragraph</span> selected. Click <span class="packt_screen">Save field settings</span>. </p>
<p>On the next page, <span class="packt_screen">Paragraph type settings</span>, in the <span class="packt_screen">REFERENCE TYPE</span> section, we identify which paragraph type(s) should be offered as choices to the content creator. By default, checking a box in the <span class="packt_screen">TYPE</span> subsection will indicate the inclusion of that type. We also have the option of indicating that any checked box be a type that we want <em>excluded</em> from the choices provided to the user. We will use the default method of inclusion, and check the one box available to us, given that we created only a single paragraph type, that is, <span class="packt_screen">Image and text</span>, as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/def4b49f-3d50-466e-a5b4-627268542fb6.png" style="width:30.67em;height:17.75em;"/></p>
<p class="mce-root"/>
<p>Click <span class="packt_screen">Save Settings</span>. Now, let's create an article at <span class="packt_screen">Cont</span><span class="packt_screen">ent</span><em><span class="packt_screen"> </span></em><span class="packt_screen">|</span><span class="packt_screen"> C</span><span class="packt_screen">reate</span> <span class="packt_screen">cont</span><span class="packt_screen">ent</span><em><span class="packt_screen"> </span></em><span class="packt_screen">|</span> <span class="packt_screen">Article</span> (<kbd>/node/add/article</kbd>). Give the article a title. Scroll down and you will see that a <em><span class="packt_screen">PARAGRAPH TYPE</span></em> section has been added, containing the <span class="packt_screen">Image and text</span> Paragraph type that we created. If we had created additional paragraph types, and marked them to be included as options, they would also be present. In that case, had we decided in creating this article that we wanted to use more than one of the paragraph types, the handle to the left of the type name could be used to drag the types into the order in which they should appear within the content.</p>
<p>Click the <span class="packt_screen">Choose</span> <span class="packt_screen">file</span> button for <em><span class="packt_screen">Image</span></em> and browse to an image to include. Remember to provide alternative text for the image. Then, enter the text that will go with this image <span>into the</span> <span class="packt_screen">bo</span><span class="packt_screen">dy</span> <span class="packt_screen">text</span> <span>box</span>. Note that this field has a WYSIWYG editor available for formatting.</p>
<p>Below the image and text that we've entered is a button that we can use to add another paragraph. If we only wanted the user to be able to add one instance of a paragraph type within a piece of content, we could have changed <span class="packt_screen">Unlimited</span> to 1 instance in the field settings when creating the field. </p>
<p>Click the <span class="packt_screen">Save</span> button. When we look at the rendered article, it doesn't look quite like what we had in mind when creating the paragraph type. My image is massive, and both fields have their titles showing. Let's do something about this. </p>
<p>Navigate to <span class="packt_screen">Structu</span><span class="packt_screen">re</span>|<span class="packt_screen">Paragraphs</span> <span class="packt_screen">types</span> (<kbd>/admin/structure/paragraphs_type</kbd>) and select <span class="packt_screen">M</span><span class="packt_screen">anage</span> <span class="packt_screen">display</span> from the select field. Click the settings gear on the right-hand side of the <span class="packt_screen">Image</span> row. In the select field for <span class="packt_screen">Label</span>, select <span class="packt_screen">Hidden</span>, and select <span class="packt_screen">Me</span><span class="packt_screen">dium</span> (<span class="packt_screen">220x220</span>) from the one for <span class="packt_screen">Im</span><span class="packt_screen">age</span> <span class="packt_screen">style</span>. </p>
<div class="packt_tip">You can create additional image styles at <kbd>admin/config/media/image-styles</kbd>.</div>
<p>Click the <span class="packt_screen">Update</span> button to save your changes. Then, in the row for <span class="packt_screen">body text</span>, select<em> </em><span class="packt_screen">Hidden</span> from the <span class="packt_screen">Label</span> select field. Click the <span class="packt_screen">Save</span> button.</p>
<p>That takes care of the display settings for the fields <em>in</em> the paragraph, but we also want to change a setting for the <span class="packt_screen">Paragraph</span> field, itself. It, too, displayed its field name, which isn't the behavior we want. So, navigate to <span class="packt_screen">Structure</span> | <span class="packt_screen">Content types</span> (<kbd>/admin/structure/types</kbd>) and select <span class="packt_screen">Manage display</span> from the select field beside <em><span class="packt_screen">Article</span></em>. For the <em><span class="packt_screen">Paragraph type</span></em> field, change the <span class="packt_screen">Label</span> setting to <span class="packt_screen">Hidden</span>, and then click <span class="packt_screen">Save</span>.</p>
<p class="mce-root"/>
<p>Now, when we look at the preview, it is what we had expected: an image on the left with text on the right:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/adaf81c3-0b2c-49f4-ae13-6832800fe85d.png" style="width:31.17em;height:17.75em;"/></p>
<p>Had we wanted it the other way around, we could edit the <span class="packt_screen">Paragraph type</span> and swap the order of the image and text fields within it. There is virtually no limit to the number of fields that can be contained with a Paragraph type, nor the number of Paragraph types that can be created. </p>
<div class="packt_tip">When you enabled the Paragraphs module, another module listed just below it was Paragraphs library. Enabling that module will enable you to store your created paragraph types in a library of types so that it can be easily selected and reused for other content types.</div>
<p>Having successfully created, edited, and used our Paragraph type, let's move on to the final example in this chapter.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Content moderation</h1>
                </header>
            
            <article>
                
<p> Often, an organization requires the path to published content to be indirect. Rather than the author being able to publish the piece, it must first be moderated, whether by a supervisor, peer, or editor. The <em>Content Moderation</em> module introduces the ability to inject moderation into the process of publishing content.</p>
<p><em>Content Moderation</em> is a module <em>in core</em>, meaning that it is included in the main programming code that defines Drupal. Navigate back to the <span class="packt_screen">Extend</span> page (<kbd>/admin/modules</kbd>) and enable <span class="packt_screen">Con</span><span class="packt_screen">tent</span> <span class="packt_screen">moderation</span>. You will receive a message that states in order to do so, <em>Workflows</em> must also be enabled.</p>
<p class="mce-root"/>
<p>Let's configure the module. Having enabled it, there is now a new section on the <span class="packt_screen">Configuration</span> page (<kbd>/admin/config</kbd>): <span class="packt_screen">Workflows</span>. Click that, or navigate directly to <kbd>/admin/config/workflow/workflows</kbd>. Here, you will see a content moderation workflow that was created when you enabled the module:</p>
<p class="mce-root CDPAlignCenter CDPAlign"><img src="assets/29beecaf-c36c-4f9e-ab73-ceb24db4c85d.png"/></p>
<p>Click <span class="packt_screen">Edit</span>; here, we will take a detailed look at the sections of a workflow.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">States</h1>
                </header>
            
            <article>
                
<p>The term <em>state</em> is lacking in context here and therefore can be somewhat ambiguous. For example, if I decide to walk to the store from my home, there are three states:</p>
<ul>
<li>Being at home</li>
<li>Walking to the store</li>
<li>Arriving at the store</li>
</ul>
<p>However, state, in the context of workflows, isn't necessarily the same. The default context is that state is synonymous with <em>static</em> state. Let's take another look at my example, this time with the states described with further precision:</p>
<ul>
<li>Being at home - static</li>
<li>Walking to the store - transitional</li>
<li>Arriving at the store - static</li>
</ul>
<p>States 1 and 3 represent static states <span>– </span>milestones and plateaus <span>–</span> that have been achieved and can remain as such. State 2 is transitional, in that it describes an activity that is occurring to lead from one static state to the next.</p>
<p class="mce-root"/>
<p>In looking at the states, as shown in the following screenshot, all three are static states:</p>
<ul>
<li><strong>Draft</strong>: The content has been, or is in the process of being, created</li>
<li><strong>Published</strong>: The content is marked as published and is available to those user roles with permission to view published content of this type</li>
<li><strong>Archived</strong>: The content has been published but is now removed from what is considered current material and may or may not be still available for viewing:</li>
</ul>
<p class="mce-root CDPAlignCenter CDPAlign"><img src="assets/b6331415-4999-4a2a-9404-562fe429854e.png" style="width:27.42em;height:11.42em;"/></p>
<div class="packt_tip">Notice that the Archived state has a select dropdown, while Draft and Published do not. That is because the former is an optional state, which can be deleted using the dropdown, but Draft and Published are not optional.</div>
<p>As you can see, the three states are static. That said, were a transitional state to be needed, it could be created by using the <span class="packt_screen">Add a new state</span> link.</p>
<p>Let's take a closer look at what constitutes a state. Click on the <span class="packt_screen">Edit</span> link for <span class="packt_screen">Published</span>. The name, Published, can be changed if there is a more fitting term for your implementation. The two checkboxes that follow are important:</p>
<ul>
<li><strong>Published</strong>: Whether this term is used for the state, or another if you were to change the State label, checking this box means that when this state is reached, the content is considered published, and the permissions given to each user role with regards to published content apply, typically and particularly in that the content will be available for viewing.</li>
<li><strong>Default revision</strong>: In Drupal, if the content type being used has been configured to allow revisions, each time the content is (re)saved, a new revision is created, and anyone with the proper permission can revert the content to an earlier version. If this box is checked, the current version when the state of the content reaches published will be considered the active version.</li>
</ul>
<p>Next come the transitions. Let's look at <span class="packt_screen">Create new draft</span>, as its inclusion hear is probably not intuitive. Click on the <span class="packt_screen">Edit</span> link for it. Again, the label is editable should you have one more suited for your process.</p>
<p>Below the label, you see choices for the <em>From</em>, source, state and the <em>To</em>, target, state.  The target state for this transition is Draft and is not changeable, though were you to create your own transition, it would be. In either case, only one target state can be defined, since <em>the content can only be in one state at any time</em>.</p>
<p>More than source state can be selected. The two source states selected might not seem to make sense, given that the target is Draft. However, what events these choices account for are as follows:</p>
<ul>
<li>Changing a draft and saving, with it remaining a draft, so <span class="packt_screen">Draft ⇒ Draft</span></li>
<li>Changing published content and saving it, but now as unpublished content needing moderation again, so <span class="packt_screen">Published ⇒ Draft</span></li>
</ul>
<p>A similar peculiarity is true for the transitions of the Publish transition, because you might be (re)publishing already published content, or publishing draft content. </p>
<p>A benefit to this architecture is that while an article is published, a new version of it can be created as a draft and passed through the moderation states until it gets published, becoming the new default—and viewable—version.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Transitions</h1>
                </header>
            
            <article>
                
<p>We have already seen the <span class="packt_screen">Edit</span> page for a transition, but this section is still worth looking at. You will note that there are multiple transitions defined with the source state being Published, as well as for the source state being Archived. Were you to add a few states, and if each of them could interact with multiple other states, this list of permutations could become lengthy. Not that this is a reason to not define additional states, but simply a mention that more planning might be in order than you might have otherwise thought.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Workflow application</h1>
                </header>
            
            <article>
                
<p>A workflow such as this one needs to have something to act upon. At the moment, this does not apply to any of the content structures available for moderation:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/96ed7a44-9be1-443d-a419-53516b42b3b0.png" style="width:20.25em;height:10.25em;"/></p>
<p>For our purposes, this workflow should apply to all articles, so let's click the <span class="packt_screen">Select</span> button for Content types. In the resulting pop-up, check the box beside <span class="packt_screen">Articles</span> and click <span class="packt_screen">Save</span>. Then, click <span class="packt_screen">Save</span> for this workflow.</p>
<p>If you create an article now, you might have the option to save it as Draft or Published, as select options at the bottom of the page. If so, this is because you are an administrator or have been given this permission. Otherwise, you will only be able to save the content as draft. Those given the permission to moderate this content or to view it, unpublished, will see the following screenshot when viewing it:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/23a23d71-0529-4ca0-8733-bd3508db86f4.png" style="width:37.42em;height:24.67em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>This form allows the moderator to change the state of the content and add a log comment about the transition.</p>
<p> </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we have learned what modules are and their utility, their sources, and how to enable them. We have looked at an example of using each of three popular modules to provide capabilities that are not present otherwise.</p>
<p>In the next chapter, we will look at expanding the audience for our content by making it and our site's UI available in more languages via some of the internationalization features of Drupal. </p>
<p>¡Hasta la vista!</p>


            </article>

            
        </section>
    </body></html>