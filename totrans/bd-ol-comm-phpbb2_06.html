<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Creating Your Own Template"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Creating Your Own Template</h1></div></div></div><p>Making your own template can be not just very interesting, but also time consuming. There are many small details just waiting to be overlooked, and that is why I advise you not to rush through it too fast. Take your time, and the reward will come at the end.<a id="id184" class="indexterm"/>
</p><p>As with many other design-related projects, one of the most challenging things about creating an appealing phpBB template is to get the idea for the layout. You might already have a homepage and would like to apply that layout, but many times I have seen people building the rest of their site around the layout of their phpBB template.</p><p>That is why, in this chapter, we will start from scratch by telling you how to go about getting the basic layout idea into building the entire template.<a id="id185" class="indexterm"/>
</p><p>Let me start by saying that inspiration, and the whole creative process itself, is not some precious gift that very few people are endowed with. It is something everybody can learn in time, with practice and some patience. Find some layout ideas and tweak them until you are satisfied with the result; the more time you spend doing this, the more you will learn about yourself: what you like and what you don’t. Soon you will have developed your own style that you can turn almost anything into.</p><p>There is a limitless amount of places to begin looking for your future phpBB template layouts; magazines, newspapers, advertisings, homepages, constructions, art, or even basic wallpapers are just<span class="emphasis"><em> some</em></span> of the inspiration sources I have found useful. Spending half an hour in a coffee shop with a pen drawing lines on a napkin can reveal the most appealing layout of all. It all depends on how "far" you’re willing to go with this, even though I doubt anyone can build a good template layout based on things like… a teapot!</p><p>For the kind of layout needed in a phpBB template, you should try to look for patterns you can use. For example, we need something that can show topics and posts, maybe with room for an image and a menu.</p><p>The template I’m going to build in this chapter is based on an idea I got from a newspaper. It wasn’t that complicated really: just a photo, a headline, and some text, which I drew a sketch of on a piece of paper so I wouldn’t forget. I liked the simplicity, the lines, and the rather big image. And even though it might not look like a phpBB template at first glance, I will try anyway, while showing you how to work around any obstacles that are bound to bump up on the way:<a id="id186" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/1132_06_01.jpg" alt="Creating Your Own Template"/></div><div class="section" title="Sketching the Layout"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec01"/>Sketching the Layout</h1></div></div></div><p>The first thing I am going to do is to put together a rough, basic layout of the template in Photoshop. It doesn’t have to be precise or exact, but enough to get an estimated look of the template. There are some important things that need to be decided upon first, starting with the width of the layout. Making it 100% wide is a very popular choice for HTML sites and templates, but it may not be such a good idea for this layout because of the image at the top. I need a fixed size. Also, in order to keep everything from getting too large, I have decided to shrink the entire layout down to a width of just 780 pixels. That will leave some "air" on the sides of the forum and also look more like a paper-based layout. With this width there are 20 pixels allocated to the scrollbar, for those who have screen resolution 800x600 pixels.<a id="id187" class="indexterm"/>
</p><p>For the big image at the top, I had an old PSD image that I made for a Photoshop contest long time ago. I have always wanted to use this image for one of my projects and this seemed to be a good opportunity. The format of the image is 717x231 pixels, which fits nicely, neither too big nor too small.</p><p>Under the image will come the menu. The forum tables under the black lines won’t look good with the same color as the background, so instead I give them a light gray shade.</p><p>It is hard to get a good color feeling going, since the colors of my PSD image don’t match the rest of the template layout. After some trials with new background and forum colors that could match the image, I end up changing the image into an empty gray box, so as to match the light gray color of the forum. However, I still feel this is not the best solution; it looks much too empty.</p><p>Playing around with some Photoshop brushes eventually leads me to a brush with some paint spills, and with red color I manage to get something that looks like nosebleed. A bit morbid maybe, but it looks quite good, simple, and neat. I add the title ‘NoseBleed’ with a font I find well-fitted for the image, making it more dynamic.</p><p>There is no need to get into too many details at this early stage; it is quite easy to change images and colors later on if you get better ideas. After all, this is just a sketch!</p><p>I am still not sure if I want a colored background or maybe even a background image for the white "air" on each side of the forum, so I leave the option open. For now though, we keep it as simple as possible; all white.</p><div class="mediaobject"><img src="graphics/1132_06_02.jpg" alt="Sketching the Layout"/></div><p>With the sketch finished, I cut out the image and save it as<code class="literal"> top_image.jpg</code>, so that we can begin creating the template.</p></div></div>
<div class="section" title="TPL Stands for Template"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec02"/>TPL Stands for Template</h1></div></div></div><p>Each page in the browser is made up of three<code class="literal"> .tpl</code> files, consisting of HTML code, cascading style sheet code (CSS), and phpBB variables. The first file is always the<code class="literal"> overall_header.tpl</code>, and the last one is always the<code class="literal"> overall_footer.tpl</code>. The middle of these three<code class="literal"> .tpl</code> files displays the actual content of what we can see on that specific page. If, for example, we are viewing the index page of the forum, what we see is the code of<code class="literal"> overall_header.tpl, index_body.tpl</code>, and<code class="literal"> overall_footer.tpl</code> put together. Or if we go to the login page, the .tpl files shown are<code class="literal"> overall_header.tpl, login_body.tpl</code>, and<code class="literal"> overall_footer.tpl</code>, and so on. This is quite handy since we only need to edit one<code class="literal"> .tpl</code> file, the<code class="literal"> overall_header.tpl</code>, in order to make changes in the top part of all the pages shown by the browser.<a id="id188" class="indexterm"/>
</p><p>Think of it as if you were to write a letter on a piece of business paper. The paper would already have the company name, logo, and address at the top (<code class="literal">overall_header.tpl</code>), and maybe also an address line at the bottom (<code class="literal">overall_footer.tpl</code>). You would write your individual message in the middle (the middle <code class="literal">.tpl</code> file). No matter how many letters you wrote, and no matter how different the content of the letters was, you would always have the same header and footer. It’s the<code class="literal"> .tpl</code> in the middle that brings the phpBB forum to life.</p><p>However, before we start editing any files, we make a copy of the<code class="literal"> subSilver</code> folder in the phpBB templates directory, and name it<code class="literal"> NoseBleed</code>. With a copy we can always go back and get hold of the original<code class="literal"> .tpl</code> file, should something go wrong.</p></div>
<div class="section" title="Making Your Template Folder"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec03"/>Making Your Template Folder</h1></div></div></div><p>In order to make phpBB recognize the new<code class="literal"> NoseBleed</code> folder as a unique template, we need to edit some of the files. In the folder, there is a file named<code class="literal"> subSilver.cfg</code>, which we rename to<code class="literal"> NoseBleed.cfg</code>. We also rename<code class="literal"> subSilver.css</code> to<code class="literal"> NoseBleed.css</code>, even though there is no need for this file right now. Lastly we need to replace every instance of<code class="literal"> subSilver</code> in the<code class="literal"> theme_info.cfg</code> file with<code class="literal"> NoseBleed</code>. If you are using WordPad for this, you can press<span class="emphasis"><em> CTRL+H</em></span> to bring up the<span class="strong"><strong> Replace All</strong></span> window, making this a fast edit.<a id="id189" class="indexterm"/>
</p><p>We can now upload and install the new template from the Administration Panel.</p></div>
<div class="section" title="Editors for .tpl Documents"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec04"/>Editors for .tpl Documents</h1></div></div></div><p>The code being used in the<code class="literal"> .tpl</code> files is basically, as mentioned earlier, HTML code. If you already have some knowledge of basic HTML and CSS, you have nothing to fear, and if you don’t, don’t worry. We will go through the process with detailed explanations on the way.<a id="id190" class="indexterm"/>
</p><p>For this chapter we are using Notepad to edit<code class="literal"> .tpl</code> files. We could also use a WYSIWYG editor for editing, like Dreamweaver. It can have some advantages like being able to see an approximated view of the layout while coding. However, I don’t recommend using the code that these editors can insert automatically, since there is a chance that phpBB can conflict with this kind of code. We could also use Word, WordPad, or any other text editor, as long as we remember to save the document as plain ASCII code, since phpBB can not read rich-text formatted<code class="literal"> .tpl</code> files.</p><p>Start by opening the<code class="literal"> overall_header.tpl</code> from the<code class="literal"> NoseBleed</code> folder; this is the file that will contain the top layout appearing on every page. Remember not to be nervous if this is your first time with HTML; it’s really not as difficult as it might seem at a first glance. At the top of the code you’ll find the part telling your browser that this is an HTML document. We then have the title of the page, the CSS code, and then at the bottom, we have the HTML code that will display our layout. When phpBB loads a<code class="literal"> .tpl</code> file, it fills in the phpBB variables from the database. These variables all have capital letters and always look like this:<code class="literal"> {PHPBB_VARIABLE}</code>.</p><p>Between the <code class="literal">&lt;style type="text/css"&gt;</code> and <code class="literal">&lt;/style&gt;</code> code tags, you will find all the CSS code, e.g.:</p><div class="informalexample"><pre class="programlisting">/* Name of poster in viewmsg.php and viewtopic.php and other places */
.name { font-size : {T_FONTSIZE2}px; color : {T_BODY_TEXT};}
</pre></div><p>If you put code between the<code class="literal"> /*</code> and<code class="literal"> */</code> tags in CSS, it will be ignored by the browser. You can use this if you want to leave comments for yourself or others. The particular CSS style above is called<code class="literal"> .name</code>. The dot before<code class="literal"> name</code> is not a type error, but something you should be aware of when you’re going to add your own style. A CSS style named<code class="literal"> .table</code> would only affect those areas of your HTML document where it is applied, e.g.:</p><div class="informalexample"><pre class="programlisting">&lt;span class="table"&gt;Some text here&lt;/span&gt;
</pre></div><p>However, a CSS style named<code class="literal"> table</code> with no dot would have an effect on every table of your HTML document.</p><p>But let us get started building our template!</p></div>
<div class="section" title="Ready, Set, Go!"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec05"/>Ready, Set, Go!</h1></div></div></div><p>With the sketch at hand, the best way to create a template is to simply follow the sketch, starting from the top and working our way down to the bottom. As mentioned earlier, the<code class="literal"> overall_header.tpl</code> always contains the top part of each page you’ll see in the browser, so this is the one we will work on first. In<code class="literal"> subSilver</code>, this file already shows an image and the menu, a good approach that we will keep the same for our own template.<a id="id191" class="indexterm"/>
</p><p>Open the<code class="literal"> overall_header.tpl</code> file and scroll down to where the <code class="literal">&lt;body&gt;</code> begins (the section up to this tag is the CSS, which we will get to later).</p><p>The first thing we need to do is to make sure that the template stretches out entirely in the browser. By default, the browser adds a margin to the top and to the left of the page, but we can get rid of this by setting the<code class="literal"> topmargin</code> and<code class="literal"> leftmargin</code> to zero. We can do this by modifying the <code class="literal">&lt;body&gt;</code> tag as follows:</p><div class="informalexample"><pre class="programlisting">&lt;body bgcolor="{T_BODY_BGCOLOR}" text="{T_BODY_TEXT}"
link="{T_BODY_LINK}" vlink="{T_BODY_VLINK}"
leftmargin="0" topmargin="0"&gt;
</pre></div><p>The next thing worth noticing in the template is the <code class="literal">&lt;a name="top"&gt;&lt;/a&gt;</code> link tag. If we add the following link:</p><div class="informalexample"><pre class="programlisting">&lt;a href="top"&gt;Go to top!&lt;/a&gt;
</pre></div><p>... anywhere else in the template, the browser will take you (on clicking the link) to <code class="literal">&lt;a name="top"&gt;&lt;/a&gt;</code>, in this case to the top of our page, where it is located.</p><p>Then we have the table structure of the template. The first table starts with:</p><div class="informalexample"><pre class="programlisting">&lt;table width="100%" cellspacing="0" cellpadding="10" border="0" align="center"&gt;
&lt;tr&gt;
&lt;td class="bodyline"&gt;
</pre></div><p>... but it apparently has no end. This is not an error; it is because this table surrounds the entire forum, including the content that will be loaded after the<code class="literal"> overall_header.tpl</code>.<a id="id192" class="indexterm"/>
</p><p>You can find the end of this table:</p><div class="informalexample"><pre class="programlisting">&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>... in the<code class="literal"> overall_footer.tpl</code> file.</p><p>Next we change the width of the table surrounding the entire forum. This width is set to 100% in the subSilver template, but we only want it to be 780 pixels for our template. We also add a height of 100% to stretch the template from top to bottom in our browser:<a id="id193" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="780" height="100%" cellspacing="0"
cellpadding="10" border="0" align="center"&gt;
&lt;tr&gt;
&lt;td class="bodyline" valign="top"&gt;
</pre></div><p>The table will now cause all content inside it to appear ten pixels from the table borders, because of the size of the<code class="literal"> cellpadding</code>. We changed the width to 780 pixels instead of 100%, and add the height 100%, in case we later decide on adding a background image or color on each side of the forum. Since the content, by default, is horizontally aligned in the middle of the table—which is now 100% in height—we need to align it so that it appears at the top. We can do this by adding a<code class="literal"> valign</code> tag in the first <code class="literal">&lt;td&gt;</code> of the table.</p><p>After doing these modifications, the code of our table should look like this:</p><div class="informalexample"><pre class="programlisting">&lt;table width="780" height="100%" cellspacing="0"
cellpadding="10" border="0" align="center"&gt;
&lt;tr&gt;
&lt;td class="bodyline" valign="top"&gt;
</pre></div><div class="section" title="Adding the Banner Image"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec01"/>Adding the Banner Image</h2></div></div></div><p>We now want to add<code class="literal"> top_image.jpg</code>—the banner image that we made earlier—which we first upload to the<code class="literal"> NoseBleed/images/</code> template folder. Without beginning to change and edit the rest of the already existing table structure—which could easily turn out to be an editing task from hell—we simply add a new independent table instead, directly underneath the line above, a table that will contain nothing but our banner image:<a id="id194" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="717" height="231" border="0" align="center"
cellpadding="0" cellspacing="0"&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;div align="center"&gt;
&lt;a href="{U_INDEX}"&gt;
&lt;img src="templates/NoseBleed/images/top_image.jpg" border="0"
alt="{L_INDEX}" vspace="1" /&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><div class="mediaobject"><img src="graphics/1132_06_03.jpg" alt="Adding the Banner Image"/></div><p>As you can see, I have added the <code class="literal">&lt;a href="{U_INDEX}"&gt;&lt;/a&gt;</code> link tag around the image, so that it works as a link back to the index page of the forum. This is similar to how<code class="literal"> subSilver</code> also handles its own banner image. Basically, I just copied that part, using the same phpBB variable as was already given.</p><p>There are many variables like this one that we can use throughout the template, a list of all of which can be found at<a class="ulink" href="http://www.phpbb.com/styles/listvars.php"> http://www.phpbb.com/styles/listvars.php</a>.</p><p>Note that not all variables work in all the<code class="literal"> .tpl</code> files. Most do, but some are meant for specific parts of the forum, like the registration page, the search page, etc.<a id="id195" class="indexterm"/>
</p></div><div class="section" title="Adding a Menu"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec02"/>Adding a Menu</h2></div></div></div><p>The next thing we do is add the menu right under the<code class="literal"> top_image</code>. Again we add a new table, below our banner image, this time with some temporary text that we will correct later. The text is added now to make it clearer when we start to add the real menu items.<a id="id196" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="715" height="20" border="0" align="center" cellpadding="0" cellspacing="0"&gt;
&lt;tr&gt;
&lt;td align="left"&gt;
FAQ
Search
Memberlist
Usergroups
Profile
You have no new messages
&lt;/td&gt;
&lt;td align="right"&gt;
Log in
Register
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><div class="mediaobject"><img src="graphics/1132_06_04.jpg" alt="Adding a Menu"/></div><p>The sharp eye might have noticed that I made this table only 715 pixels wide instead of the 717 pixels that we’d decided on. The reason is just that it looks better this way, nothing more. I tried first with 717 pixels, but it then looked like the text was wider than the image. 715 pixels made it look more consistent.</p><p>In order to make the menu work, we need to turn each part of the menu into a link. For example, to make<code class="literal"> FAQ</code> a link, <code class="literal">&lt;a href="url"&gt;</code> and <code class="literal">&lt;/a&gt;</code> tags are added around it, where<code class="literal"> url</code> should be replaced with the address of the file that we are linking<code class="literal"> FAQ</code> to. The same thing has to be done for the rest of the menu:<a id="id197" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="715" height="20" border="0" align="center"
cellpadding="0" cellspacing="0"&gt;
&lt;tr&gt;
&lt;td align="left"&gt;
&lt;a href="url"&gt;FAQ&lt;/a&gt;
&lt;a href="url"&gt;Search&lt;/a&gt;
&lt;a href="url"&gt;Memberlist&lt;/a&gt;
&lt;a href="url"&gt;Usergroups&lt;/a&gt;
&lt;a href="url"&gt;Profile&lt;/a&gt;
&lt;a href="url"&gt;You have no new messages&lt;/a&gt;
&lt;/td&gt;
&lt;td align="right"&gt;
&lt;a href="url"&gt;Log in&lt;/a&gt;
&lt;a href="url"&gt;Register&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>To replace the<code class="literal"> url</code> with the actual address of where we want the link to take us, we can simply look at the way the<code class="literal"> subSilver</code> template already used it. By looking at the code, each<code class="literal"> url</code> can be replaced with the correct phpBB variable. We can also replace the text of the menu with variables; this way a user using the forum in another language won’t be forced to have English menu items. After replacing the text, our table is now:</p><div class="informalexample"><pre class="programlisting">&lt;table width="715" height="20" border="0" align="center" cellpadding="0" cellspacing="0"&gt;
&lt;tr&gt;
&lt;td align="left"&gt;
&lt;a href="{U_FAQ}"&gt;{L_FAQ}&lt;/a&gt;
&lt;a href="{U_SEARCH}"&gt;{L_SEARCH}&lt;/a&gt;
&lt;a href="{U_MEMBERLIST}"&gt;{L_MEMBERLIST}&lt;/a&gt;
&lt;a href="{U_GROUP_CP}"&gt;{L_USERGROUPS}&lt;/a&gt;
&lt;a href="{U_PROFILE}"&gt;{L_PROFILE}&lt;/a&gt;
&lt;a href="{U_PRIVATEMSGS}"&gt;{PRIVATE_MESSAGE_INFO}&lt;/a&gt;
&lt;/td&gt;
&lt;td align="right"&gt;
&lt;a href="{U_LOGIN_LOGOUT}"&gt;{L_LOGIN_LOGOUT}&lt;/a&gt;
&lt;a href="{U_REGISTER}"&gt;{L_REGISTER}&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>One thing to notice here is that users already logged in shouldn’t be able to click<span class="strong"><strong> Register</strong></span>. To prevent this, we can use the <code class="literal">&lt;!-- BEGIN switch_user_logged_out --&gt;</code> and <code class="literal">&lt;!-- END switch_user_logged_out --&gt;</code> tags. Everything between these tags will be shown only if the user is logged out, which is what we want for the<span class="strong"><strong> Register</strong></span> menu. If we want something to be shown only when the user is logged in, we can use the tags <code class="literal">&lt;!-- BEGIN switch_user_logged_in --&gt;</code> and <code class="literal">&lt;!-- END switch_user_logged_in --&gt;</code> instead.<a id="id198" class="indexterm"/>
</p><p>Personally, I see no reason why users not logged in should see the<span class="strong"><strong> Profile</strong></span> and<span class="strong"><strong> Private Messages</strong></span> menu, so I’m going to use these tags also to prevent guests from trying to access the profile and private messages menu.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note17"/>Note</h3><p>An important note about these tags is that they only work if they are on their own lines in the code; phpBB simply won’t recognize them if they aren’t.</p></div><p>The table should now look like this:</p><div class="informalexample"><pre class="programlisting">&lt;table width="715" height="20" border="0" align="center" cellpadding="0" cellspacing="0"&gt;
&lt;tr&gt;
&lt;td align="left"&gt;
&lt;a href="{U_FAQ}"&gt;{L_FAQ}&lt;/a&gt;
&lt;a href="{U_SEARCH}"&gt;{L_SEARCH}&lt;/a&gt;
&lt;a href="{U_MEMBERLIST}"&gt;{L_MEMBERLIST}&lt;/a&gt;
&lt;a href="{U_GROUP_CP}"&gt;{L_USERGROUPS}&lt;/a&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
&lt;a href="{U_PROFILE}"&gt;{L_PROFILE}&lt;/a&gt;
&lt;a href="{U_PRIVATEMSGS}"&gt;{PRIVATE_MESSAGE_INFO}&lt;/a&gt;
&lt;!-- END switch_user_logged_in --&gt;
&lt;/td&gt;
&lt;td align="right"&gt;
&lt;a href="{U_LOGIN_LOGOUT}"&gt;{L_LOGIN_LOGOUT}&lt;/a&gt;
&lt;!-- BEGIN switch_user_logged_out --&gt;
&lt;a href="{U_REGISTER}"&gt;{L_REGISTER}&lt;/a&gt;
&lt;!-- END switch_user_logged_out --&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>After saving the files, and uploading them (unless you are testing them locally), you’ll see that it looks pretty good, except maybe for the font of the temporary text:<a id="id199" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/1132_06_05.jpg" alt="Adding a Menu"/></div><p>In order to change the font and colors of the template, I would like to introduce you to the Cascading Style Sheet (CSS).</p></div></div>
<div class="section" title="CSS"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec06"/>CSS</h1></div></div></div><p>If you look in the original subSilver menu you will notice that all of the links are surrounded by <code class="literal">&lt;span class="mainmenu"&gt;</code> and <code class="literal">&lt;/span&gt;</code> tags. This is a reference to the CSS code, and if you look higher up in the code of the<code class="literal"> overall_header.tpl</code>, where the CSS is located, you can find this (reformatted here for the book):<a id="id200" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* The register, login, search etc links at the top of the page */
.mainmenu { font-size : {T_FONTSIZE2}px;
color : {T_BODY_TEXT}
}
a.mainmenu { text-decoration: none;
color : {T_BODY_LINK};
}
a.mainmenu:hover { text-decoration: underline;
color : {T_BODY_HLINK};
}
</pre></div><p>Here we can change everything we want about the way the menu is displayed. The first line, surrounded by the<code class="literal"> /*</code> and<code class="literal"> */</code> tags, is just a comment to help us out and is not used by the browser. The second line determines how the text, in this example, should be displayed, and the last two lines describe how the text should be displayed if it is a link. The variables are set from within the Admin Panel of the forum. Personally I like to add the CSS code for when a link has been visited, so I can be certain I don’t suddenly get different colors or font sizes. The code is called<code class="literal"> a.mainmenu:visited</code> and could be inserted either on its own line or as a part of the code already written, separated by a comma, as follows:</p><div class="informalexample"><pre class="programlisting">/* The register, login, search etc links at the top of the page */
.mainmenu { font-size : {T_FONTSIZE2}px;
color : {T_BODY_TEXT}
}
a.mainmenu,a.mainmenu:visited { text-decoration: none;
color : {T_BODY_LINK};
}
a.mainmenu:hover { text-decoration: underline;
color : {T_BODY_HLINK};
}
</pre></div><p>We could also add a definition for<code class="literal"> a.mainmenu:active</code> if we want to define how the link should look when someone clicks on it.</p><p>With these definitions for our menu style, our table looks like this:<a id="id201" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="715" height="20" border="0" align="center" cellpadding="0" cellspacing="0"&gt;
&lt;tr&gt;
&lt;td align="left"&gt;
&lt;a href="{U_FAQ}" class="mainmenu"&gt;{L_FAQ}&lt;/a&gt;
&lt;a href="{U_SEARCH}" class="mainmenu"&gt;{L_SEARCH}&lt;/a&gt;
&lt;a href="{U_MEMBERLIST}" class="mainmenu"&gt;{L_MEMBERLIST}&lt;/a&gt;
&lt;a href="{U_GROUP_CP}" class="mainmenu"&gt;{L_USERGROUPS}&lt;/a&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
&lt;a href="{U_PROFILE}" class="mainmenu"&gt;{L_PROFILE}&lt;/a&gt;
&lt;a href="{U_PRIVATEMSGS}" class="mainmenu"&gt;{PRIVATE_MESSAGE_INFO}&lt;/a&gt;
&lt;!-- END switch_user_logged_in --&gt;
&lt;/td&gt;
&lt;td align="right"&gt;
&lt;a href="{U_LOGIN_LOGOUT}" class="mainmenu"&gt;{L_LOGIN_LOGOUT}&lt;/a&gt;
&lt;!-- BEGIN switch_user_logged_out --&gt;
&lt;a href="{U_REGISTER}" class="mainmenu"&gt;{L_REGISTER}&lt;/a&gt;
&lt;!-- END switch_user_logged_out --&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>We are almost finished with the menu now. The only thing that doesn’t look good is the menu items being too close to each other. In HTML, multiple spaces will only display as one space, but a way around this is to add the <code class="literal">&amp;nbsp;</code> code instead, which in fact is just a spacing. It has the advantage that as many continuous spaces can be added as wanted.</p><p>We add two spacings between each menu item, and the span class<code class="literal"> mainmenu</code>, in order to make the spacings the same font size as the font used in the menu.<a id="id202" class="indexterm"/>
</p><p>The finished table looks like this:</p><div class="informalexample"><pre class="programlisting">&lt;table width="715" height="20" border="0" align="center" cellpadding="0" cellspacing="0"&gt;
&lt;tr&gt;
&lt;td align="left" class="mainmenu"&gt;
&lt;a href="{U_FAQ}" class="mainmenu"&gt;{L_FAQ}&lt;/a&gt;
&amp;nbsp;&amp;nbsp;
&lt;a href="{U_SEARCH}" class="mainmenu"&gt;{L_SEARCH}&lt;/a&gt;
&amp;nbsp;&amp;nbsp;
&lt;a href="{U_MEMBERLIST}" class="mainmenu"&gt;{L_MEMBERLIST}&lt;/a&gt;
&amp;nbsp;&amp;nbsp;
&lt;a href="{U_GROUP_CP}" class="mainmenu"&gt;{L_USERGROUPS}&lt;/a&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
&amp;nbsp;
&lt;a href="{U_PROFILE}" class="mainmenu"&gt;{L_PROFILE}&lt;/a&gt;
&amp;nbsp;&amp;nbsp;
&lt;a href="{U_PRIVATEMSGS}" class="mainmenu"&gt;{PRIVATE_MESSAGE_INFO}&lt;/a&gt;
&lt;!-- END switch_user_logged_in --&gt;
&lt;/td&gt;
&lt;td align="right" class="mainmenu"&gt;
&lt;a href="{U_LOGIN_LOGOUT}" class="mainmenu"&gt;{L_LOGIN_LOGOUT}&lt;/a&gt;
&lt;!-- BEGIN switch_user_logged_out --&gt;
&amp;nbsp;
&lt;a href="{U_REGISTER}" class="mainmenu"&gt;{L_REGISTER}&lt;/a&gt;
&lt;!-- END switch_user_logged_out --&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>We are now done with the tables in<code class="literal"> overall_header.tpl</code> and can delete the left-over original subSilver table code.</p><p>It is time to enter the Admin Panel; we need to fix the text colors on the menu and this is where things might start to get a bit more confusing.</p><p>Let me start by saying that we do not need to use the Admin Panel settings of the forum in order to change the layout; we could just as easily edit the CSS code directly, without using variables. For example, say we wanted the text in the menu to be a little smaller, black, and when hovering the mouse over it, still black but underlined. The easiest way to achieve this would be to change the CSS to:<a id="id203" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* The register, login, search etc links at the top of the page */
.mainmenu { font-size : 11px;
color : black
}
a.mainmenu { font-size : 11px;
text-decoration: none;
color : black;
}
a.mainmenu:visited { font-size : 11px;
text-decoration: none;
color : black;
}
a.mainmenu:hover { font-size : 11px;
text-decoration: underline;
color : black;
}
</pre></div><p>However, this way we would have to edit the<code class="literal"> overall_header.tpl</code> every time we wanted to change something. This might be an OK solution for you personally, but if you are planning on releasing the template publicly, it might not be such a good idea. Not everyone feels comfortable editing CSS code, and besides, if we have the option of changing these things from the Admin Panel, we might as well do it.</p><p>In the Administration Panel, by selecting the template under<span class="strong"><strong> Styles Admin and Management</strong></span> and editing it, you will find the variables used in the CSS. For example, the<code class="literal"> {T_FONTSIZE2}</code> refers to<code class="literal"> Font Size 2:</code>, which is set to<code class="literal"> 11</code>. If you wanted your<code class="literal"> .mainmenu</code> to have a smaller font, change it to<code class="literal"> 10</code> here. However, this would mean that everywhere else in the CSS that the<code class="literal"> {T_FONTSIZE2}</code> appears, it would be font size<code class="literal"> 10—not</code> exactly what we wanted.<a id="id204" class="indexterm"/>
</p><p>Instead, it is easier to use<code class="literal"> {T_FONTSIZE1}</code> in the CSS, which refers to<code class="literal"> Font Size 1</code>: in the Admin Panel, which is already font size<code class="literal"> 10</code>.</p><p>The<code class="literal"> Text Color:</code> in the Admin Panel is set to<code class="literal"> 000000</code>, which might be a bit too dark on a white background like this. So we are changing it to a value of<code class="literal"> 111111</code> to soften it a little.<a id="id205" class="indexterm"/>
</p><p>The<code class="literal"> Link Color</code>: is set to<code class="literal"> 006699</code>, which we are changing to a red color with a value of<code class="literal"> 9F0002</code>, the same value as for the brush in the<code class="literal"> top_image.jpg</code>. We will also use this value for the ‘visited’, ‘active’, and ‘hover’ link settings.</p><p>That is all we need for now, and we can save these settings and return to the forum.</p><p>The menu now has red text because it is using the link variables of the Admin Panel. If we want them black at all time, we need to change the following in the CSS code:<a id="id206" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* The register, login, search etc links at the top of the page */
.mainmenu {
font-size : {T_FONTSIZE2}px;
color : {T_BODY_TEXT}
}
a.mainmenu {
text-decoration: none;
color : {T_BODY_LINK};
}
a.mainmenu:hover {
text-decoration: underline;
color : {T_BODY_HLINK};
}
</pre></div><p>... to:</p><div class="informalexample"><pre class="programlisting">/* The register, login, search etc links at the top of the page */
.mainmenu {
font-size : {T_FONTSIZE1}px;
color : {T_BODY_TEXT}
}
a.mainmenu {
font-size : {T_FONTSIZE1}px;
text-decoration: none;
color : {T_BODY_TEXT};
}
a.mainmenu:visited {
font-size : {T_FONTSIZE1}px;
text-decoration: none;
color : {T_BODY_TEXT};
}
a.mainmenu:hover {
font-size : {T_FONTSIZE1}px;
text-decoration: underline;
color : {T_BODY_TEXT};
}
</pre></div><p>The menu is now with black text as wanted. Notice that we add the<code class="literal"> font-size : {T_FONTSIZE1}px;</code> code to all the link definitions. This is something we don’t normally have to do since it is already defined in<code class="literal"> .mainmenu</code>, but I have experienced that sometimes, if a user installs a new template with a CSS that only defines the font size in the<code class="literal"> .mainmenu</code>, the template would use the font size from the previously installed template. It sounds strange, but this is something I have seen and it was not very pretty. There might be other ways to solve the problem, but this one has worked for me.</p><p>The gray background color and the borders around the forum don’t seem to match the rest. Changing the<code class="literal"> Background Color:</code> in the Admin Panel from<code class="literal"> E5E5E5</code> to<code class="literal"> FFFFFF</code> solves the first problem, but there are still some borders we need to get rid off. If you run into problems like this one, the best thing to do is to go back into the code for the<code class="literal"> .tpl</code> file and find out what caused it. In this case, the borders are coming from a CSS in the first table called<code class="literal"> bodyline</code>:
</p><div class="informalexample"><pre class="programlisting">&lt;table width="780" height="100%" cellspacing="0" cellpadding="10" border="0" align="center"&gt;
&lt;tr&gt;
&lt;td class="bodyline" valign="top"&gt;
</pre></div><p>In the CSS code we have:<a id="id207" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* This is the border line &amp; background color round the entire page */
.bodyline {
background-color: {T_TD_COLOR2};
border: 1px {T_TH_COLOR1} solid;
}
</pre></div><p>Easy fix though, since only changing the border to<code class="literal"> 0px</code> takes care of the problem.</p><div class="mediaobject"><img src="graphics/1132_06_06.jpg" alt="CSS"/></div><p>We are now ready to edit the<code class="literal"> index_body.tpl</code>, which displays the forum’s index page.</p></div>
<div class="section" title="Modifying the Forum Index in index_body.tpl"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec07"/>Modifying the Forum Index in index_body.tpl</h1></div></div></div><p>The first table in the<code class="literal"> index_body.tpl</code> file looks like this:<a id="id208" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="100%" cellspacing="0" cellpadding="2" border="0" align="center"&gt;
&lt;tr&gt;
&lt;td align="left" valign="bottom"&gt;&lt;span class="gensmall"&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
{LAST_VISIT_DATE}&lt;br /&gt;
&lt;!-- END switch_user_logged_in --&gt;
{CURRENT_TIME}&lt;br /&gt;&lt;/span&gt;&lt;span class="nav"&gt;
&lt;a href="{U_INDEX}" class="nav"&gt;{L_INDEX}&lt;/a&gt;&lt;/span&gt;
&lt;/td&gt;
&lt;td align="right" valign="bottom" class="gensmall"&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
&lt;a href="{U_SEARCH_NEW}" class="gensmall"&gt;{L_SEARCH_NEW}&lt;/a&gt;
&lt;br /&gt;
&lt;a href="{U_SEARCH_SELF}" class="gensmall"&gt;{L_SEARCH_SELF}&lt;/a&gt;
&lt;br /&gt;
&lt;!-- END switch_user_logged_in --&gt;
&lt;a href="{U_SEARCH_UNANSWERED}" class="gensmall"&gt;{L_SEARCH_UNANSWERED}&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>It displays a range of variables: when the logged-in user last visited, the current time, a link to posts that the user hasn’t read yet, and unanswered posts. We don’t want to display these variables on top of the index page, so we simply copy the entire table, delete it, and paste it at the bottom of the<code class="literal"> .tpl</code> instead. That way we can deal with it later.</p><p>For the top of the page, according to the layout idea, there should be two black lines under the menu with some text inside. This is a detail that should continue throughout the template, and something we have to build into all of the<code class="literal"> .tpl</code> files.</p><p>The next table in<code class="literal"> index_body.tpl</code> looks like this:<a id="id209" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="100%" cellpadding="2" cellspacing="1" border="0" class="forumline"&gt;
&lt;tr&gt;
&lt;th colspan="2" class="thCornerL" height="25" nowrap="nowrap"&gt;
&amp;nbsp;{L_FORUM}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_TOPICS}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_POSTS}&amp;nbsp;
&lt;/th&gt;
&lt;th class="thCornerR" nowrap="nowrap"&gt;
&amp;nbsp;{L_LASTPOST}&amp;nbsp;
&lt;/th&gt;
&lt;/tr&gt;
&lt;!-- BEGIN catrow --&gt;
&lt;tr&gt;
&lt;td class="catLeft" colspan="2" height="28"&gt;
&lt;span class="cattitle"&gt;
&lt;a href="{catrow.U_VIEWCAT}" class="cattitle"&gt;{catrow.CAT_DESC}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="rowpic" colspan="3" align="right"&gt;
&amp;nbsp;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- BEGIN forumrow --&gt;
&lt;tr&gt;
&lt;td class="row1" align="center" valign="middle" height="50"&gt;
&lt;img src="{catrow.forumrow.FORUM_FOLDER_IMG}" width="46" height="25" alt="{catrow.forumrow.L_FORUM_FOLDER_ALT}" title="{catrow.forumrow.L_FORUM_FOLDER_ALT}" /&gt;
&lt;/td&gt;
&lt;td class="row1" width="100%" height="50"&gt;
&lt;span class="forumlink"&gt;
&lt;a href="{catrow.forumrow.U_VIEWFORUM}" class="forumlink"&gt;{catrow.forumrow.FORUM_NAME}&lt;/a&gt;
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="genmed"&gt;
{catrow.forumrow.FORUM_DESC}
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.L_MODERATOR} {catrow.forumrow.MODERATORS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.TOPICS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.POSTS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50" nowrap="nowrap"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.LAST_POST}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END forumrow --&gt;
&lt;!-- END catrow --&gt;
&lt;/table&gt;
</pre></div><p>This is the forum itself, with all the topics and categories, and this is what we want appearing at the top. On the first line, we can see that the table has a<code class="literal"> class="forumline"</code> attribute. This is what creates the border around the table, and is what we want to modify. Jumping back to the CSS code of the<code class="literal"> overall_header.tpl</code>, we can find:<a id="id211" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* This is the outline round the main forum tables */
.forumline {
background-color: {T_TD_COLOR2};
border: 2px {T_TH_COLOR2} solid;
}
</pre></div><p>The<code class="literal"> {T_TD_COLOR2}</code> variable refers to<span class="strong"><strong> Table Cell Color 2</strong></span>: in the Admin Panel, currently set to<code class="literal"> FFFFFF</code>, a bright white.<code class="literal"> {T_TH_COLOR2}</code> is the<span class="strong"><strong> Table Header Color 2</strong></span>: that’s set to<code class="literal"> 006699</code>, a blue color. We can change this code any way we like to suit the frame around the table, but for this template, in order to keep it as simple as possible, and make it match the layout idea, we don’t want any borders right now. The easiest thing to do would be to just remove the<code class="literal"> class="forumline</code> attribute from the table, but if later we decide we want borders anyways, it would mean we have to go into all the<code class="literal"> .tpl</code> files and add the attribute again manually—too much work! Instead, we change the CSS to:</p><div class="informalexample"><pre class="programlisting">/* This is the outline round the main forum tables */
.forumline {
/*
background-color: {T_TD_COLOR2};
border: 2px {T_TH_COLOR2} solid;
*/
}
</pre></div><p>The table width is set to 100% now, which we change to 717 to match the image. We also add an<code class="literal"> align="center"</code> attribute to make it centered on the page.</p><p>The first part of the table now looks like:<a id="id212" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="717" align="center" cellpadding="2" cellspacing="1" border="0" class="forumline"&gt;
&lt;tr&gt;
&lt;th colspan="2" class="thCornerL" height="25" nowrap="nowrap"&gt;
&amp;nbsp;{L_FORUM}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_TOPICS}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_POSTS}&amp;nbsp;
&lt;/th&gt;
&lt;th class="thCornerR" nowrap="nowrap"&gt;
&amp;nbsp;{L_LASTPOST}&amp;nbsp;
&lt;/th&gt;
&lt;/tr&gt;
</pre></div><p>In the code, we can find the classes called<code class="literal"> thCornerL, thTop</code>, and<code class="literal"> thCornerR</code>. These are the ones displaying the blue background with orange text in the first row of our table. In our CSS code, we find them here:</p><div class="informalexample"><pre class="programlisting">/* Header cells - the blue and silver gradient backgrounds */
th {
color: {T_FONTCOLOR3};
font-size: {T_FONTSIZE2}px;
font-weight : bold;
background-color: {T_BODY_LINK};
height: 25px;
background-image: url(templates/subSilver/images/{T_TH_CLASS2});
}
</pre></div><p>... here:</p><div class="informalexample"><pre class="programlisting">th.thHead,th.thSides,th.thTop,th.thLeft,th.thRight,th.thBottom,th.thCornerL,th.thCornerR {
font-weight: bold;
border: {T_TD_COLOR2};
border-style: solid;
height: 28px;
}
</pre></div><p>... and here:</p><div class="informalexample"><pre class="programlisting">th.thHead,td.catHead {
font-size: {T_FONTSIZE3}px;
border-width: 1px 1px 0px 1px;
}
th.thSides,td.catSides,td.spaceRow {
border-width: 0px 1px 0px 1px;
}
th.thRight,td.catRight,td.row3Right {
border-width: 0px 1px 0px 0px;
}
th.thLeft,td.catLeft { border-width: 0px 0px 0px 1px; }
th.thBottom,td.catBottom { border-width: 0px 1px 1px 1px; }
th.thTop { border-width: 1px 0px 0px 0px; }
th.thCornerL { border-width: 1px 0px 0px 1px; }
th.thCornerR { border-width: 1px 1px 0px 0px; }
</pre></div><p>That’s quite a mouthful! But don’t despair; it is easier than it looks. If we start with the top left part of our table, the<code class="literal"> thCornerL</code> class, we can follow it down the CSS code: First of all, it is a part of the<code class="literal"> th</code> class, simply because we can find <code class="literal">&lt;th colspan="2" class="thCornerL" height="25" nowrap="nowrap"&gt;</code> in the table. In the CSS code for<code class="literal"> th</code>, we can find the font color, the font size, the font weight, the background color, the height of the<code class="literal"> th</code>, and the background image.</p><p>Further down, we find more definitions for<code class="literal"> th.thCornerL</code>, with a border color, a border style, and a height of 28 pixels. We also get the exact definition of how the borders are displayed with<code class="literal"> th.thCornerL{border-width: 1px 0px 0px 1px; }</code>, which is the size of the border on each side, clockwise starting from the top.<a id="id213" class="indexterm"/>
</p><p>To change it, it is easiest to start from the bottom. We know that we want black lines above and below this section, so we can start by changing the CSS to:</p><div class="informalexample"><pre class="programlisting">th.thCornerL { border-width: 1px 0px 1px 0px; }
</pre></div><p>Going up in the CSS, we find<code class="literal"> border: {T_TD_COLOR2};</code>, which in the Admin Panel refers to<span class="strong"><strong> Table Cell Color 2</strong></span>, currently set to<span class="strong"><strong> FFFFFF</strong></span>. Changing this color to black will change every instance in the CSS where<code class="literal"> {T_TD_COLOR2}</code> is being used. And since we want that white table cell color, we need to do something different. Changing the<code class="literal"> border: {T_TD_COLOR2};</code> to<code class="literal"> border: {T_BODY_TEXT};</code> would give us the color of the text which we earlier set to black. That’s one solution. The bad thing about this is that if we later want to change the font color, but not the black lines, we have to come back and edit the CSS again. Instead, we can add<code class="literal"> 111111</code> to the<span class="strong"><strong> Table Cell Color 3</strong></span> field (it’s not being used yet) in the Admin Panel, and change the CSS to<code class="literal"> border: {T_TD_COLOR3};</code>.</p><p>Following the CSS higher up, we find that in the<code class="literal"> th</code> part there is a background image. If we want a background image behind this part of the table, we should keep this code. However, for this template we decided to go for a white background with black text, so again we add the<code class="literal"> /*</code> and<code class="literal"> */</code> markers around the background image and the background color. After changing the font color and the font size, the CSS now looks like:</p><div class="informalexample"><pre class="programlisting">/* Header cells - the blue and silver gradient backgrounds */
th {
color: {T_BODY_TEXT};
font-size: {T_FONTSIZE1}px;
font-weight : bold;
/*
background-color: {T_BODY_LINK};
*/
height: 25px;
/*
background-image: url(templates/subSilver/images/{T_TH_CLASS2});
*/
}
</pre></div><p>... and:</p><div class="informalexample"><pre class="programlisting">th.thHead,th.thSides,th.thTop,th.thLeft,th.thRight,th.thBottom,th.thCornerL,th.thCornerR {
font-weight: bold;
border: {T_TD_COLOR3};
border-style: solid;
height: 28px;
}
</pre></div><p>... and:</p><div class="informalexample"><pre class="programlisting">th.thHead,td.catHead {
font-size: {T_FONTSIZE3}px;
border-width: 1px 1px 0px 1px;
}
th.thSides,td.catSides,td.spaceRow { border-width: 0px 1px 0px 1px; }
th.thRight,td.catRight,td.row3Right { border-width: 0px 1px 0px 0px; }
th.thLeft,td.catLeft { border-width: 0px 0px 0px 1px; }
th.thBottom,td.catBottom { border-width: 0px 1px 1px 1px; }
th.thTop { border-width: 1px 0px 0px 0px; }
th.thCornerL { border-width: 1px 0px 1px 0px; }
th.thCornerR { border-width: 1px 1px 0px 0px; }
</pre></div><p>Changing the<code class="literal"> thTop</code> and<code class="literal"> thCornerR</code> to have black lines similar to<code class="literal"> thCornerL</code> is the last step needed to be done for now, and this can be done here:</p><div class="informalexample"><pre class="programlisting">th.thTop { border-width: 1px 0px 1px 0px; }
th.thCornerL { border-width: 1px 0px 1px 0px; }
th.thCornerR { border-width: 1px 0px 1px 0px; }
</pre></div><div class="mediaobject"><img src="graphics/1132_06_07.jpg" alt="Modifying the Forum Index in index_body.tpl"/></div><p>The rest of the table looks like this:</p><div class="informalexample"><pre class="programlisting">&lt;!-- BEGIN catrow --&gt;
&lt;tr&gt;
&lt;td class="catLeft" colspan="2" height="28"&gt;
&lt;span class="cattitle"&gt;
&lt;a href="{catrow.U_VIEWCAT}" class="cattitle"&gt;{catrow.CAT_DESC}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="rowpic" colspan="3" align="right"&gt;
&amp;nbsp;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- BEGIN forumrow --&gt;
&lt;tr&gt;
&lt;td class="row1" align="center" valign="middle" height="50"&gt;
&lt;img src="{catrow.forumrow.FORUM_FOLDER_IMG}" width="46" height="25" alt="{catrow.forumrow.L_FORUM_FOLDER_ALT}" title="{catrow.forumrow.L_FORUM_FOLDER_ALT}" /&gt;
&lt;img src="{catrow.forumrow.FORUM_FOLDER_IMG}" width="46" height="25" alt="{catrow.forumrow.L_FORUM_FOLDER_ALT}" title="{catrow.forumrow.L_FORUM_FOLDER_ALT}" /&gt;
&lt;/td&gt;
&lt;td class="row1" width="100%" height="50"&gt;
&lt;span class="forumlink"&gt;
&lt;a href="{catrow.forumrow.U_VIEWFORUM}" class="forumlink"&gt;{catrow.forumrow.FORUM_NAME}&lt;/a&gt;
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="genmed"&gt;
{catrow.forumrow.FORUM_DESC}
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.L_MODERATOR} {catrow.forumrow.MODERATORS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.TOPICS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.POSTS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50" nowrap="nowrap"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.LAST_POST}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END forumrow --&gt;
&lt;!-- END catrow --&gt;
&lt;/table&gt;
</pre></div><p>The<code class="literal"> catrow</code> and the<code class="literal"> forumrow</code> determine the categories and forum topics found in the database; they use the above HTML code to display the categories and topics, until there are no more to be found, like a loop. If we start with the first table row, we find where the name of the category is displayed:</p><div class="informalexample"><pre class="programlisting">&lt;tr&gt;
&lt;td class="catLeft" colspan="2" height="28"&gt;
&lt;span class="cattitle"&gt;
&lt;a href="{catrow.U_VIEWCAT}" class="cattitle"&gt;{catrow.CAT_DESC}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="rowpic" colspan="3" align="right"&gt;
&amp;nbsp;
&lt;/td&gt;
&lt;/tr&gt;
</pre></div><p>Again, we hunt in our CSS code for the classes being used, starting with<code class="literal"> catLeft</code>:
</p><div class="informalexample"><pre class="programlisting">td.cat,td.catHead,td.catSides,td.catLeft,td.catRight,td.catBottom
{
background-image: url(templates/subSilver/images/{T_TH_CLASS1});
background-color:{T_TR_COLOR3};
border: {T_TH_COLOR3};
border-style: solid;
height: 28px;
}
</pre></div><p>Notice that<code class="literal"> catLeft</code> is not the only class in this line. If we wanted all the other classes to look like this, except the<code class="literal"> catLeft</code> class, the easiest way would be to just remove this class from the list and turn it into its own class underneath. But since all these classes are more or less only about displaying a background color and image, we leave the class where it is and change them all at once.</p><p>For this template, we don’t use much from what is determined in these classes, so we change it to:</p><div class="informalexample"><pre class="programlisting">td.cat,td.catHead,td.catSides,td.catLeft,td.catRight,td.catBottom
{
/*
background-image: url(templates/subSilver/images/{T_TH_CLASS1});
background-color:{T_TR_COLOR3};
border: {T_TH_COLOR3};
border-style: solid;
*/
height: 28px;
}
</pre></div><p>We are keeping the height for now.<a id="id215" class="indexterm"/>
</p><p>The next class we hunt for is called<code class="literal"> rowpic</code>. What it actually does for our forum is simply displays a background image other than the one in<code class="literal"> catLeft</code>, so the approach is the same. You can use this if you want to have an image background behind your category text, different from the image you would get from<code class="literal"> catLeft</code>. But since we don’t need any image there, we can remove that class from the table.</p><p>After doing this, our table should look like:</p><div class="informalexample"><pre class="programlisting">&lt;tr&gt;
&lt;td class="catLeft" colspan="5" height="28"&gt;
&lt;span class="cattitle"&gt;
&lt;a href="{catrow.U_VIEWCAT}" class="cattitle"&gt;{catrow.CAT_DESC}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
</pre></div><p>The category description is determined by the<code class="literal"> cattitle</code> class, and we can find it in the CSS here:</p><div class="informalexample"><pre class="programlisting">/* Forum category titles */
.cattitle {
font-weight: bold;
font-size: {T_FONTSIZE3}px;
letter-spacing: 1px;
color : {T_BODY_LINK}
}
a.cattitle {
text-decoration: none;
color : {T_BODY_LINK};
}
a.cattitle:hover {
text-decoration: underline;
}
</pre></div><p>There is not much to change here except the font, which is a little too big; so the spacing of one pixel between each letter in the word has to go. We can also add an<code class="literal"> a.cattitle: visited</code> class.</p><p>The class now looks like:</p><div class="informalexample"><pre class="programlisting">/* Forum category titles */
.cattitle {
font-weight: bold;
font-size: {T_FONTSIZE2}px;
color : {T_BODY_LINK}
}
a.cattitle {
text-decoration: none;
color : {T_BODY_LINK};
}
a.cattitle:visited {
text-decoration: none;
color : {T_BODY_LINK};
}
a.cattitle:hover {
text-decoration: underline;
}
</pre></div><div class="mediaobject"><img src="graphics/1132_06_08.jpg" alt="Modifying the Forum Index in index_body.tpl"/></div><p>Moving down in our<code class="literal"> .tpl</code>, we find the forum row.<a id="id217" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;!-- BEGIN forumrow --&gt;
&lt;tr&gt;
&lt;td class="row1" align="center" valign="middle" height="50"&gt;
&lt;img src="{catrow.forumrow.FORUM_FOLDER_IMG}" width="46" height="25" alt="{catrow.forumrow.L_FORUM_FOLDER_ALT}" title="{catrow.forumrow.L_FORUM_FOLDER_ALT}" /&gt;
&lt;/td&gt;
&lt;td class="row1" width="100%" height="50"&gt;
&lt;span class="forumlink"&gt;
&lt;a href="{catrow.forumrow.U_VIEWFORUM}" class="forumlink"&gt;{catrow.forumrow.FORUM_NAME}&lt;/a&gt;
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="genmed"&gt;
{catrow.forumrow.FORUM_DESC}
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.L_MODERATOR} {catrow.forumrow.MODERATORS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.TOPICS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.POSTS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50" nowrap="nowrap"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.LAST_POST}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END forumrow --&gt;
</pre></div><p>The classes of<code class="literal"> row1, row2</code>, and<code class="literal"> row3</code> in the CSS determine the background colors for our template. They are defined by<code class="literal"> {T_TR_COLOR1}, {T_TR_COLOR2}</code>, and<code class="literal"> {T_TR_COLOR3}</code>, which again are defined in the Admin Panel by<span class="strong"><strong> Table Row Color 1, Table Row Color 2</strong></span>, and<span class="strong"><strong> Table Row Color 3</strong></span>. From the layout idea, we have already decided on light gray, to match the<code class="literal"> top_image</code> of the template. We don’t need to change anything in the CSS code, but from the Admin Panel, we add the new values of<code class="literal"> F3F3F3, EBEBEB</code>, and<code class="literal"> E3E3E3</code>, with the first color being the same as in the<code class="literal"> top_image.jpg</code> and the others, slightly darker.</p><p>Next in our table are the folder images, defined by the<code class="literal"> {catrow.forumrow.FORUM_FOLDER_IMG}</code> variable. We don’t want to change anything here. Later in the chapter we will see how to make new icons and images. The<code class="literal"> forumlink</code> class determines what the font of the text describing the forum should look like. In the CSS we find the following:</p><div class="informalexample"><pre class="programlisting">/* Forum title: Text and link to the forums used in: index.php */
.forumlink {
font-weight: bold;
font-size: {T_FONTSIZE3}px;
color : {T_BODY_LINK};
}
a.forumlink {
text-decoration: none;
color : {T_BODY_LINK};
}
a.forumlink:hover {
text-decoration: underline;
color : {T_BODY_HLINK};
}
</pre></div><p>There isn’t much to change here, except maybe the font size from<code class="literal"> {T_FONTSIZE3}</code> to<code class="literal"> {T_FONTSIZE2}</code>, and the hover color from<code class="literal"> {T_BODY_HLINK}</code> to<code class="literal"> {T_BODY_LINK}. {T_BODY_HLINK}</code> is the hover setting of links from the Admin Panel, but there is no need for a different color for this. The changed class now looks like:</p><div class="informalexample"><pre class="programlisting">/* Forum title: Text and link to the forums used in: index.php */
.forumlink {
font-weight: bold;
font-size: {T_FONTSIZE2}px;
color : {T_BODY_LINK};
}
a.forumlink {
text-decoration: none;
color : {T_BODY_LINK};
}
a.forumlink:visited {
text-decoration: none;
color : {T_BODY_LINK};
}
a.forumlink:hover {
text-decoration: underline;
color : {T_BODY_LINK};
}
</pre></div><p>As you might have noticed by now, it is not all that difficult to change the CSS, and I will try to spare you from a detailed description for the rest of the chapter.</p><p>The next thing to change is the size of the<code class="literal"> genmed</code> class to<code class="literal"> {T_FONTSIZE1}</code> in the CSS, to make it a little smaller.</p><p>We are almost finished with this table now, but the text in the table row is really close to the edges. I am not too happy about that, and one way to solve this problem is to change the<code class="literal"> cellpadding</code> value from<code class="literal"> 2</code> to<code class="literal"> 4</code> in the table. Another way would be to add a padding definition to a CSS class or even to make a new class and then add it to the table. We go for the first solution here.</p><p>Finally, to spice up the forum a bit, we add a rollover effect on the table row, meaning that it will change color when you move the mouse over it, and at the same time the whole table row will work as a link.</p><p>Our table should now look like:</p><div class="informalexample"><pre class="programlisting">&lt;table width="717" align="center" cellpadding="4" cellspacing="1" border="0" class="forumline"&gt;
&lt;tr&gt;
&lt;th colspan="2" class="thCornerL" height="25" nowrap="nowrap"&gt;
&amp;nbsp;{L_FORUM}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_TOPICS}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_POSTS}&amp;nbsp;
&lt;/th&gt;
&lt;th class="thCornerR" nowrap="nowrap"&gt;
&amp;nbsp;{L_LASTPOST}&amp;nbsp;
&lt;/th&gt;
&lt;/tr&gt;
&lt;!-- BEGIN catrow --&gt;
&lt;tr&gt;
&lt;td class="catLeft" colspan="5" height="28"&gt;
&lt;span class="cattitle"&gt;
&lt;a href="{catrow.U_VIEWCAT}" class="cattitle"&gt;{catrow.CAT_DESC}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- BEGIN forumrow --&gt;
&lt;tr&gt;
&lt;td class="row1" align="center" valign="middle" height="50"&gt;
&lt;img src="{catrow.forumrow.FORUM_FOLDER_IMG}" width="46" height="25" alt="{catrow.forumrow.L_FORUM_FOLDER_ALT}" title="{catrow.forumrow.L_FORUM_FOLDER_ALT}" /&gt;
&lt;/td&gt;
<span class="strong"><strong>&lt;td class="row1" width="100%" height="50"
onmouseover="this.style.backgroundcolor=’{T_TR_COLOR2}’;
this.style.cursor=’pointer’;"
onmouseout=this.style.backgroundcolor=""
onclick="window.location.href=’{catrow.forumrow.U_VIEWFORUM}’"&gt;
&lt;span class="forumlink"&gt;</strong></span>
&lt;a href="{catrow.forumrow.U_VIEWFORUM}" class="forumlink"&gt;{catrow.forumrow.FORUM_NAME}&lt;/a&gt;
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="genmed"&gt;
{catrow.forumrow.FORUM_DESC}
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.L_MODERATOR} {catrow.forumrow.MODERATORS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.TOPICS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.POSTS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle" height="50" nowrap="nowrap"&gt;
&lt;span class="gensmall"&gt;
{catrow.forumrow.LAST_POST}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END forumrow --&gt;
&lt;!-- END catrow --&gt;
&lt;/table&gt;
</pre></div><p>The next table in our<code class="literal"> index_body.tpl</code> file displays the link for "mark all forums" and the time and time-zone for the forum:<a id="id218" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table width="100%" cellspacing="0" border="0" align="center" cellpadding="2"&gt;
&lt;tr&gt;
&lt;td align="left"&gt;
&lt;span class="gensmall"&gt;
&lt;a href="{U_MARK_READ}" class="gensmall"&gt;{L_MARK_FORUMS_READ}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td align="right"&gt;
&lt;span class="gensmall"&gt;
{S_TIMEZONE}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>It looks quite good; the only thing to change is the width from 100% to 717 pixels; also, we want to change the<code class="literal"> gensmall</code> class in the CSS to have black links instead of red, similar to what we did with the<code class="literal"> mainmenu</code> class.</p><div class="mediaobject"><img src="graphics/1132_06_09.jpg" alt="Modifying the Forum Index in index_body.tpl"/></div><p>This takes care of the main part of the forum.</p><p>The next part of the<code class="literal"> index_body.tpl</code> file is the table that displays who is online and other relevant information about the forum users. This table is found only in this<code class="literal"> .tpl</code> file, and in my opinion it is not really a part of the forum itself, but more is of something extra being added. For this reason we insert this part at the bottom of the page, and also add here all the extra links we removed from the top of the file. We can add it all in a table, giving it the class of<code class="literal"> thTop</code> so that it will have black lines above and below it, like we have with the menu.<a id="id219" class="indexterm"/>
</p><p>To add a little space around the table, we insert an extra table row with a height of ten pixels at the beginning and end of the table.</p><p>The new table looks like:</p><div class="informalexample"><pre class="programlisting">&lt;table align="center" width="717" border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr height="10"&gt;&lt;td&gt;&amp;nsbp;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;
&lt;th colspan="2" class="thTop" height="25" nowrap="nowrap"&gt;
&lt;table width="717" cellspacing="0" cellpadding="2"
border="0" align="center"&gt;
&lt;tr&gt;
&lt;td align="left" valign="bottom"&gt;
&lt;span class="gensmall"&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
{LAST_VISIT_DATE}
&lt;br /&gt;
&lt;!-- END switch_user_logged_in --&gt;
{CURRENT_TIME}
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="nav"&gt;
&lt;a href="{U_INDEX}" class="nav"&gt;{L_INDEX}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td align="right" valign="bottom" class="gensmall"&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
&lt;a href="{U_SEARCH_NEW}" class="gensmall"&gt;{L_SEARCH_NEW}&lt;/a&gt;
&lt;br /&gt;
&lt;a href="{U_SEARCH_SELF}" class="gensmall"&gt;{L_SEARCH_SELF}&lt;/a&gt;
&lt;br /&gt;
&lt;!-- END switch_user_logged_in --&gt;
&lt;a href="{U_SEARCH_UNANSWERED}" class="gensmall"&gt;{L_SEARCH_UNANSWERED}&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr height="10"&gt;&lt;td&gt;&amp;nsbp;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>We can now delete the table (the one we moved from the top in the beginning) at the bottom of the<code class="literal"> .tpl</code> file.</p><div class="mediaobject"><img src="graphics/1132_06_10.jpg" alt="Modifying the Forum Index in index_body.tpl"/></div><p>We can now deal with the next table, which displays the information about the users of the forum. There are only a few things changes here: the width should be 717 pixels instead of 100%, and we need to add an<code class="literal"> align="center"</code> tag.</p><p>Under this table is another table, with a variable displaying the number of active users in the past five minutes. Changing the width and aligning it like the above table corrects this table as well.</p><p>Next we have the login table, surrounded by <code class="literal">&lt;!-- BEGIN switch_user_logged_out --&gt;</code> and <code class="literal">&lt;!-- BEGIN switch_user_logged_out --&gt;</code> tags to make sure only users that are<span class="emphasis"><em> not</em></span> logged in can see the table. If you want the login information to appear at the top of your site, just copy and paste this where you want it. For this template it is fine where it is now though, and again the only changes necessary are the width and the alignment.</p><p>There is one thing to notice here: the <code class="literal">&lt;form...&gt;</code> element. In some browsers, by adding a form, the element will also add a margin above and under it, almost making it look like you added a line break in the HTML code above and under the form. To prevent this, add this class in the CSS:<a id="id221" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* Form */
form {
margin: 0px;
padding: 0px;
}
</pre></div><p>Now we can add line breaks manually, above and under the form, and be sure it displays evenly in different browsers.</p><p>The last part of the<code class="literal"> index_body.tpl</code> file shows the icons of the forum. We will come back to this later in the chapter, and leave it unchanged for now. The following screenshot shows what our forum looks like with the changes made up until now:<a id="id222" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/1132_06_11.jpg" alt="Modifying the Forum Index in index_body.tpl"/></div></div>
<div class="section" title="Modifying the Forum Body in viewforum_body.tpl"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec08"/>Modifying the Forum Body in viewforum_body.tpl</h1></div></div></div><p>The next file we edit is the<code class="literal"> viewforum_body.tpl</code> template. This is the file displaying the content of the forum after the index. Here is how our forum looks like before editing the<code class="literal"> .tpl</code> file:<a id="id223" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/1132_06_12.jpg" alt="Modifying the Forum Body in viewforum_body.tpl"/></div><p>The first line of code in<code class="literal"> viewforum.tpl</code> is a form object, which we leave unchanged. And, as with the<code class="literal"> index_body.tpl</code>, we move the first table to the end of the file, so that we can get the black lines appearing at the top, right under the menu. In the start of the code, we now have the following table:<a id="id224" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table border="0" cellpadding="4" cellspacing="1" width="100%" class="forumline"&gt;
&lt;tr&gt;
&lt;th colspan="2" align="center" height="25" class="thCornerL" nowrap="nowrap"&gt;
&amp;nbsp;{L_TOPICS}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" align="center" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_REPLIES}&amp;nbsp;
&lt;/th&gt;
&lt;th width="100" align="center" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_AUTHOR}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" align="center" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_VIEWS}&amp;nbsp;
&lt;/th&gt;
&lt;th align="center" class="thCornerR" nowrap="nowrap"&gt;
&amp;nbsp;{L_LASTPOST}&amp;nbsp;
&lt;/th&gt;
&lt;/tr&gt;
&lt;!-- BEGIN topicrow --&gt;
&lt;tr&gt;
&lt;td class="row1" align="center" valign="middle" width="20"&gt;
&lt;img src="{topicrow.TOPIC_FOLDER_IMG}" width="19" height="18" alt="{topicrow.L_TOPIC_FOLDER_ALT}" title="{topicrow.L_TOPIC_FOLDER_ALT}" /&gt;
&lt;/td&gt;
&lt;td class="row1" width="100%"&gt;
&lt;span class="topictitle"&gt;
{topicrow.NEWEST_POST_IMG}{topicrow.TOPIC_TYPE}
&lt;a href="{topicrow.U_VIEW_TOPIC}" class="topictitle"&gt;{topicrow.TOPIC_TITLE}&lt;/a&gt;
&lt;/span&gt;
&lt;span class="gensmall"&gt;
&lt;br /&gt;
{topicrow.GOTO_PAGE}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle"&gt;
&lt;span class="postdetails"&gt;
{topicrow.REPLIES}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row3" align="center" valign="middle"&gt;
&lt;span class="name"&gt;
{topicrow.TOPIC_AUTHOR}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle"&gt;
&lt;span class="postdetails"&gt;
{topicrow.VIEWS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row3Right" align="center" valign="middle" nowrap="nowrap"&gt;
&lt;span class="postdetails"&gt;
{topicrow.LAST_POST_TIME}
&lt;br /&gt;
{topicrow.LAST_POST_AUTHOR} {topicrow.LAST_POST_IMG}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END topicrow --&gt;
&lt;!-- BEGIN switch_no_topics --&gt;
&lt;tr&gt;
&lt;td class="row1" colspan="6" height="30" align="center" valign="middle"&gt;
&lt;span class="gen"&gt;
{L_NO_TOPICS}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END switch_no_topics --&gt;
&lt;tr&gt;
&lt;td class="catBottom" align="center" valign="middle" colspan="6" height="28"&gt;
&lt;span class="genmed"&gt;
{L_DISPLAY_TOPICS}:&amp;nbsp;{S_SELECT_TOPIC_DAYS}&amp;nbsp;&lt;input type="submit" class="liteoption" value="{L_GO}" name="submit" /&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>Again, we change the width from 100% to 717 pixels, and center-align it.</p><p>Under the black lines, the forum starts with the gray rows. But to make it fit better with the index page, we add an extra table row with two links: one to go back to the index page, and one to display the name of the selected forum. Instead of having the first link displaying the full name of the index page, we put instead a <code class="literal">&lt;</code> sign to keep it short, which we add in the code with <code class="literal">&amp;lt;</code>. The top part of the table should now look like this:<a id="id226" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">&lt;table border="0" cellpadding="4" cellspacing="1" width="717" class="forumline" align="center"&gt;
&lt;tr&gt;
&lt;th colspan="2" align="center" height="25" class="thCornerL" nowrap="nowrap"&gt;
&amp;nbsp;{L_TOPICS}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" align="center" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_REPLIES}&amp;nbsp;
&lt;/th&gt;
&lt;th width="100" align="center" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_AUTHOR}&amp;nbsp;
&lt;/th&gt;
&lt;th width="50" align="center" class="thTop" nowrap="nowrap"&gt;
&amp;nbsp;{L_VIEWS}&amp;nbsp;
&lt;/th&gt;
&lt;th align="center" class="thCornerR" nowrap="nowrap"&gt;
&amp;nbsp;{L_LASTPOST}&amp;nbsp;
&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th colspan="6" align="left" height="28" class="nav" nowrap="nowrap"&gt;
&lt;a href="{U_INDEX}" class="nav"&gt;&amp;lt;&lt;/a&gt;
&amp;nbsp;&amp;nbsp;
&lt;a class="nav" href="{U_VIEW_FORUM}"&gt;{FORUM_NAME}&lt;/a&gt;
&lt;/th&gt;
&lt;/tr&gt;
</pre></div><div class="mediaobject"><img src="graphics/1132_06_13.jpg" alt="Modifying the Forum Body in viewforum_body.tpl"/></div><p>The next part of the table looks like:</p><div class="informalexample"><pre class="programlisting">&lt;!-- BEGIN topicrow --&gt;
&lt;tr&gt;
&lt;td class="row1" align="center" valign="middle" width="20"&gt;
&lt;img src="{topicrow.TOPIC_FOLDER_IMG}" width="19" height="18" alt="{topicrow.L_TOPIC_FOLDER_ALT}" title="{topicrow.L_TOPIC_FOLDER_ALT}" /&gt;
&lt;/td&gt;
&lt;td class="row1" width="100%"&gt;
&lt;span class="topictitle"&gt;
{topicrow.NEWEST_POST_IMG}{topicrow.TOPIC_TYPE}&lt;a href="{topicrow.U_VIEW_TOPIC}" class="topictitle"&gt;{topicrow.TOPIC_TITLE}&lt;/a&gt;
&lt;/span&gt;
&lt;span class="gensmall"&gt;
&lt;br /&gt;
{topicrow.GOTO_PAGE}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle"&gt;
&lt;span class="postdetails"&gt;
{topicrow.REPLIES}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row3" align="center" valign="middle"&gt;
&lt;span class="name"&gt;
{topicrow.TOPIC_AUTHOR}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle"&gt;
&lt;span class="postdetails"&gt;
{topicrow.VIEWS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row3Right" align="center" valign="middle" nowrap="nowrap"&gt;
&lt;span class="postdetails"&gt;
{topicrow.LAST_POST_TIME}
&lt;br /&gt;
{topicrow.LAST_POST_AUTHOR} {topicrow.LAST_POST_IMG}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END topicrow --&gt;
</pre></div><p>This section will loop for every topic, between the <code class="literal">&lt;!-- BEGIN topicrow --&gt;</code> and the <code class="literal">&lt;!-- END topicrow --&gt;</code> tags. Notice that the rows have the background colors of the CSS classes<code class="literal"> row1, row2, row3</code>, and<code class="literal"> row3right</code>. There are a few things we could change, the first being the row color, and the second, the font size for the author of the topic. This row is darker than the two surrounding ones; it doesn’t look very good, so we change it to the class of<code class="literal"> row2</code>. As far as concerns the font, this row uses the<code class="literal"> name</code> span class, which we change to<code class="literal"> {T_FONTSIZE1}</code> in the CSS.</p><p>The red and bold font of the topic doesn’t look very good either, so we modify it to the small and normal default black font that we also used in the index.</p><p>This class is called<code class="literal"> topictitle</code>, and in the CSS it looks like:<a id="id228" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* titles for the topics: could specify viewed link colour too */
.topictitle,h1,h2 {
font-weight: bold;
font-size: {T_FONTSIZE2}px;
color : {T_BODY_TEXT};
}
a.topictitle:link {
text-decoration: none;
color : {T_BODY_LINK};
}
a.topictitle:visited {
text-decoration: none;
color : {T_BODY_VLINK};
}
a.topictitle:hover {
text-decoration: underline;
color : {T_BODY_HLINK};
}
</pre></div><p>... which we change to:</p><div class="informalexample"><pre class="programlisting">/* titles for the topics: could specify viewed link colour too */
.topictitle,h1,h2 {
<span class="strong"><strong>font-size: {T_FONTSIZE1}px;</strong></span>
color : {T_BODY_TEXT};
}
a.topictitle:link {
text-decoration: none;
<span class="strong"><strong>color : {T_BODY_TEXT};</strong></span>
}
a.topictitle:visited {
text-decoration: none;
<span class="strong"><strong>color : {T_BODY_TEXT};</strong></span>
}
a.topictitle:hover {
text-decoration: underline;
<span class="strong"><strong>color : {T_BODY_TEXT};</strong></span>
}
</pre></div><p>We are almost done with this section. It is worth mentioning that when an<span class="strong"><strong> Announcement, Sticky</strong></span>, or<span class="strong"><strong> Poll</strong></span> post is posted, it will display the matching text in front of the name of the topic using a variable named<code class="literal"> {topicrow.TOPIC_TYPE}</code>. To match the link color, we would like this text to be red instead of black, but at the same time would like it to use the class of<code class="literal"> topictitle</code>, like the rest of the text. To solve this, we add <code class="literal">&lt;span style="color: {T_BODY_LINK}"&gt;</code> and <code class="literal">&lt;/span&gt;</code> tags around it, which will change only the color of the text and not the size or other attributes.</p><p>Finally once we add the rollover effect as in the index page, the section should now look like this:</p><div class="informalexample"><pre class="programlisting">&lt;!-- BEGIN topicrow --&gt;
&lt;tr&gt;
&lt;td class="row1" align="center" valign="middle" width="20"&gt;
&lt;img src="{topicrow.TOPIC_FOLDER_IMG}" width="19" height="18" alt="{topicrow.L_TOPIC_FOLDER_ALT}" title="{topicrow.L_TOPIC_FOLDER_ALT}" /&gt;
&lt;/td&gt;
<span class="strong"><strong>&lt;td class="row1" width="100%"
onmouseover="this.style.backgroundcolor=’{T_TR_COLOR2}’;
this.style.cursor=’pointer’;"
onmouseOut=this.style.backgroundcolor=""
onclick="window.location.href=’{topicrow.U_VIEW_TOPIC}’"&gt;</strong></span>
&lt;span class="topictitle"&gt;
{topicrow.NEWEST_POST_IMG}
<span class="strong"><strong>&lt;span style="color: {T_BODY_LINK}"&gt;
{topicrow.TOPIC_TYPE}
&lt;/span&gt;</strong></span>
&lt;a href="{topicrow.U_VIEW_TOPIC}" class="topictitle"&gt;{topicrow.TOPIC_TITLE}&lt;/a&gt;
&lt;/span&gt;
&lt;span class="gensmall"&gt;
&lt;br /&gt;
{topicrow.GOTO_PAGE}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle"&gt;
&lt;span class="postdetails"&gt;
{topicrow.REPLIES}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle"&gt;
&lt;span class="name"&gt;
{topicrow.TOPIC_AUTHOR}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row2" align="center" valign="middle"&gt;
&lt;span class="postdetails"&gt;
{topicrow.VIEWS}
&lt;/span&gt;
&lt;/td&gt;
&lt;td class="row3Right" align="center" valign="middle" nowrap="nowrap"&gt;
&lt;span class="postdetails"&gt;
{topicrow.LAST_POST_TIME}
&lt;br /&gt;
{topicrow.LAST_POST_AUTHOR} {topicrow.LAST_POST_IMG}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END topicrow --&gt;
</pre></div><div class="mediaobject"><img src="graphics/1132_06_14.jpg" alt="Modifying the Forum Body in viewforum_body.tpl"/></div><p>The next part of the table looks like this:</p><div class="informalexample"><pre class="programlisting">&lt;!-- BEGIN switch_no_topics --&gt;
&lt;tr&gt;
&lt;td class="row1" colspan="6" height="30" align="center"
valign="middle"&gt;
&lt;span class="gen"&gt;
{L_NO_TOPICS}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END switch_no_topics --&gt;
</pre></div><p>This is what will be displayed if there are no topics in the forum. Again, the font size is a little too big and there are two ways to change it; either change the <code class="literal">&lt;span class="gen"&gt;</code> to <code class="literal">&lt;span class="gensmall"&gt;</code>, or change the CSS of<code class="literal"> gen</code> to use a different font size. Here, we do the latter since this template will probably always need the<code class="literal"> gen</code> class to be a smaller size.<a id="id230" class="indexterm"/>
</p><p>The table row looks empty and narrow as it is now, and so it needs to be a bit larger; we just add some line breaks here, and this part of the table is done:</p><div class="informalexample"><pre class="programlisting">&lt;!-- BEGIN switch_no_topics --&gt;
&lt;tr&gt;
&lt;td class="row1" colspan="6" height="30" align="center" valign="middle"&gt;
&lt;span class="gen"&gt;
&lt;br /&gt;
{L_NO_TOPICS}
&lt;br /&gt;
&lt;br /&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- END switch_no_topics --&gt;
</pre></div><div class="mediaobject"><img src="graphics/1132_06_15.jpg" alt="Modifying the Forum Body in viewforum_body.tpl"/></div><p>The last part of the table looks like this:</p><div class="informalexample"><pre class="programlisting">&lt;tr&gt;
&lt;td class="catBottom" align="center" valign="middle" colspan="6" height="28"&gt;
&lt;span class="genmed"&gt;
{L_DISPLAY_TOPICS}:&amp;nbsp;{S_SELECT_TOPIC_DAYS}&amp;nbsp;&lt;input type="submit" class="liteoption" value="{L_GO}" name="submit" /&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>Instead of using the gray background colors of<code class="literal"> row1, row2</code>, or<code class="literal"> row3</code>, the table uses a class called<code class="literal"> catBottom</code>. We find it in our CSS here:</p><div class="informalexample"><pre class="programlisting">td.cat,td.catHead,td.catSides,td.catLeft,td.catRight,td.catBottom {
/*
background-image: url(templates/subSilver/images/{T_TH_CLASS1});
background-color:{T_TR_COLOR3};
border: {T_TH_COLOR3};
border-style: solid;
*/
height: 28px;
}
</pre></div><p>We have already changed this code earlier when we removed the background color and image from our menu. We didn’t need it then, and so we added the<code class="literal"> /*</code> and<code class="literal"> */</code> comment markers around it. That was only for our<code class="literal"> catLeft</code> and<code class="literal"> catRight</code> classes, and now we need something different for our<code class="literal"> catBottom</code>. To solve this, we must remove the<code class="literal"> catBottom</code> class from this area and add it below with its own code:</p><div class="informalexample"><pre class="programlisting">td.cat,td.catHead,td.catSides,td.catLeft,td.catRight {
/*
background-image: url(templates/subSilver/images/{T_TH_CLASS1});
background-color:{T_TR_COLOR3};
border: {T_TH_COLOR3};
border-style: solid;
*/
height: 28px;
}
<span class="strong"><strong>td.catBottom { background-color:{T_TR_COLOR3}; }</strong></span>
</pre></div><p>We give it the background color of<code class="literal"> {T_TR_COLOR3}</code>, which is the same as<code class="literal"> row3</code>, the darkest of the gray tones.<a id="id232" class="indexterm"/>
</p><div class="section" title="Fixing the Size of the Jump Menu"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec03"/>Fixing the Size of the Jump Menu</h2></div></div></div><p>The last thing to fix in this table is the font size of the jump menu and the button next to it. The properties for both the jump menu and the button are under<code class="literal"> select</code> and<code class="literal"> input</code> in the CSS:<a id="id233" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">/* Form elements */
input,textarea, select {
color : {T_BODY_TEXT};
font: normal {T_FONTSIZE2}px {T_FONTFACE1};
border-color : {T_BODY_TEXT};
}
</pre></div><p>All we need to do is change the font size to<code class="literal"> {T_FONTSIZE1}</code>.</p><p>We<code class="literal"> align</code> the<code class="literal"> td</code> to the right instead of keeping it centered, to make the menu appear on the right side.</p><p>In the<code class="literal"> index_body.tpl</code> file we had a table after the main table, and it looked like this:</p><div class="informalexample"><pre class="programlisting">&lt;table width="717" cellspacing="0" border="0" align="center" cellpadding="2"&gt;
&lt;tr&gt;
&lt;td align="left"&gt;
&lt;span class="gensmall"&gt;
&lt;a href="{U_MARK_READ}" class="gensmall"&gt;{L_MARK_FORUMS_READ}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td align="right"&gt;
&lt;span class="gensmall"&gt;
{S_TIMEZONE}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>We use this again, except that this time we change the<code class="literal"> {L_MARK_FORUMS_READ}</code> variable to<code class="literal"> {L_MARK_TOPICS_READ}</code>, and then paste it in here.</p><p>After this table in the<code class="literal"> index_body.tpl</code>, came the table with the black lines above and below it, and it looked like this:</p><div class="informalexample"><pre class="programlisting">&lt;table align="center" width="717" border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr height="10"&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;
&lt;th colspan="2" class="thTop" height="25" nowrap="nowrap"&gt;&lt;table width="717" cellspacing="0" cellpadding="2" border="0" align="center"&gt;
&lt;tr&gt;
&lt;td align="left" valign="bottom"&gt;
&lt;span class="gensmall"&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
{LAST_VISIT_DATE}
&lt;br /&gt;
&lt;!-- END switch_user_logged_in --&gt;
{CURRENT_TIME}
&lt;br /&gt;
&lt;/span&gt;
&lt;span class="nav"&gt;
&lt;a href="{U_INDEX}" class="nav"&gt;{L_INDEX}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td align="right" valign="bottom" class="gensmall"&gt;
&lt;!-- BEGIN switch_user_logged_in --&gt;
&lt;a href="{U_SEARCH_NEW}" class="gensmall"&gt;{L_SEARCH_NEW}&lt;/a&gt;
&lt;br /&gt;
&lt;a href="{U_SEARCH_SELF}" class="gensmall"&gt;{L_SEARCH_SELF}&lt;/a&gt;
&lt;br /&gt;
&lt;!-- END switch_user_logged_in --&gt;
&lt;a href="{U_SEARCH_UNANSWERED}" class="gensmall"&gt;{L_SEARCH_UNANSWERED}&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr height="10"&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</pre></div><p>We copy this table from<code class="literal"> index.tpl</code> and paste it in here. Instead of using the variables used there, we use the ones we have from the original first table (the table that was earlier moved to the end of the file). The table then looks like:</p><div class="informalexample"><pre class="programlisting">&lt;table align="center" width="717" border="0" cellspacing="0" cellpadding="2"&gt;
&lt;tr height="10"&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;
&lt;th colspan="2" class="thTop" height="25" nowrap="nowrap"&gt;
&lt;table align="left" width="100%" border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td align="left" valign="top"&gt;
&lt;span class="gensmall"&gt;
{L_MODERATOR}: {MODERATORS}
&lt;br /&gt;
{LOGGED_IN_USER_LIST}
&lt;/span&gt;
&lt;/td&gt;
&lt;td align="right" valign="top"&gt;
&lt;span class="gensmall"&gt;
{PAGE_NUMBER}
&lt;br /&gt;
{PAGINATION}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr align="left" valign="top"&gt;
&lt;td colspan="2"&gt;
&lt;span class="nav"&gt;
&lt;a href="{U_INDEX}" class="nav"&gt;{L_INDEX}&lt;/a&gt;
&amp;nbsp;&amp;nbsp;~&amp;nbsp;&amp;nbsp;
&lt;a class="nav" href="{U_VIEW_FORUM}"&gt;{FORUM_NAME}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/th&gt;
&lt;/tr&gt;
&lt;tr height="10"&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</pre></div><div class="mediaobject"><img src="graphics/1132_06_18.jpg" alt="Fixing the Size of the Jump Menu"/></div><p>The next table looks like this:</p><div class="informalexample"><pre class="programlisting">&lt;table width="100%" cellspacing="2" border="0" align="center"
cellpadding="2"&gt;
&lt;tr&gt;
&lt;td align="left" valign="middle" width="50"&gt;
&lt;a href="{U_POST_NEW_TOPIC}"&gt;&lt;img src="{POST_IMG}" border="0" alt="{L_POST_NEW_TOPIC}" /&gt;&lt;/a&gt;
&lt;/td&gt;
&lt;td align="left" valign="middle" width="100%"&gt;
&lt;span class="nav"&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;
&lt;a href="{U_INDEX}" class="nav"&gt;{L_INDEX}&lt;/a&gt; -&gt; &lt;a class="nav" href="{U_VIEW_FORUM}"&gt;{FORUM_NAME}&lt;/a&gt;
&lt;/span&gt;
&lt;/td&gt;
&lt;td align="right" valign="middle" nowrap="nowrap"&gt;
&lt;span class="gensmall"&gt;
{S_TIMEZONE}
&lt;/span&gt;
&lt;br /&gt;
&lt;span class="nav"&gt;
{PAGINATION}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left" colspan="3"&gt;
&lt;span class="nav"&gt;
{PAGE_NUMBER}
&lt;/span&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
</pre></div><p>This table contains the<span class="strong"><strong> New Topic</strong></span> button and the end tag of the form, but we do not really need to use the other variables again, and can cut down the table to this:</p><div class="informalexample"><pre class="programlisting">&lt;table width="715" align="center" border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;a href="{U_POST_NEW_TOPIC}"&gt;&lt;img src="{POST_IMG}" border="0" alt="{L_POST_NEW_TOPIC}" /&gt;&lt;/a&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
</pre></div><p>Then we have the table with the jump box. We only need to change the width and the alignment, but here again we add an extra table row with a height of ten pixels, just to get some space between the different areas.</p><p>The last table displays the icons and the list of what the user can do in this topic, and we only fix the width for now.</p><div class="mediaobject"><img src="graphics/1132_06_19.jpg" alt="Fixing the Size of the Jump Menu"/></div><p>And this leads us to the end of<code class="literal"> viewforum_body.tpl</code>.</p></div></div>
<div class="section" title="And the Story Continues"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec09"/>And the Story Continues</h1></div></div></div><p>The rest of the<code class="literal"> .tpl</code> files need the same kind of editing: locate the class in the CSS, copy the tables from previously edited files whenever possible, and use the phpBB variables specific for the<code class="literal"> .tpl</code> you are working with. You should have a pretty good idea of how to do this by now, and instead of explaining every<code class="literal"> .tpl</code> in detail for the rest of the chapter, we will sum up their functions here.<a id="id234" class="indexterm"/>
</p><p>Starting from the first file throughout the<code class="literal"> NoseBleed</code> folder:</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec04"/></h2></div></div></div><div class="section" title="agreement.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec01"/>agreement.tpl</h3></div></div></div><p>This is the first page forum visitors encounter when they want to register. It explains the registration agreement terms and checks for the visitor’s age.</p></div><div class="section" title="bbcode.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec02"/>bbcode.tpl</h3></div></div></div><p>This is the file that phpBB uses to display quotes and code, e-mail links, images in posts, URLs, and more. If, for example, you do not like the way quotes are displayed, this is the file you need to edit.</p></div><div class="section" title="confirm_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec03"/>confirm_body.tpl</h3></div></div></div><p>This file is displayed if the user has to confirm something with either ‘yes’ or ‘no’.</p></div><div class="section" title="error_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec04"/>error_body.tpl</h3></div></div></div><p>This file displays error messages.</p></div><div class="section" title="faq_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec05"/>faq_body.tpl</h3></div></div></div><p>This file displays the<span class="strong"><strong> FAQ</strong></span> section.</p></div><div class="section" title="forumIE.css"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec06"/>forumIE.css</h3></div></div></div><p>This is for additional CSS code, with IE-specific formatting definitions.</p></div><div class="section" title="groupcp_info_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec07"/>groupcp_info_body.tpl</h3></div></div></div><p>This file displays usergroup information and members.</p></div><div class="section" title="groupcp_pending_info.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec08"/>groupcp_pending_info.tpl</h3></div></div></div><p>This file displays to the group moderators for them to allow or forbid pending users to join the usergroup.</p></div><div class="section" title="groupcp_user_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec09"/>groupcp_user_body.tpl</h3></div></div></div><p>This file displays an overview of all the usergroups, as well as<span class="emphasis"><em> which</em></span> usergroup the user belongs to.</p></div><div class="section" title="index.htm"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec10"/>index.htm</h3></div></div></div><p>This file displays an image made by the designer of the template. It is included and displayed to prevent visitors of the site from viewing the files in the folder.</p></div><div class="section" title="index_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec11"/>index_body.tpl</h3></div></div></div><p>This is the main page for your forum.</p></div><div class="section" title="jumpbox.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec12"/>jumpbox.tpl</h3></div></div></div><p>This file displays the jump box.</p></div><div class="section" title="login_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec13"/>login_body.tpl</h3></div></div></div><p>This file displays the way the forum looks when someone wants to log in.</p></div><div class="section" title="memberlist_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec14"/>memberlist_body.tpl</h3></div></div></div><p>This file displays the registered users of the forum.</p></div><div class="section" title="message_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec15"/>message_body.tpl</h3></div></div></div><p>This file displays a confirmation message from phpBB to the user; e.g., after changing your profile and clicking the submit button, you will be shown this file, to confirm that your profile has been updated.</p></div><div class="section" title="modcp_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec16"/>modcp_body.tpl</h3></div></div></div><p>This file is used when a moderator wants to moderate a post.</p></div><div class="section" title="modcp_move.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec17"/>modcp_move.tpl</h3></div></div></div><p>This file is used when a moderator wants to move a topic.</p></div><div class="section" title="modcp_split.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec18"/>modcp_split.tpl</h3></div></div></div><p>This file is used when a moderator wants to split a topic.</p></div><div class="section" title="modcp_viewip.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec19"/>modcp_viewip.tpl</h3></div></div></div><p>This file is used when a moderator wants to see the IP number of the user that posted the selected post.</p></div><div class="section" title="subSilver.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec20"/>subSilver.tpl</h3></div></div></div><p>This is the configuration file of your template and should be renamed to the template’s name, e.g.<code class="literal"> NoseBleed.tpl</code>. It tells phpBB where it can find the different images and icons for the template.</p></div><div class="section" title="subSilver.css"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec21"/>subSilver.css</h3></div></div></div><p>This is the CSS file of the template, and should be renamed to the template’s name if you want to reuse it. By default, it is not being used; instead, the CSS code is located at the beginning of the<code class="literal"> overall_header.tpl</code> file. Later, in<span class="emphasis"><em> Final Touches</em></span> section of this chapter, you will see how to move the CSS to its own file, which is something you might want to do if you are trying to save bandwidth.</p></div><div class="section" title="overall_footer.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec22"/>overall_footer.tpl</h3></div></div></div><p>This file is displayed at the bottom of almost all pages. It contains the link to the Admin Panel and the phpBB copyright note.</p></div><div class="section" title="overall_header.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec23"/>overall_header.tpl</h3></div></div></div><p>This file is displayed at the top of almost all pages. By default it has the CSS code at the beginning of the file.</p></div><div class="section" title="posting_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec24"/>posting_body.tpl</h3></div></div></div><p>This file displays when the user is posting a new post. It also contains JavaScript code for a pop-up window, used when the user wants to see all the emoticons he or she can use in the post.</p></div><div class="section" title="posting_poll_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec25"/>posting_poll_body.tpl</h3></div></div></div><p>This file displays how to add a poll to the post, and is loaded from<code class="literal"> posting_body.tpl</code> with the variable<code class="literal"> {POLLBOX}</code>.</p></div><div class="section" title="posting_preview.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec26"/>posting_preview.tpl</h3></div></div></div><p>This file displays how a preview of the post looks, and is loaded from<code class="literal"> posting_body.tpl</code> with the variable<code class="literal"> {POST_PREVIEW_BOX}</code>.</p></div><div class="section" title="posting_smilies.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec27"/>posting_smilies.tpl</h3></div></div></div><p>This file displays in the pop-up window all the emoticons that a user can use in his or her post. This file uses<code class="literal"> simple_header.tpl</code> and<code class="literal"> simple_footer.tpl</code> instead of<code class="literal"> overall_header.tpl</code> and<code class="literal"> overall_footer.tpl</code>.</p></div><div class="section" title="posting_topic_review.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec28"/>posting_topic_review.tpl</h3></div></div></div><p>This file appears in an iframe in<code class="literal"> posting_body.tpl</code>, using the<code class="literal"> {TOPIC_REVIEW_BOX}</code> variable. This file uses<code class="literal"> simple_header.tpl</code> and<code class="literal"> simple_footer.tpl</code> instead of<code class="literal"> overall_header.tpl</code> and<code class="literal"> overall_footer.tpl</code>.</p></div><div class="section" title="privmsgs_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec29"/>privmsgs_body.tpl</h3></div></div></div><p>This file displays all your private messages.</p></div><div class="section" title="privmsgs_popup.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec30"/>privmsgs_popup.tpl</h3></div></div></div><p>Whenever a user receives a new private message, a small pop-up window telling him or her about it will appear when he or she visits the forum.</p><p>This file uses<code class="literal"> simple_header.tpl</code> and<code class="literal"> simple_footer.tpl</code> instead of<code class="literal"> overall_header.tpl</code> and<code class="literal"> overall_footer.tpl</code>.</p></div><div class="section" title="privmsgs_preview.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec31"/>privmsgs_preview.tpl</h3></div></div></div><p>This file displays a preview of your private message, loaded from<code class="literal"> posting_body.tpl</code> with the<code class="literal"> {POST_PREVIEW_BOX}</code> variable.</p></div><div class="section" title="privmsgs_read_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec32"/>privmsgs_read_body.tpl</h3></div></div></div><p>This file displays when a user is reading a private message.</p></div><div class="section" title="profile_add_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec33"/>profile_add_body.tpl</h3></div></div></div><p>This file displays when a visitor registers, and it is used to gather information like username, password, location, etc. This file is also displayed if the user wants to change his or her profile settings.</p></div><div class="section" title="profile_avatar_gallery.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec34"/>profile_avatar_gallery.tpl</h3></div></div></div><p>This file displays a list of avatars that the user can choose from, to add to his or her profile setting.</p></div><div class="section" title="profile_send_email.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec35"/>profile_send_email.tpl</h3></div></div></div><p>This file displays when a user is sending an e-mail to another user of the forum.</p></div><div class="section" title="profile_send_pass.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec36"/>profile_send_pass.tpl</h3></div></div></div><p>This file displays how to retrieve a forgotten password.</p></div><div class="section" title="profile_view_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec37"/>profile_view_body.tpl</h3></div></div></div><p>This file displays the profile of a registered user.</p></div><div class="section" title="search_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec38"/>search_body.tpl</h3></div></div></div><p>This file displays when a user is searching a post or topic.</p></div><div class="section" title="search_results_posts.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec39"/>search_results_posts.tpl</h3></div></div></div><p>This file displays only a list of posts containing the searched for word or expression.</p></div><div class="section" title="search_results_topics.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec40"/>search_results_topics.tpl</h3></div></div></div><p>This file displays only a list of topics containing the searched for word or expression.</p></div><div class="section" title="search_username.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec41"/>search_username.tpl</h3></div></div></div><p>This file displays, in a pop-up window, when searching for a username. It is loaded from<code class="literal"> posting_body.tpl</code> with the variable<code class="literal"> {U_SEARCH_USER}</code>. This file uses<code class="literal"> simple_header.tpl</code> and<code class="literal"> simple_footer.tpl</code> instead of<code class="literal"> overall_header.tpl</code> and<code class="literal"> overall_footer.tpl</code>.</p></div><div class="section" title="simple_footer.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec42"/>simple_footer.tpl</h3></div></div></div><p>This file replaces the<code class="literal"> overall_footer.tpl</code> in pop-up windows and iframes.</p></div><div class="section" title="simple_header.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec43"/>simple_header.tpl</h3></div></div></div><p>This file replaces the<code class="literal"> overall_header.tpl</code> in popup windows and iframes. Sometimes, copying the CSS from<code class="literal"> overall_header.tpl</code> and pasting it into<code class="literal"> simple_header.tpl</code> is enough to make the look of the pop-up windows and iframes match the rest of the template.</p></div><div class="section" title="theme_info.cfg"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec44"/>theme_info.cfg</h3></div></div></div><p>This is the configuration file for the template. The first time it is installed, the template uses the default values of colors, fonts, etc., from this file. If you plan on releasing your templates for other people, be sure you have the correct values in this file. You do not need to type all these values in manually. If you go to the Admin Panel, under Styles Admin and select<span class="strong"><strong> Export</strong></span>, phpBB will create a new<code class="literal"> theme_info.cfg</code> file with all the font and color settings from the Admin Panel. You can download and use this file instead.</p></div><div class="section" title="viewforum_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec45"/>viewforum_body.tpl</h3></div></div></div><p>This file displays the list of topics in the selected forum.</p></div><div class="section" title="viewonline_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec46"/>viewonline_body.tpl</h3></div></div></div><p>This file displays the list of users and guests on the forum.</p></div><div class="section" title="viewtopic_body.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec47"/>viewtopic_body.tpl</h3></div></div></div><p>This file displays the topics on your forum.</p></div><div class="section" title="viewtopic_poll_ballot.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec48"/>viewtopic_poll_ballot.tpl</h3></div></div></div><p>This file displays the poll ballot in the topic. It is loaded from<code class="literal"> viewtopic_body.tpl</code> with the<code class="literal"> {POLL_DISPLAY}</code> variable.</p></div><div class="section" title="viewtopic_poll_result.tpl"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec49"/>viewtopic_poll_result.tpl</h3></div></div></div><p>This file displays the result of the poll in the topic. It is loaded from<code class="literal"> viewtopic_body.tpl</code> with the<code class="literal"> {POLL_DISPLAY}</code> variable.</p></div></div><div class="section" title="The Admin Folder"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec05"/>The Admin Folder</h2></div></div></div><p>The files in the<code class="literal"> admin</code> folder of the template control how the Admin Panel is displayed. They use<code class="literal"> page_header.tpl</code> and<code class="literal"> page_footer.tpl</code> instead of<code class="literal"> overall_header.tpl</code> and<code class="literal"> overall_footer.tpl</code>. Sometimes, copying the CSS from<code class="literal"> overall_header.tpl</code> and pasting it into<code class="literal"> page_header.tpl</code> is enough to make the Admin Panel match the rest of the template.</p></div></div>
<div class="section" title="Icons and Images"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec10"/>Icons and Images</h1></div></div></div><p>All the icons and images of the template are located in the<code class="literal"> images</code> folder. This folder contains another folder, which contains the specific language images. There is one thing to notice here: the icon for<span class="strong"><strong> Delete</strong></span> is universal and is displayed only by an<span class="strong"><strong> X</strong></span> in the image. If we want our image to display actual text such as<span class="strong"><strong> Delete</strong></span> instead, we should place the image in the specific language folder, in this case the<code class="literal"> lang_english</code> folder. Since phpBB will not look for the<span class="strong"><strong> Delete</strong></span> image in the language folder, we need to edit the<code class="literal"> NoseBleed.cfg</code> file. Going down in the code we find this:</p><div class="informalexample"><pre class="programlisting">$images[‘icon_delpost’] = "$current_template_images/icon_delete.gif";
</pre></div><p>This is the path phpBB is using for this image. Adding the<code class="literal"> {LANG}</code> language variable, we can specify the new path:</p><div class="informalexample"><pre class="programlisting">$images[‘icon_delpost’] = "$current_template_images/{LANG}/icon_delete.gif";
</pre></div><p>Making all the new images and icons might scare off many people, but there is a bright side to this: we do not have to start from scratch.</p><p>At<a class="ulink" href="http://www.phpbb.com/downloads.php#subSilver"> http://www.phpbb.com/downloads.php#subSilver</a> the original SDK files can be downloaded, and then edited with Photoshop, GIMP, Paint Shop Pro, and other programs. An easy solution if we are only interested in changing the font color, font size or background.</p><p>For the<code class="literal"> NoseBleed</code> template, this file is downloaded and the font and the background of the icons changed, but the little icons for the language buttons are kept the same.</p><p>To simplify the use of icons and images even more, all the icons that are used for<span class="strong"><strong> no new topics</strong></span> are changed into blank GIF files; only new topics will have an icon. We’ve also removed the<span class="strong"><strong> no new topic</strong></span> icons from the<code class="literal"> index_body.tpl</code> and<code class="literal"> viewforum_body.tpl</code> files explanation, since they were just blank icons now.</p></div>
<div class="section" title="Final Touches"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec11"/>Final Touches</h1></div></div></div><p>The template is pretty much finished now, and the only thing left to do is test it for errors and optimize it. Remember to check for links pointing to the<code class="literal"> subSilver</code> directory, since these need to be changed to our new template folder.<a id="id235" class="indexterm"/>
</p><p>We can also change the administrator and moderator colors on the index page with<span class="strong"><strong> Font Color 2</strong></span> and<span class="strong"><strong> Font Color 3</strong></span> in the Admin Panel.</p><p>One way to optimize the template is to place the CSS in its own file, saving us bandwidth and making the forum load faster. For this, open the forum in your browser, right-click somewhere on the site, and select<span class="strong"><strong> View Source</strong></span> (in IE) or<span class="strong"><strong> View | Source</strong></span> or<span class="strong"><strong> Sourcecode</strong></span> (in other browsers). Copy all the CSS code between the <code class="literal">&lt;style type="text/css"&gt;</code> and <code class="literal">&lt;/style&gt;</code> tags and paste it into the CSS file of the template. Upload the new CSS file and delete the CSS code from the<code class="literal"> overall_header.tpl</code>. At the top of the<code class="literal"> overall_header.tpl</code>, you’ll find:</p><div class="informalexample"><pre class="programlisting">&lt;!-- link rel="stylesheet" href="templates/subSilver/{T_HEAD_STYLESHEET}" type="text/css" --&gt;
</pre></div><p>... which you need to change to:</p><div class="informalexample"><pre class="programlisting">&lt;link rel="stylesheet" href="templates/NoseBleed/{T_HEAD_STYLESHEET}"
type="text/css"&gt;
</pre></div><p>The<code class="literal"> {T_HEAD_STYLESHEET}</code> variable uses the default name of the CSS file, in this case<code class="literal"> NoseBleed.css</code>. If you want to name the CSS file something else, replace this variable with the name of the CSS file you want to use instead.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec12"/>Summary</h1></div></div></div><p>We have covered a lot of things, and yet we have only just begun. The HTML, JavaScript, and CSS code explained in this chapter is merely just a narrow introduction. With continued work, you will discover new tricks and gain more knowledge, resulting in even better coding. However, I hope that by now you have gained the basic skills and courage to make your own templates. It might seem like an overwhelming task, and there is no doubt that it will take some time to complete, but when you first get started you will see that it is not so difficult.</p><p>There are several active template development communities where you can always find help, comments, and people to test your templates; both the phpBB community at<a class="ulink" href="http://www.phpbb.com/phpBB/"> http://www.phpbb.com/phpBB/</a> and the phpBBHacks.com support forums at<a class="ulink" href="http://www.phpbbhacks.com/forums/"> http://www.phpbbhacks.com/forums/</a> are places with very helpful people.</p></div></body></html>