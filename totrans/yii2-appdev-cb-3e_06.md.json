["```php\n    ./yii migrate/create create_film_table\n\n    ```", "```php\n    public function up()\n        {\n            $tableOptions = null;\n            if ($this->db->driverName === 'mysql') {\n                $tableOptions = 'CHARACTER SET utf8 COLLATE\n                    utf8_general_ci ENGINE=InnoDB';\n            }\n            $this->createTable('{{%film}}', [\n                'id' => $this->primaryKey(),\n                'title' => $this->string(64)->notNull(),\n                'release_year' => $this->integer(4)->notNull(),\n            ], $tableOptions);\n\n            $this->batchInsert('{{%film}}', ['id','title','release_year'], [\n                [1, 'Interstellar', 2014],\n                [2, \"Harry Potter and the Philosopher's Stone\",2001],\n                [3, 'Back to the Future', 1985],\n                [4, 'Blade Runner', 1982],\n                [5, 'Dallas Buyers Club', 2013],\n            ]);\n        }\n    ```", "```php\n    public function down()\n    {\n        $this->dropTable('film');\n    }\n    ```", "```php\n    Options +FollowSymLinks\n    IndexIgnore */*\n    RewriteEngine on\n    # if a directory or a file exists, use it directly\n    RewriteCond %{REQUEST_FILENAME} !-f\n    RewriteCond %{REQUEST_FILENAME} !-d\n    # otherwise forward it to index.php\n    RewriteRule . index.php\n    ```", "```php\n    <?php\n        namespace app\\controllers;\n\n        use yii\\rest\\ActiveController;\n\n        class FilmController extends ActiveController\n        {\n            public $modelClass = app\\models\\Film';\n        }\n    ```", "```php\n    'urlManager' => [\n        'enablePrettyUrl' => true,\n        'enableStrictParsing' => true,\n        'showScriptName' => false,\n        'rules' => [\n            ['class' => 'yii\\rest\\UrlRule', 'controller' => 'films'],\n        ],\n    ],\n    ```", "```php\n    'request' => [\n        'cookieValidationKey' => 'mySecretKey',\n        'parsers' => [\n            'application/json' => 'yii\\web\\JsonParser',\n        ],\n    ]\n    ```", "```php\ncurl -i -H \"Accept:application/json\" \"http://yii-book.app/films\"\n\n```", "```php\nHTTP/1.1 200 OK\nDate: Wed, 23 Sep 2015 17:46:35 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nX-Pagination-Total-Count: 5\nX-Pagination-Page-Count: 1\nX-Pagination-Current-Page: 1\nX-Pagination-Per-Page: 20\nLink: <http://yii-book.app/films?page=1>; rel=self\nContent-Length: 301\nContent-Type: application/json; charset=UTF-8\n\n[{\"id\":1,\"title\":\"Interstellar\",\"release_year\":2014},{\"id\":2,\"title\":\"Harry Potter and the Philosopher's Stone\",\"release_year\":2001},{\"id\":3,\"title\":\"Back to the Future\",\"release_year\":1985},{\"id\":4,\"title\":\"Blade Runner\",\"release_year\":1982},{\"id\":5,\"title\":\"Dallas Buyers Club\",\"release_year\":2013}]\n```", "```php\ncurl -i -H \"Accept:application/json\" -X POST -d title=\"New film\" -d release_year=2015 \"http://yii-book.app/films\"\n\n```", "```php\nHTTP/1.1 201 Created\nDate: Wed, 23 Sep 2015 17:48:06 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nLocation: http://yii-book.app/films/6\nContent-Length: 49\nContent-Type: application/json; charset=UTF-8\n\n{\"title\":\"New film\",\"release_year\":\"2015\",\"id\":6}\n```", "```php\ncurl -i -H \"Accept:application/json\" \"http://yii-book.app/films/6\"\n\n```", "```php\nHTTP/1.1 200 OK\nDate: Wed, 23 Sep 2015 17:48:36 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nContent-Length: 47\nContent-Type: application/json; charset=UTF-8\n\n{\"id\":6,\"title\":\"New film\",\"release_year\":2015}\n```", "```php\ncurl -i -H \"Accept:application/json\" -X DELETE \"http://yii-book.app/films/6\"\n\n```", "```php\nHTTP/1.1 204 No Content\nDate: Wed, 23 Sep 2015 17:48:55 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nContent-Length: 0\nContent-Type: application/json; charset=UTF-8\n```", "```php\nuse yii\\web\\Response;\npublic function behaviors()\n{\n    $behaviors = parent::behaviors();\n    $behaviors['contentNegotiator']['formats']['application/xml']= Response::FORMAT_XML;\n    return $behaviors;\n}\n```", "```php\ncurl -i -H \"Accept:application/xml\" \"http://yii-book.app/films\"\n\n```", "```php\nHTTP/1.1 200 OK\nDate: Wed, 23 Sep 2015 18:02:47 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nX-Pagination-Total-Count: 5\nX-Pagination-Page-Count: 1\nX-Pagination-Current-Page: 1\nX-Pagination-Per-Page: 20\nLink: <http://yii-book.app/films?page=1>; rel=self\nContent-Length: 516\nContent-Type: application/xml; charset=UTF-8\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<response>\n    <item>\n        <id>1</id>\n        <title>Interstellar</title>\n        <release_year>2014\n        </release_year>\n    </item>\n    <item>\n        <id>2</id>\n\n<title>Harry Potter and the Philosopher's Stone</title>\n        <release_year>2001\n        </release_year>\n    </item>\n    <item>\n        <id>3</id>\n        <title>Back to the Future</title>\n        <release_year>1985\n        </release_year>\n    </item>\n    <item>\n        <id>4</id>\n        <title>Blade Runner</title>\n        <release_year>1982\n        </release_year>\n    </item>\n    <item>\n        <id>5</id>\n        <title>Dallas Buyers Club</title>\n        <release_year>2013\n        </release_year>\n    </item>\n</response>\n```", "```php\n'urlManager' => [\n    //..\n    'rules' => [\n        [\n            'class' => 'yii\\rest\\UrlRule',\n            'controller' => 'film'\n            'pluralize' => false\n        ],\n    ],\n    //..\n]\n```", "```php\n'urlManager' => [\n    //..\n    'rules' => [\n        [\n            'class' => 'yii\\rest\\UrlRule',\n            'controller' => ['super-films' => 'film']\n        ],\n    ],\n    //..\n]\n```", "```php\n    <?php\n\n        namespace app\\controllers;\n\n        use app\\models\\User;\n        use Yii;\n        use yii\\helpers\\ArrayHelper;\n        use yii\\rest\\ActiveController;\n        use yii\\filters\\auth\\HttpBasicAuth;\n\n        class FilmController extends ActiveController\n        {\n            public $modelClass = 'app\\models\\Film';\n\n            public function behaviors()\n            {\n                return ArrayHelper::merge(parent::behaviors(),[\n                    'authenticator' => [\n                    'authMethods' => [\n                        'basicAuth' => [\n                            'class' =>HttpBasicAuth::className(),\n                            'auth' => function ($username,$password) {\n                                $user =User::findByUsername($username);\n\n                                if ($user !== null && $user->validatePassword($password)){\n                                    return $user;\n                                }\n\n                                return null;\n                            },\n                        ]\n                    ]\n                ]\n\n            ]);\n        }\n    }\n    ```", "```php\ncurl -i -H \"Accept:application/json\" \"http://yii-book.app/films\"\n\n```", "```php\nHTTP/1.1 401 Unauthorized\nDate: Thu, 24 Sep 2015 01:01:24 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nWww-Authenticate: Basic realm=\"api\"\nContent-Length: 149\nContent-Type: application/json; charset=UTF-8\n\n{\"name\":\"Unauthorized\",\"message\":\"You are requesting with an invalid credential.\",\"code\":0,\"status\":401,\"type\":\"yii\\\\web\\\\UnauthorizedHttpException\"}\n```", "```php\n    curl -i -H \"Accept:application/json\" -u admin:admin \"http://yii-book.app/films\"\n\n    ```", "```php\n    HTTP/1.1 200 OK\n    Date: Thu, 24 Sep 2015 01:01:40 GMT\n    Server: Apache\n    X-Powered-By: PHP/5.5.23\n    Set-Cookie: PHPSESSID=8b3726040bf8850ebd07209090333103; path=/; HttpOnly\n    Expires: Thu, 19 Nov 1981 08:52:00 GMT\n    Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\n    Pragma: no-cache\n    X-Pagination-Total-Count: 5\n    X-Pagination-Page-Count: 1\n    X-Pagination-Current-Page: 1\n    X-Pagination-Per-Page: 20\n    Link: <http://yii-book.app/films?page=1>; rel=self\n    Content-Length: 301\n    Content-Type: application/json; charset=UTF-8\n    [{\"id\":1,\"title\":\"Interstellar\",\"release_year\":2014},{\"id\":2,\"title\":\"Harry Potter and the Philosopher's Stone\",\"release_year\":2001},{\"id\":3,\"title\":\"Back to the Future\",\"release_year\":1985},{\"id\":4,\"title\":\"Blade Runner\",\"release_year\":1982},{\"id\":5,\"title\":\"Dallas Buyers Club\",\"release_year\":2013}]\n    ```", "```php\n     ./yii migrate/create create_user_allowance_table\n\n    ```", "```php\n    public function up()\n        {\n            $tableOptions = null;\n            if ($this->db->driverName === 'mysql') {\n                $tableOptions = 'CHARACTER SET utf8 COLLATEutf8_general_ci ENGINE=InnoDB';\n           }\n           $this->createTable('{{%user_allowance}}', [\n               'user_id' => $this->primaryKey(),\n               'allowed_number_requests' => $this->integer(10)->notNull(),\n               'last_check_time' => $this->integer(10)->notNull()\n           ], $tableOptions);\n        }\n    ```", "```php\n    public function down()\n        {\n            $this->dropTable('{{%user_allowance}}');\n        }\n    ```", "```php\n<?php\n\n    namespace app\\controllers;\n\n    use yii\\rest\\ActiveController;\n    use yii\\filters\\RateLimiter;\n    use yii\\filters\\auth\\QueryParamAuth;\n\n    class FilmController extends ActiveController\n    {\n        public $modelClass = 'app\\models\\Film';\n\n        public function behaviors()\n        {\n            $behaviors = parent::behaviors();\n\n            $behaviors['authenticator'] = [\n            'class' => QueryParamAuth::className(),\n            ];\n\n            $behaviors['rateLimiter'] = [\n            'class' => RateLimiter::className(),\n            'enableRateLimitHeaders' => true\n            ];\n\n        return $behaviors;\n    }\n}\n```", "```php\n<?php\n\n    namespace app\\models;\n\n    class User extends \\yii\\base\\Object implements \\yii\\web\\IdentityInterface, \\yii\\filters\\RateLimitInterface\n    {\n        public $id;\n        public $username;\n        public $password;\n        public $authKey;\n        public $accessToken;\n\n        const RATE_LIMIT_NUMBER = 5;\n        const RATE_LIMIT_RESET = 60;\n\n    //  it means that user allowed only 5 requests per one minute\n        public function getRateLimit($request, $action)\n        {\n            return [self::RATE_LIMIT_NUMBER,self::RATE_LIMIT_RESET];\n        }\n\n        public function loadAllowance($request, $action)\n        {\n            $userAllowance = UserAllowance::findOne($this->id);\n\n            return $userAllowance ?\n            [$userAllowance->allowed_number_requests,$userAllowance->last_check_time] :\n             $this->getRateLimit($request, $action);\n        }\n\n    public function saveAllowance($request, $action,$allowance, $timestamp)\n    {\n        $userAllowance = ($allowanceModel =UserAllowance::findOne($this->id)) ?$allowanceModel : new UserAllowance();\n        $userAllowance->user_id = $this->id;\n        $userAllowance->last_check_time = $timestamp;\n        $userAllowance->allowed_number_requests =$allowance;\n        $userAllowance->save();\n    }\n\n   // other User model methods\n}\n```", "```php\ncurl -i \"http://yii-book.app/films?access-token=100-token\"\n\n```", "```php\nHTTP/1.1 200 OK\nDate: Thu, 24 Sep 2015 01:35:51 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nSet-Cookie: PHPSESSID=495a928978cc732bee853b83f521eba2; path=/; HttpOnly\nExpires: Thu, 19 Nov 1981 08:52:00 GMT\nCache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\nPragma: no-cache\nX-Rate-Limit-Limit: 5\nX-Rate-Limit-Remaining: 4\nX-Rate-Limit-Reset: 0\nX-Pagination-Total-Count: 5\nX-Pagination-Page-Count: 1\nX-Pagination-Current-Page: 1\nX-Pagination-Per-Page: 20\nLink: <http://yii-book.app/films?access-token=100-token&page=1>; rel=self\nContent-Length: 301\nContent-Type: application/json; charset=UTF-8\n\n[{\"id\":1,\"title\":\"Interstellar\",\"release_year\":2014},{\"id\":2,\"title\":\"Harry Potter and the Philosopher's Stone\",\"release_year\":2001},{\"id\":3,\"title\":\"Back to the Future\",\"release_year\":1985},{\"id\":4,\"title\":\"Blade Runner\",\"release_year\":1982},{\"id\":5,\"title\":\"Dallas Buyers Club\",\"release_year\":2013}]\n```", "```php\nHTTP/1.1 429 Too Many Requests\nDate: Thu, 24 Sep 2015 01:37:24 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nSet-Cookie: PHPSESSID=bb630ca8a641ef92bd210c0a936e3149; path=/; HttpOnly\nExpires: Thu, 19 Nov 1981 08:52:00 GMT\nCache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\nPragma: no-cache\nX-Rate-Limit-Limit: 5\nX-Rate-Limit-Remaining: 0\nX-Rate-Limit-Reset: 60\nContent-Length: 131\nContent-Type: application/json; charset=UTF-8\n{\"name\":\"Too Many Requests\",\"message\":\"Rate limit exceeded.\",\"code\":0,\"status\":429,\"type\":\"yii\\\\web\\\\TooManyRequestsHttpException\"}\n```", "```php\n    app/\n        modules/\n            v1/\n                controllers/\n                    FilmController.php\n                Module.php\n            v2/\n                controllers/\n                    FilmController.php\n                Module.php\n    ```", "```php\n    'modules' => [\n       'v1' => [\n           'class' => 'app\\modules\\v1\\Module',\n       ],\n        'v2' => [\n           'class' => 'app\\modules\\v2\\Module'\n       ]\n    ],\n    ```", "```php\n    <?php\n\n        namespace app\\modules\\v1\\controllers;\n\n        use yii\\rest\\ActiveController;\n\n        class FilmController extends ActiveController\n        {\n            public $modelClass = 'app\\models\\Film';\n        }\n\n        <?php\n\n            namespace app\\modules\\v1\\controllers;\n\n            use yii\\rest\\ActiveController;\n\n            class FilmController extends ActiveController\n            {\n                public $modelClass = 'app\\models\\Film';\n            }\n    ```", "```php\n    <?php\n        namespace app\\modules\\v1;\n\n        class Module extends  \\yii\\base\\Module\n        {\n            public function init()\n            {\n                parent::init();\n            }\n        }\n\n    <?php\n        namespace app\\modules\\v2;\n\n        class Module extends  \\yii\\base\\Module\n        {\n            public function init()\n            {\n                parent::init();\n            }\n        }\n    ```", "```php\n      // as a vendor content type\n      Accept: application/vnd.company.myproject-v1+json\n      // via a parameter\n      Accept: application/json; version=v1\n    ```", "```php\n'response' => [\n    'class' => 'yii\\web\\Response',\n    'on beforeSend' => function ($event) {\n        $response = $event->sender;\n        if ($response->data !== null) {\n            $response->data = [\n            'success' => $response->isSuccessful,\n            'timestamp' => time(),\n            'path' => Yii::$app->request->getPathInfo(),\n            'data' => $response->data,\n            ];\n        }\n    },\n],\n```", "```php\ncurl -i \"http://yii-book.app/films/1\" \n\n```", "```php\nHTTP/1.1 200 OK\nDate: Thu, 24 Sep 2015 04:24:52 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nContent-Length: 115\nContent-Type: application/json; charset=UTF-8\n\n{\"success\":true,\"timestamp\":1443068692,\"path\":\"films/1\",\"data\":{\"id\":1,\"title\":\"Interstellar\",\"release_year\":2014}}\n```", "```php\ncurl -i \"http://yii-book.app/films/1000\"\n\n```", "```php\nHTTP/1.1 404 Not Found\nDate: Thu, 24 Sep 2015 04:24:26 GMT\nServer: Apache\nX-Powered-By: PHP/5.5.23\nContent-Length: 186\nContent-Type: application/json; charset=UTF-8\n\n{\"success\":false,\"timestamp\":1443068666,\"path\":\"films/1000\",\"data\":{\"name\":\"Not Found\",\"message\":\"Object not found: 1000\",\"code\":0,\"status\":404,\"type\":\"yii\\\\web\\\\NotFoundHttpException\"}}\n```"]