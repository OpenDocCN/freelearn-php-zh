<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer182">
<h1 class="chapter-number" id="_idParaDest-116" lang="en-GB"><a id="_idTextAnchor116"/>6</h1>
<h1 id="_idParaDest-117" lang="en-GB"><a id="_idTextAnchor117"/>Managing Permissions, Roles, and Capabilities</h1>
<p lang="en-GB">Permissions are complex yet powerful and can be seen as the backbone of Moodle. In this chapter, we will cover contexts, roles, and capabilities, which define what users can and cannot see and do in your <span class="No-Break" lang="">Moodle system.</span></p>
<p lang="en-GB">In this chapter, we will cover the <span class="No-Break" lang="">following topics:</span></p>
<ul>
<li lang="en-GB">Exploring Moodle’s <span class="No-Break" lang="">predefined roles</span></li>
<li lang="en-GB"><span class="No-Break" lang="">Understanding contexts</span></li>
<li lang="en-GB">Assigning roles <span class="No-Break" lang="">to users</span></li>
<li lang="en-GB"><span class="No-Break" lang="">Understanding capabilities</span></li>
<li lang="en-GB">Roles and <span class="No-Break" lang="">context management</span></li>
</ul>
<p lang="en-GB">We will start with a short definition that should be kept in mind when <span class="No-Break" lang="">managing permissions.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">A role<a id="_idIndexMarker461"/> is a collection of capabilities with corresponding permissions and risks. A role is assigned to a user in <span class="No-Break" lang="">a context.</span></p>
<p lang="en-GB">Let’s have a look at the following high-level<a id="_idIndexMarker462"/> diagram, which visualizes the preceding definition before we cover all permission-related topics <span class="No-Break" lang="">in detail:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer155">
<img alt="Figure 6.1 – High-level permissions overview " height="830" src="image/Figure_6.01_B18779.jpg" width="1209"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.1 – High-level permissions overview</p>
<p lang="en-GB">Every user in your Moodle system<a id="_idIndexMarker463"/> is assigned one or many roles, and a role comprises many capabilities with associated permissions and risks. Each role assignment takes place in a particular context, representing a hierarchically organized <span class="No-Break" lang="">ring-fenced area.</span></p>
<p lang="en-GB">We will begin this chapter by exploring the standard roles of Moodle before covering the slightly abstract concept of contexts. It will get more practical when we assign roles in different contexts. Next, we will look at how roles are structured and modified before creating our own roles. We will conclude this chapter with role management and some best <span class="No-Break" lang="">practice advice.</span></p>
<p lang="en-GB">By the end of this chapter, you will have understood the core concepts of the Moodle permission system, which comprises roles, contexts, capabilities, and the <span class="No-Break" lang="">management thereof.</span></p>
<h1 id="_idParaDest-118" lang="en-GB"><a id="_idTextAnchor118"/>Exploring Moodle’s predefined roles</h1>
<p lang="en-GB">Moodle comes<a id="_idIndexMarker464"/> with several predefined<a id="_idIndexMarker465"/> roles. These standard roles are suitable for most educational setups, but some institutions require modifications to be made to the roles system to tailor Moodle to their <span class="No-Break" lang="">specific needs.</span></p>
<p lang="en-GB">Each role has capabilities for several actions that can be carried out. For example, an administrator and a course creator can create new courses, whereas all the other roles are denied this right. Likewise, a teacher is allowed to moderate forums, whereas students can only contribute <span class="No-Break" lang="">to them.</span></p>
<p lang="en-GB">The description of each standard role and the short names that are used, internally and in operations, such as user batch upload, are listed in the following table (taken from <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">User</strong> | <strong class="bold" lang="">Permissions</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Define roles</strong></span><span class="No-Break" lang="">):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer156">
<img alt="Figure 6.2 – Moodle’s predefined roles " height="557" src="image/Figure_6.02_B18779.jpg" width="1392"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.2 – Moodle’s predefined roles</p>
<p lang="en-GB">Moodle Workplace has various extra roles to handle its business-oriented audience, such as tenant administrator, certification manager, dynamic rules manager, organization structure manager, program manager, and report <span class="No-Break" lang="">builder manager.</span></p>
<p lang="en-GB">Before we can do anything with roles, we need to understand the concept of contexts, which will be dealt <span class="No-Break" lang="">with next.</span></p>
<h1 id="_idParaDest-119" lang="en-GB"><a id="_idTextAnchor119"/>Understanding contexts</h1>
<p lang="en-GB">A role (remember, a collection of capabilities with corresponding permissions) can<a id="_idIndexMarker466"/> be assigned<a id="_idIndexMarker467"/> within different contexts. So, what <span class="No-Break" lang="">are contexts?</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB"><strong class="bold" lang="">Contexts</strong> are the areas in Moodle where roles can be assigned <span class="No-Break" lang="">to users.</span></p>
<p class="callout" lang="en-GB">A user has a role in any <span class="No-Break" lang="">given context.</span></p>
<p lang="en-GB">A context can be a course, a category, an activity, a user, a block, or Moodle itself. Moodle comes with seven contexts, each with a <span class="No-Break" lang="">given scope:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">System</strong>: Moodle itself – that is, the entire<a id="_idIndexMarker468"/> system, also<a id="_idIndexMarker469"/> known as the core or <span class="No-Break" lang="">global context</span></li>
<li lang="en-GB"><strong class="bold" lang="">Course category</strong>: A category and <span class="No-Break" lang="">its sub-categories</span></li>
<li lang="en-GB"><strong class="bold" lang="">Course</strong>: A <span class="No-Break" lang="">single course</span></li>
<li lang="en-GB"><strong class="bold" lang="">Activity module</strong>: A course activity <span class="No-Break" lang="">or resource</span></li>
<li lang="en-GB"><strong class="bold" lang="">Block</strong>: A <span class="No-Break" lang="">sidebar block</span></li>
<li lang="en-GB"><strong class="bold" lang="">User</strong>: A <span class="No-Break" lang="">user account</span></li>
<li lang="en-GB"><strong class="bold" lang="">Site (Front page)</strong>: The home page and files that can be accessed<a id="_idIndexMarker470"/> outside courses (often referred to as the front <span class="No-Break" lang="">page context)</span></li>
</ul>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Each context has a <strong class="bold" lang="">scope</strong>. A scope is a ring-fenced<a id="_idIndexMarker471"/> area or boundary in which specific actions can be <span class="No-Break" lang="">carried out</span></p>
<p lang="en-GB">This arrangement is compared to a large building with multiple floors and rooms. A floor manager has certain rights and responsibilities for every room on a level, but these do not apply to rooms on other floors of <span class="No-Break" lang="">the property.</span></p>
<p lang="en-GB">Role assignments<a id="_idIndexMarker472"/> must be made at the correct context level to implement, such a structure. For example, the teacher role should be assigned at the <strong class="bold" lang="">Course</strong> context level, the moderator for a particular forum at the <strong class="bold" lang="">Activity</strong> context level, the administrator at the <strong class="bold" lang="">System</strong> context level, and so on. While it is technically possible to assign any role in any context, some roles just don’t make sense. Unfortunately, Moodle doesn’t warn you about this since it cannot distinguish between intentional and <span class="No-Break" lang="">inadvertent assignments.</span></p>
<p lang="en-GB">Contexts are hierarchical; that is, permissions are inherited from higher to lower contexts. Rights in a higher context are more general, whereas those in a lower context are more specific. The same applies to our building analogy – a manager at the building level would have the same rights at the floor or room level, whereas the opposite is <span class="No-Break" lang="">not true.</span></p>
<p lang="en-GB">The following diagram shows the contexts that exist in Moodle and how they are <span class="No-Break" lang="">arranged hierarchically:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer157">
<img alt="Figure 6.3 – Moodle context hierarchy " height="606" src="image/Figure_6.03_B18779.jpg" width="1039"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.3 – Moodle context hierarchy</p>
<p lang="en-GB">The <strong class="bold" lang="">System</strong> context is the root node of the hierarchy; every role assigned in this context will apply to any other context below it. The <strong class="bold" lang="">Course Category</strong> context on the next level acts as a parent to the <strong class="bold" lang="">Course</strong> context. If <strong class="bold" lang="">Sub-Category</strong> and <strong class="bold" lang="">Sub-Sub-Category</strong>, and so on, have been created, respective contexts will exist. You can see the <strong class="bold" lang="">Module</strong> and <strong class="bold" lang="">Block</strong> contexts on the lowest level. Like the <strong class="bold" lang="">Course</strong> context, the <strong class="bold" lang="">Site</strong> context has a <strong class="bold" lang="">Module</strong> and <strong class="bold" lang="">Block</strong> sub-context. <strong class="bold" lang="">Site</strong> refers to the home page and<a id="_idIndexMarker473"/> is often referred to as the <strong class="bold" lang="">Front page</strong> context for legacy <a id="_idIndexMarker474"/>reasons. Internally, <strong class="bold" lang="">Site</strong> is treated as a course (with course ID 1). The <strong class="bold" lang="">User</strong> context is a standalone entity with no children in <span class="No-Break" lang="">the hierarchy.</span></p>
<p lang="en-GB">For example, Jim is a teacher in a course. He is assigned the <strong class="bold" lang="">Teacher</strong> role in the relevant context (the class he is teaching), and he will have this role throughout the course, including blocks and activity modules (activities and resources). If, however, Jim had been assigned the <strong class="bold" lang="">Teacher</strong> role in the <strong class="bold" lang="">Course Category</strong> context instead, he would have the same rights in all the courses in this category and all its sub-categories. Jim will receive emails about all the assignments in all the courses, even if he doesn’t teach them. Not only that, but he will also become a teacher in all future courses created in <span class="No-Break" lang="">this category!</span></p>
<p lang="en-GB">Organizing contexts hierarchically has several advantages that will sound familiar to those who know of <span class="No-Break" lang="">object-oriented technologies:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Inheritance</strong>: Rights and permissions set at one level<a id="_idIndexMarker475"/> are passed down to lower levels, which <span class="No-Break" lang="">simplifies maintenance</span></li>
<li lang="en-GB"><strong class="bold" lang="">Overriding</strong>: Rights and permissions can be changed<a id="_idIndexMarker476"/> at <span class="No-Break" lang="">lower levels</span></li>
<li lang="en-GB"><strong class="bold" lang="">Extensibility</strong>: New contexts might be added in future versions<a id="_idIndexMarker477"/> of Moodle, when and if required, without changing any of the existing roles in <span class="No-Break" lang="">the system</span></li>
</ul>
<p lang="en-GB">Now we know what<a id="_idIndexMarker478"/> roles look like and which roles Moodle ships with, it is time to assign <span class="No-Break" lang="">some roles.</span></p>
<h1 id="_idParaDest-120" lang="en-GB"><a id="_idTextAnchor120"/>Assigning roles to users</h1>
<p lang="en-GB">The process of role assignment<a id="_idIndexMarker479"/> is similar for<a id="_idIndexMarker480"/> each context. What is different is the location of each context and its access method. The process of assigning roles to users will be described first before we outline how and where to assign them in <span class="No-Break" lang="">individual contexts:</span></p>
<ol>
<li lang="en-GB">Navigate to any <strong class="bold" lang="">Assign roles</strong> screen<a id="_idIndexMarker481"/> for the required<a id="_idIndexMarker482"/> context – for example, <strong class="bold" lang="">Home</strong> | <strong class="bold" lang="">Participants</strong> | <strong class="bold" lang="">Assigned roles</strong> in the <strong class="bold" lang="">Permissions</strong> section of the pull-down menu. On our system, you can see that <strong class="bold" lang="">2</strong> teachers and <strong class="bold" lang="">18</strong> students have been assigned (only up to 10 names can <span class="No-Break" lang="">be displayed):</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer158">
<img alt="Figure 6.4 – Assigning roles to users " height="509" src="image/Figure_6.04_B18779.jpg" width="1209"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.4 – Assigning roles to users</p>
<ol>
<li lang="en-GB" value="2">Select the role you wish to assign a user to by clicking on the role’s name. If there are more than 10 assignees, click on the <strong class="bold" lang="">More than 10</strong> link. You will see the screen shown in <span class="No-Break" lang=""><em class="italic" lang="">Figure 6</em></span><em class="italic" lang="">.4</em> throughout Moodle whenever you wish to assign users to a role (except in courses, where a different modal interface has <span class="No-Break" lang="">been developed).</span></li>
<li lang="en-GB">Assign the role to users by selecting their names from the <strong class="bold" lang="">Potential users</strong> list and moving them to the respective category using the <span class="No-Break" lang=""><strong class="bold" lang="">Add</strong></span><span class="No-Break" lang=""> button.</span></li>
<li lang="en-GB">Hold down the <em class="italic" lang="">Shift</em> key to select a range of users and the <em class="italic" lang="">Ctrl</em> key (<em class="italic" lang="">Command</em> key on macOS) to select <span class="No-Break" lang="">multiple users.</span></li>
<li lang="en-GB">To revoke users’ role assignments, select the person from the <strong class="bold" lang="">Existing users</strong> list and move them back to the <strong class="bold" lang="">Potential users</strong> group by clicking on the <span class="No-Break" lang=""><strong class="bold" lang="">Remove</strong></span><span class="No-Break" lang=""> button.</span></li>
</ol>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Once a user has been assigned a role, permissions will be granted immediately. There is no need to save <span class="No-Break" lang="">any changes.</span></p>
<p lang="en-GB">If your list of potential users<a id="_idIndexMarker483"/> contains more<a id="_idIndexMarker484"/> than 100 entries, no user names will be shown, and you will have to use the <strong class="bold" lang="">Search</strong> box to filter the list of accounts (you can change this value via the <strong class="bold" lang="">maxusersperpage</strong> setting in <strong class="bold" lang="">Site administration | Users | Permissions | User options</strong>). Moodle uses a live search; as soon as you start typing, the list of users is updated immediately. There are three self-explanatory <strong class="bold" lang="">Search options</strong> underneath the left <strong class="bold" lang="">Search</strong> box. You might have to expand the area if it <span class="No-Break" lang="">is collapsed:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Keep selected users, even if they no longer match </strong><span class="No-Break" lang=""><strong class="bold" lang="">the search</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">If only one user matches the search, select </strong><span class="No-Break" lang=""><strong class="bold" lang="">them automatically</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Match the search text anywhere in the </strong><span class="No-Break" lang=""><strong class="bold" lang="">user’s name</strong></span></li>
</ul>
<p lang="en-GB">You can switch to the assignments of another role in the current context via the drop-down at <span class="No-Break" lang="">the bottom.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Assigning roles in an incorrect context is a common source of problems. It is highly recommended that you check the current context regularly to ensure no unintended rights have been granted. In other words, test your role <span class="No-Break" lang="">assignments thoroughly.</span></p>
<p lang="en-GB">So far, we have dealt with the general concept of contexts and looked at how to assign roles to users within a context. We will now deal with each context, following our Moodle context hierarchy. Let’s start at the top with the <span class="No-Break" lang=""><strong class="bold" lang="">System</strong></span><span class="No-Break" lang=""> context.</span></p>
<h2 id="_idParaDest-121" lang="en-GB"><a id="_idTextAnchor121"/>System context</h2>
<p lang="en-GB">The <strong class="bold" lang="">System</strong> context covers the entire Moodle<a id="_idIndexMarker485"/> system. Assignment takes<a id="_idIndexMarker486"/> place from <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Assign system roles</strong>. In our system, only two roles appear<a id="_idIndexMarker487"/> that can be assigned. We already mentioned that assigning certain roles in certain contexts doesn’t make sense. Inside a role, it is possible to specify in which context roles may be assigned. Only the <strong class="bold" lang="">Manager</strong> and <strong class="bold" lang="">Course creator</strong> roles have been selected, which is the reason for the <span class="No-Break" lang="">limited choice:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer159">
<img alt="Figure 6.5 – System context " height="400" src="image/Figure_6.05_B18779.jpg" width="1403"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.5 – System context</p>
<p lang="en-GB">You will see a familiar screen that allows you to assign roles to users. The only difference from the generic screen outlined earlier is the warning, which I can only repeat: <strong class="bold" lang="">Any roles you assign from this page will apply to the assigned users throughout the entire system, including the front page and all </strong><span class="No-Break" lang=""><strong class="bold" lang="">the courses.</strong></span></p>
<p lang="en-GB">In most Moodle systems with predefined roles, it only makes sense to assign the <strong class="bold" lang="">Manager</strong> role if you wish to allow read-only access to a user for all the courses, such as an inspector, business manager, or school principal. Assigning the <strong class="bold" lang="">Course creator</strong> role to a user allows you to create new courses in any category. If, for example, a <strong class="bold" lang="">Teacher</strong> role is assigned in the <strong class="bold" lang="">System</strong> context, the user is allowed access to every single course on the site and all the courses created in <span class="No-Break" lang="">the future!</span></p>
<p lang="en-GB">There are scenarios when global roles are justified, such as in very small organizations or if Moodle hosts only a small number of courses attended by all users. Also, some new user-defined roles, such as school inspector, are designed to be assigned at the <span class="No-Break" lang="">global level.</span></p>
<p lang="en-GB">One role that can only be assigned at the system level is the <strong class="bold" lang="">Administrator</strong> role. This task has been given a dedicated area under <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Site administrators</strong>. A primary administrator was created when you installed Moodle, which cannot be modified or deleted. You can, however, create additional administrator accounts. This procedure is identical to assigning users in any other context, except that you must confirm the assignment. Furthermore, you can make any site administrator the main site administrator (via the <strong class="bold" lang="">Set main </strong><span class="No-Break" lang=""><strong class="bold" lang="">admin</strong></span><span class="No-Break" lang=""> button).</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Make sure you keep the number of Moodle administrators to a minimum! This restraint improves the consistency of your system, increases security, and avoids potential mismanagement of <span class="No-Break" lang="">the site.</span></p>
<p lang="en-GB">Moving down<a id="_idIndexMarker488"/> one level in the context<a id="_idIndexMarker489"/> hierarchy, we reach the <strong class="bold" lang="">Course Category</strong> context, which is the topic of the <span class="No-Break" lang="">following subsection.</span></p>
<h2 id="_idParaDest-122" lang="en-GB"><a id="_idTextAnchor122"/>Course Category context</h2>
<p lang="en-GB">The <strong class="bold" lang="">Course category context</strong> covers all the courses within<a id="_idIndexMarker490"/> a category and its sub-categories. The role<a id="_idIndexMarker491"/> assignment takes place<a id="_idIndexMarker492"/> under <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Manage courses and categories</strong>. You must select <strong class="bold" lang="">Permissions</strong> in the respective <strong class="bold" lang="">Settings</strong> drop-down menu and <strong class="bold" lang="">Assign roles</strong> from the familiar dropdown. The same mechanism applies to sub-categories, sub-sub-categories, and <span class="No-Break" lang="">so on.</span></p>
<p lang="en-GB">A typical role that’s assigned in the <strong class="bold" lang="">Course category</strong> context is the <strong class="bold" lang="">Course creator</strong> role. It allows a dedicated user to create new courses within the specified category, often a department or division. The standard <strong class="bold" lang="">Course creator</strong> role does not include teacher capabilities; that is, a course creator cannot edit any course content. In smaller organizations, it may be required to grant the <strong class="bold" lang="">Teacher</strong> role access to all the courses within <span class="No-Break" lang="">the category.</span></p>
<p lang="en-GB">Moving down a level, we reach the <span class="No-Break" lang=""><strong class="bold" lang="">Course</strong></span><span class="No-Break" lang=""> context.</span></p>
<h2 id="_idParaDest-123" lang="en-GB"><a id="_idTextAnchor123"/>Course context</h2>
<p lang="en-GB">As the name suggests, all role<a id="_idIndexMarker493"/> assignments in a course<a id="_idIndexMarker494"/> are granted in the <strong class="bold" lang="">Course</strong> context. The assignment takes place<a id="_idIndexMarker495"/> in the actual course, which we already came across in <a href="B18779_04.xhtml#_idTextAnchor074"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 4</em></span></a>, <em class="italic" lang="">Managing Courses and Enrolments</em>, when we dealt <span class="No-Break" lang="">with enrolments.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Enrolments in courses are treated as roles in the <span class="No-Break" lang=""><strong class="bold" lang="">Course</strong></span><span class="No-Break" lang=""> context.</span></p>
<p lang="en-GB">As enrolments contain some unique options (start date, end date, and the suspension option), and because these enrolments are often carried out by (non-technical) teaching staff, a different user interface has been implemented. However, within a course, when you go to <strong class="bold" lang="">Participants</strong> | <strong class="bold" lang="">Enrolment methods</strong> and then click on the <strong class="bold" lang="">Enrol users</strong> icon in the <strong class="bold" lang="">Edit</strong> column of the <strong class="bold" lang="">Manual enrolments</strong> method, you will see a familiar-looking screen. We covered the additional expiry options shown in the center of the screen when we <span class="No-Break" lang="">covered enrolments:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer160">
<img alt="Figure 6.6 – Course context I " height="770" src="image/Figure_6.06_B18779.jpg" width="1395"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.6 – Course context I</p>
<p lang="en-GB">When a student is enrolled in a course, either by self-enrolment or any other enrolment mechanism, Moodle automatically assigns the <strong class="bold" lang="">Student</strong> role in the relevant <strong class="bold" lang="">Course</strong> context. This also applies if you upload users in batch mode and specify a course to which a user has to <span class="No-Break" lang="">be enrolled.</span></p>
<p lang="en-GB">If you have to assign roles to users who are not enrolled but have a role in the course, select <strong class="bold" lang="">Other users</strong> from the drop-down in the <strong class="bold" lang="">Participants</strong> menu and click on the <strong class="bold" lang="">Assign roles</strong> button. This applies to the <strong class="bold" lang="">Manager</strong> role, for instance, or a newly-created role, such as supervisor teacher. You will see a list of users who are not enrolled in the course but have inherited or <span class="No-Break" lang="">assigned roles:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer161">
<img alt="Figure 6.7 – Course context II " height="651" src="image/Figure_6.07_B18779.jpg" width="1633"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.7 – Course context II</p>
<p lang="en-GB">There is one level<a id="_idIndexMarker496"/> missing in the context level <a id="_idIndexMarker497"/>hierarchy, which deals with modules <span class="No-Break" lang="">and blocks.</span></p>
<h2 id="_idParaDest-124" lang="en-GB"><a id="_idTextAnchor124"/>Module context</h2>
<p lang="en-GB">Once you<a id="_idIndexMarker498"/> are inside a course, it is possible<a id="_idIndexMarker499"/> to assign roles to users<a id="_idIndexMarker500"/> for individual modules – that is, resources and activities. When you select a module, there is a <strong class="bold" lang="">Permissions</strong> link in the <strong class="bold" lang="">More</strong> menu with three roles-related options. <strong class="bold" lang="">Locally assigned roles</strong> will lead to the familiar screen to <strong class="bold" lang="">Assign roles</strong>. <strong class="bold" lang="">Permissions</strong> and <strong class="bold" lang="">Check permissions</strong> let you change the inherited roles and verify the roles of the individual users. We will deal with this later in <span class="No-Break" lang="">this chapter:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer162">
<img alt="Figure 6.8 – Module context " height="1003" src="image/Figure_6.08_B18779.jpg" width="1425"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.8 – Module context</p>
<p lang="en-GB">Teachers often use role assignments in the <strong class="bold" lang="">Module context</strong> to grant or revoke additional rights to their students. A regularly cited example is that of a forum moderator. If you wish to put students in charge of a forum to help them learn how to moderate discussions, they require the rights to edit and delete posts (among others). These rights are part of the <strong class="bold" lang="">Teacher</strong> role, and it is perfectly feasible to assign a <strong class="bold" lang="">Teacher</strong> role to a student in a single activity. Just make sure they cannot grade <span class="No-Break" lang="">any exams!</span></p>
<p lang="en-GB">By default, users with a <strong class="bold" lang="">Teacher</strong> role have the right<a id="_idIndexMarker501"/> to assign roles in the <strong class="bold" lang="">Module</strong> context. However, it is often<a id="_idIndexMarker502"/> up to the Moodle administrator to carry out the task on their behalf due to the complexity of the roles system. The same applies to the <strong class="bold" lang="">Block</strong> context, which will be <span class="No-Break" lang="">covered next.</span></p>
<h2 id="_idParaDest-125" lang="en-GB"><a id="_idTextAnchor125"/>Block context</h2>
<p lang="en-GB">The <strong class="bold" lang="">Block</strong> context allows the rights to be assigned<a id="_idIndexMarker503"/> at the block level, which<a id="_idIndexMarker504"/> is located within<a id="_idIndexMarker505"/> a course’s block drawer. You will see an <strong class="bold" lang="">Assign roles in &lt;blockname&gt; block</strong> link in the drop-down menu (editing must be <span class="No-Break" lang="">turned on):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer163">
<img alt="Figure 6.9 – Block context " height="1034" src="image/Figure_6.09_B18779.jpg" width="619"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.9 – Block context</p>
<p lang="en-GB">By default, your system doesn’t contain a role that has been granted rights to be assigned in the <strong class="bold" lang="">Block</strong> context; as a result, the link will be hidden. We will deal with modifying roles <span class="No-Break" lang="">later on.</span></p>
<p lang="en-GB">It is possible to control the users who can view blocks. Suppose there is a block that guests are not allowed to see. To hide that block, access the <strong class="bold" lang="">Permissions</strong> link in the block menu, and delete the <strong class="bold" lang="">Guest</strong> role from the <strong class="source-inline" lang="">moodle/block:view</strong> capability. Alternatively, you can select the <strong class="bold" lang="">Guest</strong> role from the <strong class="bold" lang="">Advanced role override</strong> drop-down list and the mentioned capability to <strong class="bold" lang="">Prevent</strong>. We will deal with capabilities later in <span class="No-Break" lang="">this chapter.</span></p>
<p lang="en-GB">The same mechanism also applies<a id="_idIndexMarker506"/> to blocks throughout the system, whether on the dashboard, the profile<a id="_idIndexMarker507"/> page, a course, or inside activities. It also applies to blocks on the home page, which is covered by the <strong class="bold" lang="">Front </strong><span class="No-Break" lang=""><strong class="bold" lang="">page</strong></span><span class="No-Break" lang=""> context.</span></p>
<h2 id="_idParaDest-126" lang="en-GB"><a id="_idTextAnchor126"/>Front page context</h2>
<p lang="en-GB">In Moodle, the<a id="_idIndexMarker508"/> home page is covered by the <strong class="bold" lang="">Front page</strong> context. The front page is like a course<a id="_idIndexMarker509"/> and, at the same<a id="_idIndexMarker510"/> time, not like a course. In other words, it is a special course! This idiosyncrasy is also the reason why the <strong class="bold" lang="">Front page</strong> context is referred to as the <strong class="bold" lang="">Site </strong><span class="No-Break" lang=""><strong class="bold" lang="">course</strong></span><span class="No-Break" lang=""> context.</span></p>
<p lang="en-GB">The <strong class="bold" lang="">Front page</strong> context has the <strong class="bold" lang="">System</strong> context as the parent and, like the <strong class="bold" lang="">Course</strong> context, <strong class="bold" lang="">Module</strong> and <strong class="bold" lang="">Block</strong> as the sub-contexts. This familiar interface can be accessed via the <strong class="bold" lang="">Assigned roles</strong> link in the <strong class="bold" lang="">Permissions</strong> drop-down in the <span class="No-Break" lang=""><strong class="bold" lang="">Participants</strong></span><span class="No-Break" lang=""> section.</span></p>
<p lang="en-GB">A typical user in the <strong class="bold" lang="">Front page</strong> context is a designer, who is responsible for the layout and content of the front page of the Moodle system. When assigned, only the <strong class="bold" lang="">Front page</strong> menu and its submenus are accessible. Most sites apply either the <strong class="bold" lang="">Teacher</strong> role or create a dedicated <span class="No-Break" lang="">designer role.</span></p>
<h2 id="_idParaDest-127" lang="en-GB"><a id="_idTextAnchor127"/>User context</h2>
<p lang="en-GB">The <strong class="bold" lang="">User</strong> context is a standalone context with<a id="_idIndexMarker511"/> only the <strong class="bold" lang="">System</strong> context<a id="_idIndexMarker512"/> as the parent. It deals with all the issues relating to users<a id="_idIndexMarker513"/> outside courses, and it includes the user’s profile, learning plans, forum posts, blog entries, notes, reports, logs, <span class="No-Break" lang="">and grades.</span></p>
<p lang="en-GB">Roles are assigned in the user’s profile, where you must select <strong class="bold" lang="">Preferences</strong> from the <strong class="bold" lang="">Administration</strong> pane. The <strong class="bold" lang="">Assign roles relative to this user</strong> link <em class="italic" lang="">does not appear by default!</em> You need to have a role that can be assigned in the <strong class="bold" lang="">User</strong> context. None of the predefined roles make sense to be applied in such a way, which is why this only applies to user-defined roles. An often-cited example of a custom role to be applied in the <strong class="bold" lang="">User</strong> context is the <strong class="bold" lang="">Parent/Mentor</strong> role, which we will deal with in the <em class="italic" lang="">Creating custom roles</em> section later in <span class="No-Break" lang="">this chapter:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer164">
<img alt="Figure 6.10 – User context " height="415" src="image/Figure_6.10_B18779.jpg" width="702"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.10 – User context</p>
<p lang="en-GB">Roles assigned in the <strong class="bold" lang="">User</strong> context will only have access to information that’s accessible from the user screen. They will not have access to <span class="No-Break" lang="">any courses.</span></p>
<p lang="en-GB">Moodle also supports<a id="_idIndexMarker514"/> assigning roles to<a id="_idIndexMarker515"/> cohorts (<strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Assign user roles to cohort</strong>), which effectively automates manually assigning roles in the <strong class="bold" lang="">User</strong> context. This feature is useful in setups where supervisors are responsible for groups <span class="No-Break" lang="">of learners.</span></p>
<h2 id="_idParaDest-128" lang="en-GB"><a id="_idTextAnchor128"/>Multiple roles</h2>
<p lang="en-GB">It is common<a id="_idIndexMarker516"/> for users to be assigned<a id="_idIndexMarker517"/> to more than one role. For example, a class teacher is also made course creator for the year group they are responsible for (the <strong class="bold" lang="">Course category</strong> context), they are in charge of the Moodle administration (<strong class="bold" lang="">Site</strong>), they act as a support teacher in a different class (<strong class="bold" lang="">Course</strong>), or they are the parent of a child (<strong class="bold" lang="">User</strong>). Every logged-in user is automatically assigned the <strong class="bold" lang="">Authenticated user</strong> role in the <strong class="bold" lang="">System</strong> context. We will deal with this later in <span class="No-Break" lang="">this chapter.</span></p>
<p lang="en-GB">A significant part of the roles infrastructure in Moodle is the ability to simultaneously assign multiple roles to a user. In our initial building example, the equivalent is a floor manager in charge of a particular floor level, temporarily covering the ground floor <span class="No-Break" lang="">during holidays.</span></p>
<p lang="en-GB">As discussed earlier, the actual context has to be selected to specify an additional role. You will then be able to assign additional roles <span class="No-Break" lang="">as necessary.</span></p>
<p lang="en-GB">The problem is the potential for conflicts, which Moodle has to resolve. For example, if one role can delete a forum post and another one doesn’t, but a user has been assigned both roles in the same context, which right applies? While Moodle has a built-in resolution mechanism for these conflicts, it is best to avoid such <span class="No-Break" lang="">scenarios altogether.</span></p>
<p lang="en-GB">It is technically possible to assign two or more roles to the same user in the same context. It is hard to think of situations where such a setup would <span class="No-Break" lang="">make sense.</span></p>
<p class="callout-heading" lang="en-GB">Tip</p>
<p class="callout" lang="en-GB">The inner workings of the built-in permission<a id="_idIndexMarker518"/> resolution mechanism are well-documented in the <em class="italic" lang="">Conflict resolution of permissions</em> section <span class="No-Break" lang="">at </span><a href="http://docs.moodle.org/en/Override_permissions"><span class="No-Break" lang="">docs.moodle.org/en/Override_permissions</span></a><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">This concludes<a id="_idIndexMarker519"/> this section<a id="_idIndexMarker520"/> on role assignments. Roles are made up of capabilities, which we will <span class="No-Break" lang="">tackle next.</span></p>
<h1 id="_idParaDest-129" lang="en-GB"><a id="_idTextAnchor129"/>Understanding capabilities</h1>
<p lang="en-GB">So far, we have assigned existing<a id="_idIndexMarker521"/> roles to users in different Moodle contexts. In the following few pages, we will look inside a role where capabilities dictate what functionality is allowed and what isn’t. Remember, a role is a collection of capabilities with corresponding permissions. Once we have understood capabilities, we can modify existing roles and create entirely <span class="No-Break" lang="">new ones.</span></p>
<h2 id="_idParaDest-130" lang="en-GB"><a id="_idTextAnchor130"/>Role definitions</h2>
<p lang="en-GB">The existing roles<a id="_idIndexMarker522"/> can be accessed via <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Define roles</strong>. The screen shown is the one from earlier when we explored Moodle’s predefined roles. When you click on a role name, its composition is shown. You might recall the role element shown in <span class="No-Break" lang=""><em class="italic" lang="">Figure 6</em></span><em class="italic" lang="">.1</em>. Let’s zoom in on the role to see what its <span class="No-Break" lang="">elements are:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer165">
<img alt="Figure 6.11 – Role structure " height="1007" src="image/Figure_6.11_B18779.jpg" width="1385"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.11 – Role structure</p>
<p lang="en-GB">Each role contains<a id="_idIndexMarker523"/> a unique <strong class="bold" lang="">Short name</strong> (utilized in batch operations), a <strong class="bold" lang="">Custom full name</strong>, and an optional <strong class="bold" lang="">Custom description</strong>. The <strong class="bold" lang="">Role archetype</strong> field specifies<a id="_idIndexMarker524"/> which permissions are set if the role is reset to its default value. This setting further determines what values any new permissions will have when introduced in future versions of Moodle. These settings will then be applied during the <span class="No-Break" lang="">update process.</span></p>
<p lang="en-GB">The <strong class="bold" lang="">Context types where this role may be assigned</strong> field is set to the context in which the role will be allowed as an option. This restriction reduces the risk of assigning roles in contexts where they shouldn’t. We encountered this when we tried to assign roles in the <strong class="bold" lang="">Block</strong> or <strong class="bold" lang="">User</strong> context, and Moodle prevented us from <span class="No-Break" lang="">doing so.</span></p>
<p lang="en-GB">The next four fields (<strong class="bold" lang="">Allow role assignments</strong>, <strong class="bold" lang="">Allow role overrides</strong>, <strong class="bold" lang="">Allow role switches</strong>, and <strong class="bold" lang="">Allow role to view</strong>) show which roles users assigned the current role are allowed to assign, override, switch, and view, respectively. The <strong class="bold" lang="">Role risks</strong> field indicates which of the six available dangers the current role has. All this information will make more sense once we have dealt with roles in <span class="No-Break" lang="">more detail.</span></p>
<p lang="en-GB">In addition to these parameters, each role<a id="_idIndexMarker525"/> consists of a large number of capabilities. Moodle’s role system currently has approximately 450 (!) of them, and Moodle Workplace adds another 50+. If you have installed plugins, this number might even <span class="No-Break" lang="">be higher.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">A capability<a id="_idIndexMarker526"/> is a permissible action of a particular <span class="No-Break" lang="">Moodle feature.</span></p>
<p lang="en-GB">Each capability represents a legitimate Moodle action and is displayed as a single row in the list of all the capabilities. To simplify searching for capabilities, use the <strong class="bold" lang="">Filter</strong> option so that only the capabilities that match the filter criterion are shown (covering the name as well as <span class="No-Break" lang="">the description):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer166">
<img alt="Figure 6.12 – Capabilities " height="662" src="image/Figure_6.12_B18779.jpg" width="677"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.12 – Capabilities</p>
<p lang="en-GB">Each capability has the <span class="No-Break" lang="">following components:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Description</strong>: The description, for <a id="_idIndexMarker527"/>example, <strong class="bold" lang="">Upload new users from file</strong>, provides a short explanation of the capability. Clicking a capability opens the online Moodle documentation for that capability in a separate <span class="No-Break" lang="">browser window.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Name</strong>: The name, for example, <strong class="source-inline" lang="">moodle/site:upload users</strong>, follows<a id="_idIndexMarker528"/> a strict naming convention, <strong class="source-inline" lang="">level/type:function</strong>, which identifies the capability in the overall role system. The level states which part of Moodle the capability belongs to (such as <strong class="source-inline" lang="">moodle</strong>, <strong class="source-inline" lang="">mod</strong>, <strong class="source-inline" lang="">block</strong>, <strong class="source-inline" lang="">tool</strong>, <strong class="source-inline" lang="">enrol</strong>, or <strong class="source-inline" lang="">wp</strong>). The type is the capability class, and the function identifies the <span class="No-Break" lang="">actual action.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Permission</strong>: The permission of each capability<a id="_idIndexMarker529"/> has to have one of the four<a id="_idIndexMarker530"/> values explained in the <span class="No-Break" lang="">following table:</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer167">
<img alt="Figure 6.13 – Permissions " height="820" src="image/Figure_6.13_B18779.jpg" width="1389"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.13 – Permissions</p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Principally, permissions at lower<a id="_idIndexMarker531"/> contexts override permissions at higher contexts. The exception is <strong class="bold" lang="">Prohibit</strong>, which, by definition, cannot be overridden at <span class="No-Break" lang="">lower levels.</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Risks</strong>: Moodle displays the risks associated<a id="_idIndexMarker532"/> with each capability – that is, the risks<a id="_idIndexMarker533"/> that each capability can potentially raise. They can be any combination of the following six <span class="No-Break" lang="">risk types:</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer168">
<img alt="Figure 6.14 – Risks " height="286" src="image/Figure_6.14_B18779.jpg" width="1387"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.14 – Risks</p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Risks<a id="_idIndexMarker534"/> are only displayed; it is impossible to change these settings since they only act as warnings. The <strong class="bold" lang="">Risks</strong> documentation page is opened in a separate browser window when clicking on a <span class="No-Break" lang=""><strong class="bold" lang="">Risk</strong></span><span class="No-Break" lang=""> icon.</span></p>
<p lang="en-GB">Moodle’s default roles<a id="_idIndexMarker535"/> have been designed with the following capability risks <span class="No-Break" lang="">in mind:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Administrator</strong>: All capabilities, with a <span class="No-Break" lang="">few exceptions</span></li>
<li lang="en-GB"><strong class="bold" lang="">Teacher</strong>: Certain capabilities with XSS and privacy risks, mainly adding and <span class="No-Break" lang="">updating content</span></li>
<li lang="en-GB"><strong class="bold" lang="">Student</strong>: Certain capabilities with <span class="No-Break" lang="">spam risks</span></li>
<li lang="en-GB"><strong class="bold" lang="">Guest</strong>: Only capabilities<a id="_idIndexMarker536"/> with <span class="No-Break" lang="">no risks</span></li>
</ul>
<p lang="en-GB">Now that we have covered the ingredients of roles, let’s start <span class="No-Break" lang="">modifying them.</span></p>
<h2 id="_idParaDest-131" lang="en-GB"><a id="_idTextAnchor131"/>Modifying roles</h2>
<p lang="en-GB">To edit a role, click on the <strong class="bold" lang="">Edit</strong> button<a id="_idIndexMarker537"/> at the top of the view role details screen or select the appropriate icon in the <strong class="bold" lang="">Edit</strong> column on the main <span class="No-Break" lang="">roles screen:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer169">
<img alt="Figure 6.15 – Role operations " height="190" src="image/Figure_6.15_B18779.jpg" width="1421"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.15 – Role operations</p>
<p lang="en-GB">You can change the standard fields and their permissions when editing a role. For example, some schools change the <strong class="bold" lang="">Student</strong> role name to <strong class="bold" lang="">Pupil</strong>, while some training organizations change <strong class="bold" lang="">Teacher</strong> to <strong class="bold" lang="">Instructor</strong>. In Moodle Workplace, the two roles have been relabeled to <strong class="bold" lang="">Learner</strong> and <strong class="bold" lang="">Trainer</strong>, respectively. Bear in mind that this only changes the name of the role, not the corresponding labels used throughout Moodle. You will learn how to do this in the <em class="italic" lang="">Managing localization</em> section in <a href="B18779_10.xhtml#_idTextAnchor204"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 10</em></span></a>, <em class="italic" lang="">Configuring </em><span class="No-Break" lang=""><em class="italic" lang="">Technical Features</em></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">When you change capabilities in a role derived from a <strong class="bold" lang="">Role archetype</strong>, its original values are highlighted when you click on the <strong class="bold" lang="">Show advanced</strong> button. For example, if your organization decides not to allow users to see the profiles of other users due to privacy or other reasons, you would edit the <strong class="bold" lang="">Student</strong> role, search for the <strong class="source-inline" lang="">moodle/user:viewdetails</strong> capability, and change it from <strong class="bold" lang="">Allow</strong> to <strong class="bold" lang="">Not set</strong>. Now, <strong class="bold" lang="">Not set</strong> is selected, but the <strong class="bold" lang="">Allow</strong> value remains highlighted; do not forget to save your role changes <span class="No-Break" lang="">once applied:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer170">
<img alt="Figure 6.16 – Role operations " height="671" src="image/Figure_6.16_B18779.jpg" width="1350"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.16 – Role operations</p>
<p lang="en-GB">Unless you are confident with role modifications, it is recommended to duplicate a role first (via the <strong class="bold" lang="">Export</strong> functionality at the top of the screen in <span class="No-Break" lang=""><em class="italic" lang="">Figure 6</em></span><em class="italic" lang="">.16</em> and by creating a new role described further down) and then edit it. Keeping the default roles untouched makes maintenance more manageable if multiple administrators work on the same system or a third party <span class="No-Break" lang="">provides support.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">It is not possible to modify the <strong class="bold" lang="">Administrator</strong> role via the <span class="No-Break" lang="">Moodle interface.</span></p>
<p lang="en-GB">Modifying roles<a id="_idIndexMarker538"/> can often be avoided using the role’s overriding mechanism, which we will cover in the <span class="No-Break" lang="">next section.</span></p>
<h2 id="_idParaDest-132" lang="en-GB"><a id="_idTextAnchor132"/>Overriding roles</h2>
<p lang="en-GB">It is possible to override<a id="_idIndexMarker539"/> the permissions of a role in a given context. Picture the context hierarchy where a role definition has taken place at the top level. At a lower level, say category or course, you now wish to modify the permissions of that role. Role overrides facilitate <span class="No-Break" lang="">precisely that.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Overrides are permissions designed<a id="_idIndexMarker540"/> to change a role in a specific context, allowing you to tweak your permissions as required. Tweaking involves granting additional or revoking <span class="No-Break" lang="">existing rights.</span></p>
<p lang="en-GB">Using the <strong class="bold" lang="">Permissions</strong> link in the familiar<a id="_idIndexMarker541"/> dropdown with the same name, you can see which role has been given or has inherited which permission for any of the capabilities of the current context (here, an assignment in the <span class="No-Break" lang="">Module context):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer171">
<img alt="Figure 6.17 – Overriding roles I " height="631" src="image/Figure_6.17_B18779.jpg" width="1233"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.17 – Overriding roles I</p>
<p lang="en-GB">The number shown in brackets indicates the number of overrides for each role. In the <strong class="bold" lang="">Roles with permission</strong> column, you can remove a role for each capability (using the standard <strong class="bold" lang="">Delete</strong> icon) or select a role to be added to the list of allowed roles (via the <strong class="bold" lang="">+</strong> symbol). The same applies to the <span class="No-Break" lang=""><strong class="bold" lang="">Prohibited</strong></span><span class="No-Break" lang=""> column.</span></p>
<p lang="en-GB">Once you select a role from the <strong class="bold" lang="">Advanced role override</strong> dropdown, you will see a screen that shows details of each activity capability for this particular role. Overrides can now be used to open up areas in that context to grant extra permissions to users. Suppose you want to experiment with giving students the ability to grade some assignments; you would change the corresponding capability (<strong class="source-inline" lang="">mod:assign/grade</strong>) from its inherited value of <strong class="bold" lang="">Not set</strong> <span class="No-Break" lang="">to </span><span class="No-Break" lang=""><strong class="bold" lang="">Allow</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer172">
<img alt="Figure 6.18 – Overriding roles II " height="864" src="image/Figure_6.18_B18779.jpg" width="1393"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.18 – Overriding roles II</p>
<p lang="en-GB">Any changes to the roles system are highlighted, and datetime stamps are shown at the top of <span class="No-Break" lang="">the screen.</span></p>
<p lang="en-GB">Overrides can also be used to deny functionality in that context and remove permissions from users. For example, while learners with the role of student in a course are usually allowed to start new discussions in forums, there is one particular forum for which you want to restrict that capability: you can set an override that prevents the capability for students to start new threads in this <span class="No-Break" lang="">forum (</span><span class="No-Break" lang=""><strong class="source-inline" lang="">mod/forum:startdiscussion</strong></span><span class="No-Break" lang="">).</span></p>
<p lang="en-GB">So far, we have understood<a id="_idIndexMarker542"/> the composition of roles and learned how to modify and override capabilities at different levels in the context hierarchy. Now, it is time to create our first <span class="No-Break" lang="">custom role.</span></p>
<h2 id="_idParaDest-133" lang="en-GB"><a id="_idTextAnchor133"/>Creating custom roles</h2>
<p lang="en-GB">Moodle allows you to create<a id="_idIndexMarker543"/> new roles. Examples of such custom roles are parent, teaching assistant, secretary, inspector, and librarian in an educational setting and training coordinator, assessor, mentor, or staff manager in a business context. New roles can be defined by going to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Define roles</strong> and using the <strong class="bold" lang="">Add a new </strong><span class="No-Break" lang=""><strong class="bold" lang="">role</strong></span><span class="No-Break" lang=""> button.</span></p>
<p lang="en-GB">Before you get to the familiar role-editing screen, you have three options to <span class="No-Break" lang="">choose from:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Use role or archetype</strong>: Using an existing role or role archetype as a basis is commonly used to create a new role. It minimizes the amount of work required and reduces errors in creating <span class="No-Break" lang="">new roles.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Use role preset</strong>: Import a role (in XML format) that has been exported either in your Moodle instance or another system (using the <strong class="bold" lang="">Export</strong> button when viewing <span class="No-Break" lang="">role details).</span></li>
<li lang="en-GB"><strong class="bold" lang="">No selection</strong>: Create a role from scratch without any presets or <span class="No-Break" lang="">inherited archetypes:</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer173">
<img alt="Figure 6.19 – Adding a new role " height="465" src="image/Figure_6.19_B18779.jpg" width="1062"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.19 – Adding a new role</p>
<p lang="en-GB">Make sure that you specify <strong class="bold" lang="">Context types where this role may be assigned</strong>. If you miss a context, assigning the role will not be possible. If you allow a context that is not suitable for the role, you run the risk that it will potentially <span class="No-Break" lang="">cause problems.</span></p>
<p lang="en-GB">Let’s look at some example roles you might want to add to your <span class="No-Break" lang="">Moodle system.</span></p>
<h3 lang="en-GB">Example roles</h3>
<p lang="en-GB">Moodle Docs<a id="_idIndexMarker544"/> has provided several sample roles<a id="_idIndexMarker545"/> that might be relevant to your organization (<a href="http://docs.moodle.org/en/Creating_custom_roles">docs.moodle.org/en/Creating_custom_roles</a>). If not, they offer a good starting point for you to create other roles. Some valuable examples are <span class="No-Break" lang="">as follows:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Calendar editor</strong>: This role enables users<a id="_idIndexMarker546"/> to add site events to the calendar (for more details, refer <span class="No-Break" lang="">to </span><a href="http://docs.moodle.org/en/Calendar_editor_role"><span class="No-Break" lang="">docs.moodle.org/en/Calendar_editor_role</span></a><span class="No-Break" lang="">)</span></li>
<li lang="en-GB"><strong class="bold" lang="">Demo teacher</strong>: This role is used to provide a demonstration<a id="_idIndexMarker547"/> teacher an account that has a password and profile that cannot be <span class="No-Break" lang="">changed (</span><a href="http://docs.moodle.org/en/Demo_teacher_role"><span class="No-Break" lang="">docs.moodle.org/en/Demo_teacher_role</span></a><span class="No-Break" lang="">)</span></li>
<li lang="en-GB"><strong class="bold" lang="">Forum moderator</strong>: This role is used in a particular forum<a id="_idIndexMarker548"/> and allows users to edit or delete forum posts, split discussions, and move discussions to other <span class="No-Break" lang="">forums (</span><a href="http://docs.moodle.org/en/Forum_moderator_role"><span class="No-Break" lang="">docs.moodle.org/en/Forum_moderator_role</span></a><span class="No-Break" lang="">)</span></li>
<li lang="en-GB"><strong class="bold" lang="">Learning plan viewer</strong>: This role allows teachers to view<a id="_idIndexMarker549"/> their students’ learning <span class="No-Break" lang="">plans (</span><a href="http://docs.moodle.org/en/Learning_plan_viewer"><span class="No-Break" lang="">docs.moodle.org/en/Learning_plan_viewer</span></a><span class="No-Break" lang="">)</span></li>
<li lang="en-GB"><strong class="bold" lang="">Question creator</strong>: This role enables students to create<a id="_idIndexMarker550"/> questions for use in <span class="No-Break" lang="">quizzes (</span><a href="http://docs.moodle.org/en/Question_creator_role"><span class="No-Break" lang="">docs.moodle.org/en/Question_creator_role</span></a><span class="No-Break" lang="">)</span></li>
<li lang="en-GB"><strong class="bold" lang="">Question sharer</strong>: This role allows teachers<a id="_idIndexMarker551"/> to access and share questions at the category or site <span class="No-Break" lang="">level (</span><a href="http://docs.moodle.org/en/Question_creator_role"><span class="No-Break" lang="">docs.moodle.org/en/Question_creator_role</span></a><span class="No-Break" lang="">)</span></li>
</ul>
<p lang="en-GB">One prominent entry that’s missing from the list is the infamous parent or mentor role, which we will be creating step by step in the <span class="No-Break" lang="">following subsection.</span></p>
<h3 lang="en-GB">The parent/mentor role</h3>
<p lang="en-GB">One of the most popular<a id="_idIndexMarker552"/> and sought-after custom roles in Moodle is the one of a parent, guardian, or mentor. The idea is to grant permission to users to view certain profile information, such as activity reports, grades, learning plans, blog entries, and forum posts regarding their children, wards, or mentees. It also allows the assignee to consent to policies on someone’s behalf (see <a href="B18779_14.xhtml#_idTextAnchor271"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 14</em></span></a>, <em class="italic" lang="">Complying with Data Protection Regulations</em>). Furthermore, the specially-introduced <strong class="bold" lang="">Mentees</strong> block has to be placed on the front page to give users who have been assigned the role access to the <span class="No-Break" lang=""><strong class="bold" lang="">User</strong></span><span class="No-Break" lang=""> context.</span></p>
<p lang="en-GB">To create a new role, follow<a id="_idIndexMarker553"/> <span class="No-Break" lang="">these steps:</span></p>
<ol>
<li lang="en-GB" value="1">Go to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Define roles</strong></span><span class="No-Break" lang="">.</span></li>
<li lang="en-GB">Click <strong class="bold" lang="">Add a new role</strong>, continue to the next screen, and name it <strong class="bold" lang="">Parent</strong> or <strong class="bold" lang="">Mentor</strong>. Provide an appropriate <strong class="bold" lang="">Short name</strong> and <span class="No-Break" lang=""><strong class="bold" lang="">Custom description</strong></span><span class="No-Break" lang="">.</span></li>
<li lang="en-GB">Leave the <strong class="bold" lang="">Role archetype</strong> type set to <strong class="bold" lang="">None</strong> and select the <strong class="bold" lang="">User</strong> checkbox for the <strong class="bold" lang="">Context types where this role may be </strong><span class="No-Break" lang=""><strong class="bold" lang="">assigned</strong></span><span class="No-Break" lang=""> field.</span></li>
<li lang="en-GB">Change the capabilities shown in the following screenshot <span class="No-Break" lang="">to </span><span class="No-Break" lang=""><strong class="bold" lang="">Allow</strong></span><span class="No-Break" lang="">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer174">
<img alt="Figure 6.20 – Modified capabilities for the parent role " height="564" src="image/Figure_6.20_B18779.jpg" width="698"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.20 – Modified capabilities for the parent role</p>
<ol>
<li lang="en-GB" value="5">Save the role using the <strong class="bold" lang="">Create this </strong><span class="No-Break" lang=""><strong class="bold" lang="">role</strong></span><span class="No-Break" lang=""> button.</span></li>
<li lang="en-GB">Each parent requires a separate user account, which must be created either manually or in bulk. In our example, the caring and loving father is <strong class="bold" lang="">Ozzy Harris</strong>, and his children are <strong class="bold" lang="">Kelly Harris</strong> and <span class="No-Break" lang=""><strong class="bold" lang="">Jack Harris</strong></span><span class="No-Break" lang="">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer175">
<img alt="Figure 6.21 – Parent and children accounts " height="268" src="image/Figure_6.21_B18779.jpg" width="1059"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.21 – Parent and children accounts</p>
<ol>
<li lang="en-GB" value="7">Each parent must be linked<a id="_idIndexMarker554"/> to each child (again, manually or in batch). To do so, follow <span class="No-Break" lang="">these steps:</span><ol><li lang="en-GB">Access the first child’s profile page, select the <strong class="bold" lang="">Preferences</strong> link in the <strong class="bold" lang="">Administration</strong> pane, and click on <strong class="bold" lang="">Assign roles relative to </strong><span class="No-Break" lang=""><strong class="bold" lang="">this user</strong></span><span class="No-Break" lang="">.</span></li><li lang="en-GB">Choose <strong class="bold" lang="">Parent</strong> as the role <span class="No-Break" lang="">to assign.</span></li><li lang="en-GB">Select the parent (<strong class="bold" lang="">Ozzy Harris</strong>) from the <strong class="bold" lang="">Potential users</strong> list and add him to the <strong class="bold" lang="">Existing users</strong> list. Repeat these steps for <span class="No-Break" lang="">all kids.</span></li></ol></li>
</ol>
<p lang="en-GB">If a mentor has many mentees, you can add them to a cohort and automate the role assignment (<strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Assign user roles to cohort</strong>). While this is unlikely to happen in a family context, it might be helpful in other setups, such as supervision. We covered this option when we dealt with user <span class="No-Break" lang="">contexts earlier.</span></p>
<ol>
<li lang="en-GB" value="8">A special <strong class="bold" lang="">Mentees</strong> block has been introduced to facilitate access to <span class="No-Break" lang="">user information:</span><ol><li lang="en-GB">Go to your home page and switch to <span class="No-Break" lang=""><strong class="bold" lang="">Edit mode</strong></span><span class="No-Break" lang="">.</span></li><li lang="en-GB">Add the <strong class="bold" lang="">Mentees</strong> block to the block drawer (it can also be added on the default dashboard) and change its title to <strong class="bold" lang="">Parent access</strong> via the <span class="No-Break" lang=""><strong class="bold" lang="">Configuration</strong></span><span class="No-Break" lang=""> icon.</span></li><li lang="en-GB">Log in as <strong class="bold" lang="">Ozzy Harris</strong>; you should see the <span class="No-Break" lang="">following block:</span></li></ol></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer176">
<img alt="Figure 6.22 – Mentees block " height="279" src="image/Figure_6.22_B18779.jpg" width="590"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.22 – Mentees block</p>
<p lang="en-GB">When a name is clicked, the respective user profile will be shown, including posts sent to forums, learning plans, blog entries, and activity reports, including logs <span class="No-Break" lang="">and grades.</span></p>
<p lang="en-GB">The creation of the parent role<a id="_idIndexMarker555"/> hopefully demonstrates not only the potential but also the versatility and complexity of custom roles. Therefore, you must test new <span class="No-Break" lang="">roles diligently.</span></p>
<h3 lang="en-GB">Testing new roles</h3>
<p lang="en-GB">After creating a new role, it is recommended<a id="_idIndexMarker556"/> that you create a test account and assign the new role to it in all supported contexts. Log out as an administrator and log in as the newly created user to test the new role or use the <strong class="bold" lang="">Login as</strong> function to masquerade as the test user. Alternatively, use a different browser to test the role without logging out as <span class="No-Break" lang="">an administrator.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">It is highly recommended to test new roles thoroughly before assigning them to <span class="No-Break" lang="">any users.</span></p>
<p lang="en-GB">If you have modified a predefined role and would like to roll it back to its factory settings, go to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Define roles</strong>, select (do not edit) a role, and click the <strong class="bold" lang="">Reset</strong> button. This will replace its existing values with the ones from the <span class="No-Break" lang="">built-in capabilities.</span></p>
<p lang="en-GB">The complexity of the roles system and the ability to assign multiple roles to multiple users in multiple contexts calls for a mechanism to verify the correctness of the permissions set. This problem is amplified by the fact that permissions can be inherited and then overridden at lower <span class="No-Break" lang="">levels again.</span></p>
<p lang="en-GB">Moodle has a built-in <strong class="bold" lang="">permission checker</strong> that displays the values<a id="_idIndexMarker557"/> of any capability in the context<a id="_idIndexMarker558"/> in which the checker has been initiated. You can access this facility via the <strong class="bold" lang="">Check permissions</strong> link in a specific context. For example, in the following screenshot, we have called the permission checker in the <strong class="bold" lang="">User</strong> context of <strong class="bold" lang="">Kelly Harris</strong> and showed the permissions of user <strong class="bold" lang="">Ozzy Harris</strong> (go to Kelly’s profile, follow the <strong class="bold" lang="">Preferences</strong> link in the <strong class="bold" lang="">Administration</strong> block, and select the <strong class="bold" lang="">Check permissions</strong> link in the <strong class="bold" lang="">Roles</strong> block. Then, select Ozzy and <strong class="bold" lang="">Show this user’s permissions</strong>). It confirms the settings of the previously created <span class="No-Break" lang=""><strong class="bold" lang="">Parent</strong></span><span class="No-Break" lang=""> role:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer177">
<img alt="Figure 6.23 – Permission checker " height="854" src="image/Figure_6.23_B18779.jpg" width="693"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.23 – Permission checker</p>
<p lang="en-GB">At the site<a id="_idIndexMarker559"/> level, two additional<a id="_idIndexMarker560"/> mechanisms help identify any potential issues with roles. The capability report (<strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Capability overview</strong>) shows, for a selected capability, what permission it has in the definition of one or many selected roles. It also shows if the capability has been overridden anywhere in the system, which is a great help when you are trying to locate <span class="No-Break" lang="">local modifications.</span></p>
<p lang="en-GB">In the example screenshot, I have picked the <strong class="source-inline" lang="">mod/assign:grade</strong> capability, selected <strong class="bold" lang="">All</strong> roles, and filtered the results to <strong class="bold" lang="">Show differences only</strong>. The following report shows the capability’s values in all the roles. Of particular interest is the <strong class="bold" lang="">Student</strong> role in the assignment context, where it has <span class="No-Break" lang="">been overridden:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer178">
<img alt="Figure 6.24 – Capability overview " height="844" src="image/Figure_6.24_B18779.jpg" width="872"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.24 – Capability overview</p>
<p lang="en-GB">The second tool can be found at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Unsupported role assignments</strong>. As the name suggests, it lists any invalid role assignments that can occur when upgrading from a previous version of Moodle. If any assignments are listed, you will have to modify or remove <span class="No-Break" lang="">them manually.</span></p>
<p lang="en-GB">This ends this section on creating<a id="_idIndexMarker561"/> and testing new roles. We will conclude this chapter with some miscellaneous roles-related features that didn’t fit any of the <span class="No-Break" lang="">previous sections.</span></p>
<h1 id="_idParaDest-134" lang="en-GB"><a id="_idTextAnchor134"/>Roles and context management</h1>
<p lang="en-GB">We have now dealt with the essential tools so that we can use, modify, and create roles. Moodle offers some crucial features when working extensively with roles, which we will cover in this section. We will deal with role assignments and override allowances before assigning default roles. Then, we will learn about context freezing and conclude with best <span class="No-Break" lang="">practice advice.</span></p>
<h2 id="_idParaDest-135" lang="en-GB"><a id="_idTextAnchor135"/>Allowing roles assignments and overrides</h2>
<p lang="en-GB">By default, some roles<a id="_idIndexMarker562"/> have the right to allow<a id="_idIndexMarker563"/> other roles to assign roles. For instance, a teacher is allowed to assign <strong class="bold" lang="">Non-editing teacher</strong> and <strong class="bold" lang="">Student</strong> roles, whereas the manager is allowed to assign all the roles except the <strong class="bold" lang="">Guest</strong>, <strong class="bold" lang="">Authenticated user</strong>, and <strong class="bold" lang="">Authenticated user on site home</strong> roles (these are automatically assigned when a user signs in for the first time). There will be instances when you wish to change the default settings; for example, a teacher should be allowed to assign roles to other teachers or when the newly created roles have to be managed. To achieve this, select the <strong class="bold" lang="">Allow role assignments</strong> tab by navigating to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Permissions</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Define Roles</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer179">
<img alt="Figure 6.25 – Allowing role assignments " height="590" src="image/Figure_6.25_B18779.jpg" width="1387"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.25 – Allowing role assignments</p>
<p lang="en-GB">In the preceding screenshot, the modified allowances have been highlighted. Teachers can assign the <strong class="bold" lang="">Teacher</strong> role, and both course creators and teachers can assign the new <span class="No-Break" lang=""><strong class="bold" lang="">Parent</strong></span><span class="No-Break" lang=""> role.</span></p>
<p lang="en-GB">An identical mechanism exists for role overrides, role switches, and role viewing. They can be accessed via the <strong class="bold" lang="">Allow role overrides</strong>, <strong class="bold" lang="">Allow role switches</strong>, and <strong class="bold" lang="">Allow role to view</strong> tabs<a id="_idIndexMarker564"/> on the same<a id="_idIndexMarker565"/> <span class="No-Break" lang="">screen, respectively.</span></p>
<h2 id="_idParaDest-136" lang="en-GB"><a id="_idTextAnchor136"/>Assigning default roles</h2>
<p lang="en-GB">In certain <a id="_idIndexMarker566"/>situations, standard roles<a id="_idIndexMarker567"/> are assigned automatically. These can be specified in the <strong class="bold" lang="">User policies</strong> section under <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Permissions</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer180">
<img alt="Figure 6.26 – Default role assignments " height="619" src="image/Figure_6.26_B18779.jpg" width="1397"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.26 – Default role assignments</p>
<p lang="en-GB">The preceding screenshot shows the assignment of the default <strong class="bold" lang="">Role for visitors</strong> (users who are not logged in) and <strong class="bold" lang="">Role </strong><span class="No-Break" lang=""><strong class="bold" lang="">for guest</strong></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">Moodle comes with a predefined role called <strong class="bold" lang="">Authenticated user</strong> – that is, <strong class="bold" lang="">Default role for all users</strong>. It is assigned to <em class="italic" lang="">every</em> logged-in user, in addition to any other roles. This role has been created to grant users access to certain functionality, such as posting blog entries, managing personal calendar entries, changing profile fields, and so on, even if they are not enrolled in <span class="No-Break" lang="">a course.</span></p>
<p lang="en-GB">You can further specify what role is given automatically (via the <strong class="bold" lang="">Creator’s role in new courses</strong> drop-down list) to users who have created a course but don’t have any permissions yet in the course. An equivalent setting exists for users restoring courses from backups called <strong class="bold" lang="">Restorers’ role in courses</strong> (see <a href="B18779_16.xhtml#_idTextAnchor308"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 16</em></span></a>, <em class="italic" lang="">Avoiding Sleepless Nights – Moodle Backup </em><span class="No-Break" lang=""><em class="italic" lang="">and Restore</em></span><span class="No-Break" lang="">).</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Changing the <strong class="bold" lang="">User policies</strong> settings can significantly impact<a id="_idIndexMarker568"/> what new users are allowed to do on your Moodle system, so double-check the default roles before they <span class="No-Break" lang="">are applied!</span></p>
<p lang="en-GB">In addition to the default roles in the <strong class="bold" lang="">User policies</strong> section, it is possible to specify a default home page role, which can be set by going to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">General</strong> | <strong class="bold" lang="">Site home</strong> | <strong class="bold" lang="">Site home settings</strong>. The <strong class="bold" lang="">Default site home role</strong> field can be set to enable logged-in users to participate in activities on the front page, usually <strong class="bold" lang="">Student</strong> or <strong class="bold" lang="">Teacher</strong>. It is also possible<a id="_idIndexMarker569"/> to allow the logged-in users to participate in these activities<a id="_idIndexMarker570"/> by setting an authenticated user <span class="No-Break" lang="">role override.</span></p>
<p lang="en-GB">Next up is context freezing, which effectively puts content in a context in <span class="No-Break" lang="">read-only mode.</span></p>
<h2 id="_idParaDest-137" lang="en-GB"><a id="_idTextAnchor137"/>Context freezing</h2>
<p lang="en-GB"><strong class="bold" lang="">Context freezing</strong> allows administrators or those with the relevant<a id="_idIndexMarker571"/> capability to make course categories, blocks, courses, or modules <strong class="bold" lang="">read-only</strong>; that is, users cannot modify or add to the <span class="No-Break" lang="">content anymore.</span></p>
<p lang="en-GB">Go to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Development</strong> | <strong class="bold" lang="">Experimental</strong> | <strong class="bold" lang="">Experimental settings</strong> and enable this feature to enable context freezing. Administrators can always modify frozen content unless the <strong class="bold" lang="">Context freezing applies to administrators</strong> setting <span class="No-Break" lang="">is enabled:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer181">
<img alt="Figure 6.27 – Context freezing and unfreezing " height="715" src="image/Figure_6.27_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 6.27 – Context freezing and unfreezing</p>
<p lang="en-GB">Once a user has been granted the <strong class="source-inline" lang="">moodle/site:managecontextlocks</strong> capability, they can use the context freezing<a id="_idIndexMarker572"/> feature in the course, front page, and category context. For example, teachers may lock courses once they are over, or they may close forums when discussions are to be ended. This locking can also be reversed via the <span class="No-Break" lang="">unfreeze option.</span></p>
<p lang="en-GB">At the time of writing, context freezing<a id="_idIndexMarker573"/> has been an experimental feature, but it is expected to leave its trial <span class="No-Break" lang="">phase shortly.</span></p>
<h2 id="_idParaDest-138" lang="en-GB"><a id="_idTextAnchor138"/>Moodle role assignment – best practices</h2>
<p lang="en-GB">Roles sometimes<a id="_idIndexMarker574"/> cause problems in Moodle sites, and it is therefore advised to follow some recommendations <span class="No-Break" lang="">regarding roles:</span></p>
<ul>
<li lang="en-GB">Only touch the roles once you have understood <span class="No-Break" lang="">them thoroughly</span></li>
<li lang="en-GB">Never grant users a role that is beyond <span class="No-Break" lang="">their competence</span></li>
<li lang="en-GB">Avoid assigning multiple predefined roles to users <span class="No-Break" lang="">when possible</span></li>
<li lang="en-GB">Avoid system roles as much <span class="No-Break" lang="">as possible</span></li>
<li lang="en-GB">Avoid creating too many <span class="No-Break" lang="">new roles</span></li>
<li lang="en-GB">Avoid role assignments that don’t <span class="No-Break" lang="">make sense</span></li>
<li lang="en-GB">Keep track of role assignments to ensure maintainability in <span class="No-Break" lang="">the future</span></li>
<li lang="en-GB">Do not change the permissions of <span class="No-Break" lang="">predefined roles</span></li>
<li lang="en-GB">Test role modifications and new <span class="No-Break" lang="">roles intensively</span></li>
</ul>
<p lang="en-GB">This list also serves as a good summary<a id="_idIndexMarker575"/> of this chapter as it touches upon the most <span class="No-Break" lang="">covered topics.</span></p>
<h1 id="_idParaDest-139" lang="en-GB"><a id="_idTextAnchor139"/>Summary</h1>
<p lang="en-GB">In this chapter, you learned what roles are and how they are applied in different contexts. We covered modifying existing roles before creating custom roles such as parent, inspector, and librarian. Finally, we looked at managing administrative role-related settings, including <span class="No-Break" lang="">context freezing.</span></p>
<p lang="en-GB">Getting your head around the concept of roles is vital if you wish to add, modify, or remove functionality for a distinct group of users. There is always a trade-off between the complexity of such a system and its flexibility. While you can argue about the user-friendliness of the roles system, it has undoubtedly proven to be one of the most powerful concepts <span class="No-Break" lang="">in Moodle.</span></p>
<p lang="en-GB">The interconnectedness between courses, users, and roles is crucial. Once this has been set up and configured correctly, your Moodle is technically ready to take off. However, before that, you probably want to change its look and feel first. This is what the next chapter is <span class="No-Break" lang="">all about.</span></p>
</div>
</div></body></html>