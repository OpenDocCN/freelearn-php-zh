["```php\n    mkdir -p src/Entity\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule\\Entity;\n    ```", "```php\n    use Drupal\\node\\Entity\\Node;\n    ```", "```php\n    class Recipe extends Node {\n    ```", "```php\n    }\n    ```", "```php\n    class Recipe extends Node {\n    ```", "```php\n      public function getTags(): array {\n    ```", "```php\n        /** @var \\Drupal\\Core\\Field\\EntityReferenceField\n    ```", "```php\n            ItemListInterface $field_tags */\n    ```", "```php\n        $field_tags = $this->get('field_tags');\n    ```", "```php\n        return $field_tags->referencedEntities();\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    <?php\n    ```", "```php\n    /**\n    ```", "```php\n     * Implements hook_entity_bundle_info_alter().\n    ```", "```php\n     */\n    ```", "```php\n    function mymodule_entity_bundle_info_alter(&$bundles) {\n    ```", "```php\n      $bundles ['node']['recipe']['label'] = t('Recipe');\n    ```", "```php\n      $bundles['node']['recipe']['class'] = Drupal\\\n    ```", "```php\n        mymodule\\Entity\\Recipe::class;\n    ```", "```php\n    }\n    ```", "```php\n    {% for tag in node.getTags %}\n    ```", "```php\n      <div>Tag: {{ tag.label }}</div>\n    ```", "```php\n    {% endfor %}\n    ```", "```php\nforeach ($records as $record) {\n  $entity_class = $this->getEntityClass();\n  /** @var \\Drupal\\Core\\Entity\\EntityInterface $entity */\n$entity = new $entity_class($record, $this->\n    entityTypeId);\n$entities[$entity->id()] = $entity;\n}\n```", "```php\n    mkdir -p src/Entity\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule\\Entity;\n    ```", "```php\n    use Drupal\\Core\\Config\\Entity\\ConfigEntityBase;\n    ```", "```php\n    class Announcement extends ConfigEntityBase {\n    ```", "```php\n      public string $label = '';\n    ```", "```php\n      public string $message = '';\n    ```", "```php\n    }\n    ```", "```php\n    /**\n    ```", "```php\n     * @ConfigEntityType(\n    ```", "```php\n     *   id = \"announcement\",\n    ```", "```php\n     *   label = \"Announcement\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"id\",\n    ```", "```php\n     *     \"label\" = \"label\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   config_export = {\n    ```", "```php\n     *     \"id\",\n    ```", "```php\n     *     \"label\",\n    ```", "```php\n     *     \"message\",\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer announcement\",\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class Announcement extends ConfigEntityBase {\n    ```", "```php\n    /**\n    ```", "```php\n     * @ConfigEntityType(\n    ```", "```php\n     *   id = \"announcement\",\n    ```", "```php\n     *   label = \"Announcement\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"id\",\n    ```", "```php\n     *     \"label\" = \"label\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   config_export = {\n    ```", "```php\n     *     \"id\",\n    ```", "```php\n     *     \"label\",\n    ```", "```php\n     *     \"message\",\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer announcement\",\n    ```", "```php\n     *   handlers = {\n    ```", "```php\n     *     \"list_builder\" = \"Drupal\\mymodule\n    ```", "```php\n                \\AnnouncementListBuilder\",\n    ```", "```php\n     *     \"form\" = {\n    ```", "```php\n     *       \"default\" = \"Drupal\\mymodule\n    ```", "```php\n                \\AnnouncementForm\",\n    ```", "```php\n     *       \"delete\" = \"Drupal\\Core\\Entity\n    ```", "```php\n                \\EntityDeleteForm\"\n    ```", "```php\n     *     },\n    ```", "```php\n     *     \"route_provider\" = {\n    ```", "```php\n     *       \"html\" = \"Drupal\\Core\\Entity\\Routing\n    ```", "```php\n                \\AdminHtmlRouteProvider\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *   },\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class Announcement extends ConfigEntityBase {\n    ```", "```php\n    /**\n    ```", "```php\n     * @ConfigEntityType(\n    ```", "```php\n     *   id = \"announcement\",\n    ```", "```php\n     *   label = \"Announcement\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"id\",\n    ```", "```php\n     *     \"label\" = \"label\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   config_export = {\n    ```", "```php\n     *     \"id\",\n    ```", "```php\n     *     \"label\",\n    ```", "```php\n     *     \"message\",\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer announcement\",\n    ```", "```php\n     *   handlers = {\n    ```", "```php\n     *     \"list_builder\" = \"Drupal\\mymodule\n    ```", "```php\n                \\AnnouncementListBuilder\",\n    ```", "```php\n     *     \"form\" = {\n    ```", "```php\n     *       \"default\" = \"Drupal\\mymodule\n    ```", "```php\n                \\AnnouncementForm\",\n    ```", "```php\n     *       \"delete\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n                EntityDeleteForm\"\n    ```", "```php\n     *     },\n    ```", "```php\n     *     \"route_provider\" = {\n    ```", "```php\n     *       \"html\" = \"Drupal\\Core\\Entity\\Routing\\\n    ```", "```php\n                AdminHtmlRouteProvider\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *   },\n    ```", "```php\n     *   links = {\n    ```", "```php\n     *     \"collection\" = \"/admin/config/system/\n    ```", "```php\n                announcements\",\n    ```", "```php\n     *     \"add-form\" = \"/admin/config/system/\n    ```", "```php\n                announcements/add\",\n    ```", "```php\n     *     \"delete-form\" = \"/admin/config/system/\n    ```", "```php\n              announcements/manage/{announcement}/delete\",\n    ```", "```php\n     *     \"edit-form\" = \"/admin/config/system/\n    ```", "```php\n              announcements/manage/{announcement}\",\n    ```", "```php\n     *   },\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class Announcement extends ConfigEntityBase {\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule;\n    ```", "```php\n    use Drupal\\Core\\Config\\Entity\\ConfigEntityListBuilder;\n    ```", "```php\n    use Drupal\\Core\\Entity\\EntityInterface;\n    ```", "```php\n    class AnnouncementListBuilder extends\n    ```", "```php\n        ConfigEntityListBuilder {\n    ```", "```php\n    /**\n    ```", "```php\n     * Builds the header row for the entity listing.\n    ```", "```php\n     *\n    ```", "```php\n     * @return array\n    ```", "```php\n     *   A render array structure of header strings.\n    ```", "```php\n     *\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\n    ```", "```php\n            \\EntityListBuilder::render()\n    ```", "```php\n     */\n    ```", "```php\n        public function buildHeader() \n    ```", "```php\n      {\n    ```", "```php\n          $header['label'] = $this->t('Label');\n    ```", "```php\n          return $header + parent::buildHeader();\n    ```", "```php\n        }\n    ```", "```php\n    /**\n    ```", "```php\n     * Builds a row for an entity in the entity listing.\n    ```", "```php\n     *\n    ```", "```php\n     * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n    ```", "```php\n     *   The entity for this row of the list.\n    ```", "```php\n     *\n    ```", "```php\n     * @return array\n    ```", "```php\n     *   A render array structure of fields for this\n    ```", "```php\n            entity.\n    ```", "```php\n     *\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\\\n    ```", "```php\n          EntityListBuilder::render()\n    ```", "```php\n     */\n    ```", "```php\n      public function buildRow(EntityInterface $entity) {\n    ```", "```php\n        $row['label'] = $entity->label();\n    ```", "```php\n        return $row + parent::buildRow($entity);\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule;\n    ```", "```php\n    use Drupal\\Core\\Entity\\EntityForm;\n    ```", "```php\n    use Drupal\\Core\\Form\\FormStateInterface;\n    ```", "```php\n    use Drupal\\mymodule\\Entity\\Announcement;\n    ```", "```php\n    class AnnouncementForm extends EntityForm {\n    ```", "```php\n    /**\n    ```", "```php\n     * Gets the actual form array to be built.\n    ```", "```php\n     *\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\\EntityForm::processForm()\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\\EntityForm::afterBuild()\n    ```", "```php\n     */\n    ```", "```php\n      public function form(array $form, FormStateInterface\n    ```", "```php\n        $form_state) {\n    ```", "```php\n        $form = parent::form($form, $form_state);\n    ```", "```php\n        /** @var \\Drupal\\mymodule\\Entity\\Announcement\n    ```", "```php\n            $entity */\n    ```", "```php\n        $entity = $this->entity;\n    ```", "```php\n        $form['label'] = [\n    ```", "```php\n          '#type' => 'textfield',\n    ```", "```php\n          '#title' => $this->t('Label'),\n    ```", "```php\n          '#required' => TRUE,\n    ```", "```php\n          '#default_value' => $entity->label,\n    ```", "```php\n        ];\n    ```", "```php\n        $form['id'] = [\n    ```", "```php\n          '#type' => 'machine_name',\n    ```", "```php\n          '#default_value' => $entity->id(),\n    ```", "```php\n          '#disabled' => !$entity->isNew(),\n    ```", "```php\n          '#machine_name' => [\n    ```", "```php\n            'exists' => [Announcement::class, 'load'],\n    ```", "```php\n          ],\n    ```", "```php\n        ];\n    ```", "```php\n        $form['message'] = [\n    ```", "```php\n          '#type' => 'textarea',\n    ```", "```php\n          '#title' => $this->t('Message'),\n    ```", "```php\n          '#required' => TRUE,\n    ```", "```php\n          '#default_value' => $entity->message,\n    ```", "```php\n        ];\n    ```", "```php\n        return $form;\n    ```", "```php\n      }\n    ```", "```php\n    /**\n    ```", "```php\n     * Form submission handler for the 'save' action.\n    ```", "```php\n     *\n    ```", "```php\n     * Normally this method should be overridden to\n    ```", "```php\n        provide specific messages to\n    ```", "```php\n     * the user and redirect the form after the entity has\n    ```", "```php\n          been saved.\n    ```", "```php\n     *\n    ```", "```php\n     * @param array $form\n    ```", "```php\n     *   An associative array containing the structure of\n    ```", "```php\n            the form.\n    ```", "```php\n     * @param \\Drupal\\Core\\Form\\FormStateInterface\n    ```", "```php\n            $form_state\n    ```", "```php\n     *   The current state of the form.\n    ```", "```php\n     *\n    ```", "```php\n     * @return int\n    ```", "```php\n     *   Either SAVED_NEW or SAVED_UPDATED, depending on\n    ```", "```php\n            the operation performed.\n    ```", "```php\n     */\n    ```", "```php\n      public function save(array $form, FormStateInterface\n    ```", "```php\n        $form_state) {\n    ```", "```php\n        $result = parent::save($form, $form_state);\n    ```", "```php\n        if ($result === SAVED_NEW) {\n    ```", "```php\n          $this->messenger()->addMessage('The announcement\n    ```", "```php\n              has been created.');\n    ```", "```php\n        }\n    ```", "```php\n        else {\n    ```", "```php\n          $this->messenger()->addMessage('The announcement\n    ```", "```php\n              has been updated.');\n    ```", "```php\n        }\n    ```", "```php\n        $form_state->setRedirectUrl($this->entity->\n    ```", "```php\n            toUrl('collection'));\n    ```", "```php\n        return $result;\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    mymodule.announcements:\n    ```", "```php\n      title: 'Announcements'\n    ```", "```php\n      parent: system.admin_config_system\n    ```", "```php\n      description: 'Manage announcements.'\n    ```", "```php\n      route_name: entity.announcement.collection\n    ```", "```php\n    announcement.add:\n    ```", "```php\n      route_name: entity.announcement.add_form\n    ```", "```php\n      title: 'Add announcement'\n    ```", "```php\n      appears_on:\n    ```", "```php\n        - entity.announcement.collection\n    ```", "```php\n    mkdir -p config/schema\n    ```", "```php\n    mymodule.announcement.*:\n    ```", "```php\n      type: config_entity\n    ```", "```php\n      label: 'Announcement'\n    ```", "```php\n      mapping:\n    ```", "```php\n        id:\n    ```", "```php\n          type: string\n    ```", "```php\n          label: 'ID'\n    ```", "```php\n        label:\n    ```", "```php\n          type: label\n    ```", "```php\n          label: 'Label'\n    ```", "```php\n        message:\n    ```", "```php\n          type: text\n    ```", "```php\n          label: 'Text'\n    ```", "```php\n    administer announcement:\n    ```", "```php\n      title: 'Administer announcements'\n    ```", "```php\nfunction mymodule_update_10001() {\n  /** @var \\Drupal\\Core\\Entity\\EntityDefinition\n    UpdateManager $edum */\n  $edum = \\Drupal::service\n     ('entity.definition_update_manager');\n  $definition = $edum->getEntityType('announcement');\n  $edum->installEntityType($definition);\n}\n```", "```php\nphp vendor/bin/drush generate entity:configuration\n```", "```php\nboolean:\n  label: 'Boolean'\n  class: '\\Drupal\\Core\\TypedData\\Plugin\\DataType\n    \\BooleanData'\nemail:\n  label: 'Email'\n  class: '\\Drupal\\Core\\TypedData\\Plugin\\DataType\\Email'\nstring:\n  label: 'String'\n  class: '\\Drupal\\Core\\TypedData\\Plugin\\DataType\n    \\StringData'\n```", "```php\n    mkdir -p src/Entity\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule\\Entity;\n    ```", "```php\n    use Drupal\\Core\\Entity\\ContentEntityBase;\n    ```", "```php\n    use Drupal\\Core\\Entity\\EntityTypeInterface;\n    ```", "```php\n    use Drupal\\Core\\Field\\BaseFieldDefinition;\n    ```", "```php\n    class Message extends ContentEntityBase {\n    ```", "```php\n    }\n    ```", "```php\n    class Message extends ContentEntityBase {\n    ```", "```php\n      public static function baseFieldDefinitions\n    ```", "```php\n         (EntityTypeInterface $entity_type) {\n    ```", "```php\n        $fields = parent::baseFieldDefinitions\n    ```", "```php\n           ($entity_type);\n    ```", "```php\n        $fields['title'] = BaseFieldDefinition\n    ```", "```php\n            ::create('string')\n    ```", "```php\n          ->setLabel(t('Title'))\n    ```", "```php\n          ->setRequired(TRUE)\n    ```", "```php\n          ->setDisplayOptions('form', [\n    ```", "```php\n            'type' => 'string_textfield',\n    ```", "```php\n          ])\n    ```", "```php\n          ->setDisplayConfigurable('form', TRUE)\n    ```", "```php\n          ->setDisplayOptions('view', [\n    ```", "```php\n            'label' => 'hidden',\n    ```", "```php\n            'type' => 'string',\n    ```", "```php\n          ])\n    ```", "```php\n          ->setDisplayConfigurable('view', TRUE);\n    ```", "```php\n        $fields['content'] = BaseFieldDefinition\n    ```", "```php\n            ::create('text_long')\n    ```", "```php\n          ->setLabel(t('Content'))\n    ```", "```php\n          ->setRequired(TRUE)\n    ```", "```php\n          ->setDescription(t('Content of the message'))\n    ```", "```php\n          ->setDisplayOptions('form', [\n    ```", "```php\n            'type' => 'text_textarea',\n    ```", "```php\n          ])\n    ```", "```php\n          ->setDisplayConfigurable('form', TRUE)\n    ```", "```php\n          ->setDisplayOptions('view', [\n    ```", "```php\n            'label' => 'hidden',\n    ```", "```php\n            'type' => 'text_default',\n    ```", "```php\n          ])\n    ```", "```php\n          ->setDisplayConfigurable('view', TRUE);\n    ```", "```php\n        return $fields;\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    /**\n    ```", "```php\n     * Defines the message entity class.\n    ```", "```php\n     *\n    ```", "```php\n     * @ContentEntityType(\n    ```", "```php\n     *   id = \"message\",\n    ```", "```php\n     *   label = @Translation(\"Message\"),\n    ```", "```php\n     *   base_table = \"message\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"message_id\",\n    ```", "```php\n     *     \"label\" = \"title\",\n    ```", "```php\n     *     \"uuid\" = \"uuid\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer message\",\n    ```", "```php\n     *   field_ui_base_route =\n    ```", "```php\n            \"entity.message.collection\",\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class Message extends ContentEntityBase {\n    ```", "```php\n    /**\n    ```", "```php\n     * Defines the message entity class.\n    ```", "```php\n     *\n    ```", "```php\n     * @ContentEntityType(\n    ```", "```php\n     *   id = \"message\",\n    ```", "```php\n     *   label = @Translation(\"Message\"),\n    ```", "```php\n     *   base_table = \"message\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"message_id\",\n    ```", "```php\n     *     \"label\" = \"title\",\n    ```", "```php\n     *     \"uuid\" = \"uuid\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer message\",\n    ```", "```php\n     *   field_ui_base_route =\n    ```", "```php\n            \"entity.message.collection\",\n    ```", "```php\n     *   handlers = {\n    ```", "```php\n     *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n                MessageListBuilder\",\n    ```", "```php\n     *     \"form\" = {\n    ```", "```php\n     *       \"default\" = \"Drupal\\mymodule\\MessageForm\",\n    ```", "```php\n     *       \"delete\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n                ContentEntityDeleteForm\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *     \"route_provider\" = {\n    ```", "```php\n     *       \"html\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n                Routing\\DefaultHtmlRouteProvider\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *   },\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class Message extends ContentEntityBase {\n    ```", "```php\n    /**\n    ```", "```php\n     * Defines the message entity class.\n    ```", "```php\n     *\n    ```", "```php\n     * @ContentEntityType(\n    ```", "```php\n     *   id = \"message\",\n    ```", "```php\n     *   label = @Translation(\"Message\"),\n    ```", "```php\n     *   base_table = \"message\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"message_id\",\n    ```", "```php\n     *     \"label\" = \"title\",\n    ```", "```php\n     *     \"uuid\" = \"uuid\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer message\",\n    ```", "```php\n     *   field_ui_base_route =\n    ```", "```php\n            \"entity.message.collection\",\n    ```", "```php\n     *   handlers = {\n    ```", "```php\n     *     \"list_builder\" = \"Drupal\\mymodule\n    ```", "```php\n                \\MessageListBuilder\",\n    ```", "```php\n     *     \"form\" = {\n    ```", "```php\n     *       \"default\" = \"Drupal\\mymodule\\MessageForm\",\n    ```", "```php\n     *       \"delete\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n                ContentEntityDeleteForm\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *     \"route_provider\" = {\n    ```", "```php\n     *       \"html\" = \"Drupal\\Core\\Entity\\Routing\n    ```", "```php\n                \\DefaultHtmlRouteProvider\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *   },\n    ```", "```php\n     *   links = {\n    ```", "```php\n     *     \"canonical\" = \"/messages/{message}\",\n    ```", "```php\n     *     \"add-form\" = \"/messages/add\",\n    ```", "```php\n     *     \"edit-form\" = \"/messages/{message}/edit\",\n    ```", "```php\n     *     \"delete-form\" = \"/messages/{message}/delete\",\n    ```", "```php\n     *     \"collection\" = \"/admin/structure/messages\"\n    ```", "```php\n     * },\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class Message extends ContentEntityBase {\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule;\n    ```", "```php\n    use Drupal\\Core\\Entity\\EntityInterface;\n    ```", "```php\n    use Drupal\\Core\\Entity\\EntityListBuilder;\n    ```", "```php\n    class MessageListBuilder extends EntityListBuilder {\n    ```", "```php\n      public function buildHeader() {\n    ```", "```php\n        $header['title'] = $this->t('Title');\n    ```", "```php\n        return $header + parent::buildHeader();\n    ```", "```php\n      }\n    ```", "```php\n      public function buildRow(EntityInterface $entity) {\n    ```", "```php\n        $row['title'] = $entity->toLink();\n    ```", "```php\n        return $row + parent::buildRow($entity);\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule;\n    ```", "```php\n    use Drupal\\Core\\Entity\\ContentEntityForm;\n    ```", "```php\n    use Drupal\\Core\\Form\\FormStateInterface;\n    ```", "```php\n    class MessageForm extends ContentEntityForm {\n    ```", "```php\n      public function save(array $form, FormStateInterface\n    ```", "```php\n        $form_state) {\n    ```", "```php\n        $result = parent::save($form, $form_state);\n    ```", "```php\n        if ($result === SAVED_NEW) {\n    ```", "```php\n          $this->messenger()->addMessage('The message has\n    ```", "```php\n            been created.');\n    ```", "```php\n        }\n    ```", "```php\n        else {\n    ```", "```php\n          $this->messenger()->addMessage('The message has\n    ```", "```php\n            been updated.');\n    ```", "```php\n        }\n    ```", "```php\n        $form_state->setRedirectUrl($this->entity->\n    ```", "```php\n            toUrl('collection'));\n    ```", "```php\n        return $result;\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    mymodule.messages:\n    ```", "```php\n      title: 'Messages'\n    ```", "```php\n      parent: system.admin_structure\n    ```", "```php\n      description: 'Manage messages.'\n    ```", "```php\n      route_name: entity.message.collection\n    ```", "```php\n    message.add:\n    ```", "```php\n      route_name: entity.message.add_form\n    ```", "```php\n      title: 'Add message'\n    ```", "```php\n      appears_on:\n    ```", "```php\n        - entity.message.collection\n    ```", "```php\n    entity.message.collection_tab:\n    ```", "```php\n      route_name: entity.message.collection\n    ```", "```php\n      base_route: system.admin_content\n    ```", "```php\n      title: 'Messages'\n    ```", "```php\n    administer message:\n    ```", "```php\n      title: 'Administer messages'\n    ```", "```php\nfunction mymodule_update_10001() {\n  /** @var \\Drupal\\Core\\Entity\\\n        EntityDefinitionUpdateManager $edum */\n  $edum = \\Drupal::service\n     ('entity.definition_update_manager');\n  $definition = $edum->getEntityType('message');\n  $edum->installEntityType($definition);\n}\n```", "```php\nphp vendor/bin/drush generate entity:content\n```", "```php\nentity.message.canonical:\n  route_name: entity.message.canonical\n  base_route: entity.message.canonical\n  title: 'View'\nentity.message.edit_form:\n  route_name: entity.message.edit_form\n  base_route: entity.message.canonical\n  title: Edit\nentity.message.delete_form:\n  route_name: entity.message.delete_form\n  base_route: entity.message.canonical\n  title: Delete\n  weight: 10\n```", "```php\n*   entity_keys = {\n*     \"id\" = \"message_id\",\n*     \"label\" = \"title\",\n*     \"uuid\" = \"uuid\",\n*     \"langcode\" = \"langcode\",\n*   },\n```", "```php\n$fields['title'] = BaseFieldDefinition::create('string')\n  ->setLabel(t('Title'))\n  ->setRequired(TRUE)\n  ->setTranslatable(TRUE)\n```", "```php\n*   revision_table = \"message_revision\",\n*   show_revision_ui = TRUE,\n*   revision_metadata_keys = {\n*     \"revision_user\" = \"revision_uid\",\n*     \"revision_created\" = \"revision_timestamp\",\n*     \"revision_log_message\" = \"revision_log\"\n*   },\n```", "```php\nclass Message extends ContentEntityBase {\n  use RevisionLogEntityTrait;\npublic static function baseFieldDefinitions\n     (EntityTypeInterface $entity_type) {\n    $fields = parent::baseFieldDefinitions($entity_type);\n// Add the revision metadata fields.\n    $fields += static::revisionLogBaseFieldDefinitions\n         ($entity_type);\n```", "```php\n$fields['title'] = BaseFieldDefinition::create('string')\n  ->setLabel(t('Title'))\n  ->setRequired(TRUE)\n  ->setRevisionable(TRUE)\n```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule\\Entity;\n    ```", "```php\n    use Drupal\\Core\\Config\\Entity\\ConfigEntityBundleBase;\n    ```", "```php\n    class MessageType extends ConfigEntityBundleBase {\n    ```", "```php\n      public string $label = '';\n    ```", "```php\n    }\n    ```", "```php\n    /**\n    ```", "```php\n     * @ConfigEntityType(\n    ```", "```php\n     *   id = \"message_type\",\n    ```", "```php\n     *   label = \"Message type\",\n    ```", "```php\n     *   config_prefix = \"message_type\",\n    ```", "```php\n     *   bundle_of = \"message\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"id\",\n    ```", "```php\n     *     \"label\" = \"label\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   config_export = {\n    ```", "```php\n     *     \"id\",\n    ```", "```php\n     *     \"label\",\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer message_type\",\n    ```", "```php\n    */\n    ```", "```php\n    class MessageType extends ConfigEntityBundleBase {\n    ```", "```php\n    /**\n    ```", "```php\n     * @ConfigEntityType(\n    ```", "```php\n     *   id = \"message_type\",\n    ```", "```php\n     *   label = @Translation(\"Message type\"),\n    ```", "```php\n     *   config_prefix = \"message_type\",\n    ```", "```php\n     *   bundle_of = \"message\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"id\",\n    ```", "```php\n     *     \"label\" = \"label\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   config_export = {\n    ```", "```php\n     *     \"id\",\n    ```", "```php\n     *     \"label\",\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer message_type\",\n    ```", "```php\n     *   handlers = {\n    ```", "```php\n     *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n             MessageTypeListBuilder\",\n    ```", "```php\n     *     \"form\" = {\n    ```", "```php\n     *       \"default\" = \"Drupal\\mymodule\n    ```", "```php\n                \\MessageTypeForm\",\n    ```", "```php\n     *       \"delete\" = \"Drupal\\Core\\Entity\n    ```", "```php\n                \\EntityDeleteForm\"\n    ```", "```php\n     *     },\n    ```", "```php\n     *     \"route_provider\" = {\n    ```", "```php\n     *       \"html\" = \"Drupal\\Core\\Entity\\Routing\n    ```", "```php\n                \\AdminHtmlRouteProvider\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *   },\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class MessageType extends ConfigEntityBundleBase {\n    ```", "```php\n    /**\n    ```", "```php\n     * @ConfigEntityType(\n    ```", "```php\n     *   id = \"message_type\",\n    ```", "```php\n     *   label = @Translation(\"Message type\"),\n    ```", "```php\n     *   config_prefix = \"message_type\",\n    ```", "```php\n     *   bundle_of = \"message\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"id\",\n    ```", "```php\n     *     \"label\" = \"label\"\n    ```", "```php\n     *   },\n    ```", "```php\n     *   config_export = {\n    ```", "```php\n     *     \"id\",\n    ```", "```php\n     *     \"label\",\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer message_type\",\n    ```", "```php\n     *   handlers = {\n    ```", "```php\n     *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n            MessageTypeListBuilder\",\n    ```", "```php\n     *     \"form\" = {\n    ```", "```php\n     *       \"default\" = \"Drupal\\mymodule\\\n    ```", "```php\n                MessageTypeForm\",\n    ```", "```php\n     *       \"delete\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n                EntityDeleteForm\"\n    ```", "```php\n     *     },\n    ```", "```php\n     *     \"route_provider\" = {\n    ```", "```php\n     *       \"html\" = \"Drupal\\Core\\Entity\\Routing\n    ```", "```php\n                \\AdminHtmlRouteProvider\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *   },\n    ```", "```php\n     *   links = {\n    ```", "```php\n     *     \"collection\" = \"/admin/structure/message-\n    ```", "```php\n            types\",\n    ```", "```php\n     *     \"add-form\" = \"/admin/structure/message-\n    ```", "```php\n              types/add\",\n    ```", "```php\n     *     \"delete-form\" = \"/admin/structure/message-\n    ```", "```php\n              types/{message_type}/delete\",\n    ```", "```php\n     *     \"edit-form\" = \"/admin/structure/message-\n    ```", "```php\n              types/{message_type}/edit\",\n    ```", "```php\n     *   },\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\n    class MessageType extends ConfigEntityBundleBase {\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule;\n    ```", "```php\n    use Drupal\\Core\\Config\\Entity\\ConfigEntityListBuilder;\n    ```", "```php\n    use Drupal\\Core\\Entity\\EntityInterface;\n    ```", "```php\n    class MessageTypeListBuilder extends\n    ```", "```php\n        ConfigEntityListBuilder {\n    ```", "```php\n    /**\n    ```", "```php\n     * Builds the header row for the entity listing.\n    ```", "```php\n     *\n    ```", "```php\n     * @return array\n    ```", "```php\n     *   A render array structure of header strings.\n    ```", "```php\n     *\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\\EntityListBuilder\n    ```", "```php\n        ::render()\n    ```", "```php\n     */\n    ```", "```php\n      public function buildHeader() {\n    ```", "```php\n        $header['label'] = $this->t('Label');\n    ```", "```php\n        return $header + parent::buildHeader();\n    ```", "```php\n      }\n    ```", "```php\n    /**\n    ```", "```php\n     * Builds a row for an entity in the entity listing.\n    ```", "```php\n     *\n    ```", "```php\n     * @param \\Drupal\\Core\\Entity\\EntityInterface $entity\n    ```", "```php\n     *   The entity for this row of the list.\n    ```", "```php\n     *\n    ```", "```php\n     * @return array\n    ```", "```php\n     *   A render array structure of fields for this\n    ```", "```php\n            entity.\n    ```", "```php\n     *\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\\EntityListBuilder\n    ```", "```php\n        ::render()\n    ```", "```php\n     */\n    ```", "```php\n      public function buildRow(EntityInterface $entity) {\n    ```", "```php\n        $row['label'] = $entity->label();\n    ```", "```php\n        return $row + parent::buildRow($entity);\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule;\n    ```", "```php\n    use Drupal\\Core\\Entity\\BundleEntityFormBase;\n    ```", "```php\n    use Drupal\\Core\\Form\\FormStateInterface;\n    ```", "```php\n    use Drupal\\mymodule\\Entity\\MessageType;\n    ```", "```php\n    class MessageTypeForm extends BundleEntityFormBase {\n    ```", "```php\n    /**\n    ```", "```php\n     * Gets the actual form array to be built.\n    ```", "```php\n     *\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\\EntityForm::processForm()\n    ```", "```php\n     * @see \\Drupal\\Core\\Entity\\EntityForm::afterBuild()\n    ```", "```php\n     */\n    ```", "```php\n      public function form(array $form, FormStateInterface\n    ```", "```php\n        $form_state) {\n    ```", "```php\n        $form = parent::form($form, $form_state);\n    ```", "```php\n        /** @var \\Drupal\\mymodule\\Entity\\MessageType\n    ```", "```php\n            $entity */\n    ```", "```php\n        $entity = $this->entity;\n    ```", "```php\n        $form['label'] = [\n    ```", "```php\n          '#type' => 'textfield',\n    ```", "```php\n          '#title' => $this->t('Label'),\n    ```", "```php\n          '#required' => TRUE,\n    ```", "```php\n          '#default_value' => $entity->label,\n    ```", "```php\n        ];\n    ```", "```php\n        $form['id'] = [\n    ```", "```php\n          '#type' => 'machine_name',\n    ```", "```php\n          '#default_value' => $entity->id(),\n    ```", "```php\n          '#machine_name' => [\n    ```", "```php\n            'exists' => [MessageType::class, 'load'],\n    ```", "```php\n          ],\n    ```", "```php\n        ];\n    ```", "```php\n        return $this->protectBundleIdElement($form);\n    ```", "```php\n      }\n    ```", "```php\n    /**\n    ```", "```php\n     * Form submission handler for the 'save' action.\n    ```", "```php\n     *\n    ```", "```php\n     * Normally this method should be overridden to provide specific messages to\n    ```", "```php\n     * the user and redirect the form after the entity has\n    ```", "```php\n          been saved.\n    ```", "```php\n     *\n    ```", "```php\n     * @param array $form\n    ```", "```php\n     *   An associative array containing the structure of\n    ```", "```php\n            the form.\n    ```", "```php\n     * @param \\Drupal\\Core\\Form\\FormStateInterface\n    ```", "```php\n          $form_state\n    ```", "```php\n     *   The current state of the form.\n    ```", "```php\n     *\n    ```", "```php\n     * @return int\n    ```", "```php\n     *   Either SAVED_NEW or SAVED_UPDATED, depending on\n    ```", "```php\n            the operation performed.\n    ```", "```php\n     */\n    ```", "```php\n      public function save(array $form, FormStateInterface\n    ```", "```php\n        $form_state) {\n    ```", "```php\n        $result = parent::save($form, $form_state);\n    ```", "```php\n        if ($result === SAVED_NEW) {\n    ```", "```php\n          $this->messenger()->addMessage('The message type\n    ```", "```php\n            has been created.');\n    ```", "```php\n        }\n    ```", "```php\n        else {\n    ```", "```php\n          $this->messenger()->addMessage('The message type\n    ```", "```php\n            has been updated.');\n    ```", "```php\n        }\n    ```", "```php\n        $form_state->setRedirectUrl($this->entity->\n    ```", "```php\n            toUrl('collection'));\n    ```", "```php\n        return $result;\n    ```", "```php\n      }\n    ```", "```php\n    }\n    ```", "```php\n    mymodule.message_types:\n    ```", "```php\n      title: 'Message types'\n    ```", "```php\n      parent: system.admin_structure\n    ```", "```php\n      description: 'Manage message types.'\n    ```", "```php\n      route_name: entity.message_type.collection\n    ```", "```php\n    message.add:\n    ```", "```php\n      route_name: entity.message.add_page\n    ```", "```php\n      title: 'Add message'\n    ```", "```php\n      appears_on:\n    ```", "```php\n        - entity.message.collection\n    ```", "```php\n    message_type.add:\n    ```", "```php\n      route_name: entity.message_type.add_form\n    ```", "```php\n      title: 'Add message type'\n    ```", "```php\n      appears_on:\n    ```", "```php\n        - entity.message_type.collection\n    ```", "```php\n    entity.message_type.edit_form:\n    ```", "```php\n      route_name: entity.message_type.edit_form\n    ```", "```php\n      base_route: entity.message_type.edit_form\n    ```", "```php\n      title: Edit\n    ```", "```php\n    administer message_types:\n    ```", "```php\n      title: 'Administer message types'\n    ```", "```php\n    mymodule.message_type.*:\n    ```", "```php\n      type: config_entity\n    ```", "```php\n      label: 'Message type settings'\n    ```", "```php\n      mapping:\n    ```", "```php\n        id:\n    ```", "```php\n          type: string\n    ```", "```php\n          label: 'Machine-readable name'\n    ```", "```php\n        label:\n    ```", "```php\n          type: label\n    ```", "```php\n          label: 'Label'\n    ```", "```php\n    /**\n    ```", "```php\n     * Defines the message entity class.\n    ```", "```php\n     *\n    ```", "```php\n     * @ContentEntityType(\n    ```", "```php\n     *   id = \"message\",\n    ```", "```php\n     *   label = @Translation(\"Message\"),\n    ```", "```php\n     *   base_table = \"message\",\n    ```", "```php\n     *   entity_keys = {\n    ```", "```php\n     *     \"id\" = \"message_id\",\n    ```", "```php\n     *     \"label\" = \"title\",\n    ```", "```php\n     *     \"uuid\" = \"uuid\",\n    ```", "```php\n     *     \"bundle\" = \"type\",\n    ```", "```php\n     *   },\n    ```", "```php\n     *   admin_permission = \"administer message\",\n    ```", "```php\n     *   bundle_entity_type = \"message_type\",\n    ```", "```php\n     *   field_ui_base_route =\n    ```", "```php\n            \"entity.message_type.edit_form\",\n    ```", "```php\n     *   handlers = {\n    ```", "```php\n     *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n                MessageListBuilder\",\n    ```", "```php\n     *     \"form\" = {\n    ```", "```php\n     *       \"default\" = \"Drupal\\mymodule\\MessageForm\",\n    ```", "```php\n     *       \"delete\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n                ContentEntityDeleteForm\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *     \"route_provider\" = {\n    ```", "```php\n     *       \"html\" = \"Drupal\\Core\\Entity\\Routing\\\n    ```", "```php\n                DefaultHtmlRouteProvider\",\n    ```", "```php\n     *     },\n    ```", "```php\n     *   },\n    ```", "```php\n     *   links = {\n    ```", "```php\n     *     \"canonical\" = \"/messages/{message}\",\n    ```", "```php\n     *     \"add-page\" = \"/messages/add\",\n    ```", "```php\n     *     \"add-form\" = \"/messages/add/{message_type}\",\n    ```", "```php\n     *     \"edit-form\" = \"/messages/{message}/edit\",\n    ```", "```php\n     *     \"delete-form\" = \"/messages/{message}/delete\",\n    ```", "```php\n     *     \"collection\" = \"/admin/structure/messages\"\n    ```", "```php\n     *   },\n    ```", "```php\n     * )\n    ```", "```php\n     */\n    ```", "```php\ncomposer require drupal/entity\nphp vendor/bin/drush en entity --yes\n```", "```php\n    name: My Module\n    ```", "```php\n    type: module\n    ```", "```php\n    description: This is an example module from the Drupal\n    ```", "```php\n      Development Cookbook!\n    ```", "```php\n    core_version_requirement: '>=10'\n    ```", "```php\n    dependencies:\n    ```", "```php\n      - entity:entity\n    ```", "```php\n    *   admin_permission = \"administer message\",\n    ```", "```php\n    *   permission_granularity = \"bundle\",\n    ```", "```php\n    *   bundle_entity_type = \"message_type\",\n    ```", "```php\n    *   field_ui_base_route =\n    ```", "```php\n            \"entity.message_type.edit_form\",\n    ```", "```php\n    *   handlers = {\n    ```", "```php\n    *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n            MessageListBuilder\",\n    ```", "```php\n    *     \"form\" = {...},\n    ```", "```php\n    *     \"route_provider\" = {...},\n    ```", "```php\n    *     \"permission_provider\" = \"\\Drupal\\entity\\\n    ```", "```php\n            EntityPermissionProvider\",\n    ```", "```php\n    *   },\n    ```", "```php\n    *   handlers = {\n    ```", "```php\n    *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n            MessageListBuilder\",\n    ```", "```php\n    *     \"form\" = {...},\n    ```", "```php\n    *     \"route_provider\" = {...},\n    ```", "```php\n    *     \"permission_provider\" = \"\\Drupal\\entity\\\n    ```", "```php\n            EntityPermissionProvider\",\n    ```", "```php\n    *     \"access\" = \"\\Drupal\\entity\\\n    ```", "```php\n            EntityAccessControlHandler\",\n    ```", "```php\n    *   },\n    ```", "```php\n    *   handlers = {\n    ```", "```php\n    *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n            MessageListBuilder\",\n    ```", "```php\n    *     \"form\" = {\n    ```", "```php\n    *       \"default\" = \"Drupal\\mymodule\\MessageForm\",\n    ```", "```php\n    *       \"delete\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n              ContentEntityDeleteForm\",\n    ```", "```php\n    *     },\n    ```", "```php\n    *     \"route_provider\" = {\n    ```", "```php\n    *       \"html\" = \"Drupal\\Core\\Entity\\Routing\\\n    ```", "```php\n              DefaultHtmlRouteProvider\",\n    ```", "```php\n    *     },\n    ```", "```php\n    *     \"permission_provider\" = \"\\Drupal\\entity\\\n    ```", "```php\n            EntityPermissionProvider\",\n    ```", "```php\n    *     \"access\" = \"\\Drupal\\entity\\\n    ```", "```php\n              EntityAccessControlHandler\",\n    ```", "```php\n    *     \"query_access\" = \"\\Drupal\\entity\\QueryAccess\\\n    ```", "```php\n            QueryAccessHandler\",\n    ```", "```php\n    *   },\n    ```", "```php\n      case 'pass':\n        // Allow editing the password, but not viewing it.\n        return ($operation == 'edit') ? AccessResult::\n            allowed() : AccessResult::forbidden();\n```", "```php\n      case 'created':\n    // Allow viewing the created date, but not editing it.\n        return ($operation == 'view') ? AccessResult\n            ::allowed() : AccessResult::neutral();\n```", "```php\n    <?php\n    ```", "```php\n    namespace Drupal\\mymodule;\n    ```", "```php\n    use Drupal\\Core\\Entity\\Sql\\SqlContentEntityStorage;\n    ```", "```php\n    class MessageStorage extends SqlContentEntityStorage {\n    ```", "```php\n    }\n    ```", "```php\n    public function loadMultipleByType(string $type): array {\n    ```", "```php\n      $message_ids = $this->getQuery()\n    ```", "```php\n        ->accessCheck(TRUE)\n    ```", "```php\n        ->condition('type', $type)\n    ```", "```php\n        ->execute();\n    ```", "```php\n      return $this->loadMultiple($message_ids);\n    ```", "```php\n    }\n    ```", "```php\n    *   handlers = {\n    ```", "```php\n    *     \"list_builder\" = \"Drupal\\mymodule\\\n    ```", "```php\n            MessageListBuilder\",\n    ```", "```php\n    *     \"form\" = {\n    ```", "```php\n    *       \"default\" = \"Drupal\\mymodule\\MessageForm\",\n    ```", "```php\n    *       \"delete\" = \"Drupal\\Core\\Entity\\\n    ```", "```php\n                ContentEntityDeleteForm\",\n    ```", "```php\n    *     },\n    ```", "```php\n    *     \"route_provider\" = {\n    ```", "```php\n    *       \"html\" = \"Drupal\\Core\\Entity\\Routing\\\n    ```", "```php\n                DefaultHtmlRouteProvider\",\n    ```", "```php\n    *     },\n    ```", "```php\n    *     \"storage\" = \"\\Drupal\\mymodule\\MessageStorage\",\n    ```", "```php\n    *   },\n    ```", "```php\n    $messages = \\Drupal::entityTypeManager()\n    ```", "```php\n      ->getStorage('message')\n    ```", "```php\n      ->loadMultipleByType('alert');\n    ```"]