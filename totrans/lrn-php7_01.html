<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Setting Up the Environment" id="DB7S1-edcc22b134104d5db0bf3aa086c86851"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Setting Up the Environment</h1></div></div></div><p class="calibre8">You are about to start a journey—a long one, in which you will learn how to write web applications with PHP. However, first, you need to set up your environment, something that has proven to be tricky at times. This task includes installing PHP 7, the language of choice for this book; MySQL, the database that we will use in some chapters; Nginx, the web server that will allow us to visualize our applications with a browser; and Composer, the favorite PHP dependencies management tool. We will do all of this with Vagrant and also on three different platforms: Windows, OS X, and Ubuntu.</p><p class="calibre8">In this chapter, you will learn about:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Using Vagrant to set up a development environment</li><li class="listitem">Setting up your environment manually on the main platforms</li></ul></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Setting Up the Environment" id="DB7S1-edcc22b134104d5db0bf3aa086c86851">
<div class="book" title="Setting up the environment with Vagrant"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>Setting up the environment with Vagrant</h1></div></div></div><p class="calibre8">Not <a id="id0" class="calibre1"/>so long ago, every time you started working<a id="id1" class="calibre1"/> for a new company, you would spend an important part of your first few days setting up your new environment—that is, installing all the necessary tools on your new computer in order to be able to code. This was incredibly frustrating because even though the software to install was the same, there was always something that failed or was missing, and you would spend less time being productive.</p></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Setting Up the Environment" id="DB7S1-edcc22b134104d5db0bf3aa086c86851">
<div class="book" title="Setting up the environment with Vagrant">
<div class="book" title="Introducing Vagrant"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec06" class="calibre1"/>Introducing Vagrant</h2></div></div></div><p class="calibre8">Luckily <a id="id2" class="calibre1"/>for us, people tried to fix this big problem. First, we have virtual machines, which are emulations of computers inside your own computer. With this, we can have Linux inside our MacBook, which allows developers to share environments. It was a good step, but it still had some problems; for example, VMs were quite big to move between different environments, and if developers wanted to make a change, they had to apply the same change to all the existing virtual machines in the organization.</p><p class="calibre8">After some deliberation, a group of engineers came up with a solution to these issues and we got <a id="id3" class="calibre1"/>
<span class="strong"><strong class="calibre2">Vagrant</strong></span>. This amazing software allows you to manage virtual machines with simple configuration files. The idea is simple: a configuration file specifies which base virtual machine we need to use from a set of available ones online and how you would like to customize it—that is, which commands you will want to run the first time you start the machine—this is called "provisioning". You will probably get the Vagrant configuration from a public repository, and if this configuration ever changes, you can get the changes and reprovision your machine. It's easy, right?</p></div></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Setting Up the Environment" id="DB7S1-edcc22b134104d5db0bf3aa086c86851">
<div class="book" title="Setting up the environment with Vagrant">
<div class="book" title="Installing Vagrant"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec07" class="calibre1"/>Installing Vagrant</h2></div></div></div><p class="calibre8">If you still do not<a id="id4" class="calibre1"/> have Vagrant, installing it is quite easy. You will need to visit the Vagrant download page<a id="id5" class="calibre1"/> at <a class="calibre1" href="https://www.vagrantup.com/downloads.html">https://www.vagrantup.com/downloads.html</a> and select the operating system that you are working with. Execute the <a id="id6" class="calibre1"/>installer, which does not require any extra configuration, and you are good to go.</p></div></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Setting Up the Environment" id="DB7S1-edcc22b134104d5db0bf3aa086c86851">
<div class="book" title="Setting up the environment with Vagrant">
<div class="book" title="Using Vagrant"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec08" class="calibre1"/>Using Vagrant</h2></div></div></div><p class="calibre8">Using<a id="id7" class="calibre1"/> Vagrant is quite easy. The most important piece is the <code class="email">Vagrantfile</code> file. This file contains the name of the base image we want to use and the rest of the configuration that we want to apply. The following content is the configuration needed in order to get an Ubuntu VM with PHP 7, MySQL, Nginx, and Composer. Save it as <code class="email">Vagrantfile</code> at the root of the directory for the examples of this book.</p><div class="informalexample"><pre class="programlisting">VAGRANTFILE_API_VERSION = "2"

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.box = "ubuntu/trusty32"
  config.vm.network "forwarded_port", guest: 80, host: 8080
  config.vm.provision "shell", path: "provisioner.sh"
end</pre></div><p class="calibre8">As you can see, the file is quite small. The base image's name is <code class="email">ubuntu/trusty32</code>, messages to our port <code class="email">8080</code> will be redirected to the port <code class="email">80</code> of the virtual machine, and the provision will be based on the <code class="email">provisioner.sh</code> script. You will need to create this file, which will be the one that contains all the setup of the different components that we need. This is what you need to add to this file:</p><div class="informalexample"><pre class="programlisting">#!/bin/bash

sudo apt-get install python-software-properties -y
sudo LC_ALL=en_US.UTF-8 add-apt-repository ppa:ondrej/php -y
sudo apt-get update
sudo apt-get install php7.0 php7.0-fpm php7.0-mysql -y
sudo apt-get --purge autoremove -y
sudo service php7.0-fpm restart

sudo debconf-set-selections &lt;&lt;&lt; 'mysql-server mysql-server/root_password password root'
sudo debconf-set-selections &lt;&lt;&lt; 'mysql-server mysql-server/root_password_again password root'
sudo apt-get -y install mysql-server mysql-client
sudo service mysql start

sudo apt-get install nginx -y
sudo cat &gt; /etc/nginx/sites-available/default &lt;&lt;- EOM
server {
    listen 80 default_server;
    listen [::]:80 default_server ipv6only=on;

    root /vagrant;
    index index.php index.html index.htm;

    server_name server_domain_or_IP;

    location / {
        try_files \$uri \$uri/ /index.php?\$query_string;
    }

    location ~ \.php\$ {
        try_files \$uri /index.php =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)\$;
        fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME \$document_root\$fastcgi_script_name;
        include fastcgi_params;
    }
}
EOM
sudo service nginx restart</pre></div><p class="calibre8">The file looks<a id="id8" class="calibre1"/> quite long, but we will do quite a lot of stuff with it. With the first part of the file, we will add the necessary repositories to be able to fetch PHP 7, as it does not come with the official ones, and then install it. Then, we will try to install MySQL, server and client. We will set the root password on this provisioning because we cannot introduce it manually with Vagrant. As this is a development machine, it is not really a problem, but you can always change the password once you are done. Finally, we will install and configure Nginx to listen to the port <code class="email">8080</code>.</p><p class="calibre8">To start the virtual machine, you need to execute the following command in the same directory where <code class="email">Vagrantfile</code> is:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ vagrant up</strong></span>
</pre></div><p class="calibre8">The first time <a id="id9" class="calibre1"/>you execute it, it will take some time as it will have to download the image from the repository, and then it will execute the <code class="email">provisioner.sh</code> file. The output should be something similar to this one followed by some more output messages:</p><div class="mediaobject"><img src="../images/00002.jpeg" alt="Using Vagrant" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">In order to access your new VM, run the following command on the same directory where you have your <code class="email">Vagrantfile</code> file:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ vagrant ssh</strong></span>
</pre></div><p class="calibre8">Vagrant will start an SSH session to the VM, which means that you are inside the VM. You can do anything you would do with the command line of an Ubuntu system. To exit, just press <span class="strong"><em class="calibre12">Ctrl</em></span> + <span class="strong"><em class="calibre12">D</em></span>.</p><p class="calibre8">Sharing files from your laptop to the VM is easy; just move or copy them to the same directory where your <code class="email">Vagrantfile</code> file is, and they will "magically" appear on the <code class="email">/vagrant</code> directory of your VM. They will be synchronized, so any changes that you make while in your VM will be reflected on the files of your laptop.</p><p class="calibre8">Once you have a<a id="id10" class="calibre1"/> web application and you want to test it through a web browser, remember that we will forward the ports. This means that in order to access the port <code class="email">80</code> of your VM, the common one for web applications, you will have to point to the port <code class="email">8080</code> on your browsers; here's an example: <code class="email">http://localhost:8080</code>.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Setting up the environment on OS X"><div class="book" id="E9OE2-edcc22b134104d5db0bf3aa086c86851"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>Setting up the environment on OS X</h1></div></div></div><p class="calibre8">If you are not<a id="id11" class="calibre1"/> convinced with Vagrant and prefer to use a Mac to develop PHP applications, this is your section. Installing all the necessary tools on a Mac might be a bit tricky, depending on the version of your OS X. At the time of writing this book, Oracle has not released a MySQL client that you can use via the command line that works with El Capitan, so we will describe how to install another tool that can do a similar job.</p></div>

<div class="book" title="Setting up the environment on OS X">
<div class="book" title="Installing PHP"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec09" class="calibre1"/>Installing PHP</h2></div></div></div><p class="calibre8">If it is the first<a id="id12" class="calibre1"/> time you are using a Mac to develop applications of any kind, you will have to start by installing Xcode. You can find this application for free on the App Store:</p><div class="mediaobject"><img src="../images/00003.jpeg" alt="Installing PHP" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Another<a id="id13" class="calibre1"/> indispensable tool for Mac users is Brew. This is the package manager for OS X and will help us install PHP with almost no pain. To install it, run the following command on your command line:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</strong></span>
</pre></div><p class="calibre8">If you already have Brew installed, you can make sure that everything works fine by running these two commands:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ brew doctor</strong></span>
<span class="strong"><strong class="calibre2">$ brew update</strong></span>
</pre></div><p class="calibre8">It is time to install PHP 7 using Brew. To do so, you will just need to run one command, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ brew install homebrew/php/php70</strong></span>
</pre></div><p class="calibre8">The result should be as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00004.jpeg" alt="Installing PHP" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Make sure to add the binary to your <code class="email">PATH</code> environment variable by executing this command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ export PATH="$(brew --prefix homebrew/php/php70)/bin:$PATH"</strong></span>
</pre></div><p class="calibre8">You can check<a id="id14" class="calibre1"/> whether your installation was successful by asking which version of PHP your system is using with the <code class="email">$ php –v</code> command.</p></div></div>

<div class="book" title="Setting up the environment on OS X">
<div class="book" title="Installing MySQL"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec10" class="calibre1"/>Installing MySQL</h2></div></div></div><p class="calibre8">As <a id="id15" class="calibre1"/>pointed out at the beginning of this section, MySQL is a tricky one for Mac users. You need to download the MySQL server installer and MySQL Workbench as the client. The MySQL server installer can be found<a id="id16" class="calibre1"/> at <a class="calibre1" href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a>. You should find a list of different options, as shown here:</p><div class="mediaobject"><img src="../images/00005.jpeg" alt="Installing MySQL" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">The easiest way<a id="id17" class="calibre1"/> to go is to download <span class="strong"><strong class="calibre2">DMG Archive</strong></span>. You will be asked to log in with your Oracle account; you can create one if you do not have any. After this, the download will start. As with any DMG package, just double-click on it and go through the options—in this case, just click on <span class="strong"><strong class="calibre2">Next</strong></span> all the time. Be careful because at the end of the process, you will be prompted with a message similar to this:</p><div class="mediaobject"><img src="../images/00006.jpeg" alt="Installing MySQL" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Make a <a id="id18" class="calibre1"/>note of it; otherwise, you will have to reset the root password. The next one is<a id="id19" class="calibre1"/> MySQL Workbench, which you can find at <a class="calibre1" href="http://www.mysql.com/products/workbench/">http://www.mysql.com/products/workbench/</a>. The process is the same; you will be asked to log in, and then you will get a DMG file. Click on <span class="strong"><strong class="calibre2">Next</strong></span> until the end of the installation wizard. Once done, you can launch the application; it should look similar to this:</p><div class="mediaobject"><img src="../images/00007.jpeg" alt="Installing MySQL" class="calibre9"/></div><p class="calibre10"> </p></div></div>

<div class="book" title="Setting up the environment on OS X">
<div class="book" title="Installing Nginx"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec11" class="calibre1"/>Installing Nginx</h2></div></div></div><p class="calibre8">In <a id="id20" class="calibre1"/>order to install Nginx, we will use Brew, as we did with PHP. The command is the following:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ brew install nginx</strong></span>
</pre></div><p class="calibre8">If you want to make Nginx start every time you start your laptop, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ ln -sfv /usr/local/opt/nginx/*.plist ~/Library/LaunchAgents</strong></span>
</pre></div><p class="calibre8">If you have to change the configuration of Nginx, you will find the file in <code class="email">/usr/local/etc/nginx/nginx.conf</code>. You can change things, such as the port that Nginx is listening to or the root directory where your code is (the default directory is <code class="email">/usr/local/Cellar/nginx/1.8.1/html/</code>). Remember to restart Nginx to apply the changes with the <code class="email">sudo nginx</code> command.</p></div></div>

<div class="book" title="Setting up the environment on OS X">
<div class="book" title="Installing Composer"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec12" class="calibre1"/>Installing Composer</h2></div></div></div><p class="calibre8">Installing <a id="id21" class="calibre1"/>Composer is as easy as downloading it with the <code class="email">curl</code> command; move the binary to <code class="email">/usr/local/bin/</code> with the following two commands:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ curl -sS https://getcomposer.org/installer | php</strong></span>
<span class="strong"><strong class="calibre2">$ mv composer.phar /usr/local/bin/composer</strong></span>
</pre></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Setting up the environment on Windows"><div class="book" id="F8902-edcc22b134104d5db0bf3aa086c86851"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Setting up the environment on Windows</h1></div></div></div><p class="calibre8">Even <a id="id22" class="calibre1"/>though it is not very professional to pick sides based on personal opinions, it is well known among developers how hard it can be to use Windows as a developer machine. They prove to be extremely tricky when it comes to installing all the software since the installation mode is always very different from OS X and Linux systems, and quite often, there are dependency or configuration problems. In addition, the command line has different interpreters than Unix systems, which makes things a bit more confusing. This is why most developers would recommend you use a virtual machine with Linux if you only have a Windows machine at your disposal.</p><p class="calibre8">However, to be fair, PHP 7 is the exception to the rule. It is surprisingly simple to install it, so if you are really comfortable with your Windows and would prefer not to use Vagrant, here you have a short explanation on how to set up your environment.</p></div>

<div class="book" title="Setting up the environment on Windows">
<div class="book" title="Installing PHP"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec13" class="calibre1"/>Installing PHP</h2></div></div></div><p class="calibre8">In order <a id="id23" class="calibre1"/>to install PHP 7, you will first download the<a id="id24" class="calibre1"/> installer from the official website. For this, go to <a class="calibre1" href="http://windows.php.net/download">http://windows.php.net/download</a>. The options should be similar to the following screenshot:</p><div class="mediaobject"><img src="../images/00008.jpeg" alt="Installing PHP" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Choose<a id="id25" class="calibre1"/> <span class="strong"><strong class="calibre2">x86 Thread Safe</strong></span> for Windows 32-bit or <span class="strong"><strong class="calibre2">x64 Thread Safe</strong></span> for the 64-bit one. Once downloaded, uncompress it in <code class="email">C:\php7</code>. Yes, that is it!</p></div></div>

<div class="book" title="Setting up the environment on Windows">
<div class="book" title="Installing MySQL"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec14" class="calibre1"/>Installing MySQL</h2></div></div></div><p class="calibre8">Installing<a id="id26" class="calibre1"/> MySQL is a little more complex. Download the <a id="id27" class="calibre1"/>installer from <a class="calibre1" href="http://dev.mysql.com/downloads/installer/">http://dev.mysql.com/downloads/installer/</a> and execute it. After accepting the license agreement, you will get a window similar to the following one:</p><div class="mediaobject"><img src="../images/00009.jpeg" alt="Installing MySQL" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">For the purposes of the <a id="id28" class="calibre1"/>book—and actually for any development environment—you should go for the first option: <span class="strong"><strong class="calibre2">Developer Default</strong></span>. Keep going forward, leaving all the default options, until you get a window similar to this:</p><div class="mediaobject"><img src="../images/00010.jpeg" alt="Installing MySQL" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">Depending on your<a id="id29" class="calibre1"/> preferences, you can either just set a password for the root user, which is enough as it is only a development machine, or you can add an extra user by clicking on <span class="strong"><strong class="calibre2">Add User</strong></span>. Make sure to set the correct name, password, and permissions. A user named <code class="email">test</code> with administration permissions should look similar to the following screenshot:</p><div class="mediaobject"><img src="../images/00011.jpeg" alt="Installing MySQL" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">For the rest of the<a id="id30" class="calibre1"/> installation process, you can select all the default options.</p></div></div>

<div class="book" title="Setting up the environment on Windows">
<div class="book" title="Installing Nginx"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec15" class="calibre1"/>Installing Nginx</h2></div></div></div><p class="calibre8">The installation for <a id="id31" class="calibre1"/>Nginx is almost identical to the PHP 7 one. First, download the<a id="id32" class="calibre1"/> ZIP file from <a class="calibre1" href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a>. At the time of writing, the versions available are as follows:</p><div class="mediaobject"><img src="../images/00012.jpeg" alt="Installing Nginx" class="calibre9"/></div><p class="calibre10"> </p><p class="calibre8">You can safely<a id="id33" class="calibre1"/> download the mainline version 1.9.10 or a later one if it is stable. Once the file is downloaded, uncompress it in <code class="email">C:\nginx</code> and run the following commands to start the web server:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ cd nginx</strong></span>
<span class="strong"><strong class="calibre2">$ start nginx</strong></span>
</pre></div></div></div>

<div class="book" title="Setting up the environment on Windows">
<div class="book" title="Installing Composer"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec16" class="calibre1"/>Installing Composer</h2></div></div></div><p class="calibre8">To<a id="id34" class="calibre1"/> finish with the setup, we need to install <a id="id35" class="calibre1"/>Composer. To go for the automatic installation, just download the installer from <a class="calibre1" href="https://getcomposer.org/Composer-Setup.exe">https://getcomposer.org/Composer-Setup.exe</a>. Once downloaded, execute it in order to install Composer on your system and to update your <code class="email">PATH</code> environment variable.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Setting up the environment on Ubuntu" id="G6PI1-edcc22b134104d5db0bf3aa086c86851"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Setting up the environment on Ubuntu</h1></div></div></div><p class="calibre8">Setting<a id="id36" class="calibre1"/> up your environment on Ubuntu is the easiest of the three platforms. In fact, you could take the <code class="email">provisioner.sh</code> script from the <span class="strong"><em class="calibre12">Setting up the environment with Vagrant</em></span> section and execute it on your laptop. That should do the trick. However, just in case you already have some of the tools installed or you want to have a sense of control on what is going on, we will detail each step.</p></div>

<div class="book" title="Setting up the environment on Ubuntu" id="G6PI1-edcc22b134104d5db0bf3aa086c86851">
<div class="book" title="Installing PHP"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec17" class="calibre1"/>Installing PHP</h2></div></div></div><p class="calibre8">The <a id="id37" class="calibre1"/>only thing to consider in this section is to remove any previous PHP versions on your system. To do so, you can run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ sudo apt-get -y purge php.*</strong></span>
</pre></div><p class="calibre8">The next step is to add the necessary repositories in order to fetch the correct PHP version. The commands to add and update them are:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ sudo apt-get install python-software-properties</strong></span>
<span class="strong"><strong class="calibre2">$ sudo LC_ALL=en_US.UTF-8 add-apt-repository ppa:ondrej/php -y</strong></span>
<span class="strong"><strong class="calibre2">$ sudo apt-get update</strong></span>
</pre></div><p class="calibre8">Finally, we need to install PHP 7 together with the driver for MySQL. For this, just execute the following three commands:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ sudo apt-get install php7.0 php7.0-fpm php7.0-mysql -y</strong></span>
<span class="strong"><strong class="calibre2">$ sudo apt-get --purge autoremove -y</strong></span>
<span class="strong"><strong class="calibre2">$ sudo service php7.0-fpm start</strong></span>
</pre></div></div></div>

<div class="book" title="Setting up the environment on Ubuntu" id="G6PI1-edcc22b134104d5db0bf3aa086c86851">
<div class="book" title="Installing MySQL"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec18" class="calibre1"/>Installing MySQL</h2></div></div></div><p class="calibre8">Installing <a id="id38" class="calibre1"/>MySQL manually can be slightly different than with the Vagrant script. As we can interact with the console, we do not have to specify the root password previously; instead, we can force MySQL to prompt for it. Run the following command and keep in mind that the installer will ask you for the password:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ sudo apt-get -y install mysql-server mysql-client</strong></span>
</pre></div><p class="calibre8">Once done, if you need to start the MySQL server, you can do it with the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ sudo service mysql start</strong></span>
</pre></div></div></div>

<div class="book" title="Setting up the environment on Ubuntu" id="G6PI1-edcc22b134104d5db0bf3aa086c86851">
<div class="book" title="Installing Nginx"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec19" class="calibre1"/>Installing Nginx</h2></div></div></div><p class="calibre8">The<a id="id39" class="calibre1"/> first thing that you need to know is that you can only have one web server listening on the same port. As port <code class="email">80</code> is the default one for web applications, if you are running Apache on your Ubuntu machine, you will not be able to start an Nginx web server listening on the same port <code class="email">80</code>. To fix this, you can either change the ports for Nginx or Apache, stop Apache, or uninstall it. Either way, the installation command for Nginx is as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ sudo apt-get install nginx –y</strong></span>
</pre></div><p class="calibre8">Now, you will need to enable a site with Nginx. The sites are files under <code class="email">/etc/nginx/sites-available</code>. There is already one file there, <code class="email">default</code>, which you can safely replace with the following content:</p><div class="informalexample"><pre class="programlisting">server {
    listen 80 default_server;
    listen [::]:80 default_server ipv6only=on;

    root /var/www/html;
    index index.php index.html index.htm;

    server_name server_domain_or_IP;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        try_files $uri /index.php =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}</pre></div><p class="calibre8">This configuration basically points the root directory of your web application to the <code class="email">/var/www/html</code> directory. You can choose the one that you prefer, but make sure that it has the right permissions. It also listens on the port <code class="email">80</code>, which you can change with the one you prefer; just keep this in mind that when you try to access your application via a browser. Finally, to apply all the changes, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ sudo service nginx restart</strong></span>
</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre8">
<span class="strong"><strong class="calibre2">Downloading the example code</strong></span>
</p><p class="calibre8">You can download the example code files for this book from your account at <a class="calibre1" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="calibre1" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p><p class="calibre8">You can download the code files by following these steps:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Log in or register to our website using your e-mail address and password.</li><li class="listitem">Hover the mouse pointer on the <span class="strong"><strong class="calibre2">SUPPORT</strong></span> tab at the top.</li><li class="listitem">Click on <span class="strong"><strong class="calibre2">Code Downloads &amp; Errata</strong></span>.</li><li class="listitem">Enter the name of the book in the <span class="strong"><strong class="calibre2">Search</strong></span> box.</li><li class="listitem">Select the book for which you're looking to download the code files.</li><li class="listitem">Choose from the drop-down menu where you purchased this book from.</li><li class="listitem">Click on <span class="strong"><strong class="calibre2">Code Download</strong></span>.</li></ul></div><p class="calibre8">Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p><div class="book"><ul class="itemizedlist"><li class="listitem">WinRAR / 7-Zip for Windows</li><li class="listitem">Zipeg / iZip / UnRarX for Mac</li><li class="listitem">7-Zip / PeaZip for Linux</li></ul></div></div></div></div>
<div class="book" title="Summary" id="H5A41-edcc22b134104d5db0bf3aa086c86851"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec12" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, you learned how easy it is to set up a development environment using Vagrant. If this did not convince you, you still got the chance to set up all the tools manually. Either way, now you are able to work on the next chapters.</p><p class="calibre8">In the next chapter, we will take a look at the idea of web applications with PHP, going from the protocols used to how the web server serves requests, thus setting the foundation for the following chapters.</p></div></body></html>