<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Adding Media to Our Site"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Adding Media to Our Site</h1></div></div></div><p><span class="emphasis"><em>A text-only site is not going to hold the interest of visitors; a site needs some pizzazz and some spice! One way to add some pizzazz to your site is by adding some multimedia content, such as images, video, audio, and so on. But, we don't just want to add a few images here and there; in fact, we want an immersive and compelling multimedia experience that is easy to manage, configure, and extend. The <a class="indexterm" id="id389"/>File entity (<a class="ulink" href="https://drupal.org/project/file_entity">https://drupal.org/project/file_entity</a>) module for Drupal 8 will enable us to manage files very easily. In this chapter, we will discover how to integrate the File entity module to add images to our d8dev site, and will explore compelling ways to present images to users. This will include taking a look at the integration of a lightbox-type UI element for displaying the File-entity-module-managed images, and learning how we can create custom image styles through UI and code.</em></span></p><p>The following topics will be covered in this chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The File entity module for Drupal 8</li><li class="listitem" style="list-style-type: disc">Adding a Recipe image field to your content types</li><li class="listitem" style="list-style-type: disc">Code example—image styles for Drupal 8</li><li class="listitem" style="list-style-type: disc">Displaying recipe images in a lightbox popup</li><li class="listitem" style="list-style-type: disc">Working with Drupal issue queues</li></ul></div><div class="section" title="Introduction to the File entity module"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec81"/>Introduction to the File entity module</h1></div></div></div><p>As per the<a class="indexterm" id="id390"/> module page at <a class="ulink" href="https://www.drupal.org/project/file_entity">https://www.drupal.org/project/file_entity</a>:</p><div class="blockquote"><blockquote class="blockquote"><p><span class="emphasis"><em>File entity provides interfaces for managing files. It also extends the core file entity, allowing files to be fieldable, grouped into types, viewed (using display modes) and formatted using field formatters. File entity integrates with a number of modules, exposing files to Views, Entity API, Token and more.</em></span></p></blockquote></div><p>In our case, we need this module to easily edit image properties such as Title text and Alt text. So these properties will <a class="indexterm" id="id391"/>be used in the colorbox popup to display them as captions.</p></div></div>
<div class="section" title="Working with dev versions of modules"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec82"/>Working with dev versions of modules</h1></div></div></div><p>There <a class="indexterm" id="id392"/>are times when you come across a module that introduces some major new features and is fairly stable, but not quite ready for use on a live/production website, and is therefore available only as a dev version. This is a perfect opportunity to provide a valuable contribution to the Drupal community. Just by installing and using a dev version of a module (in your local development environment, of course), you are providing valuable testing for the module maintainers. Of course, you should enter an issue in the project's issue queue if you discover any bugs or would like to request any additional features. Also, using a dev version of a module presents you with the opportunity to take on some custom Drupal development. However, it is important that you remember that a module is released as a dev version for a reason, and it is most likely not stable enough to be deployed on a public-facing site.</p><p>Our use of the File entity module in this chapter is a good example of working with the dev version of a module. One thing to note: Drush will download official and dev module releases. But at this point in time, there is no official port for the File entity module in Drupal, so we will use the unofficial one, which lives on GitHub (<a class="ulink" href="https://github.com/drupal-media/file_entity">https://github.com/drupal-media/file_entity</a>). In the next step, we will be downloading the dev release with GitHub.</p></div>
<div class="section" title="Time for action &#x2013; installing a dev version of the File entity module"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec83"/>Time for action – installing a dev version of the File entity module</h1></div></div></div><p>In Drupal, we <a class="indexterm" id="id393"/>use Drush to download and enable any module/theme, but there is no official port yet for the file entity module in Drupal, so we can use the unofficial one, which lives on GitHub at <a class="ulink" href="https://github.com/drupal-media/file_entity">https://github.com/drupal-media/file_entity</a>:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the Terminal (Mac OS X) or Command Prompt (Windows) application, and go to the root directory of your d8dev site.</li><li class="listitem">Go inside the <code class="literal">modules</code> folder and download the File entity module from GitHub. We use the <code class="literal">git</code> command to download this module: <code class="literal">$ git clone https://github.com/drupal-media/file_entity</code>. Another way is to download a <code class="literal">.zip</code> file from <a class="ulink" href="https://github.com/drupal-media/file_entity">https://github.com/drupal-media/file_entity</a> and extract it in the modules folder:<div class="mediaobject"><img alt="Time for action – installing a dev version of the File entity module" src="graphics/4659_07_01.jpg"/></div></li><li class="listitem">Next, on the <span class="strong"><strong>Extend</strong></span> page (<code class="literal">admin/modules</code>), enable the File entity module.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec59"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>We enabled the<a class="indexterm" id="id394"/> File entity module, and learned how to download and install with GitHub.</p></div></div>
<div class="section" title="A new recipe for our site"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec84"/>A new recipe for our site</h1></div></div></div><p>In this chapter, we are going to create a new recipe: Thai Basil Chicken. If you would like to have more real content to use as an example, and feel free to try the recipe out!</p><div class="mediaobject"><img alt="A new recipe for our site" src="graphics/4659_07_02.jpg"/></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Name</strong></span>: Thai Basil Chicken</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Description</strong></span>: A spicy, flavorful version of one of my favorite Thai dishes</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>RecipeYield</strong></span> : Four servings</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>PrepTime</strong></span>: 25 minutes</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>CookTime</strong></span>: 20 minutes</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Ingredients</strong></span> :<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">One pound boneless chicken breasts</li><li class="listitem" style="list-style-type: disc">Two tablespoons of olive oil</li><li class="listitem" style="list-style-type: disc">Four garlic cloves, minced</li><li class="listitem" style="list-style-type: disc">Three tablespoons of soy sauce</li><li class="listitem" style="list-style-type: disc">Two tablespoons of fish sauce</li><li class="listitem" style="list-style-type: disc">Two large sweet onions, sliced</li><li class="listitem" style="list-style-type: disc">Five cloves of garlic</li><li class="listitem" style="list-style-type: disc">One yellow bell pepper</li><li class="listitem" style="list-style-type: disc">One green bell pepper</li><li class="listitem" style="list-style-type: disc">Four to eight Thai peppers (depending on the level of hotness you want)</li><li class="listitem" style="list-style-type: disc">One-third cup of dark brown sugar dissolved in one cup of hot water</li><li class="listitem" style="list-style-type: disc">One cup of fresh basil leaves</li><li class="listitem" style="list-style-type: disc">Two cups of Jasmin rice</li></ul></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Instructions</strong></span>:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Prepare the Jasmine rice according to the directions.</li><li class="listitem" style="list-style-type: disc">Heat the olive oil in a large frying pan over medium heat for two minutes.</li><li class="listitem" style="list-style-type: disc">Add the chicken to the pan and then pour on soy sauce.</li><li class="listitem" style="list-style-type: disc">Cook the chicken until there is no visible pinkness—approximately 8 to 10 minutes.</li><li class="listitem" style="list-style-type: disc">Reduce heat to medium low.</li><li class="listitem" style="list-style-type: disc">Add the garlic and fish sauce, and simmer for 3 minutes.</li><li class="listitem" style="list-style-type: disc">Next, add the Thai chilies, onion, and bell pepper and stir to combine.</li><li class="listitem" style="list-style-type: disc">Simmer for 2 minutes.</li><li class="listitem" style="list-style-type: disc">Add the brown sugar and water mixture. Stir to mix, and then cover.</li><li class="listitem" style="list-style-type: disc">Simmer for 5 minutes.</li><li class="listitem" style="list-style-type: disc">Uncover, add basil, and stir to combine.</li><li class="listitem" style="list-style-type: disc">Serve over rice.</li></ul></div></li></ul></div></div>
<div class="section" title="Time for action &#x2013; adding a Recipe images field to our Recipe content type"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec85"/>Time for action – adding a Recipe images field to our Recipe content type</h1></div></div></div><p>We will <a class="indexterm" id="id395"/>use the manage fields administrative page to add a Media field to our d8dev Recipe content type:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open up the d8dev site in your favorite browser, click on the <span class="strong"><strong>Structure</strong></span> link in the <span class="strong"><strong>Admin</strong></span> toolbar, and then click on the <span class="strong"><strong>Content types</strong></span> link.</li><li class="listitem">Next, on the <span class="strong"><strong>Content types</strong></span> administrative page, click on the <span class="strong"><strong>Manage fields</strong></span> link for your Recipe content type:<div class="mediaobject"><img alt="Time for action – adding a Recipe images field to our Recipe content type" src="graphics/4659_07_03.jpg"/></div></li><li class="listitem">Now, on <a class="indexterm" id="id396"/>the <span class="strong"><strong>Manage fields</strong></span> administrative page, click on the <span class="strong"><strong>Add field</strong></span> link. On the next screen, select <span class="strong"><strong>Image</strong></span> from the <span class="strong"><strong>Add a new field</strong></span> dropdown and <span class="strong"><strong>Label</strong></span> as <span class="strong"><strong>Recipe images</strong></span>. Click on the <span class="strong"><strong>Save field settings</strong></span> button.</li><li class="listitem">Next, on the <span class="strong"><strong>Field settings</strong></span> page, select <span class="strong"><strong>Unlimited</strong></span> as the allowed number of values. Click on the <span class="strong"><strong>Save field settings</strong></span> button. On the next screen, leave all settings as they are and click on the <span class="strong"><strong>Save settings</strong></span> button.</li><li class="listitem">Next, on the <span class="strong"><strong>Manage form display</strong></span> page, select widget <span class="strong"><strong>Editable file</strong></span> for the <span class="strong"><strong>Recipe images</strong></span> field and click on the <span class="strong"><strong>Save</strong></span> button.</li><li class="listitem">Now, on the <span class="strong"><strong>Manage display</strong></span> page, for the <span class="strong"><strong>Recipe images</strong></span> field, select <span class="strong"><strong>Hidden</strong></span> as the label. Click on the settings icon. Then select <span class="strong"><strong>Medium (220*220)</strong></span> as the image style, and click on the <span class="strong"><strong>Update</strong></span> button. At the bottom, click on the <span class="strong"><strong>Save</strong></span> button:<div class="mediaobject"><img alt="Time for action – adding a Recipe images field to our Recipe content type" src="graphics/4659_07_04.jpg"/></div></li><li class="listitem">Let's add some Recipe images to a recipe. Click on the <span class="strong"><strong>Content</strong></span> link in the menu bar, and then click on <span class="strong"><strong>Add content and Recipe</strong></span>. On the next screen, fill in the title as <code class="literal">Thai Basil Chicken</code> and other fields respectively as mentioned in the preceding recipe details.</li><li class="listitem">Now, scroll down to the new <span class="strong"><strong>Recipe images</strong></span> field that you have added. Click on the <span class="strong"><strong>Add a new file</strong></span> button or drag and drop images that you want to upload. Then click on the <span class="strong"><strong>Save and Publish</strong></span> button:<div class="mediaobject"><img alt="Time for action – adding a Recipe images field to our Recipe content type" src="graphics/4659_07_05.jpg"/></div></li><li class="listitem">Reload <a class="indexterm" id="id397"/>your <span class="strong"><strong>Thai Basil Chicken</strong></span> recipe page, and you should see something similar to the following:<div class="mediaobject"><img alt="Time for action – adding a Recipe images field to our Recipe content type" src="graphics/4659_07_06.jpg"/></div></li><li class="listitem">All the<a class="indexterm" id="id398"/> images are stacked on top of each other. So, we will add the following CSS just under the style for <code class="literal">field--name-field-recipe-images</code> and <code class="literal">field--type-recipe-images</code> in the <code class="literal">/modules/d8dev/styles/d8dev.css</code> file, to lay out the Recipe images in more of a grid:<div class="informalexample"><pre class="programlisting">.node .field--type-recipe-images {
    float: none !important;
}
.field--name-field-recipe-images .field__item {
    display: inline-flex;
    padding: 6px;
}</pre></div></li><li class="listitem">Now we will load this <code class="literal">d8dev.css</code> file to affect this grid style. In Drupal 8, loading a CSS file has a process:<div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Save the CSS to a file.</li><li class="listitem">Define a library, which can contain the CSS file.</li><li class="listitem">Attach the library to a render array in a hook.</li></ol></div></li><li class="listitem">So, we<a class="indexterm" id="id399"/> have already saved a CSS file called <code class="literal">d8dev.css</code> under the <code class="literal">styles</code> folder; now we will define a library. To define one or more (asset) libraries, add a <code class="literal">*.libraries.yml</code> file to your <code class="literal">theme</code> folder. Our module is named <code class="literal">d8dev</code>, and then the filename should be <code class="literal">d8dev.libraries.yml</code>. Each library in the file is an entry detailing CSS, like this:<div class="informalexample"><pre class="programlisting">d8dev:
  version: 1.x
  css:
    theme:
      styles/d8dev.css: {}</pre></div></li><li class="listitem">Now, we define the <code class="literal">hook_page_attachments()</code> function to load the CSS file. Add the following code inside the <code class="literal">d8dev.module</code> file. Use this hook when you want to conditionally add attachments to a page:<div class="informalexample"><pre class="programlisting">/**
 * Implements hook_page_attachments().
 */
function d8dev_page_attachments(array &amp;$attachments) {
   $attachments['#attached']['library'][] = 'd8dev/d8dev'; }</pre></div></li><li class="listitem">Now, we will need to clear the cache for our d8dev site by going to <span class="strong"><strong>Configuration</strong></span>, clicking on the <span class="strong"><strong>Performance</strong></span> link, and then clicking on the <span class="strong"><strong>Clear all caches</strong></span> button. Reload your <span class="strong"><strong>Thai Basil Chicken</strong></span> recipe page, and you should see something similar to the following:<div class="mediaobject"><img alt="Time for action – adding a Recipe images field to our Recipe content type" src="graphics/4659_07_07.jpg"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec60"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>We added and configured a media-based field for our Recipe content type. We updated the d8dev module with custom CSS code to lay out the Recipe images in more of a grid format. And also we looked at how to attach a CSS file through a module.</p></div></div>
<div class="section" title="Creating a custom image style"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec86"/>Creating a custom image style</h1></div></div></div><p>Before <a class="indexterm" id="id400"/>we configure a colorbox feature, we are going to create a custom image style to use when we add them in colorbox content preview settings. Image styles for Drupal 8 are part of the core Image module. The core image module provides three default image styles—thumbnail, medium, and large—as seen in the following Image style configuration page:</p><div class="mediaobject"><img alt="Creating a custom image style" src="graphics/4659_07_08.jpg"/></div><p>Now, we are <a class="indexterm" id="id401"/>going to add a fifth custom image style, an image style that will resize our images somewhere between the 100 x 75 thumbnail style and the 220 x 165 medium style. We will walkthrough the process of creating an image style through the Image style administrative page, and also walkthrough the process of programmatically creating an image style.</p></div>
<div class="section" title="Time for action &#x2013; adding a custom image style through the image style administrative page"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec87"/>Time for action – adding a custom image style through the image style administrative page</h1></div></div></div><p>First, we <a class="indexterm" id="id402"/>will use the Image style administrative page (<code class="literal">admin/config/media/image-styles</code>) to create a custom image style:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the d8dev site in your favorite browser, click on the <span class="strong"><strong>Configuration</strong></span> link in the <span class="strong"><strong>Admin</strong></span> toolbar, and click on the <span class="strong"><strong>Image</strong></span> styles link under the <span class="strong"><strong>Media</strong></span> section.</li><li class="listitem">Once the Image styles administrative page has loaded, click on the <span class="strong"><strong>Add style</strong></span> link.</li><li class="listitem">Next, enter <code class="literal">small</code> for the <span class="strong"><strong>Image style name</strong></span> of your custom image style, and click on the <span class="strong"><strong>Create new style</strong></span> button:<div class="mediaobject"><img alt="Time for action – adding a custom image style through the image style administrative page" src="graphics/4659_07_09.jpg"/></div><p>Now, we will add the one and only effect for our custom image style by selecting <span class="strong"><strong>Scale</strong></span> from the <span class="strong"><strong>EFFECT</strong></span> options and then clicking on the <span class="strong"><strong>Add</strong></span> button.</p></li><li class="listitem">On <a class="indexterm" id="id403"/>the <span class="strong"><strong>Add Scale effect</strong></span> page, enter <code class="literal">160</code> for the width and <code class="literal">120</code> for the height. Leave the <span class="strong"><strong>Allow Upscaling</strong></span> checkbox unchecked, and click on the <span class="strong"><strong>Add effect</strong></span> button:<div class="mediaobject"><img alt="Time for action – adding a custom image style through the image style administrative page" src="graphics/4659_07_10.jpg"/></div></li><li class="listitem">Finally, just click on the <span class="strong"><strong>Update style</strong></span> button on the <span class="strong"><strong>Edit small style</strong></span> administrative page, and we are done. We now have a new custom small image <a class="indexterm" id="id404"/>style that we will be able to use to resize images for our site:<div class="mediaobject"><img alt="Time for action – adding a custom image style through the image style administrative page" src="graphics/4659_07_11.jpg"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec61"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>We learned how easy it is to add a custom image style with the administrative UI. Now, we are going to see how to add a custom image style by writing some code. The advantage of having code-based custom image styles is that it will allow us to utilize a source code repository, such as Git, to manage and deploy our custom image styles between different environments. For example, it would allow us to use Git to promote image styles from our development environment to a live production website. Otherwise, the manual configuration that we just did would have to be repeated for every environment.</p></div></div>
<div class="section" title="Time for action &#x2013; creating a programmatic custom image style"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec88"/>Time for action – creating a programmatic custom image style</h1></div></div></div><p>Now, we will <a class="indexterm" id="id405"/>see how we can add a custom image style with code:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The first thing we need to do is delete the small image style that we just created. So, open your d8dev site in your favorite browser, click on the <span class="strong"><strong>Configuration</strong></span> link in the <span class="strong"><strong>Admin</strong></span> toolbar, and then click on the <span class="strong"><strong>Image styles</strong></span> link under the <span class="strong"><strong>Media</strong></span> section.</li><li class="listitem">Once the <span class="strong"><strong>Image styles</strong></span> administrative page has loaded, click on the <span class="strong"><strong>delete</strong></span> link for the small image style that we just added.</li><li class="listitem">Next, on<a class="indexterm" id="id406"/> the <span class="strong"><strong>Optionally select a style before deleting small</strong></span> page, leave the default value for the <span class="strong"><strong>Replacement style</strong></span> select list as <span class="strong"><strong>No replacement, just delete</strong></span>, and click on the <span class="strong"><strong>Delete</strong></span> button:<div class="mediaobject"><img alt="Time for action – creating a programmatic custom image style" src="graphics/4659_07_12.jpg"/></div></li><li class="listitem">In Drupal 8, image styles have been converted from an array to an object that extends ConfigEntity. All image styles provided by modules need to be defined as YAML configuration files in the <code class="literal">config/install</code> folder of each module.</li><li class="listitem">Suppose our module is located at <code class="literal">modules/d8dev</code>. Create a file called <code class="literal">modules/d8dev/config/install/image.style.small.yml</code> with the following content:<div class="informalexample"><pre class="programlisting">uuid: b97a0bd7-4833-4d4a-ae05-5d4da0503041
langcode: en
status: true
dependencies: {  }
name: small
label: small
effects:
  c76016aa-3c8b-495a-9e31-4923f1e4be54:
    uuid: c76016aa-3c8b-495a-9e31-4923f1e4be54
    id: image_scale
    weight: 1
    data:
      width: 160
      height: 120
      upscale: false</pre></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note16"/>Note</h3><p>We need to use a UUID generator to assign unique IDs to image style effects. <span class="emphasis"><em>Do not copy/paste UUIDs</em></span> from other pieces of code or from other image styles!</p></div></div></li><li class="listitem">The<a class="indexterm" id="id407"/> name of our custom style is "small". Here, the name and the label are same. For each effect that we want to add to our image style, we will specify the effect itself in the place of key followed by the value, which acts as the settings for the effect. In the case of the <span class="strong"><strong>image_scale</strong></span> effect that we are using here, we pass in the <span class="strong"><strong>width</strong></span>, <span class="strong"><strong>height</strong></span>, and <span class="strong"><strong>upscale</strong></span> settings. Finally, the value for the <span class="strong"><strong>weight</strong></span> key allows us to specify the order the effects should be processed in, and although it is not very useful when there is only one effect, it becomes important when there are multiple effects.</li><li class="listitem">Now, we will need to uninstall and install our d8dev module by going to the <span class="strong"><strong>Extend</strong></span> page. On the next screen click on the <span class="strong"><strong>Uninstall</strong></span> tab, check the <span class="strong"><strong>d8dev</strong></span> checkbox and click on the <span class="strong"><strong>Uninstall</strong></span> button. Now, click on the <span class="strong"><strong>List</strong></span> tab, check <span class="strong"><strong>d8dev</strong></span>, and click on the <span class="strong"><strong>Install</strong></span> button. Then, go back to the <span class="strong"><strong>Image styles</strong></span> administrative page and you will see our programmatically created small image style.</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec62"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>We created a custom image style with some custom code. We then configured our Recipe content type to use our custom image style for images added to the Recipe images field.</p></div></div>
<div class="section" title="Integrating the Colorbox and File entity modules"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec89"/>Integrating the Colorbox and File entity modules</h1></div></div></div><p>The <a class="indexterm" id="id408"/>File entity module provides interfaces for managing files. For images, we will be able to edit Title text, Alt text, and Filenames easily. However, the images are taking up quite a bit of room. Let's create a pop-up lightbox gallery and show images in a popup. When someone clicks on an image, a lightbox will pop up and allow the user to cycle through larger versions of all associated images.</p></div>
<div class="section" title="Time for action &#x2013; installing the Colorbox module"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec90"/>Time for action – installing the Colorbox module</h1></div></div></div><p>Before we <a class="indexterm" id="id409"/>can display Recipe images in a Colorbox, we need to download and enable the module:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the Mac OS X Terminal or Windows Command Prompt, and change to the <code class="literal">d8dev</code> directory.</li><li class="listitem">Next, use Drush to download and enable the current dev release of the Colorbox module (<a class="ulink" href="http://drupal.org/project/colorbox">http://drupal.org/project/colorbox</a>):<div class="informalexample"><pre class="programlisting">$ drush dl colorbox-8.x-1.x-dev 

Project colorbox (8.x-1.x-dev) downloaded to /var/www/html/d8dev/modules/colorbox.
[success] 

$ drush en colorbox 

The following extensions will be enabled: colorbox 
Do you really want to continue? (y/n): y 
colorbox was enabled successfully.
[ok]</pre></div></li><li class="listitem">The <a class="indexterm" id="id410"/>Colorbox module depends on the Colorbox jQuery plugin <a class="indexterm" id="id411"/>available at <a class="ulink" href="https://github.com/jackmoore/colorbox">https://github.com/jackmoore/colorbox</a>. The Colorbox module includes a Drush task that will download the required jQuery plugin at the <code class="literal">/libraries</code> directory:<div class="informalexample"><pre class="programlisting">$ drush colorbox-plugin 
Colorbox plugin has been installed in libraries
[success]</pre></div></li><li class="listitem">Next, we will look into the Colorbox display formatter. Click on the <span class="strong"><strong>Structure</strong></span> link in the <span class="strong"><strong>Admin</strong></span> toolbar, then click on the <span class="strong"><strong>Content</strong></span> types link, and finally click on the <span class="strong"><strong>manage</strong></span> display link for your Recipe content type under the <span class="strong"><strong>Operations</strong></span> dropdown:<div class="mediaobject"><img alt="Time for action – installing the Colorbox module" src="graphics/4659_07_13.jpg"/></div></li><li class="listitem">Next, click on the <span class="strong"><strong>FORMAT</strong></span> select list for the <span class="strong"><strong>Recipe images</strong></span> field, and you will see an option for Colorbox, Select as <span class="strong"><strong>Colorbox</strong></span> then you will see the settings change. Then, click on the settings icon:<div class="mediaobject"><img alt="Time for action – installing the Colorbox module" src="graphics/4659_07_14.jpg"/></div></li><li class="listitem">Now, you <a class="indexterm" id="id412"/>will see the settings for Colorbox. Select <span class="strong"><strong>Content image style</strong></span> as <span class="strong"><strong>small</strong></span> and <span class="strong"><strong>Content image style for first image</strong></span> as <span class="strong"><strong>small</strong></span> in the dropdown, and use the default settings for other options. Click on the <span class="strong"><strong>Update</strong></span> button and next on the <span class="strong"><strong>Save</strong></span> button at the bottom:<div class="mediaobject"><img alt="Time for action – installing the Colorbox module" src="graphics/4659_07_15.jpg"/></div></li><li class="listitem">Reload our <span class="strong"><strong>Thai Basil Chicken</strong></span> recipe page, and you should see something similar to the following (with the new image style, small):<div class="mediaobject"><img alt="Time for action – installing the Colorbox module" src="graphics/4659_07_16.jpg"/></div></li><li class="listitem">Now, click <a class="indexterm" id="id413"/>on any image and then you will see the image loaded in the colorbox popup:<div class="mediaobject"><img alt="Time for action – installing the Colorbox module" src="graphics/4659_07_17.jpg"/></div></li><li class="listitem">We have learned more about images for colorbox, but colorbox also supports videos. Another way to add some spice to our site is by adding videos. So there are several modules available to work with colorbox for videos. The Video Embed Field module creates a simple field type that allows you to embed videos from YouTube and Vimeo and show their thumbnail previews simply by entering the video's URL. So you can try this module to add some pizzazz to your site!</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec63"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>We installed the Colorbox module and enabled it for the Recipe images field on our custom Recipe content type. Now, we can easily add images to our d8dev content with the Colorbox pop-up feature.</p></div></div>
<div class="section" title="Working with Drupal issue queues"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec91"/>Working with Drupal issue queues</h1></div></div></div><p>Drupal<a class="indexterm" id="id414"/> has its own issue queue for working with a team of developers around the world. If you need help for a specific project, core, module, or a theme related, you should go to the issue queue, where the maintainers, users, and followers of the module/theme communicate.</p><p>The issue page provides a filter option, where you can search for specific issues based on Project, Assigned, Submitted by, Followers, Status, Priority, Category, and so on.</p><p>We can find issues<a class="indexterm" id="id415"/> at <a class="ulink" href="https://www.drupal.org/project/issues/colorbox">https://www.drupal.org/project/issues/colorbox</a>. Here, replace colorbox with the specific module name. For more information, see <a class="ulink" href="https://www.drupal.org/issue-queue">https://www.drupal.org/issue-queue</a>.</p><p>In our case, we have one issue with the colorbox module. Captions are working for the <span class="strong"><strong>Automatic</strong></span> and <span class="strong"><strong>Content title</strong></span> properties, but are not working for the <span class="strong"><strong>Alt text</strong></span> and <span class="strong"><strong>Title text</strong></span> properties. To check this issue, go to <span class="strong"><strong>Structure</strong></span> | <span class="strong"><strong>Content types</strong></span> and click on <span class="strong"><strong>Manage display</strong></span>. On the next screen, click on the settings icon for the Recipe images field. Now select the <span class="strong"><strong>Caption</strong></span> option as <span class="strong"><strong>Title text</strong></span> or <span class="strong"><strong>Alt text</strong></span> and click on the <span class="strong"><strong>Update</strong></span> button. Finally, click on the <span class="strong"><strong>Save</strong></span> button. Reload the <span class="strong"><strong>Thai Basil Chicken</strong></span> recipe page, and click on any image. Then it opens in popup, but we cannot see captions for this.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note17"/>Note</h3><p>Make sure you have the Title text and Alt text properties updated for Recipe images field for the Thai Basil Chicken recipe.</p></div></div></div>
<div class="section" title="Time for action &#x2013; creating an issue for the Colorbox module"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec92"/>Time for action – creating an issue for the Colorbox module</h1></div></div></div><p>Now, before<a class="indexterm" id="id416"/> we go and try to figure out how to fix this functionality for the Colorbox module, let's create an issue:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">On <a class="ulink" href="https://www.drupal.org/project/issues/colorbox">https://www.drupal.org/project/issues/colorbox</a>, click on the <span class="strong"><strong>Create a new issue</strong></span> link:<div class="mediaobject"><img alt="Time for action – creating an issue for the Colorbox module" src="graphics/4659_07_18.jpg"/></div></li><li class="listitem">On the <a class="indexterm" id="id417"/>next screen we will see a form. We will fill in all the required fields: <span class="strong"><strong>Title</strong></span>, <span class="strong"><strong>Category</strong></span> as <code class="literal">Bug report</code>, <span class="strong"><strong>Version</strong></span> as <code class="literal">8.x-1.x-dev</code>, <span class="strong"><strong>Component</strong></span> as <code class="literal">Code</code>, and the <span class="strong"><strong>Issue summary</strong></span> field. Once I submitted my form, an issue was created at <a class="ulink" href="https://www.drupal.org/node/2645160">https://www.drupal.org/node/2645160</a>. You should see an issue on Drupal (<a class="ulink" href="https://www.drupal.org/">https://www.drupal.org/</a>) like this:<div class="mediaobject"><img alt="Time for action – creating an issue for the Colorbox module" src="graphics/4659_07_19.jpg"/></div></li><li class="listitem">Next, the <a class="indexterm" id="id418"/>Maintainers of the colorbox module will look into this issue and reply accordingly. Actually, <code class="literal">@frjo</code> replied saying "I have never used that module but if someone who does sends in a patch I will take a look at it." He is a contributor to this module, so we will wait for some time and will see if someone can fix this issue by giving a patch or replying with useful comments. In case someone gives the patch, then we have to apply that to the colorbox module. This information is available on Drupal at <a class="ulink" href="https://www.drupal.org/patch/apply">https://www.drupal.org/patch/apply</a> .</li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec64"/><span class="emphasis"><em>What just happened?</em></span></h2></div></div></div><p>We understood and created an issue in the Colorbox module's issue queue list. We also looked into what the required fields are and how to fill them to create an issue in the Drupal module queue list form.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec93"/>Summary</h1></div></div></div><p>In this chapter, we looked at a way to use our d8dev site with multimedia, creating image styles using some custom code, and learned some new ways of interacting with the Drupal developer community. We also worked with the Colorbox module to add images to our d8dev content with the Colorbox pop-up feature. Lastly, we looked into the custom module to work with custom CSS files.</p><p>In the next chapter, we will revisit the Colorbox module with some enhancements, and add some features to our d8dev site that will enable visitors to our site to provide feedback and interact with our site's content.</p></div></body></html>