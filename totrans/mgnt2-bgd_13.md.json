["```php\n<?php\n\\Magento\\Framework\\Component\\ComponentRegistrar::register(\n    \\Magento\\Framework\\Component\\ComponentRegistrar::MODULE,\n    'Foggyline_Helpdesk',\n    __DIR__\n);\n```", "```php\n<?xml version=\"1.0\"?>\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Module /etc/module.xsd\">\n    <module name=\"Foggyline_Helpdesk\" setup_version=\"1.0.0\">\n        <sequence>\n            <module name=\"Magento_Store\"/>\n            <module name=\"Magento_Customer\"/>\n        </sequence>\n    </module>\n</config>\n```", "```php\nphp bin/magento module:enable Foggyline_Helpdesk\n```", "```php\nPlease upgrade your database: Run \"bin/magento setup:upgrade\" from the Magento root directory.\n```", "```php\nphp bin/magento setup:upgrade\n```", "```php\n<?xml version=\"1.0\"?>\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:module:Magento_Store: etc/config.xsd\">\n    <default>\n        <foggyline_helpdesk>\n            <email_template>\n                <customer>\n                    foggyline_helpdesk_email_template_customer\n                </customer>\n                <store_owner>\n                    foggyline_helpdesk_email_template_store_owner\n                </store_owner>\n            </email_template>\n        </foggyline_helpdesk>\n    </default>\n</config>\n```", "```php\n<?xml version=\"1.0\"?>\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:module: Magento_Email:etc/email_templates.xsd\">\n    <template id=\"foggyline_helpdesk_email_template_customer\" label=\"Foggyline Helpdesk - Customer Email\"\n              file=\"store_owner_to_customer.html\" type=\"html\" module=\"Foggyline_Helpdesk\" area=\"frontend\"/>\n    <template id=\"foggyline_helpdesk_email_template_store_owner\" label=\"Foggyline Helpdesk - Store Owner Email\"\n              file=\"customer_to_store_owner.html\" type=\"html\" module=\"Foggyline_Helpdesk\" area=\"frontend\"/>\n</config>\n```", "```php\n<!--@subject New Ticket Created @-->\n<h1>Ticket #{{var ticket.ticket_id}} created</h1>\n\n<ul>\n    <li>Id: {{var ticket.ticket_id}}</li>\n    <li>Title: {{var ticket.title}}</li>\n    <li>Created_at: {{var ticket.created_at}}</li>\n    <li>Severity: {{var ticket.severity}}</li>\n</ul>\n```", "```php\n<!--@subject Ticket Updated @-->\n<h1>Ticket #{{var ticket.ticket_id}} updated</h1>\n\n<p>Hi {{var customer_name}}.</p>\n\n<p>Status of your ticket #{{var ticket.ticket_id}} has been updated</p>\n\n<ul>\n    <li>Title: {{var ticket.title}}</li>\n    <li>Created_at: {{var ticket.created_at}}</li>\n    <li>Severity: {{var ticket.severity}}</li>\n</ul>\n```", "```php\n<?xml version=\"1.0\"?>\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:module: Magento_Config:etc/system_file.xsd\">\n    <system>\n        <tab id=\"foggyline\" translate=\"label\" sortOrder=\"200\">\n            <label>Foggyline</label>\n        </tab>\n        <section id=\"foggyline_helpdesk\" translate=\"label\" type=\"text\" sortOrder=\"110\" showInDefault=\"1\"\n                 showInWebsite=\"1\" showInStore=\"1\">\n            <label>Helpdesk</label>\n            <tab>foggyline</tab>\n            <resource>Foggyline_Helpdesk::helpdesk</resource>\n            <group id=\"email_template\" translate=\"label\" type=\"text\" sortOrder=\"1\" showInDefault=\"1\" showInWebsite=\"1\" showInStore=\"1\">\n                <label>Email Template Options</label>\n                <field id=\"customer\" translate=\"label\" type=\"select\" sortOrder=\"1\" showInDefault=\"1\" showInWebsite=\"1\" showInStore=\"1\">\n                    <label>\n                        Store Owner to Customer Email Template\n                    </label>\n                    <source_model>\n                        Magento\\Config\\Model\\Config\\Source\\ Email\\Template\n                    </source_model>\n                </field>\n                <field id=\"store_owner\" translate=\"label\" type=\"select\" sortOrder=\"1\" showInDefault=\"1\" showInWebsite=\"1\" showInStore=\"1\">\n                    <label>\n                        Customer to Store Owner Email Template\n                    </label>\n                    <source_model>\n                        Magento\\Config\\Model\\Config\\Source\\ Email\\Template\n                    </source_model>\n                </field>\n            </group>\n        </section>\n    </system>\n</config>\n```", "```php\n<?xml version=\"1.0\"?>\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Acl/ etc/acl.xsd\">\n    <acl>\n        <resources>\n            <resource id=\"Magento_Backend::admin\">\n                <resource id=\"Magento_Customer::customer\">\n                    <resource id=\"Foggyline_Helpdesk:: ticket_manage\" title=\"Manage Helpdesk Tickets\" />\n                </resource>\n                <resource id=\"Magento_Backend::stores\">\n                    <resource id=\"Magento_Backend:: stores_settings\">\n                        <resource id=\"Magento_Config::config\">\n                            <resource id= \"Foggyline_Helpdesk::helpdesk\" title=\"Helpdesk Section\" />\n                        </resource>\n                    </resource>\n                </resource>\n            </resource>\n        </resources>\n    </acl>\n</config>\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Setup;\n\nuse Magento\\Framework\\Setup\\InstallSchemaInterface;\nuse Magento\\Framework\\Setup\\ModuleContextInterface;\nuse Magento\\Framework\\Setup\\SchemaSetupInterface;\n\n/**\n * @codeCoverageIgnore\n */\nclass InstallSchema implements InstallSchemaInterface\n{\n    public function install(SchemaSetupInterface $setup, ModuleContextInterface $context)\n    {\n        $installer = $setup;\n\n        $installer->startSetup();\n\n        $table = $installer->getConnection()\n            ->newTable($installer-> getTable('foggyline_helpdesk_ticket'))\n            /* ->addColumn ...  */\n            /* ->addIndex ...  */\n            /* ->addForeignKey ...  */\n            ->setComment('Foggyline Helpdesk Ticket');\n        $installer->getConnection()->createTable($table);\n\n        $installer->endSetup();\n    }\n}\n```", "```php\n->addColumn(\n    'ticket_id',\n    \\Magento\\Framework\\DB\\Ddl\\Table::TYPE_INTEGER,\n    null,\n    ['identity' => true, 'unsigned' => true, 'nullable' => false, 'primary' => true],\n    'Ticket Id'\n)\n->addColumn(\n    'customer_id',\n    \\Magento\\Framework\\DB\\Ddl\\Table::TYPE_INTEGER,\n    null,\n    ['unsigned' => true],\n    'Customer Id'\n)\n->addColumn(\n    'title',\n    \\Magento\\Framework\\DB\\Ddl\\Table::TYPE_TEXT,\n    null,\n    ['nullable' => false],\n    'Title'\n)\n->addColumn(\n    'severity',\n    \\Magento\\Framework\\DB\\Ddl\\Table::TYPE_SMALLINT,\n    null,\n    ['nullable' => false],\n    'Severity'\n)\n->addColumn(\n    'created_at',\n    \\Magento\\Framework\\DB\\Ddl\\Table::TYPE_TIMESTAMP,\n    null,\n    ['nullable' => false],\n    'Created At'\n)\n->addColumn(\n    'status',\n    \\Magento\\Framework\\DB\\Ddl\\Table::TYPE_SMALLINT,\n    null,\n    ['nullable' => false],\n    'Status'\n)\n->addIndex(\n    $installer->getIdxName('foggyline_helpdesk_ticket', ['customer_id']),\n    ['customer_id']\n)\n->addForeignKey(\n    $installer->getFkName('foggyline_helpdesk_ticket', 'customer_id', 'customer_entity', 'entity_id'),\n    'customer_id',\n    $installer->getTable('customer_entity'),\n    'entity_id',\n    \\Magento\\Framework\\DB\\Ddl\\Table::ACTION_SET_NULL\n)\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Model;\n\nclass Ticket extends \\Magento\\Framework\\Model\\AbstractModel\n{\n    const STATUS_OPENED = 1;\n    const STATUS_CLOSED = 2;\n\n    const SEVERITY_LOW = 1;\n    const SEVERITY_MEDIUM = 2;\n    const SEVERITY_HIGH = 3;\n\n    protected static $statusesOptions = [\n        self::STATUS_OPENED => 'Opened',\n        self::STATUS_CLOSED => 'Closed',\n    ];\n\n    protected static $severitiesOptions = [\n        self::SEVERITY_LOW => 'Low',\n        self::SEVERITY_MEDIUM => 'Medium',\n        self::SEVERITY_HIGH => 'High',\n    ];\n\n    /**\n     * Initialize resource model\n     * @return void\n     */\n    protected function _construct()\n    {\n        $this->_init('Foggyline\\Helpdesk\\Model\\ ResourceModel\\Ticket');\n    }\n\n    public static function getSeveritiesOptionArray()\n    {\n        return self::$severitiesOptions;\n    }\n\n    public function getStatusAsLabel()\n    {\n        return self::$statusesOptions[$this->getStatus()];\n    }\n\n    public function getSeverityAsLabel()\n    {\n        return self::$severitiesOptions[$this->getSeverity()];\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Model\\ResourceModel;\n\nclass Ticket extends \\Magento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb\n{\n    /**\n     * Initialize resource model\n     * Get table name from config\n     *\n     * @return void\n     */\n    protected function _construct()\n    {\n        $this->_init('foggyline_helpdesk_ticket', 'ticket_id');\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Model\\ResourceModel\\Ticket;\n\nclass Collection extends \\Magento\\Framework\\Model\\ ResourceModel\\Db\\Collection\\AbstractCollection\n{\n    /**\n     * Constructor\n     * Configures collection\n     *\n     * @return void\n     */\n    protected function _construct()\n    {\n        $this->_init('Foggyline\\Helpdesk\\Model\\Ticket', 'Foggyline\\Helpdesk\\Model\\ResourceModel\\Ticket');\n    }\n}\n```", "```php\n<?xml version=\"1.0\"?>\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:App/ etc/routes.xsd\">\n    <router id=\"standard\">\n        <route id=\"foggyline_helpdesk\" frontName=\"foggyline_helpdesk\">\n            <module name=\"Foggyline_Helpdesk\"/>\n        </route>\n    </router>\n</config>\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Controller;\n\nabstract class Ticket extends \\Magento\\Framework\\App\\Action\\Action\n{\n    protected $customerSession;\n\n    public function __construct(\n        \\Magento\\Framework\\App\\Action\\Context $context,\n        \\Magento\\Customer\\Model\\Session $customerSession\n    )\n    {\n        $this->customerSession = $customerSession;\n        parent::__construct($context);\n    }\n\n    public function dispatch(\\Magento\\Framework\\App \\RequestInterface $request)\n    {\n        if (!$this->customerSession->authenticate()) {\n            $this->_actionFlag->set('', 'no-dispatch', true);\n            if (!$this->customerSession->getBeforeUrl()) {\n                $this->customerSession->setBeforeUrl($this-> _redirect->getRefererUrl());\n            }\n        }\n        return parent::dispatch($request);\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Controller\\Ticket;\n\nclass Index extends \\Foggyline\\Helpdesk\\Controller\\Ticket\n{\n    public function execute()\n    {\n        $resultPage = $this->resultFactory->create(\\Magento \\Framework\\Controller\\ResultFactory::TYPE_PAGE);\n        return $resultPage;\n    }\n}\n```", "```php\n<?xml version=\"1.0\"?>\n\n<page  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:View/Layout /etc/page_configuration.xsd\">\n    <update handle=\"customer_account\"/>\n    <body>\n        <referenceContainer name=\"content\">\n            <block class=\"Foggyline\\Helpdesk\\Block\\Ticket\\Index\" name=\"foggyline.helpdesk.ticket.index\" template= \"Foggyline_Helpdesk::ticket/index.phtml\" cacheable=\"false\"/>\n        </referenceContainer>\n    </body>\n</page>\n```", "```php\n<?xml version=\"1.0\"?>\n\n<page  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:View/ Layout/etc/page_configuration.xsd\">\n    <head>\n        <title>Helpdesk Tickets</title>\n    </head>\n    <body>\n        <referenceBlock name=\"customer_account_navigation\">\n            <block class=\"Magento\\Framework\\View\\Element\\Html \\Link\\Current\" name=\"foggyline-helpdesk-ticket\">\n                <arguments>\n                    <argument name=\"path\" xsi:type=\"string\"> foggyline_helpdesk/ticket/index </argument>\n                    <argument name=\"label\" xsi:type=\"string\"> Helpdesk Tickets </argument>\n                </arguments>\n            </block>\n        </referenceBlock>\n    </body>\n</page>\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Block\\Ticket;\n\nclass Index extends \\Magento\\Framework\\View\\Element\\Template\n{\n    /**\n     * @var \\Magento\\Framework\\Stdlib\\DateTime\n     */\n    protected $dateTime;\n\n    /**\n     * @var \\Magento\\Customer\\Model\\Session\n     */\n    protected $customerSession;\n\n    /**\n     * @var \\Foggyline\\Helpdesk\\Model\\TicketFactory\n     */\n    protected $ticketFactory;\n\n    /**\n     * @param \\Magento\\Framework\\View\\Element\\Template\\Context $context\n     * @param array $data\n     */\n    public function __construct(\n        \\Magento\\Framework\\View\\Element\\Template\\Context $context,\n        \\Magento\\Framework\\Stdlib\\DateTime $dateTime,\n        \\Magento\\Customer\\Model\\Session $customerSession,\n        \\Foggyline\\Helpdesk\\Model\\TicketFactory $ticketFactory,\n        array $data = []\n    )\n    {\n        $this->dateTime = $dateTime;\n        $this->customerSession = $customerSession;\n        $this->ticketFactory = $ticketFactory;\n        parent::__construct($context, $data);\n    }\n\n    /**\n     * @return \\Foggyline\\Helpdesk\\Model\\ResourceModel \\Ticket\\Collection\n     */\n    public function getTickets()\n    {\n        return $this->ticketFactory\n            ->create()\n            ->getCollection()\n            ->addFieldToFilter('customer_id', $this-> customerSession->getCustomerId());\n    }\n\n    public function getSeverities()\n    {\n        return \\Foggyline\\Helpdesk\\Model\\ Ticket::getSeveritiesOptionArray();\n    }\n}\n```", "```php\n<?php $tickets = $block->getTickets() ?>\n\n<form\n    id=\"form-validate\"\n    action=\"<?php echo $block-> getUrl('foggyline_helpdesk/ticket/save') ?>\"\n    method=\"post\">\n    <?php echo $block->getBlockHtml('formkey') ?>\n\n    <div class=\"field title required\">\n        <label class=\"label\" for=\"title\"><span> <?php echo __('Title') ?></span></label>\n\n        <div class=\"control\">\n            <input\n                id=\"title\"\n                type=\"text\"\n                name=\"title\"\n                data-validate=\"{required:true}\"\n                value=\"\"\n                placeholder=\"<?php echo __('Something descriptive') ?>\"/>\n        </div>\n    </div>\n    <div class=\"field severity\">\n        <label class=\"label\" for=\"severity\"><span><?php echo __('Severity') ?></span></label>\n\n        <div class=\"control\">\n            <select name=\"severity\">\n                <?php foreach ($block->getSeverities() as $value => $name): ?>\n                    <option value=\"<?php echo $value ?>\"><?php echo $this->escapeHtml($name) ?></option>\n                <?php endforeach; ?>\n            </select>\n        </div>\n    </div>\n\n    <button type=\"submit\" class=\"action save primary\">\n        <span><?php echo __('Submit Ticket') ?></span>\n    </button>\n</form>\n\n<script>\n    require([\n        'jquery',\n        'mage/mage'\n    ], function ($) {\n        var dataForm = $('#form-validate');\n        dataForm.mage('validation', {});\n    });\n</script>\n\n<?php if ($tickets->count()): ?>\n    <table class=\"data-grid\">\n        <?php foreach ($tickets as $ticket): ?>\n            <tr>\n                <td><?php echo $ticket->getId() ?></td>\n                <td><?php echo $block->escapeHtml($ticket-> getTitle()) ?></td>\n                <td><?php echo $ticket->getCreatedAt() ?></td>\n                <td><?php echo $ticket->getSeverityAsLabel() ?> </td>\n                <td><?php echo $ticket->getStatusAsLabel() ?></td>\n            </tr>\n        <?php endforeach; ?>\n    </table>\n<?php endif; ?>\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Controller\\Ticket;\n\nclass Save extends \\Foggyline\\Helpdesk\\Controller\\Ticket\n{\n    protected $transportBuilder;\n    protected $inlineTranslation;\n    protected $scopeConfig;\n    protected $storeManager;\n    protected $formKeyValidator;\n    protected $dateTime;\n    protected $ticketFactory;\n\n    public function __construct(\n        \\Magento\\Framework\\App\\Action\\Context $context,\n        \\Magento\\Customer\\Model\\Session $customerSession,\n        \\Magento\\Framework\\Mail\\Template\\TransportBuilder $transportBuilder,\n        \\Magento\\Framework\\Translate\\Inline\\StateInterface $inlineTranslation,\n        \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig,\n        \\Magento\\Store\\Model\\StoreManagerInterface $storeManager,\n        \\Magento\\Framework\\Data\\Form\\FormKey\\Validator $formKeyValidator,\n        \\Magento\\Framework\\Stdlib\\DateTime $dateTime,\n        \\Foggyline\\Helpdesk\\Model\\TicketFactory $ticketFactory\n    )\n    {\n        $this->transportBuilder = $transportBuilder;\n        $this->inlineTranslation = $inlineTranslation;\n        $this->scopeConfig = $scopeConfig;\n        $this->storeManager = $storeManager;\n        $this->formKeyValidator = $formKeyValidator;\n        $this->dateTime = $dateTime;\n        $this->ticketFactory = $ticketFactory;\n        $this->messageManager = $context->getMessageManager();\n        parent::__construct($context, $customerSession);\n    }\n\n    public function execute()\n    {\n        $resultRedirect = $this->resultRedirectFactory->create();\n\n        if (!$this->formKeyValidator->validate($this-> getRequest())) {\n            return $resultRedirect->setRefererUrl();\n        }\n\n        $title = $this->getRequest()->getParam('title');\n        $severity = $this->getRequest()->getParam('severity');\n\n        try {\n            /* Save ticket */\n            $ticket = $this->ticketFactory->create();\n            $ticket->setCustomerId($this->customerSession-> getCustomerId());\n            $ticket->setTitle($title);\n            $ticket->setSeverity($severity);\n            $ticket->setCreatedAt($this->dateTime-> formatDate(true));\n            $ticket->setStatus(\\Foggyline\\Helpdesk\\Model\\ Ticket::STATUS_OPENED);\n            $ticket->save();\n\n            $customer = $this->customerSession->getCustomerData();\n\n            /* Send email to store owner */\n            $storeScope = \\Magento\\Store\\Model\\ScopeInterface::SCOPE_STORE;\n            $transport = $this->transportBuilder\n                ->setTemplateIdentifier($this->scopeConfig-> getValue('foggyline_helpdesk/email_template/ store_owner', $storeScope))\n                ->setTemplateOptions(\n                    [\n                        'area' => \\Magento\\Framework\\App\\ Area::AREA_FRONTEND,\n                        'store' => $this->storeManager-> getStore()->getId(),\n                    ]\n                )\n                ->setTemplateVars(['ticket' => $ticket])\n                ->setFrom([\n                    'name' => $customer->getFirstname() . ' ' . $customer->getLastname(),\n                    'email' => $customer->getEmail()\n                ])\n                ->addTo($this->scopeConfig->getValue( 'trans_email/ident_general/email', $storeScope))\n                ->getTransport();\n\n            $transport->sendMessage();\n            $this->inlineTranslation->resume();\n\n            $this->messageManager->addSuccess(__('Ticket successfully created.'));\n        } catch (Exception $e) {\n            $this->messageManager->addError(__('Error occurred during ticket creation.'));\n        }\n\n        return $resultRedirect->setRefererUrl();\n    }\n}\n```", "```php\n<resource id=\"Magento_Customer::customer\">\n    <resource id=\"Foggyline_Helpdesk::ticket_manage\" title=\"Manage Helpdesk Tickets\"/>\n</resource>\n```", "```php\n<?xml version=\"1.0\"?>\n\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:module: Magento_Backend:etc/menu.xsd\">\n    <menu>\n        <add id=\"Foggyline_Helpdesk::ticket_manage\" title=\"Helpdesk Tickets\" module=\"Foggyline_Helpdesk\"\n             parent=\"Magento_Customer::customer\" action=\"foggyline_helpdesk/ticket/index\"\n             resource=\"Foggyline_Helpdesk::ticket_manage\"/>\n    </menu>\n</config>\n```", "```php\n<?xml version=\"1.0\"?>\n\n<config  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:App/etc /routes.xsd\">\n    <router id=\"admin\">\n        <route id=\"foggyline_helpdesk\" frontName=\"foggyline_helpdesk\">\n            <module name=\"Foggyline_Helpdesk\"/>\n        </route>\n    </router>\n</config>\n```", "```php\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<page  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:View/Layout /etc/page_configuration.xsd\">\n    <update handle=\"formkey\"/>\n    <update handle=\"foggyline_helpdesk_ticket_grid_block\"/>\n    <body>\n        <referenceContainer name=\"content\">\n            <block class=\"Foggyline\\Helpdesk\\Block \\Adminhtml\\Ticket\" name=\"admin.block.helpdesk.ticket.grid.container\">\n        </block>\n        </referenceContainer>\n    </body>\n</page>\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Block\\Adminhtml;\n\nclass Ticket extends \\Magento\\Backend\\Block\\Widget\\Grid\\Container\n{\n    protected function _construct()\n    {\n        $this->_controller = 'adminhtml';\n        $this->_blockGroup = 'Foggyline_Helpdesk';\n        $this->_headerText = __('Tickets');\n\n        parent::_construct();\n\n        $this->removeButton('add');\n    }\n}\n```", "```php\n<?xml version=\"1.0\"?>\n\n<layout  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:View/Layout /etc/layout_generic.xsd\">\n    <update handle=\"formkey\"/>\n    <update handle=\"foggyline_helpdesk_ticket_grid_block\"/>\n    <container name=\"root\">\n        <block class=\"Magento\\Backend\\Block\\Widget\\Grid\\Container\" name=\"admin.block.helpdesk.ticket.grid.container\" template=\"Magento_Backend::widget/grid/container /empty.phtml\"/>\n    </container>\n</layout>\n```", "```php\nprotected $_template = 'Magento_Backend::widget/grid/container.phtml';\n```", "```php\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<page  xsi:noNamespaceSchemaLocation=\"urn:magento:framework:View/Layout /etc/page_configuration.xsd\">\n    <body>\n        <referenceBlock name= \"admin.block.helpdesk.ticket.grid.container\">\n            <block class=\"Magento\\Backend\\Block\\Widget\\Grid\" name=\"admin.block.helpdesk.ticket.grid\" as=\"grid\">\n                <arguments>\n                    <argument name=\"id\" xsi:type=\"string\"> ticketGrid</argument>\n                    <argument name=\"dataSource\" xsi:type=\"object\"> Foggyline\\Helpdesk\\Model\\ResourceModel \\Ticket\\Collection\n                    </argument>\n                    <argument name=\"default_sort\" xsi:type=\"string\">ticket_id</argument>\n                    <argument name=\"default_dir\" xsi:type=\"string\">desc</argument>\n                    <argument name=\"save_parameters_in_session\" xsi:type=\"boolean\">true</argument>\n                    <argument name=\"use_ajax\" xsi:type=\"boolean\">true</argument>\n                </arguments>\n                <block class=\"Magento\\Backend\\Block \\Widget\\Grid\\ColumnSet\" name= \"admin.block.helpdesk.ticket.grid.columnSet\" as=\"grid.columnSet\">\n                    <!-- Column definitions here -->\n                </block>\n            </block>\n        </referenceBlock>\n    </body>\n</page>\n```", "```php\n<block class=\"Magento\\Backend\\Block\\Widget\\Grid\\Column\" as=\"ticket_id\">\n    <arguments>\n        <argument name=\"header\" xsi:type=\"string\" translate=\"true\">ID</argument>\n        <argument name=\"type\" xsi:type=\"string\">number</argument>\n        <argument name=\"id\" xsi:type=\"string\">ticket_id</argument>\n        <argument name=\"index\" xsi:type=\"string\">ticket_id</argument>\n    </arguments>\n</block>\n<block class=\"Magento\\Backend\\Block\\Widget\\Grid\\Column\" as=\"title\">\n    <arguments>\n        <argument name=\"header\" xsi:type=\"string\" translate=\"true\">Title</argument>\n        <argument name=\"type\" xsi:type=\"string\">string</argument>\n        <argument name=\"id\" xsi:type=\"string\">title</argument>\n        <argument name=\"index\" xsi:type=\"string\">title</argument>\n    </arguments>\n</block>\n<block class=\"Magento\\Backend\\Block\\Widget\\Grid\\Column\" |  as=\"severity\">\n    <arguments>\n        <argument name=\"header\" xsi:type=\"string\" translate=\"true\">Severity</argument>\n        <argument name=\"index\" xsi:type=\"string\">severity</argument>\n        <argument name=\"type\" xsi:type=\"string\">options</argument>\n        <argument name=\"options\" xsi:type=\"options\" model=\"Foggyline\\Helpdesk\\Model\\Ticket\\Grid\\Severity\"/>\n        <argument name=\"renderer\" xsi:type=\"string\"> Foggyline\\Helpdesk\\Block\\Adminhtml\\Ticket\\Grid\\Renderer \\Severity\n        </argument>\n        <argument name=\"header_css_class\" xsi:type=\"string\"> col-form_id</argument>\n        <argument name=\"column_css_class\" xsi:type=\"string\"> col-form_id</argument>\n    </arguments>\n</block>\n<block class=\"Magento\\Backend\\Block\\Widget\\Grid\\Column\" as=\"status\">\n    <arguments>\n        <argument name=\"header\" xsi:type=\"string\" translate=\"true\">Status</argument>\n        <argument name=\"index\" xsi:type=\"string\">status</argument>\n        <argument name=\"type\" xsi:type=\"string\">options</argument>\n        <argument name=\"options\" xsi:type=\"options\"\n                  model=\"Foggyline\\Helpdesk\\Model\\Ticket \\Grid\\Status\"/>\n        <argument name=\"renderer\" xsi:type=\"string\"> Foggyline\\Helpdesk\\Block\\Adminhtml\\Ticket\\Grid \\Renderer\\Status\n        </argument>\n        <argument name=\"header_css_class\" xsi:type=\"string\"> col-form_id</argument>\n        <argument name=\"column_css_class\" xsi:type=\"string\"> col-form_id</argument>\n    </arguments>\n</block>\n<block class=\"Magento\\Backend\\Block\\Widget\\Grid\\Column\" as=\"action\">\n    <arguments>\n        <argument name=\"id\" xsi:type=\"string\">action</argument>\n        <argument name=\"header\" xsi:type=\"string\" translate=\"true\">Action</argument>\n        <argument name=\"type\" xsi:type=\"string\">action</argument>\n        <argument name=\"getter\" xsi:type=\"string\">getId</argument>\n        <argument name=\"filter\" xsi:type=\"boolean\">false</argument>\n        <argument name=\"sortable\" xsi:type=\"boolean\">false</argument>\n        <argument name=\"actions\" xsi:type=\"array\">\n            <item name=\"view_action\" xsi:type=\"array\">\n                <item name=\"caption\" xsi:type=\"string\" translate=\"true\">Close</item>\n                <item name=\"url\" xsi:type=\"array\">\n                    <item name=\"base\" xsi:type=\"string\">*/*/close</item>\n                </item>\n                <item name=\"field\" xsi:type=\"string\">id</item>\n            </item>\n        </argument>\n        <argument name=\"header_css_class\" xsi:type=\"string\"> col-actions</argument>\n        <argument name=\"column_css_class\" xsi:type=\"string\"> col-actions</argument>\n    </arguments>\n</block>\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Block\\Adminhtml\\Ticket\\Grid\\Renderer;\n\nclass Severity extends \\Magento\\Backend\\Block\\Widget\\Grid \\Column\\Renderer\\AbstractRenderer\n{\n    protected $ticketFactory;\n\n    public function __construct(\n        \\Magento\\Backend\\Block\\Context $context,\n        \\Foggyline\\Helpdesk\\Model\\TicketFactory $ticketFactory,\n        array $data = []\n    )\n    {\n        parent::__construct($context, $data);\n        $this->ticketFactory = $ticketFactory;\n    }\n\n    public function render(\\Magento\\Framework\\DataObject $row)\n    {\n        $ticket = $this->ticketFactory->create()->load($row-> getId());\n\n        if ($ticket && $ticket->getId()) {\n            return $ticket->getSeverityAsLabel();\n        }\n\n        return '';\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Block\\Adminhtml\\Ticket\\Grid\\Renderer;\n\nclass Status extends \\Magento\\Backend\\Block\\Widget\\Grid\\Column \\Renderer\\AbstractRenderer\n{\n    protected $ticketFactory;\n\n    public function __construct(\n        \\Magento\\Backend\\Block\\Context $context,\n        \\Foggyline\\Helpdesk\\Model\\TicketFactory $ticketFactory,\n        array $data = []\n    )\n    {\n        parent::__construct($context, $data);\n        $this->ticketFactory = $ticketFactory;\n    }\n\n    public function render(\\Magento\\Framework\\DataObject $row)\n    {\n        $ticket = $this->ticketFactory->create()->load($row-> getId());\n\n        if ($ticket && $ticket->getId()) {\n            return $ticket->getStatusAsLabel();\n        }\n\n        return '';\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Model\\Ticket\\Grid;\n\nclass Severity implements \\Magento\\Framework\\Option\\ArrayInterface\n{\n    public function toOptionArray()\n    {\n        return \\Foggyline\\Helpdesk\\Model \\Ticket::getSeveritiesOptionArray();\n    }\n}\n```", "```php\nreturn [\n    ['value'=>'theValue1', 'theLabel1'],\n    ['value'=>'theValue2', 'theLabel2'],\n];\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Controller\\Adminhtml;\n\nclass Ticket extends \\Magento\\Backend\\App\\Action\n{\n    protected $resultPageFactory;\n    protected $resultForwardFactory;\n    protected $resultRedirectFactory;\n\n    public function __construct(\n        \\Magento\\Backend\\App\\Action\\Context $context,\n        \\Magento\\Framework\\View\\Result\\PageFactory $resultPageFactory,\n        \\Magento\\Backend\\Model\\View\\Result\\ForwardFactory $resultForwardFactory\n    )\n    {\n        $this->resultPageFactory = $resultPageFactory;\n        $this->resultForwardFactory = $resultForwardFactory;\n        $this->resultRedirectFactory = $context-> getResultRedirectFactory();\n        parent::__construct($context);\n    }\n\n    protected function _isAllowed()\n    {\n        return $this->_authorization-> isAllowed('Foggyline_Helpdesk::ticket_manage');\n    }\n\n    protected function _initAction()\n    {\n        $this->_view->loadLayout();\n        $this->_setActiveMenu(\n            'Foggyline_Helpdesk::ticket_manage'\n        )->_addBreadcrumb(\n            __('Helpdesk'),\n            __('Tickets')\n        );\n        return $this;\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Controller\\Adminhtml\\Ticket;\n\nclass Index extends \\Foggyline\\Helpdesk\\Controller\\Adminhtml\\Ticket\n{\n    public function execute()\n    {\n        if ($this->getRequest()->getQuery('ajax')) {\n            $resultForward = $this->resultForwardFactory-> create();\n            $resultForward->forward('grid');\n            return $resultForward;\n        }\n        $resultPage = $this->resultPageFactory->create();\n\n        $resultPage-> setActiveMenu('Foggyline_Helpdesk::ticket_manage');\n        $resultPage->getConfig()->getTitle()-> prepend(__('Tickets'));\n\n        $resultPage->addBreadcrumb(__('Tickets'), __('Tickets'));\n        $resultPage->addBreadcrumb(__('Manage Tickets'), __('Manage Tickets'));\n\n        return $resultPage;\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Controller\\Adminhtml\\Ticket;\n\nclass Grid extends \\Foggyline\\Helpdesk\\Controller\\Adminhtml\\Ticket\n{\n    public function execute()\n    {\n        $this->_view->loadLayout(false);\n        $this->_view->renderLayout();\n    }\n}\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Controller\\Adminhtml\\Ticket;\n\nclass Close extends \\Foggyline\\Helpdesk\\Controller\\Adminhtml\\Ticket\n{\n    protected $ticketFactory;\n    protected $customerRepository;\n    protected $transportBuilder;\n    protected $inlineTranslation;\n    protected $scopeConfig;\n    protected $storeManager;\n\n    public function __construct(\n        \\Magento\\Backend\\App\\Action\\Context $context,\n        \\Magento\\Framework\\View\\Result\\PageFactory $resultPageFactory,\n        \\Magento\\Backend\\Model\\View\\Result\\ForwardFactory $resultForwardFactory,\n        \\Foggyline\\Helpdesk\\Model\\TicketFactory $ticketFactory,\n        \\Magento\\Customer\\Api\\CustomerRepositoryInterface $customerRepository,\n        \\Magento\\Framework\\Mail\\Template\\TransportBuilder $transportBuilder,\n        \\Magento\\Framework\\Translate\\Inline\\StateInterface $inlineTranslation,\n        \\Magento\\Framework\\App\\Config\\ScopeConfigInterface $scopeConfig,\n        \\Magento\\Store\\Model\\StoreManagerInterface $storeManager\n    )\n    {\n        $this->ticketFactory = $ticketFactory;\n        $this->customerRepository = $customerRepository;\n        $this->transportBuilder = $transportBuilder;\n        $this->inlineTranslation = $inlineTranslation;\n        $this->scopeConfig = $scopeConfig;\n        $this->storeManager = $storeManager;\n        parent::__construct($context, $resultPageFactory, $resultForwardFactory);\n    }\n\n    public function execute()\n    {\n        $ticketId = $this->getRequest()->getParam('id');\n        $ticket = $this->ticketFactory->create()->load($ticketId);\n\n        if ($ticket && $ticket->getId()) {\n            try {\n                $ticket->setStatus(\\Foggyline \\Helpdesk\\Model\\Ticket::STATUS_CLOSED);\n                $ticket->save();\n                $this->messageManager->addSuccess(__('Ticket successfully closed.'));\n\n                /* Send email to customer */\n                $customer = $this->customerRepository-> getById($ticket->getCustomerId());\n                $storeScope = \\Magento\\Store\\Model\\ ScopeInterface::SCOPE_STORE;\n                $transport = $this->transportBuilder\n                    ->setTemplateIdentifier($this->scopeConfig-> getValue('foggyline_helpdesk/email_template /customer', $storeScope))\n                    ->setTemplateOptions(\n                        [\n                            'area' => \\Magento\\Framework\\App\\Area::AREA_ADMINHTML,\n                            'store' => $this->storeManager- >getStore()->getId(),\n                        ]\n                    )\n                    ->setTemplateVars([\n                        'ticket' => $ticket,\n                        'customer_name' => $customer-> getFirstname()\n                    ])\n                    ->setFrom([\n                        'name' => $this->scopeConfig-> getValue('trans_email/ident_general /name', $storeScope),\n                        'email' => $this->scopeConfig-> getValue('trans_email/ident_general /email', $storeScope)\n                    ])\n                    ->addTo($customer->getEmail())\n                    ->getTransport();\n                $transport->sendMessage();\n                $this->inlineTranslation->resume();\n                $this->messageManager->addSuccess(__('Customer notified via email.'));\n\n            } catch (Exception $e) {\n                $this->messageManager->addError(__('Error with closing ticket action.'));\n            }\n        }\n\n        $resultRedirect = $this->resultRedirectFactory->create();\n        $resultRedirect->setPath('*/*/index');\n\n        return $resultRedirect;\n    }\n}\n```", "```php\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<phpunit  xsi:noNamespaceSchemaLocation=\"http://schema.phpunit.de/4.1 /phpunit.xsd\"\n         colors=\"true\"\n         bootstrap=\"./framework/bootstrap.php\"\n        >\n    <testsuite name=\"Foggyline_Helpdesk - Unit Tests\">\n        <directory suffix=\"Test.php\"> ../../../app/code/Foggyline/Helpdesk/Test/Unit </directory>\n    </testsuite>\n    <php>\n        <ini name=\"date.timezone\" value=\"Europe/Zagreb\"/>\n        <ini name=\"xdebug.max_nesting_level\" value=\"200\"/>\n    </php>\n    <filter>\n        <whitelist addUncoveredFilesFromWhiteList=\"true\">\n            <directory suffix=\".php\"> ../../../app/code/Foggyline/Helpdesk/*</directory>\n            <exclude>\n                <directory> ../../../app/code/Foggyline/Form/Helpdesk </directory>\n            </exclude>\n        </whitelist>\n    </filter>\n    <logging>\n        <log type=\"coverage-html\" target=\"coverage_dir/Foggyline_Helpdesk/test- reports/coverage\" charset=\"UTF-8\" yui=\"true\" highlight=\"true\"/>\n    </logging>\n</phpunit>\n```", "```php\n<?php\n\nnamespace Foggyline\\Helpdesk\\Test\\Unit\\Model;\n\nclass TicketTest extends \\PHPUnit_Framework_TestCase\n{\n    protected $objectManager;\n    protected $ticket;\n\n    public function setUp()\n    {\n        $this->objectManager = new \\Magento\\Framework\\TestFramework\\Unit\\Helper \\ObjectManager($this);\n        $this->ticket = $this->objectManager-> getObject('Foggyline\\Helpdesk\\Model\\Ticket');\n    }\n\n    public function testGetSeveritiesOptionArray()\n    {\n        $this-> assertNotEmpty(\\Foggyline \\Helpdesk\\Model\\Ticket::getSeveritiesOptionArray());\n    }\n\n    public function testGetStatusesOptionArray()\n    {\n        $this->assertNotEmpty(\\Foggyline \\Helpdesk\\Model\\Ticket::getStatusesOptionArray());\n    }\n\n    public function testGetStatusAsLabel()\n    {\n        $this->ticket->setStatus(\\Foggyline\\Helpdesk \\Model\\Ticket::STATUS_CLOSED);\n\n        $this->assertEquals(\n            \\Foggyline\\Helpdesk\\Model\\Ticket::$statusesOptions [\\Foggyline\\Helpdesk\\Model\\Ticket::STATUS_CLOSED],\n            $this->ticket->getStatusAsLabel()\n        );\n    }\n\n    public function testGetSeverityAsLabel()\n    {\n        $this->ticket->setSeverity(\\Foggyline \\Helpdesk\\Model\\Ticket::SEVERITY_MEDIUM);\n\n        $this->assertEquals(\n            \\Foggyline\\Helpdesk\\Model\\Ticket::$severitiesOptions [\\Foggyline\\Helpdesk\\Model\\Ticket::SEVERITY_MEDIUM],\n            $this->ticket->getSeverityAsLabel()\n        );\n    }\n}\n```", "```php\nphpunit -c dev/tests/unit/phpunit-foggyline-helpdesk.xml\n```", "```php\nPHPUnit 4.7.6 by Sebastian Bergmann and contributors.\n....\n\nTime: 528 ms, Memory: 11.50Mb\n\nOK (4 tests, 4 assertions)\n\nGenerating code coverage report in HTML format ... done\n```"]