<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Setting Up the Development Environment"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Setting Up the Development Environment</h1></div></div></div><p>
<span class="emphasis"><em>What on earth is a development environment and why do I need it?</em></span> It is fairly widely accepted that during the process of building your website, you should not make it available for people to use over the Internet. Making your site<span class="emphasis"><em> live</em></span>, while you are still making changes and breaking and fixing things, means that it is possible for people to find your site, attempt to use it, and form an exceedingly bad opinion of your web development skills. You might, in the worst case, find that you have even inadvertently allowed malicious users to gain access to sensitive information due to improperly implemented security settings, among other things.</p><p>Rather than allow the public access to your work in progress, it is far better to set up a PHP‑enabled web server on your home or office PC. This server, along with PHP and your database, can then be used to design and build everything just as you want it, before transferring the final product over to the live site. A development environment is precisely that machine, along with its attendant development tools and technologies, where you can build your site. This chapter therefore will ensure that you set yours up correctly and efficiently so that you can begin working on Drupal directly in the chapters that follow.</p><p>Specifically, we will discuss the following important topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A brief introduction to the technologies involved</li><li class="listitem" style="list-style-type: disc">Obtaining and installing Apache, MySQL, and PHP</li><li class="listitem" style="list-style-type: disc">Obtaining and installing Drupal</li><li class="listitem" style="list-style-type: disc">Upgrading Drupal</li><li class="listitem" style="list-style-type: disc">Troubleshooting common problems</li><li class="listitem" style="list-style-type: disc">A short tour of Drupal</li></ul></div><p>Installation and setup for Apache, MySQL, and PHP will only be covered for Windows because we trust that Linux hacks will have everything installed already (or will know how it is done). On the off chance that you don't have everything installed, a quick glance over the instructions given on the software-in-question's site should suffice to get you on your feet. The installation procedure for Drupal is much the same for Windows and Linux; so people using either can follow along with the<span class="emphasis"><em> Obtaining and Installing Drupal</em></span> section.</p><p>Before we begin, however, there is one crucial bit of advice to be given:</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note05"/>Note</h3><p>Ensure that you have access to a good, preferably lightning fast, Internet connection, as you will be downloading a fair amount of software.</p></div></div><p>For those users who have already installed various bits of software, you might find it convenient to skip whatever sections you do not need, going over only those that are of interest. As well as providing information on installation, this chapter will also have a troubleshooting section addressing some of the most common errors associated with the setup process for Drupal.</p><p>It should also be noted that because Drupal has been developed with flexibility in mind, it is possible to use it off IIS as an alternative web server, as well as utilizing PostgreSQL as an alternative database because support for these are actively being developed. Rather than show how to set each and every one up, we will focus on the most popular combination of Apache, MySQL, and PHP.</p><div class="section" title="The Drupal Environment"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec01"/>The Drupal Environment</h1></div></div></div><p>I know most of you will be eager to get going at the moment, and might well prefer to dive straight into making modifications to your Drupal site. Before we do so, it will be of real benefit for you to take a few moments to read over this section to gain an appreciation of how everything is put together behind the scenes. Having a basic knowledge of how the various technologies co-operate in order to provide you with a working Drupal site, will help you immeasurably in the long run.<a class="indexterm" id="id43"/>
</p><p>The best thing to do to begin with is take a look at each of the individual underlying technologies we will be using:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>PHP:</strong></span> PHP, or PHP Hypertext Preprocessor, is the language in which Drupal is written. Recently it has received a major upgrade and is now more or less a fully functional<span class="strong"><strong> Object Oriented Language</strong></span>, with some very powerful features. PHP is widely used on the Internet for a multitude of different projects and is renowned for its ease of use. The current version of PHP is PHP 5, which is what we will use in this book for our demonstration since the latest version of Drupal is PHP 5 friendly. However, you are welcome to use version 4 because this is what most internet service providers use at present. The good news is that we will not have to delve deeply into programming code in order to build our site—Drupal handles most, if not all, of the complex programming issues.<a class="indexterm" id="id44"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Apache:</strong></span> This is the web server we will use to serve web pages during the development phase. Apache is the most popular web server on the Internet, with millions of live sites using it every day. In fact, as the Apache website says:<span class="emphasis"><em> It is more widely used than all the other web servers combined</em></span>.<a class="indexterm" id="id45"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>MySQL:</strong></span> This is the database software that we will use to store all the information required to keep the website running. Everything from customer details to product information and a host of other things will be stored in the MySQL database. Keeping with the trend of popularity, MySQL is also the world's most popular bit of database software with over six million active installations worldwide.<a class="indexterm" id="id46"/></li></ul></div><p>Now, since we don't want to waste too much time downloading and installing all the different pieces of software we need individually, we are going to use a package installation, which provides us with everything we need using only one installation. The package we will use for the purposes of this book is called<span class="strong"><strong> Apache2Triad</strong></span>.</p><p>Now that we know<span class="emphasis"><em> what</em></span> we are using, it is important to take a quick look at<span class="emphasis"><em> how</em></span> we are going to be using it. The following diagram shows a simplified view of how everything works, with the shaded section denoting the Apache2Triad package containing the Apache web server, PHP interpreter, and MySQL database, with Drupal installed on the system:<a class="indexterm" id="id47"/>
</p><div class="mediaobject"><img alt="The Drupal Environment" src="graphics/1800_02_01.jpg"/></div><p>So, whenever a user does anything with your Drupal site (hopefully like contributing meaningfully), here's what happens:<a class="indexterm" id="id48"/>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The relevant information is bundled off to the server in the form of an HTTP (HyperText Transfer Protocol) request. An HTTP request comes in two forms—either a<code class="literal"> GET</code> or a<code class="literal"> POST</code>. For our purposes, it is not important to understand how<code class="literal"> GET</code> and<code class="literal"> POST</code> work, as long as you understand that information can be captured from the user and sent to the server for processing using these requests.</li><li class="listitem">The server receives the HTTP request and says,<span class="emphasis"><em> Ah! This is a PHP page that has been requested. I need to send it off for processing by the PHP engine</em></span>. The PHP page then gets processed and executed appropriately, and any actions that are required as a result of the user's request are performed.</li><li class="listitem">Once that is done, an appropriate response is returned by the server to the user's browser, and the cycle continues.</li></ol></div><p>There are quite a few methods of providing dynamic web content that don't rely on PHP server requests. Instead, processing is done on the client side of the application (in other words, on the web browser). We will take a look at how to enhance your web pages with JavaScript much later on, in<a class="link" href="ch09.html" title="Chapter 9. Advanced Features and Modifications"> Chapter 9</a>, but what you have been shown here is fundamentally how everything works, even if there are exceptions to the rule.</p><p>While this section has been a bit of a whirlwind tour of the underlying technologies associated with Drupal, the information contained in here should prove to be invaluable at some stage. For example, knowing how everything fits together will often help you isolate the cause of any problems you encounter, allowing you to resolve them quicker.</p><p>Don't worry if this all seems a little daunting at the moment. Bear in mind that Drupal itself handles most, if not all, of the complexity associated with ensuring everything runs smoothly. As you will see, our job becomes one of customization rather than actual software development. With that behind us, let's get on with the installation process.</p></div></div>
<div class="section" title="Obtaining and Installing PHP, Apache, and MySQL"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec02"/>Obtaining and Installing PHP, Apache, and MySQL</h1></div></div></div><p>As mentioned in the previous section, we are going to make use of a package installation in order to simplify the task of creating a workable development environment. You will notice that most software installation is really about learning a single process and repeating it for whatever software you need. More often than not, you will:<a class="indexterm" id="id49"/>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to the software producer's site</li><li class="listitem">Find the download page</li><li class="listitem">Download the software</li><li class="listitem">Unpack the software or run the executable file, depending on the method of installation</li><li class="listitem">Install the software</li><li class="listitem">Configure your installation</li><li class="listitem">Test your setup</li></ol></div><p>That sounds easy enough; so head on over to<a class="ulink" href="http://apache2triad.net/"> http://apache2triad.net/</a>, which is the homepage for the Apache2Triad project and click the<span class="strong"><strong> Downloads</strong></span> link in the left-hand box towards the bottom of the screen. (Feel free to browse around to learn more about this useful enterprise.) This will take you to the downloads page on the SourceForge site at:<a class="ulink" href="http://sourceforge.net/project/showfiles.php?group_id=93507"> http://sourceforge.net/project/showfiles.php?group_id=93507</a>.<a class="indexterm" id="id50"/>
</p><p>Select the package you wish to use—for the purposes of this book, release package 1.5.3 was used. At the time of writing, this was the latest stable release, but you should feel free to use a later version, if there is one, as this will not affect how you follow along here. Once you have clicked<span class="strong"><strong> Download</strong></span> for a package you will be presented with a list of download options. Release package 1.5.3 has only one option as shown here:</p><div class="mediaobject"><img alt="Obtaining and Installing PHP, Apache, and MySQL" src="graphics/1800_02_02.jpg"/></div><p>This is the package we will download and install. In order to do this, simply click the<code class="literal"> package name .exe</code> file, which will take you to a list of mirror sites from which you can choose one to provide you with the download. A mirror is simply a server that provides all the same facilities at a different geographical location—this is done to reduce the load on individual servers and provide faster downloads to people all over the globe. Make your choice and click<span class="strong"><strong> Download</strong></span> to begin.<a class="indexterm" id="id51"/>
</p><p>Depending on your PC's security settings, you may be given the following warning message:</p><div class="mediaobject"><img alt="Obtaining and Installing PHP, Apache, and MySQL" src="graphics/1800_02_03.jpg"/></div><p>Simply click<span class="strong"><strong> Run</strong></span> to continue (or<span class="strong"><strong> Save</strong></span> if you would like to hold on to a copy). At this point, you may want to take a break for a cup of coffee or tea if you have a slow connection as it may take a while.</p><p>At some stage during the setup process, the installer will ask you to confirm several settings and you are free to make changes as and when prompted. All the configurable settings have sensible defaults; so you don't really have to bother with this too much. However, you will be asked to enter a password. Please ensure that you use something that is memorable to you and secure. You will need to use 8 characters or more and preferably use some numerical digits as part of the password.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note06"/>Note</h3><p>Ensure that you can remember your password as it is needed in order to run the initialization tasks a little later in the setup process.</p></div></div><p>Once everything has been done, you should receive the following message:</p><div class="mediaobject"><img alt="Obtaining and Installing PHP, Apache, and MySQL" src="graphics/1800_02_04.jpg"/></div><p>Make sure you save and close whatever important documents you have open before clicking<span class="strong"><strong> OK</strong></span>. Once your machine has restarted, you will find that you have a whole list of new and exciting options to explore from the<span class="strong"><strong> Apache2Triad</strong></span> option under<span class="strong"><strong> All Programs</strong></span> in the<span class="strong"><strong> Start</strong></span> menu. For example, the following options are made available with the 1.5.3 distribution:<a class="indexterm" id="id52"/>
</p><div class="mediaobject"><img alt="Obtaining and Installing PHP, Apache, and MySQL" src="graphics/1800_02_05.jpg"/></div><p>There is quite a lot more than what we really need for our immediate purposes, but just to ensure that everything is going according to plan, click<span class="strong"><strong> open site root</strong></span> in the<span class="strong"><strong> Start</strong></span> menu and you should be shown the following web page in your default browser:</p><div class="mediaobject"><img alt="Obtaining and Installing PHP, Apache, and MySQL" src="graphics/1800_02_06.jpg"/></div><p>This confirms that everything is up and running as expected. Pretty easy so far! One thing to make note of in the previous screenshot is the final link called<span class="strong"><strong> htdocs</strong></span>. Traditionally in Apache servers, the folder on your file system called<code class="literal"> htdocs</code> is known as the<span class="emphasis"><em> root</em></span> folder. What this means is that all the web pages and folders for your site must be placed inside<code class="literal"> htdocs</code> in order for them to be served by Apache. If something is not in<code class="literal"> htdocs</code>, then it is not possible to browse it!<a class="indexterm" id="id53"/>
</p><p>From this we know that we will have to locate the actual folder called<code class="literal"> htdocs</code> on the file system in order to know where to put Drupal once we have downloaded it. Assuming you have gone with the default setup, you will find<code class="literal"> htdocs</code> in the following directory (on Windows machines) along with everything else that was installed and created during setup:<code class="literal"> C:/apache2triad/</code>.</p><p>Before we move on from here, it is worthwhile taking a look at what has been provided as part of the Apache2Triad installation because some of the facilities made available to you could well be most useful as time goes by. You will also find that many hosting packages on live sites offer pretty much the same functionality as you now have on your PC.<a class="indexterm" id="id54"/>
</p><p>Of particular interest and use to us Drupal people is phpMyAdmin, which is a complete database management tool for MySQL. It can make your life a lot easier as you become more advanced and wish to play around with your data. It is entirely likely that you can perform most of the tasks you need by using phpMyAdmin instead of having to learn SQL against the MySQL command-line client.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>If you are struggling to log on to phpMyAdmin or any other part of the site, then try using<span class="strong"><strong> root</strong></span> as the username and whatever password you set during the setup process.</p></div></div><p>We now have a platform from which we can begin building the Drupal site. Of course, we still need Drupal.</p></div>
<div class="section" title="Obtaining and Installing Drupal"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec03"/>Obtaining and Installing Drupal</h1></div></div></div><p>
<a class="link" href="ch01.html" title="Chapter 1. Introduction to Drupal">Chapter 1</a> has already looked over the downloads page on the Drupal site; so there isn't too much to present us with problems at this point. Head on over to<a class="ulink" href="http://drupal.org/project/Drupal+project"> http://drupal.org/project/Drupal+project</a> and click the Drupal version number you wish to download—generally,<span class="emphasis"><em> the latest stable release</em></span> is what you should go for. Click<span class="strong"><strong> Download</strong></span> to grab the latest copy and save it to your<code class="literal"> C:</code> drive, or your<code class="literal"> My Documents</code> folder (or wherever you want).<a class="indexterm" id="id55"/>
</p><p>Now, the Drupal download is different from the Apache2Triad installer in that we will install Drupal ourselves; it doesn't come with its own installer<code class="literal"> .exe</code> file. Instead we are asked if we would like to<span class="strong"><strong> Save</strong></span> (or<span class="strong"><strong> Open)</strong></span> a<code class="literal"> .tar.gz</code> file. If you find that your PC doesn't recognize<code class="literal"> .gz</code> files (this is for Windows users), then you need to download a zip program like WinZip (
<a class="ulink" href="http://www.winzip.com">http://www.winzip.com</a>), or preferably an open-source option like 7-zip (
<a class="ulink" href="http://www.7-zip.org">http://www.7-zip.org</a>).</p><p>Once you are happy that you can open and decompress the downloaded<code class="literal"> tar.gz</code> file then extract it to the<code class="literal"> htdocs</code> folder of your Apache installation. If you now take a look, you will see something like this:</p><div class="mediaobject"><img alt="Obtaining and Installing Drupal" src="graphics/1800_02_07.jpg"/></div><p>We still need to create a database and populate it with all the necessary tables and structures that Drupal will need in order to function—even though, technically speaking, you could try to browse your Drupal pages because they are now within the<code class="literal"> htdocs</code> folder. There are a number of ways in which this can be done, but let's stick to the most basic in order to make this section applicable to everyone.<a class="indexterm" id="id56"/>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open up a command-line shell. In Windows this can be done by clicking<span class="strong"><strong> Start</strong></span>, selecting<span class="strong"><strong> Run</strong></span> and typing in<span class="strong"><strong> cmd</strong></span>.</li><li class="listitem">Type in the following command at the prompt:<div class="informalexample"><pre class="programlisting">C:\ mysqladmin -u root -p create drupal
</pre></div></li><li class="listitem">Enter your password when prompted. (This is the one you entered upon setup of Apache2Triad.)</li><li class="listitem">Enter the MySQL command-line prompt by using the following command:<div class="informalexample"><pre class="programlisting">C:\ mysql -u root p
</pre></div></li><li class="listitem">Once again, enter the same password you have been using until now, when prompted.</li><li class="listitem">In order to set a database username and password for Drupal specifically, enter the following command:<div class="informalexample"><pre class="programlisting">mysql&gt; GRANT ALL PRIVILEGES ON drupal.* TO <span class="strong"><strong>nobody</strong></span>@localhost IDENTIFIED BY
<span class="strong"><strong>'password'</strong></span>;
</pre></div></li><li class="listitem">Remember to substitute values that are relevant to yourself in place of the bolded sections of this command—nobody (your username), and<code class="literal"> password</code> (your password). After this, you should have a screen that looks something like the following:<div class="mediaobject"><img alt="Obtaining and Installing Drupal" src="graphics/1800_02_08.jpg"/></div></li><li class="listitem">Next, type in the following command to ensure these settings take effect immediately:<a class="indexterm" id="id57"/><div class="informalexample"><pre class="programlisting">mysql&gt; flush privileges;
</pre></div></li><li class="listitem">Type quit to exit the MySQL command-line client, and then load the database by typing in:<div class="informalexample"><pre class="programlisting">$&gt; mysql <span class="strong"><strong>-u drupal</strong></span> -p drupal &lt; C:/apache2triad/htdocs/<span class="strong"><strong>drupal-4.7.0/</strong></span>
database/database.4.1.mysql
</pre></div></li><li class="listitem">Remember to enter the correct password you have set for your drupal database user—in this case it is ny4thi as shown in the above screenshot. The bolded sections may change depending on the user you defined in a previous step, and the version of Drupal you have obtained.</li></ol></div><p>At this point all of the database setup for Drupal has been performed and we only have a few configuration tasks to deal with in order to complete the installation process. For those of you who are interested in taking a quick peek at what has happened under the hood during this setup process, open up the MySQL command-line prompt using:</p><div class="informalexample"><pre class="programlisting">$&gt; mysql udrupal p drupal
</pre></div><p>Enter your password when prompted, and then type the following at the command line:</p><div class="informalexample"><pre class="programlisting">mysql&gt; show tables;
mysql&gt; select * from &lt;tablename&gt;;
</pre></div><p>The first command will reel off a list of all the tables that are now present in the<code class="literal"> drupal</code> database. The next command can be used to look at the information in any of the tables given by substituting one of those present for<code class="literal">&lt;tablename&gt;</code>. Looking through the results you should be able to see that quite a lot of work has been done to ensure that everything our website needs has been created.</p><p>We can now move on to the configuration settings!</p><p>Go to your Drupal installation by navigating to<code class="literal">C:\apache2triad\htdocs\</code><span class="strong"><strong>drupal-4.7.0</strong></span><code class="literal">\ sites\default</code>—obviously your version number can be different. Open up the<code class="literal"> settings.php</code> file in an editor of your choice and modify the following line that is on or around line 81:<a class="indexterm" id="id58"/>
</p><div class="informalexample"><pre class="programlisting">$db_url = 'mysql://username:password@localhost/database';
</pre></div><p>For example, the demo site's settings are now:</p><div class="informalexample"><pre class="programlisting">$db_url = 'mysql://<span class="strong"><strong>drupal:ny4thi</strong></span>@localhost/<span class="strong"><strong>drupal'</strong></span>;
</pre></div><p>because as you know we created a user called<code class="literal"> drupal</code> and gave that user the password<code class="literal"> ny4thi</code>, which allows them access to the<code class="literal"> drupal</code> database that was created using the SQL script provided in the download. The only other setting we need think about at the moment is the base URL that describes the address of your website—it is optional to fill this out; so if you find that there are problems with broken links and so on when you first check out the site, come back to this setting.</p><p>Assuming you are not using another server in a network, simply add in the extra folder to the default address and remove the hash (#) symbol from the front of the line, as shown here:</p><div class="informalexample"><pre class="programlisting">$base_url = 'http://localhost/<span class="strong"><strong>drupal-4.7.0'</strong></span>;
</pre></div><p>Remember to change the bolded section to the correct Drupal version according to which package you download.</p><p>If you have saved your files to some other location, then you will need to make your configuration settings accordingly. Once you are done, save the changes to the file and get ready for the acid test. If everything has gone according to plan, you should be presented with a fresh Drupal website when you navigate to the base URL in your browser, as follows:<a class="indexterm" id="id59"/>
</p><div class="mediaobject"><img alt="Obtaining and Installing Drupal" src="graphics/1800_02_09.jpg"/></div><p>If this is not the screen you get (or something very close to it), then don't worry. There is a troubleshooting section following soon and an entire community, replete with forums to help solve problems. However, if this is what you see, then congratulations, you are now the proud administrator of one default Drupal website. Of course, if you don't feel like typing in<code class="literal"> drupal‑4.7.0</code> every time you want to access the site, you are free to change the name of this folder.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>Make sure that you make the corresponding change to the<code class="literal"> $base_url</code> variable in<code class="literal"> settings.php</code> to reflect any changes to the address otherwise you will end up with a broken site.</p></div></div><p>Effectively, that is all you need to do in order to install Drupal. Everything else henceforth is configuration and customization. One of the first things we will need to do is set up an administrator's account, and all instructions regarding it are presented on your default web page as shown in the previous screenshot. Before we do take a brief tour of Drupal, setting up the administrator's account in the process, we need to look at a few other issues.</p></div>
<div class="section" title="Upgrading Drupal"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec04"/>Upgrading Drupal</h1></div></div></div><p>From time to time it becomes necessary to upgrade your installation of Drupal in order to keep your site up to speed and trouble free. Every now and then, for example, a security issue may be identified and it is important that people upgrade in order to avoid falling prey to malicious hacking. Don't be too alarmed by this. All software, whether proprietary or open source, has weaknesses. Weaknesses are something you are not able to escape. What counts is how they are dealt with once they are found. In the case of Drupal, there is an entire community of people watching for bugs, reporting them, fixing them, and then offering the solutions to all users for free.<a class="indexterm" id="id60"/>
</p><p>So, should it be necessary, it is important you know what to do in order to result in a painless upgrade. As you would expect from Drupal, the process is fairly simple, but before we look at it, I should warn you:</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>If you are using a theme other than the default, it is possible that your site may break. It may be best to revert to the default theme before performing an upgrade.</p></div></div><p>For now, this note should not concern you at all because we have not even talked about themes—it may be handy to remember at a later date though. Let's continue:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Make a backup of your current database so that you preserve all the information added by users as well as any configuration changes you have implemented. (Backups are discussed in<a class="link" href="ch10.html" title="Chapter 10. Running Your Website"> Chapter 10</a>. Look there quickly if you need to make a backup in the meantime.)</li><li class="listitem">Back up the old files, especially those that have important settings like your stylesheet or the configuration file contained in the<code class="literal"> sites/default/directory</code>. This allows you to re-implement any important settings on the new site.</li><li class="listitem">Remove all the old Drupal files from your file system, and assuming you want to run your site from the same location, unpack all the new files into the same folder.</li><li class="listitem">Make the necessary changes to the configuration file based on the settings saved in the old one.</li><li class="listitem">Log in as the site administrator (this has to be user number 1), then navigate to your Drupal homepage and run the<code class="literal"> update.php</code> script by accessing it from your browser. For example, the demo site's update page would be<code class="literal"> http://localhost/drupal-4.7.0/update.php</code>. This will bring up a page of notes as follows:<a class="indexterm" id="id61"/><div class="mediaobject"><img alt="Upgrading Drupal" src="graphics/1800_02_10.jpg"/></div></li><li class="listitem">Read through these notes before you click the<span class="strong"><strong> run the database upgrade script</strong></span> link to ensure that you perform any version-specific tasks that may be required.</li><li class="listitem">Click the link to bring up the following page:<div class="mediaobject"><img alt="Upgrading Drupal" src="graphics/1800_02_11.jpg"/></div></li><li class="listitem">Select an update to perform (only if, for some reason, you are not happy with the automatic choice) and then click<span class="strong"><strong> Update</strong></span>. If everything goes well, you should see a list of updates that were performed, along with the status of those operations; something like this:<a class="indexterm" id="id62"/></li></ol></div><div class="mediaobject"><img alt="Upgrading Drupal" src="graphics/1800_02_12.jpg"/></div><p>You are now fully updated and can continue as normal. There is another valuable source of information you should look at, whenever you need to make an upgrade, namely the Drupal site itself:<a class="ulink" href="http://drupal.org/upgrade/">http://drupal.org/upgrade/</a> . This page contains useful notes and version-specific issues and instructions that could come in handy.</p></div>
<div class="section" title="Troubleshooting Common Problems"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec05"/>Troubleshooting Common Problems</h1></div></div></div><p>In this section, we will take a look at two of the problems most likely to occur during your setup process. We will also take a look at how they manifest themselves and how to solve them quickly. It should be noted that at this early stage there are not many things that can go wrong since the installation routine is fairly well used and most, if not all, of the bugs have been ironed out. This is good news for us because it is likely that any errors are the result of typos or something else quite simple, which should be easy to rectify.<a class="indexterm" id="id63"/>
</p><p>Unfortunately, we can't hope to cover absolutely everything in this section; so we will also outline a brief process that you can use to solve any problem, and not just the ones involved with installation. Having a sound process to follow whenever you encounter problems is immeasurably more valuable that being shown solutions to each and every problem anyway. By the end of this section you should be confident that you can install and upgrade Drupal as well as handle any problems that might arise along the way. So let's begin.</p><p>If, instead of the default homepage, you receive a message like this:</p><div class="mediaobject"><img alt="Troubleshooting Common Problems" src="graphics/1800_02_13.jpg"/></div><p>then it is likely that you have made a typo in the connection string in the<code class="literal"> /sites/default/settings.php</code> file. Recheck this file to ensure that the name and password you supply are correct. If you cannot find the problem, enter your root name and password in the<code class="literal"> settings.php</code> file to see whether you can log on with that. If that works, then you know that there is a problem with the user and/or their permissions, and not with anything else, so check your<code class="literal"> GRANT</code> statement in step 5 again, and ensure it matches the settings in the<code class="literal"> settings.php</code> file.</p><p>In the previous screenshot, there was a typo in the username given in the<code class="literal"> settings.php</code> file that caused Drupal to try to connect to MySQL with the username<code class="literal"> drupa</code> instead of<code class="literal"> drupal</code>. Of course, some of you may have gotten past this point only to have been presented with something like this:<a class="indexterm" id="id64"/>
</p><div class="mediaobject"><img alt="Troubleshooting Common Problems" src="graphics/1800_02_14.jpg"/></div><p>As you can see, we are almost there, but something has definitely gone wrong somewhere along the line as evidenced by the broken link and lack of any formatting and style. The most likely cause of this error is an incorrectly set base URL—this shouldn't be too much of a problem in versions 4.7 and later, as Drupal detects this URL automatically. If, however, you changed the name of the Drupal folder in<code class="literal"> htdocs</code> to something like<code class="literal"> drupal</code> instead of the original<code class="literal"> drupal-4.7.0</code>, then browsing to that address without adjusting the base URL could cause this type of problem.</p><p>To solve this, ensure that the address at which you find the page on your browser is the same as that given in the<code class="literal"> settings.php</code> file minus the trailing slash, as shown here:</p><div class="informalexample"><pre class="programlisting">$base_url = 'http://localhost/drupal-4.7.0';
</pre></div><p>Oh dear, you can see that this is still the old value; so we need to update it to match the address in the previous screenshot as follows:</p><div class="informalexample"><pre class="programlisting">$base_url = 'http://localhost/drupal';
</pre></div><p>Once you have the correct setting in place you will find the site displays itself correctly.<span class="emphasis"><em> But what if something else has gone wrong?</em></span> Well, at this point, the types of problems that can occur are not easily isolated; so it is better that you know<span class="emphasis"><em> how</em></span> to go about solving them. The following list of points highlight the process you should use in order to go about troubleshooting any problems:<a class="indexterm" id="id65"/>
</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Scrutinize any error messages you get and attempt to solve the problem yourself.</li><li class="listitem">Visit the Drupal forums and search for similar problems.</li><li class="listitem">Look through the troubleshooting FAQ at<a class="ulink" href="http://drupal.org/node/199">http://drupal.org/node/199   </a> .</li><li class="listitem">View the bug list (<a class="ulink" href="http://drupal.org/project/issues">http://drupal.org/project/issues   </a>) to see if your problem is a reported bug.</li><li class="listitem">If you can't find bugs, similar posts, or problems, then try posting your queries on the forums and ask someone in the community to give you a hand.</li><li class="listitem">To supplement this, get on Google and try using relevant keywords to locate a similar problem, with hopefully a solution presented.</li></ol></div><p>It is highly unlikely you will need to use all six options at this point in time, but at some stage in the future you might find that you require more expertise than is available by searching on the net. If this is ever the case, then don't despair, there are consultants available provided you are willing to part with a fee. For now though, you should be ready to continue with the final few tasks in the setup process, which will be performed in the following section.<a class="indexterm" id="id66"/>
</p></div>
<div class="section" title="A Short Tour of Drupal"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec06"/>A Short Tour of Drupal</h1></div></div></div><p>Before we move ahead with customization and configuration topics, it is important that we glance over what Drupal actually looks like and ensure it is up and working properly. In order to do this, there are a few PHP settings we need to look at. Once these are taken care of we will have to create the first user who will have control over every aspect of the site. No tour of Drupal would be complete without a discussion of an actual Drupal page, so we will take a look at a sample towards the end of this section once we have finished playing around.</p><p>First things first though, let's deal with PHP.</p><div class="section" title="A Couple of Important Settings"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec01"/>A Couple of Important Settings</h2></div></div></div><p>I will demonstrate the changes required for the Apache2Triad setup, but if you have gone with anything else (or if you already have everything installed), you might notice slight differences in the way things are laid out. Now, the reason we need to do all this is because we would obviously like any emails that are sent out by Drupal to come from a working email address that we can access, and we need to check that the<code class="literal"> mail()</code> function, used by Drupal for sending an email, has an SMTP server to work with. As we will end up having to set this somewhere along the line anyway (assuming it's not already set), we may as well do it now.<a class="indexterm" id="id67"/>
</p><p>Open up your<code class="literal"> php.ini</code> file, which on Windows using Apache2Triad is found in<code class="literal"> C:\WINDOWS</code>. Search for the lines that read:</p><div class="informalexample"><pre class="programlisting">[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25
; For Win32 only.
sendmail_from = admin@localhost
; For Unix only. You may supply arguments as well (default: "sendmail -t -i").
;sendmail_path =
</pre></div><p>You need to provide PHP with an SMTP server that will work here. If you use Microsoft Outlook on Windows, then you can find which SMTP server you are already using by looking at the servers tab in the<span class="strong"><strong> Tools | Accounts | Properties</strong></span> menu. As well as this, you will probably want something other than<code class="literal"> admin@localhost</code> to be set here; so ensure you make these changes accordingly. For the demo site, the following changes were made:</p><div class="informalexample"><pre class="programlisting">[mail function]
; For Win32 only.
SMTP = <span class="strong"><strong>smtp.dsl.&lt;myserver&gt;.net</strong></span>
smtp_port = 25
; For Win32 only.
sendmail_from = <span class="strong"><strong>staff@contechst.com</strong></span>
; For Unix only. You may supply arguments as well (default: "sendmail -t -i").
;sendmail_path =
</pre></div><p>Obviously, you must have access to a working SMTP server—if you don't have a server to work off, then you can't send emails from your site. This is not a massive problem for the meantime, and certainly, your live site will be able to send mails even if you can't from your development machine.<a class="indexterm" id="id68"/>
</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>In order for these settings to take effect you must also remember to restart the Apache server.</p></div></div><p>You can restart Apache by double-clicking the Apache icon in the process tray (bottom right-hand side of your screen) and selecting<span class="strong"><strong> Restart</strong></span> in the menu. You can also access the server through the<span class="strong"><strong> Start</strong></span> menu. Once this is done, you can continue with Drupal as per normal.</p></div><div class="section" title="Creating an Administrative User"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec02"/>Creating an Administrative User</h2></div></div></div><p>As mentioned on the default Drupal page, you need to click the<span class="strong"><strong> create the first account</strong></span> link in order to get the ball rolling. This will bring up the registration page, which you can fill in appropriately. Once you click<span class="strong"><strong> Create new account</strong></span>, Drupal will automatically attempt to send a welcome email (if you receive one, then you know your SMTP setting is working) as well as print out a message as shown here:<a class="indexterm" id="id69"/>
</p><div class="mediaobject"><img alt="Creating an Administrative User" src="graphics/1800_02_15.jpg"/></div><p>Notice that not only has an email been successfully sent to the address I stipulated in the registration process, but the email comes<span class="emphasis"><em> from</em></span> the address I stipulated in the<code class="literal"> php.ini</code> file a little earlier.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>If you don't have an internet connection, you will still be able to set up your Drupal site but you won't be able to send and receive emails using a third-party STMP server as shown here.</p></div></div><p>So far so good! The next step is to enter your new password into the website—remember to choose something slightly more memorable than the one that is currently assigned. Once you have done that, simply click<span class="strong"><strong> Submit</strong></span> at the bottom of the page to continue—you might wish to take a look over some of the other settings that are there and make any quick changes (such as adding a<span class="strong"><strong> Signature</strong></span> or changing your<span class="strong"><strong> Time Zone)</strong></span> first.<a class="indexterm" id="id70"/>
</p></div><div class="section" title="Using the Administrative Panel"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec03"/>Using the Administrative Panel</h2></div></div></div><p>It's time to a have a quick bit of fun before we get to the more serious matter of building our site in the next chapter. Once you are finished with editing your user settings, click the<span class="strong"><strong> administer</strong></span> link, which is shown in the block on the left-hand side of your page. This will bring up a page like this (with the<span class="strong"><strong> modules</strong></span> option selected):<a class="indexterm" id="id71"/>
</p><div class="mediaobject"><img alt="Using the Administrative Panel" src="graphics/1800_02_16.jpg"/></div><p>Before we actually play with anything, it is worthwhile listing what each option does, because it can become a bit confusing later on when you get into the thick of things—mainly due to the large number of menu items available, and not because the site is particularly hard to administer. Make special note of the following:</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>The sections available under the<span class="strong"><strong> administer</strong></span> menu item may change depending on the modules you enable, or what contributions you add, or even what permissions users are assigned.</p></div></div><p>What this means is that you should always ensure you check what new options are available in any given section after you have added and enabled a new module. As you should also be aware that not all users will have the same<span class="strong"><strong> administer</strong></span> options available to them, you need to check whether they have sufficient powers to complete their intended tasks. We will look at all this in more detail later; so there is no need to get ahead of ourselves at this point.</p><p>The following list outlines the core options:<a class="indexterm" id="id72"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>access control:</strong></span> Allows you to set permissions to control what users can do on your site.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>blocks:</strong></span> Enabled blocks can be displayed in a variety of places on your site. Blocks can contain all sorts of information such as who's online or the latest forum posts.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>categories:</strong></span> Allows administrators to classify and categorize content on the site. Drupal has one of the most sophisticated classification systems in the form of the taxonomy module.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>comments:</strong></span> Allows for the administration of comments that are added to the site. Comments are not quite the same as other content types, but are instead<span class="emphasis"><em> attached</em></span> to other content types.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>content:</strong></span> Allows for the administration of any and all posts to the site. It provides a variety of filters for cutting down results in order to readily find specific content as well as update options.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>input formats:</strong></span> There are a number of different ways in which Drupal can view content from users. This ranges from filtered HTML all the way through to full‑blown PHP code.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>logs:</strong></span> Enables the recording of a variety of events such as usage information, or warnings, and errors that can then be used during the routine maintenance of a healthy site.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>menus:</strong></span> Allows for creation and manipulation of navigational structures. From here it is possible to enable or disable menu items, create new ones, and work with primary links too.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>modules:</strong></span> Provide Drupal's functionality (there are many core modules that come with the standard distribution of Drupal, and there are many contributed modules that need to be downloaded and installed) and can be enabled or disabled depending on the requirements of the site.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>settings:</strong></span> Provides a convenient page from which to implement the general configuration of the site.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>themes:</strong></span> Controls the look and feel of your site. There are a variety of options available by default. Remember that it is also possible to create your own entirely new theme provided you know a bit about PHP, HTML, and CSS.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>users:</strong></span> From here you can add, remove, or edit any and all users on your site.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>help:</strong></span> Contains links to the Drupal handbook as well as help topics for a variety of modules, followed by a short glossary of important terms.</li></ul></div><p>Let's actually make some modifications to the site to see what we can do. Go ahead and enable the<span class="strong"><strong> blog</strong></span> module under the<span class="strong"><strong> modules</strong></span> section of the<span class="strong"><strong> administer</strong></span> menu item by checking the relevant checkbox under the<span class="strong"><strong> Enabled</strong></span> heading and click<span class="strong"><strong> Save configuration</strong></span>. You should notice immediately that there are a few changes to the page that loads up, in the form of blog-related menu items—look for the new<span class="strong"><strong> my blog</strong></span> link at the top of the menu. Before we see how the actual site is changed, go to<span class="strong"><strong> blocks</strong></span> (also under<span class="strong"><strong> administer)</strong></span> and do the same thing there, ensuring you enable a few blocks and select<span class="strong"><strong> right sidebar</strong></span> under the<span class="strong"><strong> Placement</strong></span> drop-down list.<a class="indexterm" id="id73"/>
</p><p>Don't worry about what specific changes to make for now. We are simply taking a quick look at how easy it is to do stuff using the administration tool. The following section will look at the effects of some of these changes via a sample Drupal page screenshot.</p></div><div class="section" title="A Sample Drupal Page"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec04"/>A Sample Drupal Page</h2></div></div></div><p>Once you are done making modifications, click<span class="strong"><strong> create content</strong></span> in the navigation block on the left‑hand side and then click<span class="strong"><strong> blog entry</strong></span>. Once the blog page has been brought up, simply add some content, whatever you want, and click<span class="strong"><strong> Preview</strong></span> to see how it will turn out, and if you are happy, click<span class="strong"><strong> Submit</strong></span>. If you now log out, you will be faced with your new default page. Let's take a brief look over it to discuss some of the main features:<a class="indexterm" id="id74"/>
</p><div class="mediaobject"><img alt="A Sample Drupal Page" src="graphics/1800_02_17.jpg"/></div><p>When someone first arrives at your site, as it stands at the moment, they will likely be greeted by something as shown in the previous screenshot. (As you can tell, I have enabled a whole bunch of new modules and set some blocks to display on the right-hand side of the page. As well as this, you can see that I entered a greeting message as my first blog entry, which is dutifully displayed by Drupal on the homepage instead of the initial instructions.) There are several main areas of interest that are highlighted in this screenshot and we should look over them here in order to get a feel for what to expect in the chapters to come:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">The URL denotes which page is being visited, and can be modified to provide search-engine-friendly formats.</li><li class="listitem">The page header contains your site's logo and slogan, among other things. It also provides a link to the homepage and is completely configurable.</li><li class="listitem">The search tool allows users to enter search terms in order to locate content within the Drupal site.</li><li class="listitem">Left and right sidebars contain blocks, which are effectively containers of information, as well as the navigational links. In this case, pretty much everything has been enabled—which is why there are so many individual blocks down each side of the page. Notice too that we now have blocks on the right-hand side because we set some of them to appear in the right sidebar. Blocks can also appear in other parts of the page, and we will work with these later on anyway.</li><li class="listitem">All content in Drupal is contained within nodes such as the one shown here. This doesn't have to be a blog entry—it could be a poll or forum post. Naturally, the method of display is customizable, as we will also see in due course.</li><li class="listitem">Users can register and log in to the site to create posts or view content. Permissions and roles can be assigned to users in order to allow them to perform various administrative tasks and so on.<a class="indexterm" id="id75"/></li></ol></div><p>What isn't shown in this screenshot (because the page was just too long) is the footer area. This section can also hold blocks and other content, and like the rest of the site, is fully customizable.</p><p>That concludes our short tour of Drupal. In the next chapter, and the chapters that follow, we will begin harnessing the various aspects of Drupal's core functionality (as well as enlist the help of some contributions) and mould it into the site we wish to create. In the meantime, you are encouraged to play around with the site as much as possible in order to get a feel for what you can do.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec07"/>Summary</h1></div></div></div><p>In order to provide you with the most efficient method of getting everything done, this chapter covered the installation of PHP, MySQL, and Apache in a package called Apache2Triad. As a result, you now have the foundation from which to build a live site in the coming days and weeks. Having taken the time to set up a working development environment, you can be assured that you have prevented any needless waste of time, and possibly bad publicity, by not working directly on a live site.</p><p>Now that you have the facilities provided by Apache, PHP, and MySQL installed on your own machine, you are free to experiment and play with your site as much as you want in order to learn your way around. Of course, installation of the requisite technologies is not the end of the story. We also learned how to obtain and install Drupal itself—hopefully, you found that quite easy!</p><p>Following this, we noted that from time to time it is important to upgrade Drupal; so we discussed how to implement an upgrade in order to cover this. No doubt everything went smoothly but you can't always guarantee this, so we took the time to also explore some of the more common problems associated with the installation, and set out a process for solving problems in general.</p><p>Finally, we became acquainted with Drupal itself by creating an administrative user and posting some content to the site. We took a bit of time to modify the site quite drastically by enabling a module or two in order to observe the effect it had on the live site. Using this, we then talked about the major elements of an average Drupal page.</p><p>If you have gotten this far, then congratulations, you are ready to begin developing your site! Its time to get your hands dirty…</p></div></body></html>