<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Setting Up a Development Environment"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Setting Up a Development Environment</h1></div></div></div><p>Laravel is more than just a framework: a whole ecosystem and toolset has been developed around it to make building PHP applications faster and more enjoyable. These tools are entirely opt-in and the knowledge of them is not necessary to use and build projects in Laravel, but they do go hand-in-hand with the framework, so it's worth covering.</p><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Meeting Composer, a dependency manager</li><li class="listitem" style="list-style-type: disc">Introduction to Homestead, and using it to manage Laravel projects</li></ul></div><div class="section" title="Meeting Composer"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Meeting Composer</h1></div></div></div><p>In the previous <a id="id29" class="indexterm"/>chapter, you discovered that Laravel is built on top of several third-party packages. Rather than including these external dependencies in its own source code, Laravel uses a dependency manager called <span class="strong"><strong>Composer</strong></span> to download them and keep them up to date. Since Laravel is made up of multiple packages, they too are downloaded and installed each time you create a new Laravel project.</p><p>Strongly inspired by popular dependency managers in other languages, such as Ruby's Bundler or Node.js's <span class="strong"><strong>Node Package Manager</strong></span> (<span class="strong"><strong>npm</strong></span>), Composer brings these features to PHP and has <a id="id30" class="indexterm"/>quickly become the de facto dependency manager in PHP.</p><p>A few <a id="id31" class="indexterm"/>years ago, you may have used <span class="strong"><strong>PHP Extension and Application Repository</strong></span> (<span class="strong"><strong>PEAR</strong></span>) to download libraries. PEAR differs from Composer, in that PEAR would install packages on a system-level basis, whereas a dependency manager, such as Composer, installs them on a project-level basis. With PEAR, you could only have one version of a package installed on a system. Composer allows you to use different versions of the same package in different applications, even if they reside on the same system.</p></div></div>
<div class="section" title="Working with the command line"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Working with the command line</h1></div></div></div><p>If you are <a id="id32" class="indexterm"/>just getting started with web development, you might not be completely familiar with the <span class="strong"><strong>command-line interface</strong></span> (<span class="strong"><strong>CLI</strong></span>). Working with Composer, virtual machines, and Homestead, and later on with <span class="strong"><strong>Artisan</strong></span>, Laravel's CLI utility, will require some interaction with it.</p><p>Here is how you can start with CLI:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">On Windows, look for the <span class="strong"><strong>Command Prompt</strong></span> program. If you cannot find it, just navigate to <span class="strong"><strong>Start</strong></span> | <span class="strong"><strong>Run</strong></span> and type in <code class="literal">cmd.exe</code>.</li><li class="listitem">On Mac OS X, CLI is called <span class="strong"><strong>Terminal</strong></span>, and it can be found at <code class="literal">/Applications/Utilities</code>.</li><li class="listitem">On Linux, depending on your distribution of Linux, it will be called <span class="strong"><strong>Terminal</strong></span> or <span class="strong"><strong>Konsole</strong></span>, but if you are running Linux, you are probably already familiar with it.</li></ol></div><p>You do not need to have any advanced command-line skills to get through this book and build applications with Laravel. You will, however, need to be able to navigate to the right directory in your file system before running commands. To do this, just enter the <code class="literal">cd</code> command, followed by the path to your code directory.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>On most systems, you can also just enter <code class="literal">cd</code>, followed by a space, and then drag and drop the directory into the terminal, as shown here:</p><div class="informalexample"><pre class="programlisting">
<code class="literal">$ cd /path/to/your/code/directory</code>
</pre></div></div></div><p>Otherwise, you can run the following command line on Windows:</p><p>
<code class="literal">&gt; cd C:\path\to\your\code\directory</code>
</p><p>If the path contains spaces, then be sure to include it in double quotes to ensure spaces are escaped:</p><p>
<code class="literal">&gt; cd "C:\path\to\your\Laravel Projects"</code>
</p><p>In the rest of this book, unless the example is specific to Windows, we will always use the <code class="literal">$</code> character to denote a shell command and use slashes as directory separators. Make sure you adapt the command accordingly, if you are running Windows.</p></div>
<div class="section" title="Meet Homestead"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Meet Homestead</h1></div></div></div><p>If you wanted to <a id="id33" class="indexterm"/>develop PHP applications on your personal computer, you needed to have a web server installed and running locally. PHP is installed to interpret your scripts, and other utilities your website may need, such as working with a database. Your website or web application may even have a requirement for other services such as <span class="strong"><strong>Memcached</strong></span> or <span class="strong"><strong>Redis</strong></span>, which are popular caching systems. This saw the rise of utilities such as <a id="id34" class="indexterm"/>
<span class="strong"><strong>WampServer</strong></span> and <span class="strong"><strong>MAMP</strong></span> to create environments for <a id="id35" class="indexterm"/>developing dynamic websites without getting connected to the Internet, but these required configuring.</p><p>Building on from installed environments like these, the recommended practice for developing dynamic <a id="id36" class="indexterm"/>websites and applications is to use <span class="strong"><strong>virtual machines</strong></span> (<span class="strong"><strong>VMs</strong></span>). These allow you to emulate your production web server's setup on your local machine. You can also use differently configured VMs for different projects—with a WAMP- or MAMP-like setup, every project had to use the same version of PHP, MySQL, and anything else you installed.</p><p>The creators of Laravel <a id="id37" class="indexterm"/>have created an official Vagrant box called <span class="strong"><strong>Homestead</strong></span>. <span class="strong"><strong>Vagrant</strong></span> is software that allows you to create virtual development environments on your personal computer. You can install Homestead and start creating Laravel projects right away. And if you don't need it any more, you can just remove it from your machine, without anything else being affected. Best of all, if you are currently using a globally installed development environment such as WAMP or MAMP, Homestead won't conflict with it.</p><div class="section" title="Installing Homestead"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec17"/>Installing Homestead</h2></div></div></div><p>Homestead is a <a id="id38" class="indexterm"/>Vagrant-based VM. Therefore, before using it you <a id="id39" class="indexterm"/>will need to install two utilities:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>VirtualBox</strong></span> (<a class="ulink" href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a>)</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Vagrant</strong></span> (<a class="ulink" href="http://www.vagrantup.com/downloads.html">http://www.vagrantup.com/downloads.html</a>)</li></ul></div><p>Both have <a id="id40" class="indexterm"/>installers for Windows, Mac OS X, and Linux that will guide you through the installation process. To install Homestead, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">One of the best things about Homestead is that it is hosted on Packagist. This means you can install it via Composer by using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt; $ composer global require "laravel/homestead=~2.0"</strong></span>
</pre></div></li><li class="listitem">Once downloaded, you need to initialize the VM using the following command (you may need to add Homestead to your path first, if you are using Windows):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt; $ homestead init</strong></span>
</pre></div></li><li class="listitem">This will create a configuration file that you can edit to point to your projects, as well as create any databases you may need. To edit this file, you can run the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt; $ homestead edit</strong></span>
</pre></div></li><li class="listitem">The file will open in your default text editor. When it does, you will see the file is organized into sections. To get up and running, the two sections of most importance are the <code class="literal">folders</code> section and the <code class="literal">sites</code> section:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">folders</code>: This specifies the directory that you want to be shared on the VM.</li><li class="listitem" style="list-style-type: disc"><code class="literal">sites</code>: This <a id="id41" class="indexterm"/>allows you to map a domain to a folder on the Homestead VM, similar to Apache Virtual Hosts.</li></ul></div><div class="mediaobject"><img src="graphics/B04308_02_01.jpg" alt="Installing Homestead"/></div></li><li class="listitem">Once you have configured your shared folders and sites, you can boot the VM with the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt; $ homestead up</strong></span>
</pre></div></li><li class="listitem">Finally, you need to add the VM's IP address to your computer's hosts file. The location of this file differs, depending on the platform you're using.<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">On Windows, it is located at <code class="literal">C:\Windows\System32\Drivers\etc\hosts</code>.</li><li class="listitem" style="list-style-type: disc">On a *nix system (such as Mac OS X and Linux), it can be found at <code class="literal">/etc/hosts</code>.</li></ul></div></li><li class="listitem">Usually, you would need to be an administrator to edit this file. On Mac OS X and Linux, you can open the file with elevated permissions by using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt; $ sudo open /etc/hosts</strong></span>
</pre></div></li><li class="listitem">You might be <a id="id42" class="indexterm"/>prompted for an administrator's password. In your hosts file, add the following line to the bottom:<div class="informalexample"><pre class="programlisting">192.168.10.10  homesteap.app</pre></div><div class="mediaobject"><img src="graphics/B04308_02_02.jpg" alt="Installing Homestead"/></div></li><li class="listitem">Now, if in a web browser you try to visit <code class="literal">http://homestead.app</code>, instead of your browser trying to find a website with the domain, it will try to find the website on the machine with the specified IP address. In this instance, the IP address will belong to your Homestead VM and serve the site you've configured for that <a id="id43" class="indexterm"/>domain in your configuration file.</li></ol></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>For more information on Homestead and advanced configuration, you can view the official documentation at <a class="ulink" href="http://laravel.com/docs/master/homestead">http://laravel.com/docs/master/homestead</a>.</p></div></div></div><div class="section" title="Everyday usage of Homestead"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec18"/>Everyday usage of Homestead</h2></div></div></div><p>There are various <a id="id44" class="indexterm"/>commands that you can use to interact with your Homestead virtual machine. For example, if the virtual machine is running, how do you stop it? There are two ways.</p><p>The first method is with the <code class="literal">$ homestead suspend</code> command. This will save the current state of your VM, and allow you to <code class="literal">$ homestead resume</code> at a later point in time. Alternatively, you can issue the <code class="literal">$ homestead halt</code> command, which will shut down the virtual machine and discard anything in memory. You can think of the differences as either putting the virtual machine to sleep, or completely shutting it down. To bring a halted VM back, you can simply run the <code class="literal">$ homestead up</code> command again.</p><p>You can also interact and run commands on the virtual machine via the command line. You can SSH into Homestead just like you would an external server. Instead of having to remember the virtual machine's host name and your credentials though, there's a handy <code class="literal">$ homestead ssh</code> command that will connect to the machine and then place you in a command prompt ready and waiting. If you are using Windows, there are various tools to execute SSH commands, such as <span class="strong"><strong>PuTTY</strong></span>.</p><div class="section" title="Adding additional websites"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec02"/>Adding additional websites</h3></div></div></div><p>One of <a id="id45" class="indexterm"/>Homestead's benefits is that you can host more than one application on it. This means you can run as many Laravel applications on it as you want (subject to constraints such as disk space). The process for each site is to map the directory between your host machine and the virtual machine, and to configure nginx to look in this directory when a specific domain name is requested. To do this by hand would mean editing various configuration files, which would become tedious if we needed to do this on a regular basis. Thankfully, Homestead comes with a handy script to make adding new sites a breeze.</p><p>You first need to start a new SSH session as mentioned before. Then, run the following script:</p><div class="informalexample"><pre class="programlisting">serve example.app /home/vagrant/Code/example.app/public</pre></div><p>Replace <code class="literal">example.app</code> <a id="id46" class="indexterm"/>with the host name you want to use. Then, add a new line to your hosts file and you are good to go!</p></div><div class="section" title="Connecting to your databases"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec03"/>Connecting to your databases</h3></div></div></div><p>Homestead runs a <a id="id47" class="indexterm"/>MySQL instance, which contains the data for all of your configured applications. Laravel exposes the port of the MySQL server via port forwarding, which means you can connect to it from your host machine by using a database management tool such as <span class="strong"><strong>Navicat</strong></span>, <span class="strong"><strong>Sequel Pro</strong></span>, or <span class="strong"><strong>MySQL Workbench</strong></span>. To connect, all you have to do is specify the following parameters:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Host</strong></span>: 127.0.0.1</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Port</strong></span>: 33060</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Username</strong></span>: homestead</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Password</strong></span>: secret</li></ul></div><p>Once connected, you can then browse all of the databases on the Homestead virtual machine, tables, and data, just as you would if the MySQL server was installed on your machine.</p><p>Homestead also ships with a <span class="strong"><strong>PostgreSQL</strong></span> database server. Connecting is the same as with the MySQL database server, but you instead use port <code class="literal">54320</code>.</p></div></div></div>
<div class="section" title="Creating a new Laravel application"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Creating a new Laravel application</h1></div></div></div><p>With Homestead <a id="id48" class="indexterm"/>set up, you now have a development environment to build Laravel applications that can easily be removed at a later date without disturbing your machine. You must be itching to get started with Laravel, so here we go!</p><p>In the next chapter, we will go through building a simple application in Laravel from start to finish. So now, we will prepare this project in Homestead:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, check whether Homestead is running by using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt; $ homestead status</strong></span>
</pre></div></li><li class="listitem">If the status is anything other than running, bring it up with the <code class="literal">homestead reload</code> command. We now need to add our site. It will be a browsable database of cat profiles, so let's call it "Furbook" and give it the fictional domain name of <code class="literal">furbook.com</code>.</li><li class="listitem">We can set this up in Homestead by editing the configuration file and adding the following mappings:<div class="informalexample"><pre class="programlisting">sites:
    - map: dev.furbook.com
      to: /home/vagrant/Code/furbook.com/public
databases:
    - furbook</pre></div></li><li class="listitem">Run <code class="literal">$ homestead reload</code>, which should reprovision the sites and also create a new, empty database.</li><li class="listitem">Now with our workspace prepared, we need to actually create a new Laravel project. To do this, we need to SSH into our running VM. Homestead makes this incredibly simple:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt; $ homestead ssh</strong></span>
</pre></div></li><li class="listitem">This will create a <a id="id49" class="indexterm"/>new SSH session and log us in to the running Homestead VM instance. We can now run a Composer command to create a brand new Laravel project as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>$ cd /home/vagrant/Code/furbook.com</strong></span>
<span class="strong"><strong>$ composer create-project laravel/laravel . --prefer-dist</strong></span>
</pre></div></li></ol></div><p>This will create a new Laravel skeleton project, as well as download all of the libraries that make up the Laravel framework.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Summary</h1></div></div></div><p>In this chapter, we have begun working with the command line. We've installed Composer and looked at how a dependency manager such as Composer aids development by utilizing prebuilt packages in our projects (of which the Laravel framework is one). We've looked at the concept of virtual machines for developing in, and taken a look and installed the official Laravel VM: Homestead.</p><p>The next chapter is where the fun begins! Now that we have a complete development environment set up and a fresh Laravel application created, we will go through the different steps involved in creating a complete Laravel application.</p></div></body></html>