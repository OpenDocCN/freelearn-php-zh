<html><head></head><body>
<div id="_idContainer004">
<h1 id="_idParaDest-5"><a id="_idTextAnchor004"/><span class="koboSpan" id="kobo.1.1">Preface</span></h1>
<p><span class="koboSpan" id="kobo.2.1">This book provides a 360-degree overview of what it takes to design and build a performant application with Laravel Octane, why you should, and how to do it. </span><span class="koboSpan" id="kobo.2.2">This book also covers the different tools used by Laravel Octane, such as Swoole and RoadRunner, and lists and explains the various features and differentiating elements. </span><span class="koboSpan" id="kobo.2.3">But the most important thing is that it will enable you to understand why and when to use Swoole </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">or RoadRunner.</span></span></p>
<h1 id="_idParaDest-6"><a id="_idTextAnchor005"/><span class="koboSpan" id="kobo.4.1">Who this book is for</span></h1>
<p><span class="koboSpan" id="kobo.5.1">This book is for those Laravel developers who already know the fundamentals of the framework, such as routing mechanisms, controllers, services, and models. </span><span class="koboSpan" id="kobo.5.2">It is meant for those developers who would like to design their applications in a more scalable way and make them </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">more performant.</span></span></p>
<h1 id="_idParaDest-7"><a id="_idTextAnchor006"/><span class="koboSpan" id="kobo.7.1">What this book covers</span></h1>
<p><a href="B17728_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.8.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.9.1">,</span><em class="italic"><span class="koboSpan" id="kobo.10.1"> Understanding the Laravel Web Application Architecture</span></em><span class="koboSpan" id="kobo.11.1">, is where Laravel Octane introduces new features, but more importantly a new way of thinking about how to design high-performance </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">Laravel applications.</span></span></p>
<p><a href="B17728_02.xhtml#_idTextAnchor036"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.13.1">Chapter 2</span></em></span></a><span class="koboSpan" id="kobo.14.1">, </span><em class="italic"><span class="koboSpan" id="kobo.15.1">Configuring the RoadRunner Application Server</span></em><span class="koboSpan" id="kobo.16.1">, shows us a scenario where Laravel Octane is based on the RoadRunner application server. </span><span class="koboSpan" id="kobo.16.2">RoadRunner is a very fast and effective application server that is easy to install. </span><span class="koboSpan" id="kobo.16.3">Because of its simplicity, it allows the user to approach Laravel Octane easily </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">and straightforwardly.</span></span></p>
<p><a href="B17728_03.xhtml#_idTextAnchor048"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.18.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.19.1">, </span><em class="italic"><span class="koboSpan" id="kobo.20.1">Configuring the Swoole Application Server</span></em><span class="koboSpan" id="kobo.21.1">, shows us a scenario where Laravel Octane is based on the Swoole application server. </span><span class="koboSpan" id="kobo.21.2">Running Swoole as an application server allows the developer to use some advanced features, such as managing multiple workers and concurrent tasks, bootstrapping the application more efficiently, fast caching, and sharing data among workers. </span><span class="koboSpan" id="kobo.21.3">Laravel Octane uses Swoole, so it is important to have clear ideas about the opportunities that arise from using these </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">application servers.</span></span></p>
<p><a href="B17728_04.xhtml#_idTextAnchor065"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.23.1">Chapter 4</span></em></span></a><span class="koboSpan" id="kobo.24.1">, </span><em class="italic"><span class="koboSpan" id="kobo.25.1">Building a Laravel Octane Application</span></em><span class="koboSpan" id="kobo.26.1">, teaches us how to build an application with practical examples using features provided by the Swoole </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">application server.</span></span></p>
<p><a href="B17728_05.xhtml#_idTextAnchor093"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.28.1">Chapter 5</span></em></span></a><span class="koboSpan" id="kobo.29.1">, </span><em class="italic"><span class="koboSpan" id="kobo.30.1">Reducing Latency and Managing Data with an Asynchronous Approach</span></em><span class="koboSpan" id="kobo.31.1">, teaches us that, once the developer has sped up the bootstrapping of the framework and has removed bottlenecks on the request side, they have to reduce latency in other parts of the application. </span><span class="koboSpan" id="kobo.31.2">The chapter introduces useful techniques to reduce latency in executing tasks and </span><span class="No-Break"><span class="koboSpan" id="kobo.32.1">managing data.</span></span></p>
<p><a href="B17728_06.xhtml#_idTextAnchor107"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.33.1">Chapter 6</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.34.1">,</span></em> <em class="italic"><span class="koboSpan" id="kobo.35.1">Using Queues to Apply the Asynchronous Approach in Your Application</span></em><span class="koboSpan" id="kobo.36.1">, teaches us that in addition to the various tools available with application servers, we can add extra components to our application architecture. </span><span class="koboSpan" id="kobo.36.2">One of the main tools to go alongside application servers for greater scalability of a solution is queuing mechanisms. </span><span class="koboSpan" id="kobo.36.3">This chapter shows what the benefits are of adding a queuing mechanism to </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">our application.</span></span></p>
<p><a href="B17728_07.xhtml#_idTextAnchor121"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.38.1">Chapter 7</span></em></span></a><span class="koboSpan" id="kobo.39.1">, </span><em class="italic"><span class="koboSpan" id="kobo.40.1">Configuring the Laravel Octane Application for the Production Environment</span></em><span class="koboSpan" id="kobo.41.1">, discusses going to production and covers environment-specific configurations, deploying an application to an application server, and fine-tuning the configuration of nginx as a reverse proxy </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">for Swoole.</span></span></p>
<h1 id="_idParaDest-8"><a id="_idTextAnchor007"/><span class="koboSpan" id="kobo.43.1">To get the most out of this book</span></h1>
<p><span class="koboSpan" id="kobo.44.1">You will need PHP 8.0 or above installed on your computer. </span><span class="koboSpan" id="kobo.44.2">All code examples have been tested using PHP 8.1 on macOS </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">and GNU/Linux.</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.46.1">Software/hardware covered in </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.47.1">the book</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold"><span class="koboSpan" id="kobo.48.1">Operating </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.49.1">system requirements</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.50.1">Laravel 9</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.51.1">Windows, macOS, </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">or Linux</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.53.1">PHP 8+</span></span></p>
</td>
<td class="No-Table-Style"/>
</tr>
</tbody>
</table>
<p><span class="koboSpan" id="kobo.54.1">If you don’t want to have PHP installed on your local machine and you are familiar with the Docker setup, you could use the Docker images provided by Laravel Sail. </span><span class="koboSpan" id="kobo.54.2">The book explains both local installation and installation via Docker images for the setup of the application servers and the </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">modules (Swoole/OpenSwoole).</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.56.1">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book’s GitHub repository (a link is available in the next section). </span><span class="koboSpan" id="kobo.56.2">Doing so will help you avoid any potential errors related to the copying and pasting </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.57.1">of code.</span></strong></span></p>
<h1 id="_idParaDest-9"><a id="_idTextAnchor008"/><span class="koboSpan" id="kobo.58.1">Download the example code files</span></h1>
<p><span class="koboSpan" id="kobo.59.1">You can download the example code files for this book from GitHub at </span><a href="https://github.com/PacktPublishing/High-Performance-with-Laravel-Octane"><span class="koboSpan" id="kobo.60.1">https://github.com/PacktPublishing/High-Performance-with-Laravel-Octane</span></a><span class="koboSpan" id="kobo.61.1">. </span><span class="koboSpan" id="kobo.61.2">If there’s an update to the code, it will be updated in the </span><span class="No-Break"><span class="koboSpan" id="kobo.62.1">GitHub repository.</span></span></p>
<h1 id="_idParaDest-10"><a id="_idTextAnchor009"/><span class="koboSpan" id="kobo.63.1">Download the color images </span></h1>
<p><span class="koboSpan" id="kobo.64.1">We also provide a PDF file that has color images of the screenshots and diagrams used in this book. </span><span class="koboSpan" id="kobo.64.2">You can download it </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">here: </span></span><a href="https://packt.link/ZTNyn"><span class="No-Break"><span class="koboSpan" id="kobo.66.1">https://packt.link/ZTNyn</span></span></a></p>
<h1 id="_idParaDest-11"><a id="_idTextAnchor010"/><span class="koboSpan" id="kobo.67.1">Conventions used</span></h1>
<p><span class="koboSpan" id="kobo.68.1">There are a number of text conventions used throughout </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">this book.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.70.1">Code in text</span></strong><span class="koboSpan" id="kobo.71.1">: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. </span><span class="koboSpan" id="kobo.71.2">Here is an example: “From the Symfony world, Laravel includes packages such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.72.1">Symfony/routing</span></strong><span class="koboSpan" id="kobo.73.1"> to manage routing, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.74.1">http-foundation</span></strong><span class="koboSpan" id="kobo.75.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">http-kernel</span></strong><span class="koboSpan" id="kobo.77.1"> to manage </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">HTTP communication.”</span></span></p>
<p><span class="koboSpan" id="kobo.79.1">A block of code is set </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.81.1">
        "nyholm/psr7": "^1.5",
        "spiral/roadrunner": "v2.0"</span></pre>
<p><span class="koboSpan" id="kobo.82.1">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set </span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">in bold:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.84.1">
command=/usr/bin/php -d variables_order=EGPCS /var/www/html/artisan octane:start --server=swoole --host=0.0.0.0 --port=80 </span><strong class="bold"><span class="koboSpan" id="kobo.85.1">--watch</span></strong></pre>
<p><span class="koboSpan" id="kobo.86.1">Any command-line input or output is written </span><span class="No-Break"><span class="koboSpan" id="kobo.87.1">as follows:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.88.1">
npm install --save-dev chokidar</span></pre>
<p><strong class="bold"><span class="koboSpan" id="kobo.89.1">Bold</span></strong><span class="koboSpan" id="kobo.90.1">: Indicates a new term, an important word, or words that you see onscreen. </span><span class="koboSpan" id="kobo.90.2">For instance, words in menus or dialog boxes appear in </span><strong class="bold"><span class="koboSpan" id="kobo.91.1">bold</span></strong><span class="koboSpan" id="kobo.92.1">. </span><span class="koboSpan" id="kobo.92.2">Here is an example: “Once everything is fine, you will see </span><strong class="bold"><span class="koboSpan" id="kobo.93.1">Table created!</span></strong><span class="koboSpan" id="kobo.94.1"> on your web page. </span><span class="koboSpan" id="kobo.94.2">This means that the rows were created in the </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">right way.”</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.96.1">Tips or important notes</span></p>
<p class="callout"><span class="koboSpan" id="kobo.97.1">Appear like this.</span></p>
<h1 id="_idParaDest-12"><a id="_idTextAnchor011"/><span class="koboSpan" id="kobo.98.1">Get in touch</span></h1>
<p><span class="koboSpan" id="kobo.99.1">Feedback from our readers is </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">always welcome.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.101.1">General feedback</span></strong><span class="koboSpan" id="kobo.102.1">: If you have questions about any aspect of this book, email us at </span><a href="mailto:customercare@packtpub.com"><span class="koboSpan" id="kobo.103.1">customercare@packtpub.com</span></a><span class="koboSpan" id="kobo.104.1"> and mention the book title in the subject of </span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">your message.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.106.1">Errata</span></strong><span class="koboSpan" id="kobo.107.1">: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. </span><span class="koboSpan" id="kobo.107.2">If you have found a mistake in this book, we would be grateful if you would report this to us. </span><span class="koboSpan" id="kobo.107.3">Please visit </span><a href="http://www.packtpub.com/support/errata"><span class="koboSpan" id="kobo.108.1">www.packtpub.com/support/errata</span></a><span class="koboSpan" id="kobo.109.1"> and fill in </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">the form.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.111.1">Piracy</span></strong><span class="koboSpan" id="kobo.112.1">: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. </span><span class="koboSpan" id="kobo.112.2">Please contact us at </span><a href="mailto:copyright@packt.com"><span class="koboSpan" id="kobo.113.1">copyright@packt.com</span></a><span class="koboSpan" id="kobo.114.1"> with a link to </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">the material.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.116.1">If you are interested in becoming an author</span></strong><span class="koboSpan" id="kobo.117.1">: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">visit </span></span><a href="http://authors.packtpub.com"><span class="No-Break"><span class="koboSpan" id="kobo.119.1">authors.packtpub.com</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.120.1">.</span></span></p>
<h1 id="_idParaDest-13"><a id="_idTextAnchor012"/><span class="koboSpan" id="kobo.121.1">Share Your Thoughts</span></h1>
<p><span class="koboSpan" id="kobo.122.1">Once you’ve read </span><em class="italic"><span class="koboSpan" id="kobo.123.1">High-Performance Laravel Development with Octane</span></em><span class="koboSpan" id="kobo.124.1">, we’d love to hear your thoughts! </span><span class="koboSpan" id="kobo.124.2">Please </span><a href="https://packt.link/r/1801819408"><span class="koboSpan" id="kobo.125.1">click here to go straight to the Amazon review page</span></a><span class="hidden"> </span><span class="koboSpan" id="kobo.126.1">for this book and share </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">your feedback.</span></span></p>
<p><span class="koboSpan" id="kobo.128.1">Your review is important to us and the tech community and will help us make sure we’re delivering excellent </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">quality content.</span></span></p>
<h1 id="_idParaDest-14"><a id="_idTextAnchor013"/><span class="koboSpan" id="kobo.130.1">Download a free PDF copy of this book</span></h1>
<p><span class="koboSpan" id="kobo.131.1">Thanks for purchasing </span><span class="No-Break"><span class="koboSpan" id="kobo.132.1">this book!</span></span></p>
<p><span class="koboSpan" id="kobo.133.1">Do you like to read on the go but are unable to carry your print books everywhere? </span><span class="koboSpan" id="kobo.133.2">Is your eBook purchase not compatible with the device of </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">your choice?</span></span></p>
<p><span class="koboSpan" id="kobo.135.1">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">no cost.</span></span></p>
<p><span class="koboSpan" id="kobo.137.1">Read anywhere, any place, on any device. </span><span class="koboSpan" id="kobo.137.2">Search, copy, and paste code from your favorite technical books directly into </span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">your application.</span></span></p>
<p><span class="koboSpan" id="kobo.139.1">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">inbox daily</span></span></p>
<p><span class="koboSpan" id="kobo.141.1">Follow these simple steps to get </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">the benefits:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.143.1">Scan the QR code or visit the link below</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer003">
<span class="koboSpan" id="kobo.144.1"><img alt="" src="image/B17728_QR_Free_PDF.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a href="https://packt.link/free-ebook/9781801819404"><span class="koboSpan" id="kobo.145.1">https://packt.link/free-ebook/9781801819404</span></a></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.146.1">Submit your proof of purchase</span></li>
<li><span class="koboSpan" id="kobo.147.1">That’s it! </span><span class="koboSpan" id="kobo.147.2">We’ll send your free PDF and other benefits to your email directly</span></li>
</ol>
</div>


<div class="Content" id="_idContainer005">
<h1 id="_idParaDest-15"><a id="_idTextAnchor014"/><span class="koboSpan" id="kobo.1.1">Part 1: The Architecture</span></h1>
<p><span class="koboSpan" id="kobo.2.1">The objective of this part is to familiarize you with the application server architecture for PHP and show how the application server shares resources across the workers to serve HTTP requests. </span></p>
<p><span class="koboSpan" id="kobo.3.1">This part comprises the </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">following chapters:</span></span></p>
<ul>
<li><a href="B17728_01.xhtml#_idTextAnchor015"><em class="italic"><span class="koboSpan" id="kobo.5.1">Chapter 1</span></em></a><span class="koboSpan" id="kobo.6.1">, </span><em class="italic"><span class="koboSpan" id="kobo.7.1">Understanding the Laravel Web Application Architecture</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer006">
</div>
</div>
<div>
<div id="_idContainer007">
</div>
</div>
</body></html>