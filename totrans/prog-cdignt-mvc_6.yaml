- en: Chapter 6. Models
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter covers the CI models, their role, and their usage with several
    code examples of web applications. The model is responsible for handling the database
    it stores and retrieves database objects used by the application from a database
    and contains the logic implemented by the application.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: Much of the data that is part of the persistent state of the application (whether
    that persistent state is stored in files or databases) should reside in the model
    objects after the data is loaded into the application. Because the model objects
    represent knowledge and expertise related to a specific topic, they can be reused
    in the application.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'The model represents the application data services and can serve the application
    logic (commonly referred to as business logic), as well. Usually, the model is
    responsible for the following operations:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: '**Adding, modifying, deleting, and searching the application database objects**:
    Generally, this includes the database operations, but implementing the same operations
    and invoking external web services or APIs is not unusual at all.'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Encapsulating the application logic**: For example, the model can make data
    validations before storing a data object and can alert the calling application
    module about the problem.'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The most common misuse of the CI database class is using it directly from the
    controller, view, or helper. A good practice is to develop the model classes to
    handle all the application database services.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: Hence, all the other application modules can benefit, and reuse those models.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: The CI models are special classes designed to handle databases or external information
    resources, such as Facebook (we will see an example of this in this chapter).
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: The CI models are the PHP classes that are designed to work with information
    in the database.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: 'This chapter will primarily focus on the following topics:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: 'The CI model scope:'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The model resource path
  id: totrans-12
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Loading a model
  id: totrans-13
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Using model methods
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Connecting to a database
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Business logic
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Object Relational Mapping (ORM)
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Example 1: a CRUD example'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Example 2: a business logic example'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Example 3: retrieving data from Facebook'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We will begin by briefly reviewing the CI model scope and will proceed with
    several usage examples, covering different use cases that are combined in a real
    project.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: Scope of the CI model
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The CI model provides services for all the application modules to access the
    application database(s) or external information resources in an OOP fashion. Typically,
    the model classes will contain functions that help us retrieve, insert, and update
    information in the database.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: This section will focus on the CI model syntax and usage guidelines, as a preface
    to the following usage code examples.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: The model resource path
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The model files are located in the folder `application/models/`, in the pattern
    `application/models/<MODEL_NAME>.php`.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: Loading a model
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Loading a model can be done automatically or via the controller. More specifically,
    it can be done in a certain controller's constructor or any controller's method.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: If the model is used in a few of the controller's methods, it's recommended
    that you load the model in those methods. The scope of the model in that case
    is only in those methods project and will refer to `application/models/mymodel.php`.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If the model is used in most of the controller's methods, it's recommended that
    you load the model in the controller's constructor. In that case the scope of
    the model is in all the controller's methods project and will refer to `application/models/mymodel.php`.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: It automatically loads a model `mymodel` for all the CI projects.
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: If the model is used in most of CI's project controllers, it is recommended
    that you autoload it in `application/config/autoload.php`. In that case the scope
    of the model is in all the CI project and will refer to `application/models/mymodel.php`.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`$autoload[''model''] = array(''users'', ''mymodel'');`'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Using model methods
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Once the CI model is loaded, we will access the model functions using an object
    with the model name as our class. The model's method is called for performing
    database operations, such as retrieving, inserting, and updating data from the
    database.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: For example, let's load the model `users` and access its function `get_users`.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Connecting to a database
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: For more information, refer to [Chapter 2](ch02.html "Chapter 2. Configurations
    and Naming Conventions"), *Configurations and Naming Conventions*.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: 'In this example, we will connect manually to a database. The following settings
    are done in `application/config/database.php`:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Business logic
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Business logic is a set of validation rules and decision criteria defined for
    a certain information object topic or database object.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: The model can apply business logic to the database and information objects that
    it handles.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
- en: In the case of a social network, the model layer would take care of tasks, such
    as saving user data, saving friend associations, storing and retrieving user photos,
    finding new friends for suggestions, and so on.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
- en: Object Relational Mapping (ORM)
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: While CI provides the model class for the developer to expand for object-oriented
    database **CRUD** (**Create, Read, Update, and Delete**) validation, and business
    logic for the defined project database, there's another option that enables automatic
    model services. In this section, we will discuss **Object Relational Mapping**
    (**ORM**). ORM is a new concept of converting the database scheme definition into
    an object-oriented database class API. It provides database CRUD services on a
    given database, so that the minimal code is required, instead of the full model
    development. More than that, the customized validation on the CRUD operation is
    enabled as well. Using an ORM plugin may reduce the need to self-develop our own
    CI models so that only special business logic activities are left to be implemented.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: Today, ORM plugins provide predefined validation services, as well as user-defined
    services to enforce validations on CRUD requests from the application controllers,
    libraries, or helpers requesting the database CRUD services.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: There are pros and cons of using ORM. On one hand, it simplifies a lot of the
    database model development for the database. On there other hand, it dictates
    various rules on the database scheme definition, such as defining user tables
    for an ORM object user, or defining the auto-increment primary key field name,
    such as ID, and so on.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: 'There are several ORM plugins for CI; the most well-known and well-documented
    ones, with a large network of community developers, are the following:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: '**Doctrine ORM** ([docs.doctrine-project.org](http://docs.doctrine-project.org)):
    This ORM plugin with the well-documented CI integration guidelines is available
    at [http://docs.doctrine-project.org/en/2.0.x/cookbook/integrating-with-codeigniter.html](http://docs.doctrine-project.org/en/2.0.x/cookbook/integrating-with-codeigniter.html).'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**DataMapper CodeIgniter ORM library** ([datamapper.wanwizard.eu](http://datamapper.wanwizard.eu)):
    It provides the CI library, such as user guide web navigator.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Both ORM libraries provide more than just the table-based CRUD services, but
    can be configured to handle the cross-table relationships of the foreign key fields.
    They can support one-to-many, many-to-one, and many-to-many relationships, or
    even more complex relationships between multiple database tables.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The ORM plugins also provide validation and manipulation services on the handled
    database fields, such as performing trimming on a string field before it is saved
    to the database.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: Validation services include built-in validations such as valid e-mail fields,
    or a field that must have the same value as another field, such as fields with
    an account creation password retype requirement. The full scope and usage of ORM
    is beyond the scope of this CI book. However, it is highly recommended that you
    learn more about ORM and try using the referred ORM plugins and consider using
    them in your CI projects.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: 'Of course, we do provide a simple usage example of adding a record to the database,
    and retrieving the database records using ORM in the following section:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: ORM simple operations example
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'For example, let''s say we have a user database table with the ID as the primary
    key auto-increment. User name, e-mail, and password are the other fields, and
    if we want to add a new user record to the database, we could do so with the help
    of the following code:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This is only a very simple usage example, while ORM today provides a rich set
    of CRUD and validation services. Please refer to the provided links to the featured
    ORM plugins for more information.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
- en: Example 1 – a CRUD example
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this example, we will see how to use a CI model. For this example, we will
    use a model that performs these operations on the database: `SELECT`, `INSERT`,
    and `UPDATE`.'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
- en: The example displays, all the products that are retrieved by the model `productmodel`
    at the main page in the database.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: Let us assume the URI to the project root is `http://mydomain.com/myproject`
    and `http://mydomain.com/myproject/product`.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The source code is provided with this book via URLs.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
- en: The main page has links for adding and editing a product. These links generate
    a form for editing and adding a product.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: Let us assume the URI to the project root is `http://mydomain.com/myproject`
    and `http://mydomain.com/myproject/product/add`.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: 'Suppose we want to edit and update the product with `product_id 1`, the link
    will be `http://mydomain.com/myproject/product/edit/1`. This example will be constructed
    from the following controller, model, and views:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '`application/controllers/product.php`: This controller loads the model product.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This controller renders the following views:'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`productsview`: This view displays all the products with links to editing and
    adding a product'
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`productform`: This view contains the form for adding and editing a product'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`application/models/productmodel.php`: This model contains functions that perform
    these operations on the database: `SELECT`, `INSERT`, and `UPDATE`.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`application/views/productsview.php`: The view that displays the products.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`application/views/productform.php`: The view that contains the form.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The controller file
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The controller PHP file is located at `application/controllers/product.php`.
    The controller handles the product's operations, such as adding, editing, updating,
    and displaying the product's table.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: The controller creates a form for adding and editing a product.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: For more information refer to [Chapter 7](ch07.html "Chapter 7. Views"), *Views*.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the code and inline explanations:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The model file
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The model PHP file is located at `application/models/productmodel.php`.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: In this example, the methods of the CI object `db` are called for generating
    and executing the SQL queries.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: Please refer to the CI database library at [http://ellislab.com/codeigniter/user-guide/database/index.html](http://ellislab.com/codeigniter/user-guide/database/index.html).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the code and inline explanations:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The view file
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The view PHP file is located at `application/views/productsview.php`.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: 'This view file displays a table with the products list. The following are the
    code and inline explanations:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Example 2 – a business logic example
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this example, we will demonstrate business logic. Ordering a product will
    trigger the model to update the product's quantity and check whether it's smaller
    than a certain amount.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: 'This example will be constructed from the following controllers, model, and
    view:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: '`application/controllers/order.php`: This controller loads the model `productmodel`'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`$this->load->model('' productmodel'')`: This controller renders the view `orderview`,
    which displays all the products, and where each product has links to ordering
    a product'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`application/models/productmodel.php`: This model contains functions, which
    retrieve products, updates its quantity, and checks its quantity'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`application/views/ orderview.php`: The view displays all the products in a
    table, where each row has a link for ordering the product'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let us assume the URI to the project root is `http://mydomain.com/myproject`
    and `http://mydomain.com/myproject/order`.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-104
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The source code is provided with this book via URLs.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: The controller file
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The controller PHP file is located at `application/controllers/order.php`.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: This controller is responsible for displaying the products and updates each
    product. If the product's quantity reaches a limit, it generates an error message.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: 'The code and inline explanations are as follows:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The model file
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The model PHP file is located at `application/models/productmodel.php`.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: In this example, the methods of the CI object `db` are called for generating
    and executing the SQL queries.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
- en: Please refer to the CI database's library available at [http://ellislab.com/codeigniter/user-guide/database/index.html](http://ellislab.com/codeigniter/user-guide/database/index.html).
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
- en: 'The code and inline explanations are as follows:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The view file
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The PHP view file is located at `application/views/orderview.php`. This view
    file displays a table with the products list.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the code and inline explanations:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Example 3 – retrieving data from Facebook
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this example, we will use the CI built-in model to retrieve data from Facebook.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: The example displays a Facebook user name and picture and displays the user's
    Facebook friends.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: This example uses Facebook PHP SDK as a CI library. It can be downloaded from
    [https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk). For
    more information, refer to [Chapter 4](ch04.html "Chapter 4. Libraries"), *Libraries*.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: 'This example will be constructed from the following controllers, model, and
    view:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: '`application/controllers/fbpage.php`: This controller loads the model `fbmodel`'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`$this->load->model(''fbmodel'')`: This controller renders the view `fbview`,
    which displays the user''s Facebook picture and name, and table, which contains
    the user''s friends'' names and links to their profiles'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`application/models/fbmodel.php`: This model contains functions that retrieve
    data from Facebook'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`application/views/fbview.php`: This view displays Facebook data'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let us assume the URI to the project root is `http://mydomain.com/myproject`
    and `http://mydomain.com/myproject/fbpage`.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The source code is provided with this book via URLs.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: The controller file
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The controller PHP file is located at `application/controllers/fbpage.php`.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
- en: The controller is responsible for getting the access token from Facebook and
    redirecting the Facebook user to the Facebook login page to confirm the Facebook
    app's permission.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: The controller is also responsible for getting the Facebook user's details and
    friends via the model and rendering the view page accordingly.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
- en: For more information about Facebook API usage and development, please refer
    to the Facebook developer page available at [http://developers.facebook.com/](http://developers.facebook.com/).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如需了解更多关于Facebook API使用和开发的信息，请参阅位于[http://developers.facebook.com/](http://developers.facebook.com/)的Facebook开发者页面。
- en: 'The following are the code and inline explanations:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 以下为代码和内联解释：
- en: '[PRE12]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The model file
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型文件
- en: The model PHP file is located at `application/models/fbmodel.php`.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 模型PHP文件位于`application/models/fbmodel.php`。
- en: The model is responsible for interacting with the Facebook SDK and retrieving
    the Facebook user's details and friend lists. The model uses the Facebook FQL
    mechanism.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 模型负责与Facebook SDK交互，并检索Facebook用户的详细信息和朋友列表。该模型使用Facebook FQL机制。
- en: For more information about Facebook API usage and development, please refer
    to the Facebook developer page available at [http://developers.facebook.com/](http://developers.facebook.com/).
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 如需了解更多关于Facebook API使用和开发的信息，请参阅位于[http://developers.facebook.com/](http://developers.facebook.com/)的Facebook开发者页面。
- en: 'The code and inline explanations are as follows:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 代码和内联解释如下：
- en: '[PRE13]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The view file
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 视图文件
- en: The view PHP file is located at `application/views/fbview.php`.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 视图PHP文件位于`application/views/fbview.php`。
- en: This view file displays a Facebook user's details and a table with their friend
    details.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 此视图文件显示了一个Facebook用户的详细信息以及他们的朋友详情表格。
- en: 'The code and inline explanations are as follows:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 代码和内联解释如下：
- en: '[PRE14]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Summary
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, we have reviewed the CI model scope, business logic, and ORM.
    We have made the following examples in this chapter:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们回顾了CodeIgniter模型的作用域、业务逻辑和ORM。在本章中，我们制作了以下示例：
- en: 'Example 1: a CRUD example'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 示例1：一个CRUD示例
- en: 'Example 2: a business logic example'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 示例2：一个业务逻辑示例
- en: 'Example 3: retrieving data from Facebook'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 示例3：从Facebook检索数据
