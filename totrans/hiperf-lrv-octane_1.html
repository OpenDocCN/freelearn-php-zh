<html><head></head><body>
<div id="_idContainer009">
<h1 class="chapter-number" id="_idParaDest-16"><a id="_idTextAnchor015"/><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/><span class="koboSpan" id="kobo.2.1">Understanding the Laravel Web Application Architecture</span></h1>
<p><span class="koboSpan" id="kobo.3.1">This book is for </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">Laravel</span></strong><span class="koboSpan" id="kobo.5.1"> developers who would like to make or design their Laravel web application in a more scalable way and make it </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">more performant.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">This book aims to provide you with knowledge, suggestions, and explanations on how to improve the software architecture of a web application, starting from a typical PHP web application architecture to a more scalable and </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">performant architecture.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">It provides a 360-degree overview of what it takes to design and build a performant application with </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">Laravel Octane</span></strong><span class="koboSpan" id="kobo.11.1">. </span><span class="koboSpan" id="kobo.11.2">We’ll see why Laravel Octane is suitable for designing and building a performant application. </span><span class="koboSpan" id="kobo.11.3">The book also covers the different tools used by Laravel Octane, such </span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.12.1">as </span><strong class="bold"><span class="koboSpan" id="kobo.13.1">Open Swoole</span></strong><span class="koboSpan" id="kobo.14.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.15.1">RoadRunner</span></strong><span class="koboSpan" id="kobo.16.1">, and lists</span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.17.1"> and describes the various features and differentiating elements. </span><span class="koboSpan" id="kobo.17.2">But the most important thing is to enable you to understand why and when to use Open Swoole </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">or RoadRunner.</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">But before starting, why use </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">Laravel Octane?</span></span></p>
<p><span class="koboSpan" id="kobo.21.1">Laravel Octane is a </span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.22.1">tool that allows us to access some functionality and features exposed by the two application servers we </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">just mentioned.</span></span></p>
<p><span class="koboSpan" id="kobo.24.1">One of the benefits</span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.25.1"> of Laravel Octane is the huge improvement in the response times to HTTP requests by clients such as web browsers. </span><span class="koboSpan" id="kobo.25.2">When we develop a Laravel application, we use an important software layer implemented by the framework. </span><span class="koboSpan" id="kobo.25.3">This software layer needs time and resources to start. </span><span class="koboSpan" id="kobo.25.4">Even if we talk about only a few resources and a short amount of time, this repeated action for each request, especially in a context where there are many requests, can be a problem. </span><span class="koboSpan" id="kobo.25.5">Or rather, its optimization could bring </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">enormous benefits.</span></span></p>
<p><span class="koboSpan" id="kobo.27.1">Laravel Octane, through application servers, does just that: optimizes the process of starting the framework, which typically happens for each individual request. </span><span class="koboSpan" id="kobo.27.2">We will see in detail how this is done; essentially, the objects and everything that the framework needs are started and allocated to the start of the application server, and then the instances are made available to the various workers. </span><strong class="bold"><span class="koboSpan" id="kobo.28.1">Workers</span></strong><span class="koboSpan" id="kobo.29.1"> are </span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.30.1">the processes that are initiated to serve </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">the requests.</span></span></p>
<p><span class="koboSpan" id="kobo.32.1">Another reason</span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.33.1"> why it is interesting to evaluate the adoption of Laravel Octane in your Laravel web application is that by using an application server such as Swoole, you can access those features implemented </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">by Swoole.</span></span></p>
<p><span class="koboSpan" id="kobo.35.1">The functions are, for example, the advanced mechanisms of the cache driver, shared storage for sharing information between the various workers, and the execution of tasks </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">in parallel.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">This is a totally new concept to the classic PHP developer who typically does not have an immediate functionality available in the PHP core for the parallelization </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">of processes.</span></span></p>
<p><span class="koboSpan" id="kobo.39.1">This chapter will introduce you to the Laravel ecosystem and explore what Laravel </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">Octane is.</span></span></p>
<p><span class="koboSpan" id="kobo.41.1">This chapter aims to introduce you to the application server approach, in which more workers cooperate to manage multiple requests. </span><span class="koboSpan" id="kobo.41.2">Understanding the behavior under the hood allows the developer to avoid some mistakes, especially on shared resources (objects and global states) across the worker. </span><span class="koboSpan" id="kobo.41.3">This is important because the classical PHP approach is to have one dedicated thread to manage </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">one request.</span></span></p>
<p><span class="koboSpan" id="kobo.43.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.45.1">Exploring the </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">Laravel ecosystem</span></span></li>
<li><span class="koboSpan" id="kobo.47.1">Understanding the </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">request lifecycle</span></span></li>
<li><span class="koboSpan" id="kobo.49.1">Getting to know the </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">application server</span></span></li>
</ul>
<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/><span class="koboSpan" id="kobo.51.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.52.1">In order to run the code and tools shown in this book, you must have the </span><strong class="bold"><span class="koboSpan" id="kobo.53.1">PHP engine</span></strong><span class="koboSpan" id="kobo.54.1"> installed on your machine. </span><span class="koboSpan" id="kobo.54.2">It is recommended that you have a recent version of PHP installed (at least </span><em class="italic"><span class="koboSpan" id="kobo.55.1">8.0</span></em><span class="koboSpan" id="kobo.56.1">, released in </span><span class="No-Break"><span class="koboSpan" id="kobo.57.1">November 2020).</span></span></p>
<p><span class="koboSpan" id="kobo.58.1">Also, in order to easily install additional tools, it is recommended that you have Homebrew installed if you use macOS. </span><span class="koboSpan" id="kobo.58.2">In the case of GNU/Linux systems, it will be sufficient to resort to using the package manager of the distribution used, and in the case of Windows systems, the advice is to have a virtual environment, for example, </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">with Docker.</span></span></p>
<p><span class="koboSpan" id="kobo.60.1">In the current chapter, some commands and source code will be shown, simply to share some concepts. </span><span class="koboSpan" id="kobo.60.2">In subsequent chapters, especially the second chapter about RoadRunner and the third chapter about Open Swoole, the installation of each package and tool will be addressed step </span><span class="No-Break"><span class="koboSpan" id="kobo.61.1">by step.</span></span></p>
<p><span class="koboSpan" id="kobo.62.1">There are those who, regardless of their operating system, prefer to maintain a “clean” installation by resorting to using Docker regardless of the host operating system. </span><span class="koboSpan" id="kobo.62.2">Where the next chapters deal with the installation of operating system-dependent tools, the different methods will be highlighted depending on the system </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">in use.</span></span></p>
<p><span class="koboSpan" id="kobo.64.1">The source code and the configuration files of the examples described in the current chapter are available </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">here: </span></span><a href="https://github.com/PacktPublishing/High-Performance-with-Laravel-Octane/tree/main/octane-ch01"><span class="No-Break"><span class="koboSpan" id="kobo.66.1">https://github.com/PacktPublishing/High-Performance-with-Laravel-Octane/tree/main/octane-ch01</span></span></a></p>
<h1 id="_idParaDest-19"><a id="_idTextAnchor018"/><span class="koboSpan" id="kobo.67.1">Exploring the Laravel ecosystem</span></h1>
<p><span class="koboSpan" id="kobo.68.1">Laravel is a </span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.69.1">great framework in the PHP ecosystem that helps developers to build web applications quickly </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">and reliably.</span></span></p>
<p><span class="koboSpan" id="kobo.71.1">It includes, as dependencies, some great tools from the PHP ecosystem, such as </span><strong class="bold"><span class="koboSpan" id="kobo.72.1">Symfony</span></strong><span class="koboSpan" id="kobo.73.1"> packages, and </span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.74.1">some other solid and mature packages such </span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.75.1">as </span><strong class="bold"><span class="koboSpan" id="kobo.76.1">Monolog</span></strong><span class="koboSpan" id="kobo.77.1"> for logging, </span><strong class="bold"><span class="koboSpan" id="kobo.78.1">Flysystem</span></strong><span class="koboSpan" id="kobo.79.1"> for accessing files </span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.80.1">and storage, and </span><strong class="bold"><span class="koboSpan" id="kobo.81.1">CommonMark</span></strong><span class="koboSpan" id="kobo.82.1"> for managing </span><a id="_idIndexMarker010"/><span class="No-Break"><span class="koboSpan" id="kobo.83.1">Markdown format.</span></span></p>
<p><span class="koboSpan" id="kobo.84.1">From the Symfony world, Laravel includes packages such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.85.1">Symfony/routing</span></strong><span class="koboSpan" id="kobo.86.1"> to manage routing, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.87.1">http-foundation</span></strong><span class="koboSpan" id="kobo.88.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.89.1">http-kernel</span></strong><span class="koboSpan" id="kobo.90.1"> to manage </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">HTTP communication.</span></span></p>
<p><span class="koboSpan" id="kobo.92.1">All this is just to say that Laravel uses the best parts of the PHP ecosystem, puts them together, and provides tools, helpers, classes, and methods to simplify the usage of all the tools from the </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">developer’s perspective.</span></span></p>
<p><span class="koboSpan" id="kobo.94.1">In addition, Laravel is more than a framework. </span><span class="koboSpan" id="kobo.94.2">Laravel is </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">an ecosystem.</span></span></p>
<p><span class="koboSpan" id="kobo.96.1">Laravel also</span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.97.1"> provides applications and services that are integrated with </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">the framework.</span></span></p>
<p><span class="koboSpan" id="kobo.99.1">For example, Laravel provides </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.101.1">Cashier</span></strong><span class="koboSpan" id="kobo.102.1">: For </span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.103.1">integration </span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.104.1">with </span><strong class="bold"><span class="koboSpan" id="kobo.105.1">Stripe</span></strong><span class="koboSpan" id="kobo.106.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.107.1">Paddle</span></strong><span class="koboSpan" id="kobo.108.1"> for the payment</span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.109.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">subscription process.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.111.1">Breeze</span></strong><span class="koboSpan" id="kobo.112.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.113.1">Jetstream</span></strong><span class="koboSpan" id="kobo.114.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.115.1">Sanctum</span></strong><span class="koboSpan" id="kobo.116.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">Socialite</span></strong><span class="koboSpan" id="kobo.118.1">: For managing authorization, authentication, the</span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.119.1"> social login</span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.120.1"> integration process, and </span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.121.1">exposing </span><a id="_idIndexMarker018"/><span class="No-Break"><span class="koboSpan" id="kobo.122.1">protected APIs.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.123.1">Dusk</span></strong><span class="koboSpan" id="kobo.124.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.125.1">Pest</span></strong><span class="koboSpan" id="kobo.126.1">: </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">For </span></span><span class="No-Break"><a id="_idIndexMarker019"/></span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">testing.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.129.1">Echo</span></strong><span class="koboSpan" id="kobo.130.1">: For </span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.131.1">broadcasting </span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.132.1">events in </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">real time.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.134.1">Envoyer</span></strong><span class="koboSpan" id="kobo.135.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.136.1">Forge</span></strong><span class="koboSpan" id="kobo.137.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.138.1">Vapor</span></strong><span class="koboSpan" id="kobo.139.1">: For </span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.140.1">server </span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.141.1">or serverless</span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.142.1"> management and to manage the </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">deployment process.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.144.1">Mix</span></strong><span class="koboSpan" id="kobo.145.1">: For </span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.146.1">compiling </span><strong class="bold"><span class="koboSpan" id="kobo.147.1">JavaScript</span></strong><span class="koboSpan" id="kobo.148.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.149.1">CSS</span></strong><span class="koboSpan" id="kobo.150.1"> through a webpack </span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.151.1">configuration</span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.152.1"> fully </span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.153.1">integrated with the </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">Laravel</span></span><span class="No-Break"><a id="_idIndexMarker029"/></span><span class="No-Break"><span class="koboSpan" id="kobo.155.1"> frontend.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.156.1">Horizon</span></strong><span class="koboSpan" id="kobo.157.1">: A</span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.158.1"> web user </span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.159.1">interface for monitoring queues based </span><span class="No-Break"><span class="koboSpan" id="kobo.160.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.161.1">Redis</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.163.1">Nova</span></strong><span class="koboSpan" id="kobo.164.1">: An</span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.165.1"> administrator panel builder for </span><span class="No-Break"><span class="koboSpan" id="kobo.166.1">Laravel applications.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.167.1">Sail</span></strong><span class="koboSpan" id="kobo.168.1">: A local </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.169.1">development environment based </span><a id="_idIndexMarker034"/><span class="No-Break"><span class="koboSpan" id="kobo.170.1">on </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.171.1">Docker</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.172.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.173.1">Scout</span></strong><span class="koboSpan" id="kobo.174.1">: A </span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.175.1">full-text </span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.176.1">search </span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.177.1">engine, backed </span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.178.1">by providers </span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.179.1">such as </span><strong class="bold"><span class="koboSpan" id="kobo.180.1">Algolia</span></strong><span class="koboSpan" id="kobo.181.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.182.1">Meilisearch</span></strong><span class="koboSpan" id="kobo.183.1">, or simply by the </span><strong class="bold"><span class="koboSpan" id="kobo.184.1">MySQL</span></strong><span class="koboSpan" id="kobo.185.1"> or </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.186.1">PostgreSQL</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.187.1"> database.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.188.1">Spark</span></strong><span class="koboSpan" id="kobo.189.1">: A </span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.190.1">boilerplate solution for managing billing/subscription in </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">your application.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.192.1">Telescope</span></strong><span class="koboSpan" id="kobo.193.1">: UI module</span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.194.1"> for showing debugging </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">and insights.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.196.1">Valet</span></strong><span class="koboSpan" id="kobo.197.1">: A </span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.198.1">macOS-specific bundle of applications configured for running the PHP </span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.199.1">application. </span><span class="koboSpan" id="kobo.199.2">It has </span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.200.1">dependencies</span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.201.1"> with </span><strong class="bold"><span class="koboSpan" id="kobo.202.1">nginx</span></strong><span class="koboSpan" id="kobo.203.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.204.1">PHP</span></strong><span class="koboSpan" id="kobo.205.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">and </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.207.1">Dnsmasq</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.209.1">Octane</span></strong><span class="koboSpan" id="kobo.210.1">: For </span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.211.1">improving performance and </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">optimizing resources.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.213.1">In this book, we will analyze the last tool in this list: </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">Laravel Octane.</span></span></p>
<p><span class="koboSpan" id="kobo.215.1">We will go over the use of other tools within the Laravel ecosystem, such as Sail (for simplifying the installation process of a complete development environment), and Valet (for correctly setting up the local environment to run a web server and PHP). </span><span class="koboSpan" id="kobo.215.2">Also, Laravel Octane depends on important software that we will see in-depth throughout the book. </span><span class="koboSpan" id="kobo.215.3">Laravel Octane has strong requirements: it requires additional software such as Swoole </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">or RoadRunner.</span></span></p>
<p><span class="koboSpan" id="kobo.217.1">But one step at </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">a time.</span></span></p>
<p><span class="koboSpan" id="kobo.219.1">Before we delve into the tools and their configuration, it’s important to understand some basic mechanisms for </span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.220.1">managing </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.221.1">HTTP requests</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.223.1">HTTP</span></p>
<p class="callout"><span class="koboSpan" id="kobo.224.1">HTTP is a </span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.225.1">protocol that defines rules, messages, and methods for fetching resources on the web, such as HTML documents (web pages) and assets. </span><span class="koboSpan" id="kobo.225.2">Clients (who require the resource) and servers (who serve the resource) communicate by exchanging messages. </span><span class="koboSpan" id="kobo.225.3">The client sends requests, and the server </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">sends responses.</span></span></p>
<p><span class="koboSpan" id="kobo.227.1">One of the goals of the book is to empower you to improve the performance of your web applications by doing different things, starting with designing the architecture of the application, choosing and using the right tools, writing code, and finally, releasing </span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.229.1">The tools we are going to analyze and use will do much of the work, but I think it is important to understand the underlying dynamics to have a good awareness of how the various tools work to enable you to configure, integrate, and use them to the best of </span><span class="No-Break"><span class="koboSpan" id="kobo.230.1">their ability.</span></span></p>
<p><span class="koboSpan" id="kobo.231.1">Before we get deeper into the workings of Laravel Octane, let me take you through how servers typically deal with HTTP requests by explaining the HTTP </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">request lifecycle.</span></span></p>
<h1 id="_idParaDest-20"><a id="_idTextAnchor019"/><span class="koboSpan" id="kobo.233.1">Understanding the HTTP request lifecycle</span></h1>
<p><span class="koboSpan" id="kobo.234.1">There are a </span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.235.1">number of components involved in performing the HTTP request. </span><span class="koboSpan" id="kobo.235.2">The</span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.236.1"> components are </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">as follows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.238.1">Client</span></strong><span class="koboSpan" id="kobo.239.1">: This is </span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.240.1">where the request starts and the response ends (for example, </span><span class="No-Break"><span class="koboSpan" id="kobo.241.1">the browser).</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.242.1">Network</span></strong><span class="koboSpan" id="kobo.243.1">: The </span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.244.1">requests and responses go through this and it connects the server and </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">the client.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.246.1">Proxy</span></strong><span class="koboSpan" id="kobo.247.1">: This is </span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.248.1">an optional component that could perform some tasks before the request reaches the web server, such as caching, rewriting and/or altering the request, and forwarding the request to the right </span><span class="No-Break"><span class="koboSpan" id="kobo.249.1">web server.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.250.1">Web server</span></strong><span class="koboSpan" id="kobo.251.1">: This</span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.252.1"> receives the request and is responsible for selecting the </span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">correct resource.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.254.1">PHP</span></strong><span class="koboSpan" id="kobo.255.1">: The</span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.256.1"> language, or more generally in the case of server-side languages, the language-specific engine that is used and involved. </span><span class="koboSpan" id="kobo.256.2">In this case, the PHP interpreter is used. </span><span class="koboSpan" id="kobo.256.3">The PHP interpreter can be activated mainly in two ways: as a web server module or as a separate process. </span><span class="koboSpan" id="kobo.256.4">In the latter case, a technology</span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.257.1"> called </span><strong class="bold"><span class="koboSpan" id="kobo.258.1">FastCGI Process Manager</span></strong><span class="koboSpan" id="kobo.259.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.260.1">FPM</span></strong><span class="koboSpan" id="kobo.261.1">) is used. </span><span class="koboSpan" id="kobo.261.2">We will see how this mechanism works later in more detail. </span><span class="koboSpan" id="kobo.261.3">For now, it is useful to know that the web server somehow invokes the server-side language interpreter. </span><span class="koboSpan" id="kobo.261.4">By doing this, our server is able to interpret the language. </span><span class="koboSpan" id="kobo.261.5">If the invoked resource is a PHP-type file with the specific PHP syntax, the resource file requested is interpreted by the PHP engine. </span><span class="koboSpan" id="kobo.261.6">The output is sent back in the form of a response to the web server, the network, and then </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">the browser.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.263.1">Framework</span></strong><span class="koboSpan" id="kobo.264.1">: In the </span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.265.1">case that the application is written with PHP and a framework is used, as a developer, you can access classes, methods, and helpers to build your </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">application faster.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.267.1">The </span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.268.1">components are called sequentially in the HTTP request flow. </span><span class="koboSpan" id="kobo.268.2">The HTTP request starts from the browser, then goes through the network (optionally passing through via the proxy), until it reaches the web server that invokes the PHP engine and the framework </span><span class="No-Break"><span class="koboSpan" id="kobo.269.1">is bootstrapped.</span></span></p>
<p><span class="koboSpan" id="kobo.270.1">From a performance point of view, if you want to bring some improvement, you have to take some action or implement some solution depending on the elements of </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">this architecture.</span></span></p>
<p><span class="koboSpan" id="kobo.272.1">For example, on the browser side, you could work on caching assets in the browser or on the optimization of your JavaScript code. </span><span class="koboSpan" id="kobo.272.2">On the networking side, one solution could be resource optimization, for example, reducing the weight of assets or introducing architectural elements such as a CDN. </span><span class="koboSpan" id="kobo.272.3">In the case of the web server, an effective first-level improvement could be to avoid loading the PHP engine for the static assets (</span><span class="No-Break"><span class="koboSpan" id="kobo.273.1">non-PHP files).</span></span></p>
<p><span class="koboSpan" id="kobo.274.1">All such fine-tuning will be addressed in the final chapters, where we will deal with the configuration and optimization of production elements. </span><span class="koboSpan" id="kobo.274.2">Most of the book covers the optimization of the framework. </span><span class="koboSpan" id="kobo.274.3">For example, in </span><em class="italic"><span class="koboSpan" id="kobo.275.1">Chapters 2</span></em><span class="koboSpan" id="kobo.276.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.277.1">3</span></em><span class="koboSpan" id="kobo.278.1">, topics such as the use of Octane with tools such as Swoole and RoadRunner, which enable more efficient and effective loading of resources (shared objects and structures), are addressed. </span><span class="koboSpan" id="kobo.278.2">Other points of </span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.279.1">performance improvement on the framework side include the introduction of an asynchronous approach through the use of queuing systems (</span><em class="italic"><span class="koboSpan" id="kobo.280.1">Chapters 6</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.281.1">and </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.282.1">7</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.283.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.284.1">Now that you have an idea of the components involved in an HTTP request, let’s look at the structure of an </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">HTTP request.</span></span></p>
<h2 id="_idParaDest-21"><a id="_idTextAnchor020"/><span class="koboSpan" id="kobo.286.1">The structure of an HTTP request</span></h2>
<p><span class="koboSpan" id="kobo.287.1">To understand </span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.288.1">in detail what happens in a typical HTTP request, we start by analyzing what is sent from the browser to the server during a request. </span><span class="koboSpan" id="kobo.288.2">A request is mainly characterized by methods (</span><strong class="source-inline"><span class="koboSpan" id="kobo.289.1">GET</span></strong><span class="koboSpan" id="kobo.290.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.291.1">POST</span></strong><span class="koboSpan" id="kobo.292.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">PUT</span></strong><span class="koboSpan" id="kobo.294.1">, and so on), the URL, and </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">HTTP headers.</span></span></p>
<p><span class="koboSpan" id="kobo.296.1">The URL is visible in the browser’s address bar, whereas the headers are handled automatically by the browser and are not directly visible to </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">the user.</span></span></p>
<p><span class="koboSpan" id="kobo.298.1">The following describes the structure of an </span><span class="No-Break"><span class="koboSpan" id="kobo.299.1">HTTP request:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.300.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.301.1">HTTP method</span></strong><span class="koboSpan" id="kobo.302.1"> (or </span><strong class="bold"><span class="koboSpan" id="kobo.303.1">HTTP verbs</span></strong><span class="koboSpan" id="kobo.304.1">) in an</span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.305.1"> HTTP request represents the operation the frontend side wants to perform on the server side with the </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">requested resource:</span></span><ul><li><span class="koboSpan" id="kobo.307.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">GET</span></strong><span class="koboSpan" id="kobo.309.1"> method: Reads</span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.310.1"> and retrieves </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">a resource</span></span></li><li><span class="koboSpan" id="kobo.312.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">POST</span></strong><span class="koboSpan" id="kobo.314.1"> method: Creates</span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.315.1"> a </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">new resource</span></span></li><li><span class="koboSpan" id="kobo.317.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">PUT</span></strong><span class="koboSpan" id="kobo.319.1"> method: Replaces</span><a id="_idIndexMarker064"/> <span class="No-Break"><span class="koboSpan" id="kobo.320.1">a resource</span></span></li><li><span class="koboSpan" id="kobo.321.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.322.1">PATCH</span></strong><span class="koboSpan" id="kobo.323.1"> method: Edits</span><a id="_idIndexMarker065"/> <span class="No-Break"><span class="koboSpan" id="kobo.324.1">the resource</span></span></li><li><span class="koboSpan" id="kobo.325.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">DELETE</span></strong><span class="koboSpan" id="kobo.327.1"> method: Deletes</span><a id="_idIndexMarker066"/> <span class="No-Break"><span class="koboSpan" id="kobo.328.1">the</span></span><span class="No-Break"><a id="_idIndexMarker067"/></span><span class="No-Break"><span class="koboSpan" id="kobo.329.1"> resource</span></span></li></ul></li>
<li><span class="koboSpan" id="kobo.330.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.331.1">URL</span></strong><span class="koboSpan" id="kobo.332.1"> identifies </span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.333.1">the resource. </span><span class="koboSpan" id="kobo.333.2">We’ll explain the URL structure in the next section (</span><em class="italic"><span class="koboSpan" id="kobo.334.1">Handling an </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.335.1">HTTP request</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.336.1">).</span></span></li>
<li><span class="koboSpan" id="kobo.337.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.338.1">headers</span></strong><span class="koboSpan" id="kobo.339.1"> include </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.340.1">additional information that allows the server to understand how to handle the resource. </span><span class="koboSpan" id="kobo.340.2">This information can comprise authentication information, the required format of the resource, and </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">so on.</span></span></li>
<li><span class="koboSpan" id="kobo.342.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.343.1">body payload</span></strong><span class="koboSpan" id="kobo.344.1"> is </span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.345.1">additional data, for example, the data sent when a form is submitted to </span><span class="No-Break"><span class="koboSpan" id="kobo.346.1">the server.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.347.1">Now that</span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.348.1"> you have an idea of the structure of an HTTP request, let’s see how such requests </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">are handled.</span></span></p>
<h2 id="_idParaDest-22"><a id="_idTextAnchor021"/><span class="koboSpan" id="kobo.350.1">Handling an HTTP request</span></h2>
<p><span class="koboSpan" id="kobo.351.1">A URL is </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.352.1">made up of the protocol, the hostname, the port, the path, and the parameters. </span><span class="koboSpan" id="kobo.352.2">A typical URL is </span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">as follows:</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">protocol&gt;://&lt;hostname&gt;:&lt;port&gt;/&lt;path&gt;?&lt;parameters&gt;</span></strong></span></p>
<p><span class="koboSpan" id="kobo.356.1">For example, a URL could be </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">the following:</span></span></p>
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.358.1">https://127.0.0.1:8000/home?cache=12345</span></strong></span></p>
<p><span class="koboSpan" id="kobo.359.1">Each part that makes up the HTTP request is used specifically by the various software involved in handling the </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">HTTP request:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.361.1">A protocol is used by the browser to determine the communication encryption (encrypted via HTTPS or non-encrypted </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">via HTTP).</span></span></li>
<li><span class="koboSpan" id="kobo.363.1">A hostname is used by the DNS to resolve the hostname into an IP address, and by the web server to involve the right </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">virtual host.</span></span></li>
<li><span class="koboSpan" id="kobo.365.1">A port is used by the operating system of the server to access the </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">right process.</span></span></li>
<li><span class="koboSpan" id="kobo.367.1">A path is used by the web server to call the right resource and for the framework to activate the </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">routing mechanism.</span></span></li>
<li><span class="koboSpan" id="kobo.369.1">Parameters are used by the application to control the behavior of the logic (server-side for query parameters and client-side for the anchor parameters). </span><span class="koboSpan" id="kobo.369.2">For example, the query parameters are defined after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">?</span></strong><span class="koboSpan" id="kobo.371.1"> character, and the anchor parameters are defined after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.372.1">#</span></strong><span class="koboSpan" id="kobo.373.1"> character in the </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">URL: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.375.1">https://127.0.0.1:8000/?queryparam=1#anchorparam</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.377.1">First, the protocol (typically HTTP or HTTPS) is defined. </span><span class="koboSpan" id="kobo.377.2">Next, the hostname, which is useful for figuring out which server to contact, is specified. </span><span class="koboSpan" id="kobo.377.3">Then, there is a part that is not normally specified, which is the port number; typically, it is port </span><strong class="source-inline"><span class="koboSpan" id="kobo.378.1">80</span></strong><span class="koboSpan" id="kobo.379.1"> for HTTP and </span><strong class="source-inline"><span class="koboSpan" id="kobo.380.1">443</span></strong><span class="koboSpan" id="kobo.381.1"> for HTTPS. </span><span class="koboSpan" id="kobo.381.2">Also present is the path that identifies the resource we are requesting from the server. </span><span class="koboSpan" id="kobo.381.3">Finally, two other optional parts deal with parameters. </span><span class="koboSpan" id="kobo.381.4">The first concerns server-side parameters (query string), and the second concerns client-side or JavaScript parameters (parameters </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">with anchors).</span></span></p>
<p><span class="koboSpan" id="kobo.383.1">In addition to the URL, another characteristic element of the request is the HTTP header, which is very important for the server reached by the request to better understand how to handle </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">the request.</span></span></p>
<p><span class="koboSpan" id="kobo.385.1">HTTP headers </span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.386.1">are automatically handled by the browser based on some information and browsing state. </span><span class="koboSpan" id="kobo.386.2">Typically, the headers specify the format and other information about the resource; for example, they specify the MIME type, user agent, and </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">so on.</span></span></p>
<p><span class="koboSpan" id="kobo.388.1">They also specify any access tokens in case the requested resource is protected. </span><span class="koboSpan" id="kobo.388.2">The elements to manage the state are also present in the headers as cookies and references for the session. </span><span class="koboSpan" id="kobo.388.3">This information is useful for the server to understand and relate </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">consecutive requests.</span></span></p>
<p><span class="koboSpan" id="kobo.390.1">Why is it so important to understand how a request is composed? </span><span class="koboSpan" id="kobo.390.2">Because in analyzing optimization elements regarding performance, the structure of the URL and the parts that make up the headers determine the behavior of different elements within the web architecture (browser, network, web server, server-side language, </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">and framework).</span></span></p>
<p><span class="koboSpan" id="kobo.392.1">For example, an element such as a hostname is useful to the DNS (network) to be able to resolve the hostname into the IP address. </span><span class="koboSpan" id="kobo.392.2">Knowing this is useful in deciding whether to do caching, for example, for </span><span class="No-Break"><span class="koboSpan" id="kobo.393.1">name resolution.</span></span></p>
<p><span class="koboSpan" id="kobo.394.1">Each element involved has its own characteristics that can be optimized to be able to get </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">better performance.</span></span></p>
<p><span class="koboSpan" id="kobo.396.1">One of the characterizing elements of a typical request to a classic PHP application is that each request is independent of any other request. </span><span class="koboSpan" id="kobo.396.2">This means that if your PHP script instantiates an object, this operation is repeated with each request. </span><span class="koboSpan" id="kobo.396.3">This has little impact if your script is called only a few times and your script </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">is simple.</span></span></p>
<p><span class="koboSpan" id="kobo.398.1">Let’s try to think of a scenario in which we have a framework-based application, with the application having to deal with a high load of </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1">concurrent requests.</span></span></p>
<p><span class="koboSpan" id="kobo.400.1">A framework-based application has numerous objects at its disposal, which must be instantiated and configured at startup. </span><span class="koboSpan" id="kobo.400.2">In the classic case of PHP, the startup of the framework corresponds to </span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">a request.</span></span></p>
<p><span class="koboSpan" id="kobo.402.1">Laravel Octane, on the other hand, introduces a new way of starting </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.404.1">In a classic Laravel web application, it is sufficient to have a web server (such as nginx) or the internal web server provided by Laravel in the case of development on the developer’s local computer. </span><span class="koboSpan" id="kobo.404.2">A classic web server can handle requests without any kind of resource-sharing unless these resources are external resources such as a database or a </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">cache manager.</span></span></p>
<p><span class="koboSpan" id="kobo.406.1">In contrast</span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.407.1"> to what happens with a classic web server, an application server has the task of starting and managing the executions of multiple workers. </span><span class="koboSpan" id="kobo.407.2">Each worker will be able to handle multiple requests by reusing objects and parts of the logic of </span><span class="No-Break"><span class="koboSpan" id="kobo.408.1">your application.</span></span></p>
<p><span class="koboSpan" id="kobo.409.1">This has one benefit, which is that the actual startup of your application and the setting up of the various objects occur on the first request received from the worker and not on each </span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">individual request.</span></span></p>
<h2 id="_idParaDest-23"><a id="_idTextAnchor022"/><span class="koboSpan" id="kobo.411.1">HTTP requests and Laravel</span></h2>
<p><span class="koboSpan" id="kobo.412.1">From the</span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.413.1"> Laravel application perspective, the parts involved directly in the HTTPS requests are typically routes </span><span class="No-Break"><span class="koboSpan" id="kobo.414.1">and controllers.</span></span></p>
<p><span class="koboSpan" id="kobo.415.1">Handling a request through a Laravel application typically means having to implement the routing part and implement the logic to manage the request in the controller. </span><span class="koboSpan" id="kobo.415.2">Routing allows us to define which code to execute within our Laravel application against a specific path in the URL. </span><span class="koboSpan" id="kobo.415.3">For example, we might want to define that the code of a method in a specific class such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">HomeController::home()</span></strong><span class="koboSpan" id="kobo.417.1"> must be invoked against a request that has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">/home</span></strong><span class="koboSpan" id="kobo.419.1"> path in the URL. </span><span class="koboSpan" id="kobo.419.2">In the classic Laravel definition, we would write something like this in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">routes/web.php</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.421.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.422.1">
Route::get('/home', [HomeController::class, 'home'])-&gt;name("home");</span></pre>
<p><span class="koboSpan" id="kobo.423.1">Now we have to implement the logic to manage the request in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">HomeController</span></strong><span class="koboSpan" id="kobo.425.1"> class (that we have to create) and implement the </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">home</span></strong><span class="koboSpan" id="kobo.427.1"> method. </span><span class="koboSpan" id="kobo.427.2">So, in a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">app/Http/Controllers/HomeController.php</span></strong><span class="koboSpan" id="kobo.429.1"> file, you have to implement the </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">HomeController</span></strong><span class="koboSpan" id="kobo.431.1"> class extending the basic </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">controller class:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.433.1">
&lt;?php
namespace App\Http\Controllers;
class HomeController extends Controller
{
    public function home(): string
    {
        return "this is the Home page";
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.434.1">Now that you </span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.435.1">have an understanding of how web servers handle requests, let us learn more about the application servers that Laravel Octane </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">integrates with.</span></span></p>
<h1 id="_idParaDest-24"><a id="_idTextAnchor023"/><span class="koboSpan" id="kobo.437.1">Getting to know the application server for Laravel Octane</span></h1>
<p><span class="koboSpan" id="kobo.438.1">In the PHP ecosystem, we have several </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">application servers.</span></span></p>
<p><span class="koboSpan" id="kobo.440.1">Laravel Octane, which</span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.441.1"> handles server configuration, startup, and execution, integrates mainly with two of them: Swoole </span><span class="No-Break"><span class="koboSpan" id="kobo.442.1">and RoadRunner.</span></span></p>
<p><span class="koboSpan" id="kobo.443.1">We will deal with the installation, configuration, and use of these two application servers in detail </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">later on.</span></span></p>
<p><span class="koboSpan" id="kobo.445.1">For now, it is enough for us to know that once the application servers are installed, Laravel Octane will take care of their management. </span><span class="koboSpan" id="kobo.445.2">Laravel Octane will also take care of their proper startup via the </span><span class="No-Break"><span class="koboSpan" id="kobo.446.1">following command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.447.1">
php artisan octane:start</span></pre>
<p><span class="koboSpan" id="kobo.448.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">octane:serve</span></strong><span class="koboSpan" id="kobo.450.1"> command is added when Laravel Octane </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">is installed.</span></span></p>
<p><span class="koboSpan" id="kobo.452.1">In other words, Laravel Octane has a strong dependency on application servers such as RoadRunner </span><span class="No-Break"><span class="koboSpan" id="kobo.453.1">or Swoole.</span></span></p>
<p><span class="koboSpan" id="kobo.454.1">At startup, Laravel Octane via Swoole or RoadRunner activates some workers, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer008">
<span class="koboSpan" id="kobo.456.1"><img alt="Figure 1.1: The activation of workers" src="image/Figure_1.1_B17728.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.457.1">Figure 1.1: The activation of workers</span></p>
<h2 id="_idParaDest-25"><a id="_idTextAnchor024"/><span class="koboSpan" id="kobo.458.1">What are workers?</span></h2>
<p><span class="koboSpan" id="kobo.459.1">In Octane, a </span><strong class="bold"><span class="koboSpan" id="kobo.460.1">worker</span></strong><span class="koboSpan" id="kobo.461.1"> is a</span><a id="_idIndexMarker078"/><span class="koboSpan" id="kobo.462.1"> process that takes charge of handling the</span><a id="_idIndexMarker079"/><span class="koboSpan" id="kobo.463.1"> requests associated with it. </span><span class="koboSpan" id="kobo.463.2">A worker has the responsibility of starting the framework and initializing </span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">framework objects.</span></span></p>
<p><span class="koboSpan" id="kobo.465.1">This has an extremely positive impact from a performance standpoint. </span><span class="koboSpan" id="kobo.465.2">The framework is instantiated on the first request assigned to the worker. </span><span class="koboSpan" id="kobo.465.3">The second (and subsequent) requests assigned to that worker reuse the objects already instantiated. </span><span class="koboSpan" id="kobo.465.4">The side effect of this is that the worker shares instances of global objects and static variables between requests. </span><span class="koboSpan" id="kobo.465.5">This means that different calls to the controller can access the data structures that are shared </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">between requests.</span></span></p>
<p><span class="koboSpan" id="kobo.467.1">To complicate matters, there is the fact that requests assigned to the same worker share a global state, but different workers are independent and have scope independent of each other. </span><span class="koboSpan" id="kobo.467.2">So, we can say that not all requests share the same global state. </span><span class="koboSpan" id="kobo.467.3">Requests share a global state when associated with the same worker. </span><span class="koboSpan" id="kobo.467.4">Two requests from two different workers </span><span class="No-Break"><span class="koboSpan" id="kobo.468.1">share nothing.</span></span></p>
<p><span class="koboSpan" id="kobo.469.1">In order to minimize the side effect, Laravel Octane has the responsibility of managing the reset of classes/objects owned directly by the framework across </span><span class="No-Break"><span class="koboSpan" id="kobo.470.1">the requests.</span></span></p>
<p><span class="koboSpan" id="kobo.471.1">However, Octane can’t manage and reset classes owned directly by </span><span class="No-Break"><span class="koboSpan" id="kobo.472.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.473.1">That’s why the main thing to pay attention to when using Octane is the scope and lifecycle of variables </span><span class="No-Break"><span class="koboSpan" id="kobo.474.1">and objects.</span></span></p>
<p><span class="koboSpan" id="kobo.475.1">To understand this better, I will give you a very </span><span class="No-Break"><span class="koboSpan" id="kobo.476.1">basic example.</span></span></p>
<h3><span class="koboSpan" id="kobo.477.1">Example with a shared variable</span></h3>
<p><span class="koboSpan" id="kobo.478.1">This</span><a id="_idIndexMarker080"/><span class="koboSpan" id="kobo.479.1"> example, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">routes/web.php</span></strong><span class="koboSpan" id="kobo.481.1"> file, creates a route for </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">path /</span></strong><span class="koboSpan" id="kobo.483.1"> and returns a human-readable timestamp. </span><span class="koboSpan" id="kobo.483.2">To simplify the explanation, we are going to write the logic directly into the route file instead of ca</span><a id="_idTextAnchor025"/><span class="koboSpan" id="kobo.484.1">lling a</span><a id="_idTextAnchor026"/><span class="koboSpan" id="kobo.485.1">nd delegating the logic to </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">a controller:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.487.1">
$myStartTime = microtime(true);
Route::get('/', function () use($</span><a id="_idTextAnchor027"/><span class="koboSpan" id="kobo.488.1">myStartTime) {
    return DateTime::createFromFormat('U.u', $myStartTime)
    -&gt;format("r (u)");
});</span></pre>
<p><span class="koboSpan" id="kobo.489.1">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">routes/web.php</span></strong><span class="koboSpan" id="kobo.491.1"> routing file (</span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">web.php</span></strong><span class="koboSpan" id="kobo.493.1"> is already stored in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">routes</span></strong><span class="koboSpan" id="kobo.495.1"> directory in the Laravel root folder project), a </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">$myStartTime</span></strong><span class="koboSpan" id="kobo.497.1"> variable is instantiated and assigned the current time expressed in milliseconds. </span><span class="koboSpan" id="kobo.497.2">This variable is then inherited by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">route/management</span></strong><span class="koboSpan" id="kobo.499.1"> function via the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">use</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.501.1"> clause.</span></span></p>
<p><span class="koboSpan" id="kobo.502.1">In the performance of the function associated with </span><strong class="source-inline"><span class="koboSpan" id="kobo.503.1">route/</span></strong><span class="koboSpan" id="kobo.504.1">, the contents of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">$myStartTime</span></strong><span class="koboSpan" id="kobo.506.1"> variable are returned and </span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">then displayed.</span></span></p>
<p><span class="koboSpan" id="kobo.508.1">With the classic behavior of the Laravel application, at each invocation/execution, the variable is regenerated and reinitialized (each time with a </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">new value).</span></span></p>
<p><span class="koboSpan" id="kobo.510.1">To start the Laravel application in the classic mode, simply run </span><span class="No-Break"><span class="koboSpan" id="kobo.511.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.512.1">
php artisan serve</span></pre>
<p><span class="koboSpan" id="kobo.513.1">Once the web server is started, go to the following URL via the </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">browser: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.515.1">http://127.0.0.1:8000</span></strong></span></p>
<p><span class="koboSpan" id="kobo.516.1">By continuously reloading the page, a different value is displayed each time; basically, the timestamp is displayed with </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">each request.</span></span></p>
<p><span class="koboSpan" id="kobo.518.1">Instead of using the development web server provided by Laravel, you would use Laravel Octane and have a different result. </span><span class="koboSpan" id="kobo.518.2">At each page refresh (reloading of the web page), you would always see the same value. </span><span class="koboSpan" id="kobo.518.3">The value is relative to the timestamp of the first request served. </span><span class="koboSpan" id="kobo.518.4">This means that the variable is initialized with the first request and then the value is reused across </span><span class="No-Break"><span class="koboSpan" id="kobo.519.1">the requests.</span></span></p>
<p><span class="koboSpan" id="kobo.520.1">If you try to refresh multiple times, in some cases, you could see a </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">new value.</span></span></p>
<p><span class="koboSpan" id="kobo.522.1">If this </span><a id="_idIndexMarker081"/><span class="koboSpan" id="kobo.523.1">happens, it means that the request was managed by the second (or a new) worker. </span><span class="koboSpan" id="kobo.523.2">This means that this behavior is quite unpredictable because Octane acts as a load balancer. </span><span class="koboSpan" id="kobo.523.3">When a request comes from the network, the application server will decide which worker (of those available) to assign the </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">request to.</span></span></p>
<p><span class="koboSpan" id="kobo.525.1">In addition to this, another element that could cause a new value to be generated is when you hit the maximum number of requests managed by a single worker. </span><span class="koboSpan" id="kobo.525.2">We will see how to define the maximum number of requests later, and in general, we will have a deep dive session (in </span><em class="italic"><span class="koboSpan" id="kobo.526.1">Chapters 2</span></em><span class="koboSpan" id="kobo.527.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.528.1">3</span></em><span class="koboSpan" id="kobo.529.1">) into Laravel </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">Octane configuration.</span></span></p>
<p><span class="koboSpan" id="kobo.531.1">The behavior whereby variables are shared across workers until the application server is restarted is valid only for global variables or objects stored in the application service container. </span><span class="koboSpan" id="kobo.531.2">The local variables (the variables for which the scope is limited to a function or a method) are </span><span class="No-Break"><span class="koboSpan" id="kobo.532.1">not affected.</span></span></p>
<p><span class="koboSpan" id="kobo.533.1">For example, in the code previously shown, I’m going to declare a </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">$myLocalStartTime</span></strong><span class="koboSpan" id="kobo.535.1"> variable in the function called by the routing mechanism. </span><span class="koboSpan" id="kobo.535.2">The scope of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">$myLocalStartTime</span></strong><span class="koboSpan" id="kobo.537.1"> variable and i</span><a id="_idTextAnchor028"/><span class="koboSpan" id="kobo.538.1">ts life</span><a id="_idTextAnchor029"/><span class="koboSpan" id="kobo.539.1">cycle is limited to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">Closure</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.541.1"> function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.542.1">
$myStartTime = microtime(true);
Route::get('/', function () use($myStartTime) {
    $myLocalStartTime = m</span><a id="_idTextAnchor030"/><span class="koboSpan" id="kobo.543.1">icrotime(true)</span><a id="_idTextAnchor031"/><span class="koboSpan" id="kobo.544.1">;
    return DateTime::createFromFormat('U.u', $myStartTime)
    -&gt;format("r</span><a id="_idTextAnchor032"/><span class="koboSpan" id="kobo.545.1"> (u)") . </span><span class="koboSpan" id="kobo.545.2">" - " .
</span><span class="koboSpan" id="kobo.545.3">    DateTime::createFromFormat('U.u', $myLocalStartTime)
    -&gt;format("r (u)");
});</span></pre>
<p><span class="koboSpan" id="kobo.546.1">Execute the following command with the classic Laravel </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">web server:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.548.1">
php artisan serve</span></pre>
<p><span class="koboSpan" id="kobo.549.1">You will see that both values will change on each new request. </span><span class="koboSpan" id="kobo.549.2">You can see that when you open a browser </span><span class="No-Break"><span class="koboSpan" id="kobo.550.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">http://127.0.0.1:8000</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.552.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.553.1">Launch Octane as a server with the </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">following command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.555.1">
php artisan octane:start</span></pre>
<p><span class="koboSpan" id="kobo.556.1">You </span><a id="_idIndexMarker082"/><span class="koboSpan" id="kobo.557.1">will see, in your browser at </span><strong class="source-inline"><span class="koboSpan" id="kobo.558.1">http://127.0.0.1:8000</span></strong><span class="koboSpan" id="kobo.559.1">, two different dates/times with milliseconds. </span><span class="koboSpan" id="kobo.559.2">If you refresh the page, you will see a change in just the second </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">one (</span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">$myLocalStartTime</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.563.1">You have to be aware of this behavior when you are building an application based </span><span class="No-Break"><span class="koboSpan" id="kobo.564.1">on Octane.</span></span></p>
<p><span class="koboSpan" id="kobo.565.1">Another example to better understand this behavior is creating a class with a </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">static property.</span></span></p>
<h3><span class="koboSpan" id="kobo.567.1">Creating a class with a static property</span></h3>
<p><span class="koboSpan" id="kobo.568.1">In order to keep</span><a id="_idIndexMarker083"/><span class="koboSpan" id="kobo.569.1"> this example as simple as possible, I created a </span><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">MyClass</span></strong><span class="koboSpan" id="kobo.571.1"> class in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.572.1">routes/web.php</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.573.1"> file.</span></span></p>
<p><span class="koboSpan" id="kobo.574.1">I’m going to add new routes that call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.575.1">add()</span></strong><span class="koboSpan" id="kobo.576.1"> method of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">MyClass</span></strong><span class="koboSpan" id="kobo.578.1"> object and then call and return the value of the static property retrieved by the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">get()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.580.1"> method.</span></span></p>
<p><span class="koboSpan" id="kobo.581.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.582.1">routes/web.php</span></strong><span class="koboSpan" id="kobo.583.1">, add the </span><span class="No-Break"><span class="koboSpan" id="kobo.584.1">following class:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.585.1">
class MyClass
{
    public static $number = 0;
    public function __construct()
    {
        print "Construct\n";
    }
    public function __destruct()
    {
        print "Deconstruct\n";
    }
    public function add()
    {
        self::$number++;
    }
    public function get()
    {
        return self::$number;
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.586.1">Then, in </span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.587.1">the </span><strong class="source-inline"><span class="koboSpan" id="kobo.588.1">routes/web.php</span></strong><span class="koboSpan" id="kobo.589.1"> file, declare the new route </span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.591.1">
Route::get('/static-class', function (MyClass $myclass) {
    $myclass-&gt;add();
    return $myclass-&gt;get();
});</span></pre>
<p><span class="koboSpan" id="kobo.592.1">Next, you can launch Laravel in a classic way using the </span><span class="No-Break"><span class="koboSpan" id="kobo.593.1">following command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.594.1">
php artisan serve</span></pre>
<p><span class="koboSpan" id="kobo.595.1">Now, if you access the URL </span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">http://127.0.0.1:8000/static-class</span></strong><span class="koboSpan" id="kobo.597.1"> multiple times, the value </span><strong class="source-inline"><span class="koboSpan" id="kobo.598.1">1</span></strong><span class="koboSpan" id="kobo.599.1"> will be shown. </span><span class="koboSpan" id="kobo.599.2">This is because, classically, for every request, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.600.1">MyClass</span></strong><span class="koboSpan" id="kobo.601.1"> object is instanced </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">from scratch.</span></span></p>
<p><span class="koboSpan" id="kobo.603.1">Launch Laravel Octane using the </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">following command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.605.1">
php artisan octane:serve</span></pre>
<p><span class="koboSpan" id="kobo.606.1">If you then access the URL </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">http://127.0.0.1:8000/static-class</span></strong><span class="koboSpan" id="kobo.608.1"> multiple times, you will see the value </span><strong class="source-inline"><span class="koboSpan" id="kobo.609.1">1</span></strong><span class="koboSpan" id="kobo.610.1"> in the first request, </span><strong class="source-inline"><span class="koboSpan" id="kobo.611.1">2</span></strong><span class="koboSpan" id="kobo.612.1"> in the second, </span><strong class="source-inline"><span class="koboSpan" id="kobo.613.1">3</span></strong><span class="koboSpan" id="kobo.614.1"> in the third, and so on. </span><span class="koboSpan" id="kobo.614.2">This is because, with Octane, </span><strong class="source-inline"><span class="koboSpan" id="kobo.615.1">MyClass</span></strong><span class="koboSpan" id="kobo.616.1"> is instanced for every request, but the static values are kept </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1">in memory.</span></span></p>
<p><span class="koboSpan" id="kobo.618.1">With a </span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.619.1">non-static property, we can see the difference </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.621.1">
class MyClass
{
    public static $numberStatic = 0;
    public $number = 0;
    public function __construct()
    {
        print "Construct\n";
    }
    public function __destruct()
    {
        print "Deconstruct\n";
    }
    public function add()
    {
        self::$numberStatic++;
        $this-&gt;number++;
    }
    public function get()
    {
        return self::$numberStatic . </span><span class="koboSpan" id="kobo.621.2">" - " . </span><span class="koboSpan" id="kobo.621.3">$this-&gt;number;
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.622.1">After calling the page five times, the result shown in the browser will be </span><span class="No-Break"><span class="koboSpan" id="kobo.623.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.624.1">
Construct Deconstruct 5 – 1</span></pre>
<p><span class="koboSpan" id="kobo.625.1">This </span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.626.1">is quite simple but, in the end, good for understanding the behavior of static variables under </span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">the hood.</span></span></p>
<p><span class="koboSpan" id="kobo.628.1">The use of static variables is not so unusual. </span><span class="koboSpan" id="kobo.628.2">Just think of singleton objects or the app container </span><span class="No-Break"><span class="koboSpan" id="kobo.629.1">of Laravel.</span></span></p>
<p><span class="koboSpan" id="kobo.630.1">To avoid unexpected behavior – as in this specific example with static variables but more generally, with global objects (Laravel makes extensive use of them) – explicit re-initialization must be taken care of. </span><span class="koboSpan" id="kobo.630.2">In this case, the static variable is initialized in the constructor. </span><span class="koboSpan" id="kobo.630.3">My suggestion is to use explicit initialization of the properties in the constructor. </span><span class="koboSpan" id="kobo.630.4">This is because it is the developer’s responsibility to take care of the re-initialization of the variables in the case of global states (objects </span><span class="No-Break"><span class="koboSpan" id="kobo.631.1">and variables).</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.632.1">
class MyClass
{
    public static $numberStatic = 0;
    public $number = 0;
    public function __construct()
    {
        print "Construct\n";
        self::$numberStatic = 0;
    }
    public function __destruct()
    {
        print "Deconstruct\n";
    }
    public function add()
    {
        self::$numberStatic++;
        $this-&gt;number++;
    }
    public function get()
    {
        return self::$numberStatic . </span><span class="koboSpan" id="kobo.632.2">" - " . </span><span class="koboSpan" id="kobo.632.3">$this-&gt;number;
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.633.1">We </span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.634.1">have seen just some very basic examples of the impact on the code if you are going to install and use Laravel Octane. </span><span class="koboSpan" id="kobo.634.2">The examples shown earlier were purposely very simple, but with the goal of being easy to understand. </span><span class="koboSpan" id="kobo.634.3">In the chapter where we will use Octane in a real scenario, we will cover more </span><span class="No-Break"><span class="koboSpan" id="kobo.635.1">realistic examples.</span></span></p>
<p><span class="koboSpan" id="kobo.636.1">Now we will analyze the impact on performance. </span><span class="koboSpan" id="kobo.636.2">So, by installing Octane, what kind of improvement could we have in terms </span><span class="No-Break"><span class="koboSpan" id="kobo.637.1">of performance?</span></span></p>
<h1 id="_idParaDest-26"><a id="_idTextAnchor033"/><span class="koboSpan" id="kobo.638.1">Understanding performance measurement in Laravel Octane</span></h1>
<p><span class="koboSpan" id="kobo.639.1">We have</span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.640.1"> said that introducing Laravel Octane </span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.641.1">in your application allows for a performance boost, mainly because the objects and the various instances of the classes used by the framework are no longer initialized at every single HTTP request but at the start of the application server. </span><span class="koboSpan" id="kobo.641.2">As a result, for each HTTP request, framework objects are reused. </span><span class="koboSpan" id="kobo.641.3">Reusing framework objects saves time in serving the </span><span class="No-Break"><span class="koboSpan" id="kobo.642.1">HTTP request.</span></span></p>
<p><span class="koboSpan" id="kobo.643.1">While, on a logical and understandable level, this can have a positive impact in terms of performance, the goal of this part is to get pragmatic feedback on this performance boost by trying to recover some metrics </span><span class="No-Break"><span class="koboSpan" id="kobo.644.1">and values.</span></span></p>
<p><span class="koboSpan" id="kobo.645.1">In order to provide a rough indication of the benefits and improved response time performance for a request, let us try to perform a simple </span><span class="No-Break"><span class="koboSpan" id="kobo.646.1">performance test.</span></span></p>
<p><span class="koboSpan" id="kobo.647.1">To do this, we </span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.648.1">are going to install a tool to generate and execute some HTTP-concurrent requests. </span><span class="koboSpan" id="kobo.648.2">There are several such tools, one of </span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.649.1">which is </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.650.1">wrk</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.651.1"> (</span></span><a href="https://github.com/wg/wrk"><span class="No-Break"><span class="koboSpan" id="kobo.652.1">https://github.com/wg/wrk</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.653.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.654.1">If you have a </span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.655.1">macOS environment, you could use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.656.1">brew</span></strong><span class="koboSpan" id="kobo.657.1"> command (provided by Homebrew) to install the </span><strong class="source-inline"><span class="koboSpan" id="kobo.658.1">wrk</span></strong><span class="koboSpan" id="kobo.659.1"> tool. </span><span class="koboSpan" id="kobo.659.2">To install the tool, use </span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">brew install</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.661.1">as shown:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.662.1">
brew install wrk</span></pre>
<p><span class="koboSpan" id="kobo.663.1">With </span><strong class="source-inline"><span class="koboSpan" id="kobo.664.1">wrk</span></strong><span class="koboSpan" id="kobo.665.1">, you can generate concurrent requests for a defined amount </span><span class="No-Break"><span class="koboSpan" id="kobo.666.1">of time.</span></span></p>
<p><span class="koboSpan" id="kobo.667.1">We will conduct two tests for comparison: one test will be conducted with a classical web application on nginx (</span><strong class="source-inline"><span class="koboSpan" id="kobo.668.1">http://octane.test</span></strong><span class="koboSpan" id="kobo.669.1">), and the other one with an application served by an application server on Laravel </span><span class="No-Break"><span class="koboSpan" id="kobo.670.1">Octane (</span></span><span class="No-Break"><span class="koboSpan" id="kobo.671.1">http://octane.test:8000</span></span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.673.1">The two URLs are resolved </span><span class="No-Break"><span class="koboSpan" id="kobo.674.1">as shown:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.675.1">http://octane.test/</span></strong><span class="koboSpan" id="kobo.676.1"> is resolved with local address </span><strong class="source-inline"><span class="koboSpan" id="kobo.677.1">127.0.0.1</span></strong><span class="koboSpan" id="kobo.678.1"> and will </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">reply nginx</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">http://octane.test:8000/</span></strong><span class="koboSpan" id="kobo.681.1"> is resolved with local address </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">127.0.0.1</span></strong><span class="koboSpan" id="kobo.683.1"> and port </span><strong class="source-inline"><span class="koboSpan" id="kobo.684.1">8000</span></strong><span class="koboSpan" id="kobo.685.1"> is bound </span><span class="No-Break"><span class="koboSpan" id="kobo.686.1">by Swoole</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.687.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.688.1">wrk</span></strong><span class="koboSpan" id="kobo.689.1"> execution will use 4 threads, open 20 connections, and take 10 seconds </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">of tests.</span></span></p>
<p><span class="koboSpan" id="kobo.691.1">So, to test NGINX, launch the </span><strong class="source-inline"><span class="koboSpan" id="kobo.692.1">wrk</span></strong><span class="koboSpan" id="kobo.693.1"> command with </span><span class="No-Break"><span class="koboSpan" id="kobo.694.1">these arguments:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.695.1">
wrk -t4 -c20 -d10s http://octane.test</span></pre>
<p><span class="koboSpan" id="kobo.696.1">You will see the </span><span class="No-Break"><span class="koboSpan" id="kobo.697.1">following output:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.698.1">
Running 10s test @ http://octane.test
  4 threads and 20 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    51.78ms   61.33ms 473.05ms   88.54%
    Req/Sec   141.79     68.87   313.00     66.50%
  5612 requests in 10.05s, 8.47MB read
  Non-2xx or 3xx responses: 2
Requests/sec:    558.17
Transfer/sec:    863.14KB</span></pre>
<p><span class="koboSpan" id="kobo.699.1">To test Laravel Octane (RoadRunner), use the </span><span class="No-Break"><span class="koboSpan" id="kobo.700.1">following command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.701.1">
wrk -t4 -c20 -d10s http://octane.test:8000</span></pre>
<p><span class="koboSpan" id="kobo.702.1">You </span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.703.1">will see the </span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">following output:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.705.1">
Running 10s test @ http://octane.test:8000
  4 threads and 20 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   134.58ms  178.24ms   1.09s    79.75%
    Req/Sec   222.72    192.63     1.02k    73.72%
  7196 requests in 10.02s, 8.06MB read
Requests/sec:    718.51
Transfer/sec:    823.76KB</span></pre>
<p><span class="koboSpan" id="kobo.706.1">This</span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.707.1"> test is very basic because there are no special server-side logic or query databases involved, but it is good to run the test to understand the raw difference in bootstrapping basic objects for Laravel (application container, requests, etc.) and perceive </span><span class="No-Break"><span class="koboSpan" id="kobo.708.1">their flavor.</span></span></p>
<p><span class="koboSpan" id="kobo.709.1">The difference is not so great (7,196 requests versus 5,612 requests) – around 22% – but consider that this difference grows if you add new packages and libraries (more code to be bootstrapped for </span><span class="No-Break"><span class="koboSpan" id="kobo.710.1">each request).</span></span></p>
<p><span class="koboSpan" id="kobo.711.1">Consider also that RoadRunner and Swoole provide other additional tools for improving performances such as enabling concurrency and executing concurrent tasks. </span><span class="koboSpan" id="kobo.711.2">The additional tools will be shown later in </span><em class="italic"><span class="koboSpan" id="kobo.712.1">Chapters 2</span></em> <span class="No-Break"><span class="koboSpan" id="kobo.713.1">and </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.714.1">3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.716.1">To better explain why Laravel Octane allows you to achieve this improvement, let me demonstrate how and when service providers are instanced and loaded into a </span><span class="No-Break"><span class="koboSpan" id="kobo.717.1">service container.</span></span></p>
<p><span class="koboSpan" id="kobo.718.1">Typically, in a </span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.719.1">classic Laravel application </span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.720.1">service, providers are loaded in </span><span class="No-Break"><span class="koboSpan" id="kobo.721.1">each request.</span></span></p>
<p><span class="koboSpan" id="kobo.722.1">Create a new service provider named </span><strong class="source-inline"><span class="koboSpan" id="kobo.723.1">MyServiceProvider</span></strong><span class="koboSpan" id="kobo.724.1"> in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.725.1">app/Providers</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.726.1"> directory:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.727.1">
&lt;?php
namespace App\Providers;
use Illuminate\Support\ServiceProvider;
class MyServiceProvider extends ServiceProvider
{
    public function __construct($app)
    {
        echo "NEW     - " . </span><span class="koboSpan" id="kobo.727.2">__METHOD__ . </span><span class="koboSpan" id="kobo.727.3">PHP_EOL;
        parent::__construct($app);
    }
    public function </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">register</span></strong><span class="koboSpan" id="kobo.729.1">()
    {
        echo "REGISTER     - " . </span><span class="koboSpan" id="kobo.729.2">__METHOD__ . </span><span class="koboSpan" id="kobo.729.3">PHP_EOL;
    }
    public function </span><strong class="source-inline"><span class="koboSpan" id="kobo.730.1">boot</span></strong><span class="koboSpan" id="kobo.731.1">()
    {
        echo "BOOT     - " . </span><span class="koboSpan" id="kobo.731.2">__METHOD__ . </span><span class="koboSpan" id="kobo.731.3">PHP_EOL;
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.732.1">The new service provider simply shows a message when the service provider is created, registered, </span><span class="No-Break"><span class="koboSpan" id="kobo.733.1">and booted.</span></span></p>
<p><span class="koboSpan" id="kobo.734.1">The lifecycle of a service provider starts with three phases: creation, registration, </span><span class="No-Break"><span class="koboSpan" id="kobo.735.1">and boot.</span></span></p>
<p><span class="koboSpan" id="kobo.736.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.737.1">register()</span></strong><span class="koboSpan" id="kobo.738.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.739.1">boot()</span></strong><span class="koboSpan" id="kobo.740.1"> methods are needed for </span><em class="italic"><span class="koboSpan" id="kobo.741.1">dependency resolution</span></em><span class="koboSpan" id="kobo.742.1">. </span><span class="koboSpan" id="kobo.742.2">First of all, every</span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.743.1"> service provider is registered. </span><span class="koboSpan" id="kobo.743.2">Once they are all registered, they could be booted. </span><span class="koboSpan" id="kobo.743.3">If a service provider needs </span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.744.1">another service in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.745.1">boot</span></strong><span class="koboSpan" id="kobo.746.1"> method, you can be sure that it is ready to be used because it is </span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">already registered.</span></span></p>
<p><span class="koboSpan" id="kobo.748.1">Then, you have to register the service provider, so in </span><strong class="source-inline"><span class="koboSpan" id="kobo.749.1">config/app.php</span></strong><span class="koboSpan" id="kobo.750.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.751.1">providers</span></strong><span class="koboSpan" id="kobo.752.1"> array, </span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">add </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.754.1">App\Providers\MyServiceProvider::class</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.755.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.756.1">In a classical Laravel web application, for every HTTP request, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.757.1">MyServiceProvider</span></strong><span class="koboSpan" id="kobo.758.1"> service provider is instanced, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.759.1">construct</span></strong><span class="koboSpan" id="kobo.760.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.761.1">register</span></strong><span class="koboSpan" id="kobo.762.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.763.1">boot</span></strong><span class="koboSpan" id="kobo.764.1"> methods are called every time, showing </span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">this output:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.766.1">
NEW          - App\Providers\MyServiceProvider::__construct
REGISTER     - App\Providers\MyServiceProvider::register
BOOT         - App\Providers\MyServiceProvider::boot</span></pre>
<p><span class="koboSpan" id="kobo.767.1">With Laravel Octane, something </span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">different happens.</span></span></p>
<p><span class="koboSpan" id="kobo.769.1">For a better understanding, we are going to launch the Laravel Octane server with </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">two parameters:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.771.1">workers</span></strong><span class="koboSpan" id="kobo.772.1">: The number of workers that should be available to handle requests. </span><span class="koboSpan" id="kobo.772.2">We are going to set this number </span><span class="No-Break"><span class="koboSpan" id="kobo.773.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.774.1">2</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.775.1">.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.776.1">max-requests</span></strong><span class="koboSpan" id="kobo.777.1">: The number of requests to process before reloading the server. </span><span class="koboSpan" id="kobo.777.2">We are going to set this number to a maximum limit of </span><strong class="source-inline"><span class="koboSpan" id="kobo.778.1">5</span></strong><span class="koboSpan" id="kobo.779.1"> for </span><span class="No-Break"><span class="koboSpan" id="kobo.780.1">each worker.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.781.1">To start the Octane server with two workers and reload the server after processing five requests, we enter the </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">following command:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.783.1">
php artisan octane:start --workers=2 --max-requests=5</span></pre>
<p><span class="koboSpan" id="kobo.784.1">After </span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.785.1">launching Octane, try to perform </span><a id="_idIndexMarker100"/><span class="koboSpan" id="kobo.786.1">more than one request with the browser accessing this </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">URL: </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">http://127.0.0.1:8000</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.790.1">The following is </span><span class="No-Break"><span class="koboSpan" id="kobo.791.1">the output:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.792.1">
NEW          - App\Providers\MyServiceProvider::__construct
REGISTER     - App\Providers\MyServiceProvider::register
BOOT         - App\Providers\MyServiceProvider::boot
  200    GET / ...................................................... </span><span class="koboSpan" id="kobo.792.2">113.62 ms
NEW          - App\Providers\MyServiceProvider::__construct
REGISTER     - App\Providers\MyServiceProvider::register
BOOT         - App\Providers\MyServiceProvider::boot
  200    GET / ....................................................... </span><span class="koboSpan" id="kobo.792.3">85.49 ms
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.4">7.57 ms
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.5">6.96 ms
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.6">6.40 ms
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.7">7.27 ms
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.8">3.97 ms
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.9">5.17 ms
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.10">8.41 ms
worker stopped
  200    GET / ........................................................ </span><span class="koboSpan" id="kobo.792.11">4.84 ms
worker stopped</span></pre>
<p><span class="koboSpan" id="kobo.793.1">The first 2 requests take around 100 </span><strong class="bold"><span class="koboSpan" id="kobo.794.1">milliseconds</span></strong><span class="koboSpan" id="kobo.795.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.796.1">ms</span></strong><span class="koboSpan" id="kobo.797.1">), the next requests take 10 ms, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">register()</span></strong><span class="koboSpan" id="kobo.799.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.800.1">boot()</span></strong><span class="koboSpan" id="kobo.801.1"> methods are called on the first </span><span class="No-Break"><span class="koboSpan" id="kobo.802.1">two requests.</span></span></p>
<p><span class="koboSpan" id="kobo.803.1">So we</span><a id="_idIndexMarker101"/><span class="koboSpan" id="kobo.804.1"> can see the first two requests (two because we have two workers) are a bit slower (113.62 ms and 85.49 ms) than the next requests (from the third to the tenth request, where we have a response time of less than </span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">10 ms).</span></span></p>
<p><span class="koboSpan" id="kobo.806.1">Another </span><a id="_idIndexMarker102"/><span class="koboSpan" id="kobo.807.1">important thing to mention is that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.808.1">register</span></strong><span class="koboSpan" id="kobo.809.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.810.1">boot</span></strong><span class="koboSpan" id="kobo.811.1"> methods are called for the first two requests until the tenth request (two workers multiplied by five max requests). </span><span class="koboSpan" id="kobo.811.2">This behavior is repeated for </span><span class="No-Break"><span class="koboSpan" id="kobo.812.1">subsequent requests.</span></span></p>
<p><span class="koboSpan" id="kobo.813.1">And so, installing Laravel Octane in your web application allows you to improve the response time of </span><span class="No-Break"><span class="koboSpan" id="kobo.814.1">your application.</span></span></p>
<p><span class="koboSpan" id="kobo.815.1">All this without having involved certain tools such as concurrency management provided by application servers such as Swoole </span><span class="No-Break"><span class="koboSpan" id="kobo.816.1">and RoadRunner.</span></span></p>
<h1 id="_idParaDest-27"><a id="_idTextAnchor034"/><span class="koboSpan" id="kobo.817.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.818.1">Now that we have an overview of the behavior, some benefits, and some side effects of Laravel Octane, we can proceed with the next chapter by installing and configuring one of the two Laravel Octane-compatible application servers: the RoadRunner </span><span class="No-Break"><span class="koboSpan" id="kobo.819.1">application server.</span></span></p>
<p><span class="koboSpan" id="kobo.820.1">We will revisit some of the instructions addressed in this chapter. </span><span class="koboSpan" id="kobo.820.2">The goal of this chapter was to provide some useful summary elements to address the more specific and detailed cases in the rest of </span><span class="No-Break"><span class="koboSpan" id="kobo.821.1">the book.</span></span></p>
</div>
<div>
<div class="Content" id="_idContainer010">
</div>
</div>


<div class="Content" id="_idContainer011">
<h1 id="_idParaDest-28"><a id="_idTextAnchor035"/><span class="koboSpan" id="kobo.1.1">Part 2: The Application Server</span></h1>
<p><span class="koboSpan" id="kobo.2.1">Laravel Octane uses an application server such as RoadRunner or Swoole. </span><span class="koboSpan" id="kobo.2.2">Running the application in an application server instead of a classical web server allows the developer to use some advanced features such as managing multiple workers, concurrent tasks, and bootstrap applications in a more efficient way; fast caching, and sharing data across the workers. </span><span class="koboSpan" id="kobo.2.3">This part comprises the </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">following chapters:</span></span></p>
<ul>
<li><a href="B17728_02.xhtml#_idTextAnchor036"><em class="italic"><span class="koboSpan" id="kobo.4.1">Chapter 2</span></em></a><span class="koboSpan" id="kobo.5.1">, </span><em class="italic"><span class="koboSpan" id="kobo.6.1">Configuring the RoadRunner Application Server</span></em></li>
<li><a href="B17728_03.xhtml#_idTextAnchor048"><em class="italic"><span class="koboSpan" id="kobo.7.1">Chapter 3</span></em></a><span class="koboSpan" id="kobo.8.1">, </span><em class="italic"><span class="koboSpan" id="kobo.9.1">Configuring the Swoole Application Server</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer012">
</div>
</div>
<div>
<div id="_idContainer013">
</div>
</div>
</body></html>