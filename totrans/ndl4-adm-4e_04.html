<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer112">
<h1 class="chapter-number" id="_idParaDest-74" lang="en-GB"><a id="_idTextAnchor074"/>4</h1>
<h1 id="_idParaDest-75" lang="en-GB"><a id="_idTextAnchor075"/>Managing Courses and Enrolments</h1>
<p lang="en-GB">Moodle stores learning resources and activities in courses, which is the topic of this chapter, which has been divided into two main parts: <strong class="bold" lang="">course management</strong> and <span class="No-Break" lang=""><strong class="bold" lang="">course enrolments</strong></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">In the first part of this chapter, you will learn about the following aspects of managing courses and <span class="No-Break" lang="">course categories:</span></p>
<ul>
<li lang="en-GB">Organizing courses into categories <span class="No-Break" lang="">and subcategories</span></li>
<li lang="en-GB">Creating and <span class="No-Break" lang="">managing courses</span></li>
<li lang="en-GB">Adding custom <span class="No-Break" lang="">course fields</span></li>
<li lang="en-GB">Dealing with <span class="No-Break" lang="">course requests</span></li>
<li lang="en-GB">Managing courses <span class="No-Break" lang="">in bulk</span></li>
</ul>
<p lang="en-GB">In the second part of the chapter, we will cover different ways of enrolling users in courses. The enrolment mechanisms that will be covered are <span class="No-Break" lang="">the following:</span></p>
<ul>
<li lang="en-GB">Internal enrolment (manual, self, <span class="No-Break" lang="">and guest)</span></li>
<li lang="en-GB">Cohort enrolment <span class="No-Break" lang="">and synchronization</span></li>
<li lang="en-GB">Database-driven enrolment (LDAP, external databases, flat files, and IMS <span class="No-Break" lang="">Enterprise files)</span></li>
<li lang="en-GB"><span class="No-Break" lang="">Meta courses</span></li>
<li lang="en-GB">Payment-driven enrolment (payment accounts and gateways, such <span class="No-Break" lang="">as PayPal)</span></li>
</ul>
<p lang="en-GB">The following diagram shows a high-level overview of how the mentioned topics (courses, categories, and enrolment methods) <span class="No-Break" lang="">are connected:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer062">
<img alt="Figure 4.1 – Courses, categories, and enrolments – a high-level overview " height="980" src="image/Figure_4.01_B18779.jpg" width="1385"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.1 – Courses, categories, and enrolments – a high-level overview</p>
<p lang="en-GB">By the end of this chapter, you will know everything about the management of courses and categories. Furthermore, you will be able to select and configure the correct enrolment method(s) for the Moodle system in <span class="No-Break" lang="">your organization.</span></p>
<p lang="en-GB">Let’s get going with course management in general and course categories <span class="No-Break" lang="">in particular.</span></p>
<h1 id="_idParaDest-76" lang="en-GB"><a id="_idTextAnchor076"/>Organizing courses into categories</h1>
<p lang="en-GB">The role of the<a id="_idIndexMarker190"/> Moodle administrator is to manage categories and courses. This section provides an overview of course categories and introduces a running example before introducing all aspects of category management: <strong class="bold" lang="">creation</strong>, <strong class="bold" lang="">arrangement</strong>, <span class="No-Break" lang="">and </span><span class="No-Break" lang=""><strong class="bold" lang="">removal</strong></span><span class="No-Break" lang="">.</span></p>
<h2 id="_idParaDest-77" lang="en-GB"><a id="_idTextAnchor077"/>Providing an overview of course categories</h2>
<p lang="en-GB">In the<a id="_idIndexMarker191"/> previous chapter, we briefly introduced the concept of categories, which act as containers for courses. They can have subcategories, which can further have sub-subcategories, and <span class="No-Break" lang="">so on.</span></p>
<p lang="en-GB">There are different ways of organizing course and category hierarchies – for instance, by department, subject area, or semester. The following figure shows two different category hierarchies representing the <span class="No-Break" lang="">same organization:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer063">
<img alt="Figure 4.2 – Example category hierarchies " height="465" src="image/Figure_4.02_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.2 – Example category hierarchies</p>
<p lang="en-GB">As you <a id="_idIndexMarker192"/>can see, each hierarchy represents the same information but in different forms. There is no right or wrong way to organize your categories and courses. The structure depends on the <span class="No-Break" lang="">following parameters:</span></p>
<ul>
<li lang="en-GB">The size of <span class="No-Break" lang="">your organization</span></li>
<li lang="en-GB">The number of courses <span class="No-Break" lang="">you offer</span></li>
<li lang="en-GB">The type of courses <span class="No-Break" lang="">you run</span></li>
<li lang="en-GB">The frequency of course commencement (once a term, once a year, <span class="No-Break" lang="">roll-on/roll-off, etc.)</span></li>
</ul>
<p lang="en-GB">It is highly advisable to get the structure right the first time around, as changing it is time-consuming and potentially confusing for the users. Also, try to plan ahead, thinking about whether the structure will work in the future – for example, when changing from one academic year to another (see also <a href="B18779_16.xhtml#_idTextAnchor308"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 16</em></span></a>, <em class="italic" lang="">Avoiding Sleepless Nights – Moodle Backup and Restore</em>, where we look at <span class="No-Break" lang="">end-of-year procedures).</span></p>
<p lang="en-GB">As mentioned <a id="_idIndexMarker193"/>before, different organizations apply different categorization approaches. Some examples of the category levels are <span class="No-Break" lang="">as follows:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Campus</strong> | <strong class="bold" lang="">Department/School</strong> | <strong class="bold" lang="">Year</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Subject</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Year of entry</strong> | <strong class="bold" lang="">Topic</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Subject</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Customer</strong> | <strong class="bold" lang="">Subject</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Proficiency level</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Trainer</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Module</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Course repository</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Topic</strong></span></li>
</ul>
<p lang="en-GB">Sometimes, deep levels of categories can be off-putting, as their management is cumbersome. However, remember that only you, as the administrator, will see the entire category structure. The students and teachers will usually only see the courses that they are enrolled in or to which they are assigned unless they browse the full <span class="No-Break" lang="">course index.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Developing a suitable naming convention for courses and categories is highly recommended – it simplifies maintenance and reduces <span class="No-Break" lang="">unnecessary complexity.</span></p>
<p lang="en-GB">If you require a complete separation of organizational divisions, for instance, customers or self-contained business entities in an enterprise, course categories are usually not a suitable tool. Instead, you might want to consider <a id="_idIndexMarker194"/>Moodle Workplace, which supports multi-tenancy, including entirely isolated entities with their own look and feel, structure, users, and learning spaces (see <a href="B18779_20.xhtml#_idTextAnchor360"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 20</em></span></a>, <em class="italic" lang="">Supporting Multi-Tenancy</em>, for details). More <a id="_idIndexMarker195"/>information on Moodle Workplace can be found at <a href="http://moodle.com/solutions/workplace">moodle.com/solutions/workplace</a> or in the title <em class="italic" lang="">Corporate Learning with Moodle Workplace</em> by <span class="No-Break" lang="">Packt Publishing.</span></p>
<p lang="en-GB">Now that we have shown the flexibility and versatility of category hierarchies, creating and managing your course categories is the <span class="No-Break" lang="">next step.</span></p>
<h2 id="_idParaDest-78" lang="en-GB"><a id="_idTextAnchor078"/>Managing course categories</h2>
<p lang="en-GB">Once <a id="_idIndexMarker196"/>you have planned your category hierarchy structure, it is time to represent the organization in Moodle. Categories are administered in <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Manage courses and categories</strong>, as shown in the <span class="No-Break" lang="">following screenshot:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer064">
<img alt="Figure 4.3 – Course categories " height="296" src="image/Figure_4.03_B18779.jpg" width="705"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.3 – Course categories</p>
<p lang="en-GB">Initially, Moodle contains a single category called <strong class="bold" lang="">Category 1</strong>. The preceding screenshot shows that the default category has been renamed to <strong class="bold" lang="">Computing</strong> and three subcategories for years one to three have already <span class="No-Break" lang="">been created.</span></p>
<p lang="en-GB">In addition to the <strong class="bold" lang="">Course categories</strong> part of the screen, there are up to two more parts: one shows the list of <strong class="bold" lang="">Courses</strong> of the selected category, and one displays <strong class="bold" lang="">Course details</strong> once a course has been selected. This arrangement is depicted in the <span class="No-Break" lang="">following diagram:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer065">
<img alt="Figure 4.4 – Managing courses and categories " height="398" src="image/Figure_4.04_B18779.jpg" width="1040"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.4 – Managing courses and categories</p>
<p lang="en-GB">All three <a id="_idIndexMarker197"/>parts will be shown underneath each other on very narrow screens (tablets or smartphones). You can switch between the three views via the <strong class="bold" lang="">Viewing</strong> dropdown and show <strong class="bold" lang="">Course categories and courses</strong> (default), only <strong class="bold" lang="">Course categories</strong>, or <span class="No-Break" lang="">only </span><span class="No-Break" lang=""><strong class="bold" lang="">Courses</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer066">
<img alt="Figure 4.5 – Managing courses and categories " height="293" src="image/Figure_4.05_B18779.jpg" width="1057"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.5 – Managing courses and categories</p>
<p lang="en-GB">Now that you are familiar with the category management interface, let’s add our first course category to your <span class="No-Break" lang="">Moodle site.</span></p>
<h3 lang="en-GB">Adding course categories</h3>
<p lang="en-GB">Click<a id="_idIndexMarker198"/> on the <strong class="bold" lang="">Create new category</strong> button or go directly to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Add a category</strong> and enter a new name in the <strong class="bold" lang="">Category name</strong> field to add a new category. The <strong class="bold" lang="">Parent category</strong> drop-down menu indicates the course’s location in the hierarchy. We will leave this set to <strong class="bold" lang="">Top</strong> and come back to it shortly. It is good practice to provide the optional <strong class="bold" lang="">Category ID number</strong> and <strong class="bold" lang="">Description</strong> information; the former is used when automating certain tasks, such <a id="_idIndexMarker199"/>as user uploads, while the latter is, for example, shown in the <span class="No-Break" lang="">course index:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer067">
<img alt="Figure 4.6 – Adding a course category " height="377" src="image/Figure_4.06_B18779.jpg" width="1053"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.6 – Adding a course category</p>
<p lang="en-GB">Next up is the creation of course subcategories to create a <span class="No-Break" lang="">category hierarchy.</span></p>
<h3 lang="en-GB">Creating course subcategories</h3>
<p lang="en-GB">As mentioned <a id="_idIndexMarker200"/>earlier, to improve the organization of courses, Moodle allows the creation of subcategories. You can create a subcategory by choosing an existing category and then selecting <strong class="bold" lang="">Create new subcategory</strong> from the drop-down menu in the options or adding a new category (as shown in the preceding screenshot) and moving it into a parent category using the drop-down menus on the <strong class="bold" lang="">Course categories</strong> page. For example, create the <strong class="bold" lang="">Computing Year 1</strong>, <strong class="bold" lang="">Computing Year 2</strong>, and <strong class="bold" lang="">Computing Year 3</strong> subcategories in <strong class="bold" lang="">Computing</strong>, and then move them into <strong class="bold" lang="">Computing</strong> using the drop-down menu. Alternatively, you can select the correct parent category when creating <span class="No-Break" lang="">the subcategory.</span></p>
<p lang="en-GB">So far, we have created categories and subcategories. Now, let’s look at how to rearrange categories in case you need to modify <span class="No-Break" lang="">your hierarchy.</span></p>
<h3 lang="en-GB">Organizing courses and categories</h3>
<p lang="en-GB">The <a id="_idIndexMarker201"/>logical arrangement of categories has three <span class="No-Break" lang="">main purposes:</span></p>
<ul>
<li lang="en-GB">The category hierarchy or the order of categories is displayed on various pages in Moodle – for example, when you need to specify the category to which a course has to <span class="No-Break" lang="">be restored.</span></li>
<li lang="en-GB">Access <a id="_idIndexMarker202"/>permissions can be granted to a category and all its subcategories – for instance, all users from the Math department have access to the <span class="No-Break" lang="">Math category.</span></li>
<li lang="en-GB">Easier maintenance of the category structure. This only applies to the site admins and <span class="No-Break" lang="">category administrators.</span></li>
</ul>
<p lang="en-GB">There are two operations to (re-)organize categories: <strong class="bold" lang="">sorting</strong> <span class="No-Break" lang="">and </span><span class="No-Break" lang=""><strong class="bold" lang="">moving</strong></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">Let’s start <a id="_idIndexMarker203"/>with <strong class="bold" lang="">moving</strong> categories around. The easiest way to change the position of categories is by using the standard up and down arrows. A more flexible way is to select one or many categories and then select a new location from the <strong class="bold" lang="">Move selected categories to</strong> drop-down before pressing the <strong class="bold" lang="">Move</strong> button. When you move a parent category, all the child categories will move <span class="No-Break" lang="">with it:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer068">
<img alt="Figure 4.7 – Sorting and moving categories and courses" height="794" src="image/Figure_4.07_B18779.jpg" width="1378"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.7 – Sorting and moving categories and courses</p>
<p lang="en-GB">You have various options to sort categories. From the <strong class="bold" lang="">Sorting</strong> menu, you can choose to order by <strong class="bold" lang="">All categories</strong>, by <strong class="bold" lang="">Selected category</strong>, or by <strong class="bold" lang="">This category</strong> (which represents the current one). Categories<a id="_idIndexMarker204"/> can be sorted by their <strong class="bold" lang="">name</strong> or <strong class="bold" lang="">ID number</strong> in ascending<a id="_idIndexMarker205"/> or descending order, and they can also be unsorted (that is, you can put them in the original order when they were created). Once you have selected your option, press the <span class="No-Break" lang=""><strong class="bold" lang="">Sort</strong></span><span class="No-Break" lang=""> button.</span></p>
<p lang="en-GB">Alternatively, you can expedite this process by selecting a sorting option from the pull-down menu for each parent category. From the options menu, several actions can be triggered, and they are as follows in <span class="No-Break" lang="">the table:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer069">
<img alt="Figure 4.8 – Category options " height="580" src="image/Figure_4.08_B18779.jpg" width="1385"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.8 – Category options</p>
<p lang="en-GB">You can also hide categories using the eye icon (such as <strong class="bold" lang="">COMP-3</strong> in our case), which is usually done when courses within a category are undergoing development or if you want to create an experimental area (or sandpit) that is not to be seen by anybody without permission to see hidden courses. Hidden categories are only visible to site administrators or those with the <span class="No-Break" lang=""><strong class="source-inline" lang="">moodle/course:viewhiddencourses</strong></span><span class="No-Break" lang=""> capability.</span></p>
<p lang="en-GB">Once you select a category, it shows all its courses in the course area, and depending on your device and screen size, this can be to its right or underneath the <span class="No-Break" lang="">categories area.</span></p>
<p lang="en-GB">While you can use the up and down arrows to reorganize courses, you can use the crossbar at the left and drag each course to its new location – a very handy feature, indeed. Courses can be sorted in ascending and descending order by their <strong class="bold" lang="">full name</strong>, <strong class="bold" lang="">short name</strong>, <strong class="bold" lang="">ID number</strong>, and <strong class="bold" lang="">time created</strong> information, and you also have an option to modify the <a id="_idIndexMarker206"/>number of courses shown per page. Hiding and moving selected courses works in the same way as it does <span class="No-Break" lang="">for categories:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer070">
<img alt="Figure 4.9 – Moving and sorting courses " height="382" src="image/Figure_4.09_B18779.jpg" width="1313"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.9 – Moving and sorting courses</p>
<p lang="en-GB">To sort <a id="_idIndexMarker207"/>courses across categories, you must choose the <strong class="bold" lang="">All categories</strong> option from the <strong class="bold" lang="">Sorting</strong> menu in the <strong class="bold" lang="">Course categories</strong> section. The ordering options are the same as in the context menu shown in the <span class="No-Break" lang="">previous screenshot.</span></p>
<p lang="en-GB">Now that we have dealt with creating, modifying, and rearranging course categories, only one operation is <span class="No-Break" lang="">missing: removing.</span></p>
<h3 lang="en-GB">Deleting course categories</h3>
<p lang="en-GB">When <a id="_idIndexMarker208"/>deleting a course category using the respective option in the drop-down menu, you must decide <strong class="bold" lang="">What to do</strong> with courses and subcategories if <span class="No-Break" lang="">any exist:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Move contents to another category</strong>: You will need to select one from the <strong class="bold" lang="">Move </strong><span class="No-Break" lang=""><strong class="bold" lang="">into</strong></span><span class="No-Break" lang=""> option.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Delete all – cannot be undone</strong>: This step cannot <span class="No-Break" lang="">be undone!</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer071">
<img alt="Figure 4.10 – Deleting a course category " height="424" src="image/Figure_4.10_B18779.jpg" width="702"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.10 – Deleting a course category</p>
<p lang="en-GB">This <a id="_idIndexMarker209"/>concludes the section on managing course categories. The next step is to move down a level from categories to courses and how to create them, which we will deal with in the <span class="No-Break" lang="">next section.</span></p>
<h1 id="_idParaDest-79" lang="en-GB"><a id="_idTextAnchor079"/>Creating courses</h1>
<p lang="en-GB">Courses <a id="_idIndexMarker210"/>are fundamental in Moodle. Learners and trainers spend most of their time in courses since this is where teaching, learning, and collaboration <span class="No-Break" lang="">take place.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">We have mentioned it before, but because it is critical to administering Moodle, here it goes again: Moodle is a <span class="No-Break" lang="">course-centric system!</span></p>
<p lang="en-GB">Before we start creating our first course, let’s briefly look at a typical course <span class="No-Break" lang="">creation workflow.</span></p>
<h2 id="_idParaDest-80" lang="en-GB"><a id="_idTextAnchor080"/>Course creation workflows</h2>
<p lang="en-GB">Different <a id="_idIndexMarker211"/>types of organizations offer different types of courses. Courses in a school are usually linked to a syllabus, whereas courses a commercial online provider offers are driven by a catalog or provided on an ad hoc basis. However, several steps are common in most course creation workflows, shown in the following diagram, where the top row shows the tasks to be carried out and the bottom row the role that is <span class="No-Break" lang="">usually responsible:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer072">
<img alt="Figure 4.11 – A typical course creation workflow " height="157" src="image/Figure_4.11_B18779.jpg" width="1385"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.11 – A typical course creation workflow</p>
<p lang="en-GB">The steps are <a id="_idIndexMarker212"/><span class="No-Break" lang="">as follows:</span></p>
<ol>
<li lang="en-GB"><strong class="bold" lang="">Course request</strong>: Somebody requests a new course, which is often driven by a syllabus or can be an ad hoc requirement by <span class="No-Break" lang="">a teacher.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Create course</strong>: The course skeleton can be created manually or automatically; both options will be dealt with after introducing this course <span class="No-Break" lang="">creation workflow.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Notify teacher</strong>: Letting the requester know that the course has been added. Again, this can either be done manually <span class="No-Break" lang="">or automatically.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Adjust settings</strong>: The new course owner responsible for the course will add any missing information – for example, the <span class="No-Break" lang="">course description.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Populate course</strong>: The course requester is handed over an empty course or a skeleton based on a course template. It is up to the teacher to populate the course with learning content, activities, <span class="No-Break" lang="">and interdependencies.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Enrol users</strong>: There are various options for adding users to a course. This can either be an automated process driven by the admin, done manually by the teacher, or, depending on your setup, by the learners themselves. We have dedicated the entire second part of this chapter to course enrolments, so hang in there <span class="No-Break" lang="">for now.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Start course</strong>: At some stage, the course will be let loose into the wild, either from a specific start date (for instance, the beginning of the semester) or flexibly with a more dynamic setup (for example, self-paced <span class="No-Break" lang="">online courses).</span></li>
</ol>
<p lang="en-GB">This process is not written in stone and might look different in your organization. Additional steps might have been added, or the order of specific tasks might be different, such as when<a id="_idIndexMarker213"/> enrolment occurs. However, the steps outlined are usually present in most course creation workflows. OK, enough processes and procedures; let’s add the first course to your <span class="No-Break" lang="">Moodle system.</span></p>
<h2 id="_idParaDest-81" lang="en-GB"><a id="_idTextAnchor081"/>Creating a new course</h2>
<p lang="en-GB">Once<a id="_idIndexMarker214"/> the <strong class="bold" lang="">Create new course</strong> button has been pressed, Moodle directs you to the settings page where course details must be entered. When we created our first course, we already came across this screen in <a href="B18779_03.xhtml#_idTextAnchor059"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 3</em></span></a>, <em class="italic" lang="">Exploring Courses, Users, </em><span class="No-Break" lang=""><em class="italic" lang="">and Roles</em></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">The following<a id="_idIndexMarker215"/> settings are available in the <strong class="bold" lang="">General</strong> and <span class="No-Break" lang=""><strong class="bold" lang="">Description</strong></span><span class="No-Break" lang=""> sections:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer073">
<img alt="Figure 4.12 – Course settings " height="842" src="image/Figure_4.12_B18779.jpg" width="1384"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.12 – Course settings</p>
<p lang="en-GB">By default, the <strong class="bold" lang="">Course full name</strong>, <strong class="bold" lang="">Course short name</strong>, <strong class="bold" lang="">Course category</strong>, <strong class="bold" lang="">Course ID number</strong>, and <strong class="bold" lang="">Course summary</strong> fields can be modified by a teacher. You can disallow<a id="_idIndexMarker216"/> this by changing the appropriate permissions for the <strong class="bold" lang="">Teacher</strong> role by navigating to <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Users</strong> | <strong class="bold" lang="">Permissions</strong> | <strong class="bold" lang="">Define roles</strong> (search for capabilities starting with <strong class="source-inline" lang="">moodle/course:change</strong> using the <strong class="bold" lang="">Filter</strong> box). <a href="B18779_06.xhtml#_idTextAnchor116"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 6</em></span></a>, <em class="italic" lang="">Managing Permissions, Roles, and Capabilities</em>, will deal with this in <span class="No-Break" lang="">more detail.</span></p>
<h3 lang="en-GB">Course formats</h3>
<p lang="en-GB">The<a id="_idIndexMarker217"/> following section in the course settings lets you choose a <strong class="bold" lang="">Course format</strong> option. A course format dictates how course content will be presented to the learner. Moodle ships with four formats, but more can be installed (see the <em class="italic" lang="">Installing third-party add-ons</em> section in <a href="B18779_08.xhtml#_idTextAnchor168"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 8</em></span></a>, <em class="italic" lang="">Understanding Moodle Plugins</em>). Once you have selected a course format, the screen refreshes to load the respective course <span class="No-Break" lang="">format settings:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Single-activity format</strong>: This only shows the selected activity in a course – for instance, a SCORM package, assignment, forum, quiz, and <span class="No-Break" lang="">so on</span></li>
<li lang="en-GB"><strong class="bold" lang="">Social format</strong>: This is one main (social) forum, which is listed on the main course page – for example, a <span class="No-Break" lang="">notice board</span></li>
<li lang="en-GB"><strong class="bold" lang="">Topics format</strong>: This is similar to the weekly format, except that each week is called a topic, and no time <span class="No-Break" lang="">restriction applies</span></li>
<li lang="en-GB"><strong class="bold" lang="">Weekly format</strong>: In this format, a course is organized week-by-week, with a start and a <span class="No-Break" lang="">finish date</span></li>
</ul>
<p lang="en-GB">You can specify the default course format for new courses by going to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Course </strong><span class="No-Break" lang=""><strong class="bold" lang="">default settings</strong></span><span class="No-Break" lang="">.</span></p>
<h3 lang="en-GB">Course dates</h3>
<p lang="en-GB">While<a id="_idIndexMarker218"/> most course fields are (almost) self-explanatory, the date-related settings probably need more explanation, especially when used in conjunction with the <strong class="bold" lang="">Weekly format</strong> option <span class="No-Break" lang="">just mentioned:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer074">
<img alt="Figure 4.13 – Course date settings " height="344" src="image/Figure_4.13_B18779.jpg" width="1039"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.13 – Course date settings</p>
<p lang="en-GB">Somewhat<a id="_idIndexMarker219"/> surprisingly, Moodle course dates don’t allow or restrict course access; instead, <strong class="bold" lang="">Course start date</strong> and <strong class="bold" lang="">Course end date</strong> affect whether course logs are displayed, the heading of each topic when run in <strong class="bold" lang="">Weekly format</strong>, and the status of a user’s course (in progress, future, <span class="No-Break" lang="">or past).</span></p>
<p lang="en-GB">By default, course dates are absolute; the start and end dates are the same for each user. Moodle also supports relative course dates, where each user is given an individual start and end date: the relative start date is equal to the user’s enrolment date unless the enrolment took place before the course begins, in which case, the individual start date is the one that has been specified manually, that is, the course <span class="No-Break" lang="">start date.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB"><strong class="bold" lang="">Relative dates mode</strong> cannot be changed once the course has <span class="No-Break" lang="">been created.</span></p>
<p lang="en-GB">The following table summarizes the discussed date-related settings in <span class="No-Break" lang="">a course:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer075">
<img alt="Figure 4.14 – Course date settings " height="378" src="image/Figure_4.14_B18779.jpg" width="1040"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.14 – Course date settings</p>
<p lang="en-GB">The individual <strong class="bold" lang="">course status</strong> is calculated as follows, taking into account the dates and modes we <span class="No-Break" lang="">have discussed:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">In progress</strong>: <strong class="source-inline" lang="">start date ≤ today [≤ </strong><span class="No-Break" lang=""><strong class="source-inline" lang="">end date]</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Past</strong>: <strong class="source-inline" lang="">today &gt; </strong><span class="No-Break" lang=""><strong class="source-inline" lang="">end date</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Future</strong>: <strong class="source-inline" lang="">today &lt; </strong><span class="No-Break" lang=""><strong class="source-inline" lang="">start date</strong></span></li>
</ul>
<p lang="en-GB">The <strong class="bold" lang="">Calculate the end date from the number of sections</strong> option only appears when you run<a id="_idIndexMarker220"/> the course in <strong class="bold" lang="">Weekly format</strong>. If enabled, the course end date is calculated automatically based on the course start date (relative or absolute) and the number of sections or weeks. If course sections or weeks are added or removed, the course end date is adjusted automatically. If this checkbox is ticked, the course end date cannot be <span class="No-Break" lang="">set manually.</span></p>
<p lang="en-GB">Note that at the time of writing, <strong class="bold" lang="">Relative dates mode</strong> is an experimental setting, as it has not yet been implemented in all activities (such as Quiz) or features (for instance, restrict access). It must be enabled via the <strong class="bold" lang="">Enable course relative dates</strong> setting in <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Development</strong> | <strong class="bold" lang="">Experimental</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Experimental settings</strong></span><span class="No-Break" lang="">.</span></p>
<h3 lang="en-GB">Other course fields</h3>
<p lang="en-GB">The <a id="_idIndexMarker221"/>remaining options in the <strong class="bold" lang="">Appearance</strong>, <strong class="bold" lang="">Files and uploads</strong>, <strong class="bold" lang="">Completion tracking</strong>, and <strong class="bold" lang="">Groups</strong> sections are <span class="No-Break" lang="">as follows:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer076">
<img alt="Figure 4.15 – Course settings " height="1354" src="image/Figure_4.15_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.15 – Course settings</p>
<p lang="en-GB">Once a course has <a id="_idIndexMarker222"/>been created, you can assign users to various roles in the course (such as enrolling students and assigning teachers); we have briefly covered this in <a href="B18779_03.xhtml#_idTextAnchor059"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 3</em></span></a>, <em class="italic" lang="">Exploring Courses, Users, and Roles</em>, and have dedicated the entire <em class="italic" lang="">Roles management</em> section in <a href="B18779_06.xhtml#_idTextAnchor116"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 6</em></span></a>, <em class="italic" lang="">Managing Permissions, Roles, and Capabilities</em>, to roles, and will therefore be ignoring the <strong class="bold" lang="">Role renaming</strong> part for now. The same holds for an optional <strong class="bold" lang="">Tags</strong> section, which is dealt with in <a href="B18779_09.xhtml#_idTextAnchor181"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 9</em></span></a>, <em class="italic" lang="">Configuring </em><span class="No-Break" lang=""><em class="italic" lang="">Educational Features</em></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">Internally, each<a id="_idIndexMarker223"/> course is given an ID. As mentioned before, a course always belongs to a single category and cannot belong to multiple categories or be without a category. However, the home page (<strong class="source-inline" lang="">course id = 1</strong>) is one exception to this rule. Internally, the home page is treated as a course that neither belongs to a category nor can <span class="No-Break" lang="">be deleted.</span></p>
<p lang="en-GB">You can specify the course default settings for most parameters when creating new courses; you can find these in <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Course default settings</strong>. The fields and values are identical to those described in the <span class="No-Break" lang="">preceding screenshots.</span></p>
<p lang="en-GB">All course settings you have come across so far are part of Core Moodle. Custom course fields can be added to extend the list of options covered in the <span class="No-Break" lang="">next section.</span></p>
<h2 id="_idParaDest-82" lang="en-GB"><a id="_idTextAnchor082"/>Custom course fields</h2>
<p lang="en-GB">Course fields <a id="_idIndexMarker224"/>in Moodle are organized into course categories such as <strong class="bold" lang="">General</strong>, <strong class="bold" lang="">Course format</strong>, or <strong class="bold" lang="">Appearance</strong>. Additional categories can be created, and user-defined fields can then be placed within these new categories, which teachers can configure. You find this feature by navigating to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Course </strong><span class="No-Break" lang=""><strong class="bold" lang="">custom fields</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer077">
<img alt="Figure 4.16 – Custom course fields " height="328" src="image/Figure_4.16_B18779.jpg" width="1385"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.16 – Custom course fields</p>
<p lang="en-GB">In our demo system, we have already created a category called <strong class="bold" lang="">Curriculum</strong> with four course fields: <strong class="bold" lang="">Notional learning hours</strong>, <strong class="bold" lang="">Course type</strong>, <strong class="bold" lang="">Link to syllabus</strong>, and <strong class="bold" lang="">Curriculum update</strong>. To create a new category, click the <strong class="bold" lang="">Add a new category</strong> button and rename the default name (<strong class="bold" lang="">Other fields</strong>) using the standard <strong class="bold" lang="">Edit</strong> icon. Once a category has been created, five types of profile fields can be added via the <strong class="bold" lang="">Add a new custom field</strong> <span class="No-Break" lang="">dropdown menu:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Checkbox</strong>: The values are true <span class="No-Break" lang="">or false</span></li>
<li lang="en-GB"><strong class="bold" lang="">Date and t</strong><strong class="bold" lang="">ime</strong>: Contains the date and an optional <span class="No-Break" lang="">time field</span></li>
<li lang="en-GB"><strong class="bold" lang="">Dropdown menu</strong>: Selection of a single value from a <span class="No-Break" lang="">predefined list</span></li>
<li lang="en-GB"><strong class="bold" lang="">Short text</strong>: A single line of text or <span class="No-Break" lang="">a number</span></li>
<li lang="en-GB"><strong class="bold" lang="">Text area</strong>: Multiline <span class="No-Break" lang="">formatted text</span></li>
</ul>
<p lang="en-GB">At <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Custom fields</strong> | <strong class="bold" lang="">Manage custom field types</strong>, you <a id="_idIndexMarker225"/>can hide or uninstall custom field types. The latter is only recommended for field types that have been installed; for those, you might also find settings that do not exist for the five described <span class="No-Break" lang="">core types.</span></p>
<p lang="en-GB">Once you have chosen your field type, you are taken to a settings screen for that field, which contains <span class="No-Break" lang="">three sections:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">General</strong> settings apply to all <span class="No-Break" lang="">custom fields</span></li>
<li lang="en-GB"><strong class="bold" lang="">Field settings</strong> contain parameters that apply only to the chosen <span class="No-Break" lang="">field type</span></li>
<li lang="en-GB"><strong class="bold" lang="">Common course custom field settings</strong> deal with permissions <span class="No-Break" lang="">and visibility</span></li>
</ul>
<p lang="en-GB">Let’s look at these three sections in a little <span class="No-Break" lang="">more detail.</span></p>
<p lang="en-GB">The <strong class="bold" lang="">General</strong> section contains the following fields: the <strong class="bold" lang="">Name</strong> field is the label displayed in the course settings and the <strong class="bold" lang="">Short name</strong> field is a unique field identifier. An optional <strong class="bold" lang="">Description</strong> field can be given, which is displayed underneath the field in the course settings. If the field is obligatory, the <strong class="bold" lang="">Required</strong> option must be set to <strong class="bold" lang="">Yes</strong>. If the value entered needs to be unique, the <strong class="bold" lang="">Unique data</strong> field must be <span class="No-Break" lang="">changed accordingly:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer078">
<img alt="Figure 4.17 – Custom course fields (General and Common) " height="989" src="image/Figure_4.17_B18779.jpg" width="1204"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.17 – Custom course fields (General and Common)</p>
<p lang="en-GB">In addition <a id="_idIndexMarker226"/>to the general field settings, specific settings have to be provided for each profile <span class="No-Break" lang="">field type:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Checkbox</strong>: This type has only a single setting. It specifies whether the checkbox will be <strong class="bold" lang="">Checked by default</strong> in new user profiles <span class="No-Break" lang="">or not.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Date and time</strong>: The <strong class="bold" lang="">Minimum value</strong> (the start date – by default, today) and <strong class="bold" lang="">Maximum value</strong> (end date – by default, also today) settings can be enabled and specified. An optional time field can be included by checking the <strong class="bold" lang="">Include </strong><span class="No-Break" lang=""><strong class="bold" lang="">time</strong></span><span class="No-Break" lang=""> option.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Dropdown menu</strong>: For this type, a list of <strong class="bold" lang="">Menu options (one per line)</strong> and an optional <strong class="bold" lang="">Default value</strong> must be provided. The list consists of a single item per line. If you wish to allow empty values, leave the first entry empty. In the following screenshot, three options (<strong class="bold" lang="">Syllabus</strong>, <strong class="bold" lang="">Extra-curricular</strong>, and <strong class="bold" lang="">None</strong>) have been entered, with <strong class="bold" lang="">Syllabus</strong> being <span class="No-Break" lang="">the default:</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer079">
<img alt="Figure 4.18 – Custom course fields in the dropdown settings " height="249" src="image/Figure_4.18_B18779.jpg" width="626"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.18 – Custom course fields in the dropdown settings</p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Short text</strong>: For<a id="_idIndexMarker227"/> this type, the <strong class="bold" lang="">Default value</strong>, <strong class="bold" lang="">Form input size</strong> (as in, the textbox width), and <strong class="bold" lang="">Maximum number of characters</strong> details must be provided. Additionally, you must specify whether the field is a <strong class="bold" lang="">Password field</strong> type, which will lead to masking being turned on if enabled. The <strong class="bold" lang="">Link</strong> field lets you create dynamic links, where <strong class="source-inline" lang="">$$</strong> represents the parameter that will be replaced with the entered text. In the following screenshot, we have specified <a href="https://yourorganization/syllabus/%24%24">https://yourorganization/syllabus/$$</a>. The transformed link will be shown in the list of available courses or all courses. <strong class="bold" lang="">Link target</strong> specifies where this link will be opened once <span class="No-Break" lang="">it’s selected:</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer080">
<img alt="Figure 4.19 – Custom course field in the short text field settings " height="559" src="image/Figure_4.19_B18779.jpg" width="667"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.19 – Custom course field in the short text field settings</p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Text area</strong>: This type allows users to define an optional <strong class="bold" lang="">Default value</strong> in a <span class="No-Break" lang="">free-form textbox.</span></li>
</ul>
<p lang="en-GB">There are only two <a id="_idIndexMarker228"/>settings in the <strong class="bold" lang="">Common course custom field</strong> settings. The field can be <strong class="bold" lang="">Locked</strong>; that is, the teacher is prevented from modifying it. This option is useful when you have a central system for course management containing data such as internal course codes, which nobody should change. Locking is often used in conjunction with one of the following three <strong class="bold" lang="">Visible </strong><span class="No-Break" lang=""><strong class="bold" lang="">to</strong></span><span class="No-Break" lang=""> options:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Everyone</strong> (default): This is used for course information that teachers and students can see, and potentially users outside <span class="No-Break" lang="">the course</span></li>
<li lang="en-GB"><strong class="bold" lang="">Teacher</strong>: Fields containing sensitive information students should not see, which can be as trivial as the teacher’s course resources <span class="No-Break" lang="">for preparation</span></li>
<li lang="en-GB"><strong class="bold" lang="">Nobody</strong>: This is typically set by an administrator who wants to hold data on the courses, such as the aforementioned internal <span class="No-Break" lang="">course code</span></li>
</ul>
<p lang="en-GB">Once all the required fields have been added, the order in which they will be displayed in the user profile can be changed using the up and <span class="No-Break" lang="">down arrows.</span></p>
<p lang="en-GB">The management of custom course fields has been described in great detail here. The same mechanism is available for other custom parameters, such as the user profile or appointment custom fields (Moodle <span class="No-Break" lang="">Workplace only).</span></p>
<p lang="en-GB">So far, we have created courses manually, a potentially time-consuming and error-prone process. To tackle these shortcomings, you have two options – course requests and bulk upload – which we will cover in the subsequent two subsections. Let’s start by partly delegating the task to teachers using <span class="No-Break" lang="">course requests.</span></p>
<h2 id="_idParaDest-83" lang="en-GB"><a id="_idTextAnchor083"/>Course requests – enabling teachers to ask for new courses</h2>
<p lang="en-GB">Only administrators or<a id="_idIndexMarker229"/> course creators (or any other role with course creation rights) have permission to create new courses. Moodle offers a course requesting facility to streamline the procedure for requesting courses, especially in larger organizations. This feature has to be enabled by going to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Course request</strong></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">You must specify the <strong class="bold" lang="">Default category for course requests</strong> setting, which controls where the courses created upon request will be placed. You can also disable <strong class="bold" lang="">Prevent category selection</strong> if your users are familiar with the course category structure. As the courses have<a id="_idIndexMarker230"/> to be approved, you can specify the <strong class="bold" lang="">Course request </strong><span class="No-Break" lang=""><strong class="bold" lang="">notification</strong></span><span class="No-Break" lang=""> recipient(s):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer081">
<img alt="Figure 4.20 – Course requests " height="591" src="image/Figure_4.20_B18779.jpg" width="1035"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.20 – Course requests</p>
<p lang="en-GB">Once the feature is enabled, each teacher can request new courses (via the <strong class="bold" lang="">Request a course</strong> option on the <strong class="bold" lang="">My courses</strong> screen). The information that has to be provided by the requestee is <span class="No-Break" lang="">as follows:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Course </strong><span class="No-Break" lang=""><strong class="bold" lang="">full name</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Course </strong><span class="No-Break" lang=""><strong class="bold" lang="">short name</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Course category</strong> (if <span class="No-Break" lang="">selected above)</span></li>
<li lang="en-GB"><span class="No-Break" lang=""><strong class="bold" lang="">Summary</strong></span></li>
<li lang="en-GB"><strong class="bold" lang="">Reasons for </strong><span class="No-Break" lang=""><strong class="bold" lang="">course request</strong></span></li>
</ul>
<p lang="en-GB">A new item, <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Pending requests</strong>, appears in the <strong class="bold" lang="">Site administration</strong> section. On selection, the list of requested courses is shown, which you can then <strong class="bold" lang="">Approve</strong> or <strong class="bold" lang="">Reject</strong> by selecting the <span class="No-Break" lang="">appropriate button:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer082">
<img alt="Figure 4.21 – Course approval " height="307" src="image/Figure_4.21_B18779.jpg" width="1382"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.21 – Course approval</p>
<p lang="en-GB">When you <a id="_idIndexMarker231"/>approve a course, the familiar course settings screen appears. This screen already contains the provided course values specified in the system settings. Furthermore, users who have requested the course will be automatically enrolled, and, by default, they will be assigned the teacher role. If you reject a course, a reason must be given, which is emailed to <span class="No-Break" lang="">the requester.</span></p>
<p lang="en-GB">Course requests only semi-automate the course creation process because you still have to approve or reject them manually. Uploading courses in bulk introduces a versatile way to create, modify, and remove courses without <span class="No-Break" lang="">further intervention.</span></p>
<h2 id="_idParaDest-84" lang="en-GB"><a id="_idTextAnchor084"/>Managing courses in bulk</h2>
<p lang="en-GB">So far, all the <a id="_idIndexMarker232"/>operations in this chapter have been carried out manually. However, this process should be automated in an organization with many courses and categories. In <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Upload courses</strong>, Moodle provides us with a powerful tool to manage courses in bulk. This not only lets us create new courses but it also works for updating and deleting courses, importing courses, and restoring courses from backups and <span class="No-Break" lang="">course templates.</span></p>
<p lang="en-GB">To create courses in batch mode, you will need to create a CSV file, which contains the following fields (the complete list can be found <span class="No-Break" lang="">at </span><a href="http://docs.moodle.org/en/Upload_courses"><span class="No-Break" lang="">docs.moodle.org/en/Upload_courses</span></a><span class="No-Break" lang="">):</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Course information fields</strong>: These are identical to the fields on the course settings page – for example, short name, full name, and ID number. The content of each course information field has to conform to its type; for example, a date field has to be provided with a date value. Custom course fields are fully supported and must be labeled with <strong class="source-inline" lang="">customfield_&lt;shortname&gt;</strong> – for <span class="No-Break" lang="">instance, </span><span class="No-Break" lang=""><strong class="source-inline" lang="">customfield_duration</strong></span><span class="No-Break" lang="">.</span></li>
</ul>
<p lang="en-GB">To specify the category in which the course has to be placed, you have three options (in order of precedence): <strong class="source-inline" lang="">category</strong> (internal ID), <strong class="source-inline" lang="">category_idnumber</strong> (ID number), and <strong class="source-inline" lang="">category_path</strong>, where a forward slash surrounded by spaces must separate <span class="No-Break" lang="">subdirectories (</span><span class="No-Break" lang=""><strong class="source-inline" lang="">[category]&lt;space&gt;/&lt;space&gt;[subcategory]…</strong></span><span class="No-Break" lang="">).</span></p>
<p lang="en-GB">The following<a id="_idIndexMarker233"/> is a sample file demonstrating all <span class="No-Break" lang="">three options:</span></p>
<p class="source-code" lang="en-GB">shortname,fullname,category,category_idnumber,category_path</p>
<p class="source-code" lang="en-GB">course1,Course One,4,,</p>
<p class="source-code" lang="en-GB">course2,Course Two,,COMP-1,</p>
<p class="source-code" lang="en-GB">course3,Course Three,,,Computing / Computing - Year 1</p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Categories cannot be created in batch mode; they must exist! Alternatively, use MOOSH, a Moodle Shell, explained in more detail in <a href="B18779_17.xhtml#_idTextAnchor325"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 17</em></span></a>, <em class="italic" lang="">Working with Moodle </em><span class="No-Break" lang=""><em class="italic" lang="">Admin Tools</em></span><span class="No-Break" lang="">.</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Enrolment fields</strong>: These let you enable and configure enrolment plugins. We will be dealing with enrolments further down in this section, so here is a sample to <span class="No-Break" lang="">configure self-enrolment:</span><p class="source-code" lang="en-GB">shortname,fullname,category,enrolment_1,enrolment_1_startdate</p><p class="source-code" lang="en-GB">course1,Course One,4,self,06/10/14</p><p class="source-code" lang="en-GB">course2,Course Two,4,manual,06/10/14</p><p class="source-code" lang="en-GB">course3,Course Three,4,manual,06/10/14</p></li>
</ul>
<p lang="en-GB">At the time of writing, only the manual, self, guest, and cohort enrolment methods are supported by course uploads. To monitor progress on this missing subfeature, monitor <strong class="source-inline" lang="">MDL-73838</strong> in the bug <span class="No-Break" lang="">tracker database.</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Role renaming</strong>: This provides a means to rename standard roles. We will deal with roles in <a href="B18779_05.xhtml#_idTextAnchor092"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 5</em></span></a>, <em class="italic" lang="">Managing Users, Cohorts, </em><span class="No-Break" lang=""><em class="italic" lang="">and Authentication</em></span><span class="No-Break" lang="">.</span></li>
</ul>
<p lang="en-GB">In addition <a id="_idIndexMarker234"/>to these three field types, so-called course action fields can be specified to perform an action other than <span class="No-Break" lang="">creating courses:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">delete</strong>: “1” to delete <span class="No-Break" lang="">a course.</span></li>
<li lang="en-GB"><strong class="bold" lang="">rename</strong>: Add a new course <span class="No-Break" lang="">short name.</span></li>
<li lang="en-GB"><strong class="bold" lang="">backupfile</strong>: The absolute path of a backup file (<strong class="source-inline" lang="">.mbz</strong>), used as a source. This can potentially lead to performance problems (check out <strong class="source-inline" lang="">$CFG-&gt; keeptempdirectoriesonbackup</strong> in <a href="B18779_Appendix.xhtml#_idTextAnchor369"><em class="italic" lang="">Appendix</em></a>, <span class="No-Break" lang=""><em class="italic" lang="">Configuration Settings</em></span><span class="No-Break" lang="">).</span></li>
<li lang="en-GB"><strong class="bold" lang="">templatecourse</strong>: The <strong class="source-inline" lang="">shortname</strong> of an existing course used as <span class="No-Break" lang="">a source.</span></li>
<li lang="en-GB"><strong class="bold" lang="">reset</strong>: “1” to reset the course and remove any <span class="No-Break" lang="">user data.</span></li>
</ul>
<p lang="en-GB">Once a file has been uploaded, you will have to change the <strong class="bold" lang="">CSV delimiter</strong> and <strong class="bold" lang="">Encoding</strong> file format settings if they are incorrect. You can further specify the number of <strong class="bold" lang="">Preview rows</strong>. Then, the following import options can be configured (depending on the upload mode selected, some settings will be shown <span class="No-Break" lang="">or hidden):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer083">
<img alt="Figure 4.22 – Uploading courses " height="702" src="image/Figure_4.22_B18779.jpg" width="1388"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.22 – Uploading courses</p>
<p lang="en-GB">The counterpart <a id="_idIndexMarker235"/>on the screen looks <span class="No-Break" lang="">as follows:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer084">
<img alt="Figure 4.23 – Uploading courses " height="930" src="image/Figure_4.23_B18779.jpg" width="848"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.23 – Uploading courses</p>
<p lang="en-GB">When in preview mode, you<a id="_idIndexMarker236"/> will see these import options again and the <strong class="bold" lang="">Course process</strong> settings, <strong class="bold" lang="">Default course values</strong>, and, if custom course fields have been added, <strong class="bold" lang="">Default values</strong> for each custom course category. The latter two are the values used if not provided in the CSV file and an update mode is chosen that supports defaults. The course process supports two types of templates, which require <span class="No-Break" lang="">some explanation:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Course name templates</strong>: If the CSV file does not contain a <strong class="source-inline" lang="">shortname</strong> column, you can use template syntax to set the name, depending on either <strong class="source-inline" lang="">idnumber (%i)</strong> or <strong class="source-inline" lang="">fullname (%f)</strong>. For instance, the given <strong class="bold" lang="">Template to generate a shortname</strong> is <strong class="source-inline" lang="">Packt %i</strong> with <strong class="bold" lang="">Upload mode</strong> set to <strong class="bold" lang="">Create all, increment shortname if needed</strong> would result in the three courses, <strong class="source-inline" lang="">Packt_1</strong>, <strong class="source-inline" lang="">Packt_2</strong>, and <strong class="source-inline" lang="">Packt_3</strong>, with our previously used <span class="No-Break" lang="">input file.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Course content templates</strong>: You can either specify the absolute path of a Moodle backup file or the short name of an existing course as a content template for the newly-created course. We will be dealing with backup in <a href="B18779_16.xhtml#_idTextAnchor308"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 16</em></span></a><em class="italic" lang="">, Avoiding Sleepless Nights – Moodle Backup and Restore</em>, so for now, let’s assume <a id="_idIndexMarker237"/>that they have a suffix, <strong class="source-inline" lang="">.mbz</strong>. Suppose either option is chosen and you have opted to update existing courses. In that case, you should select the <strong class="bold" lang="">Allow resets</strong> and <strong class="bold" lang="">Reset course after upload</strong> options to remove any user data that has been added in the <span class="No-Break" lang="">source course:</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer085">
<img alt="Figure 4.24 – Uploading courses " height="821" src="image/Figure_4.24_B18779.jpg" width="851"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.24 – Uploading courses</p>
<p lang="en-GB">After selecting the <strong class="bold" lang="">Preview</strong> button, the sneak-peak list at the top of the screen will be updated based on the values chosen, which is an excellent way to trial and error your way through <a id="_idIndexMarker238"/>your CSV file before uploading it. Once courses have been uploaded, you will see the summary <span class="No-Break" lang="">of results:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer086">
<img alt="Figure 4.25 – Uploading courses " height="1112" src="image/Figure_4.25_B18779.jpg" width="866"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.25 – Uploading courses</p>
<p lang="en-GB">There is also a CLI tool to perform course uploads from the command line. You can find it in <strong class="source-inline" lang="">admin/tool/uploadcourse/cli/uploadcourse.php</strong>. You will see all the supported parameters by calling the <span class="No-Break" lang=""><strong class="source-inline" lang="">help</strong></span><span class="No-Break" lang=""> mode:</span></p>
<p class="source-code" lang="en-GB">sudo /usr/bin/php admin/tool/uploadcourse/cli/uploadcourse.php --help</p>
<p lang="en-GB">Here is an<a id="_idIndexMarker239"/> example of <span class="No-Break" lang="">its usage:</span></p>
<p class="source-code" lang="en-GB">sudo /usr/bin/php admin/tool/uploadcourse/cli/uploadcourse.php --mode=createall –-updatemode=dataordefaults –-file=./courses.csv -–delimiter=comma</p>
<p lang="en-GB">There is an entire section on the Moodle CLI in <a href="B18779_17.xhtml#_idTextAnchor325"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 17</em></span></a>, <em class="italic" lang="">Working with Moodle </em><span class="No-Break" lang=""><em class="italic" lang="">Admin Tools</em></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">This completes the first part of this chapter, where we dealt with the management of courses and categories. The second part deals with how users get access to courses <span class="No-Break" lang="">via enrolment.</span></p>
<h1 id="_idParaDest-85" lang="en-GB"><a id="_idTextAnchor085"/>Understanding course enrolment</h1>
<p lang="en-GB">In the<a id="_idIndexMarker240"/> introductory chapter, <a href="B18779_03.xhtml#_idTextAnchor059"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 3</em></span></a>, <em class="italic" lang="">Exploring Courses, Users, and Roles</em>, we have already touched upon enrolment. Now, we will go into more detail and look at the different mechanisms that can be set up to grant users access to courses. You may recall the basic enrolment workflow presented in the third chapter. Let’s have a look at a more <span class="No-Break" lang="">detailed version:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer087">
<img alt="Figure 4.26 – Forms of enrolment " height="791" src="image/Figure_4.26_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.26 – Forms of enrolment</p>
<p lang="en-GB">Let’s start <a id="_idIndexMarker241"/>from the<a id="_idIndexMarker242"/> top left, where a user attempts to access a course. Access will be granted if the enrolment has already taken place. If the user is suspended, access will be denied. If enrolment has expired, the user will be unenrolled; otherwise, access will be granted. If the user is not enrolled, Moodle checks whether guest or self-enrolment access is allowed. If either is the case, the enrolment key will be checked. If the key is correct or not required, enrolment will take place for self-enrolment, and access will be granted. As a last option, Moodle checks whether a payment is accepted and, if approved, the user will be enrolled in the courses. You might want to return to this diagram when dealing with a specific <span class="No-Break" lang="">enrolment mechanism.</span></p>
<p lang="en-GB">Students need to be given access to a course before they are allowed to use it – or, in Moodle-speak, users need to be assigned a role in the course context. They can be assigned the role automatically via cohorts or external enrolment facilities, by self-enrolling, or manually via the <strong class="bold" lang="">Participants</strong> tab inside <span class="No-Break" lang="">the course.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Granting access to a course is performed via an <span class="No-Break" lang="">enrolment mechanism.</span></p>
<p lang="en-GB">The actual enrolment of students does not require administrator rights and is a task that teachers can carry out. The role of the administrator is to set up the enrolment mechanisms available sitewide. Moodle supports a wide range of enrolment options, discussed in the remainder of <span class="No-Break" lang="">the chapter.</span></p>
<p lang="en-GB">You can access the course enrolments configuration page via <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Plugins</strong> |<strong class="bold" lang=""> Enrolments</strong> | <strong class="bold" lang="">Manage enrolment plugins</strong>. Each supported enrolment mechanism is represented by an <a id="_idIndexMarker243"/>enrolment plugin that can be enabled and <span class="No-Break" lang="">configured separately:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer088">
<img alt="Figure 4.27 – Enrolment plugins " height="980" src="image/Figure_4.27_B18779.jpg" width="1389"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.27 – Enrolment plugins</p>
<p lang="en-GB">For every plugin, the number of instances and enrolments are shown. Each plugin can be enabled or <span class="No-Break" lang="">disabled separately.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Moodle supports multi-enrolment; that is, multiple plugins can be <span class="No-Break" lang="">enabled simultaneously.</span></p>
<p lang="en-GB">The arrangement of<a id="_idIndexMarker244"/> plugins determines in which order user enrolments are checked when a user attempts to enter a course. It is recommended to give the plugins used by the majority of users higher priority over those only used sporadically, as this will benefit <span class="No-Break" lang="">system performance.</span></p>
<p lang="en-GB">All active plugins must be configured; we will deal with these settings when covering individual enrolment mechanisms. While it is possible to uninstall plugins, it is not recommended. If they are required at a later stage, they will have to be re-installed, and the preference is to simply leave <span class="No-Break" lang="">them disabled.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Users need to have a user account before they can be enrolled in <span class="No-Break" lang="">a course.</span></p>
<p lang="en-GB">Each enrolment type is covered in some detail, except MNet remote enrolments, which are covered in <a href="B18779_19.xhtml#_idTextAnchor344"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 19</em></span></a>, <em class="italic" lang="">Setting Up Moodle Networking</em>, and <strong class="bold" lang="">Publish as LTI</strong> tool, which we deal with in <a href="B18779_09.xhtml#_idTextAnchor181"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 9</em></span></a>, <em class="italic" lang="">Configuring Educational Features</em>. We are also not covering the two legacy solutions <strong class="bold" lang="">Category enrolments</strong> (replaced by cohort synchronization) and <strong class="bold" lang="">PayPal</strong> (now a gateway in <strong class="bold" lang="">Enrolment on payment</strong>). The enrolment mechanism you choose depends entirely on the infrastructure you have in place – that is, where and in what format the enrolment data of learners <span class="No-Break" lang="">is stored.</span></p>
<p lang="en-GB">Once an enrolment form has been set up, it must be configured inside the course in which it will be used. Select the <strong class="bold" lang="">Enrolment methods</strong> options from the dropdown on the <strong class="bold" lang="">Participants</strong> tab, where you will see a list of all the active (shown) and inactive (hidden) enrolment plugins. Each enrolment method comes with a number of settings, which we will cover as part of the <span class="No-Break" lang="">plugin itself:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer089">
<img alt="Figure 4.28 – Enrolment methods at the course level " height="391" src="image/Figure_4.28_B18779.jpg" width="672"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.28 – Enrolment methods at the course level</p>
<p lang="en-GB">Any non-database enrolment<a id="_idIndexMarker245"/> method enabled and configured at the site level can be added via the <strong class="bold" lang="">Add method</strong> drop-down menu. Whether a plugin automatically appears in the list of new courses depends on the <strong class="bold" lang="">Add instance to new courses</strong> parameter. Some plugins, for example, <strong class="bold" lang="">Self enrolment</strong> and <strong class="bold" lang="">PayPal</strong>, can be added multiple times in the same course, which is helpful if you need to support <span class="No-Break" lang="">multiple roles.</span></p>
<p lang="en-GB">So far, we have covered enrolment plugins in general. Now, it is time to kick off with the first type of course <span class="No-Break" lang="">enrolment: internal.</span></p>
<h2 id="_idParaDest-86" lang="en-GB"><a id="_idTextAnchor086"/>Internal enrolment</h2>
<p lang="en-GB">Internal enrolment <a id="_idIndexMarker246"/>means that Moodle handles <a id="_idIndexMarker247"/>all enrolment without any other systems involved. Moodle supports three types of <span class="No-Break" lang="">internal enrolments:</span></p>
<ul>
<li lang="en-GB"><span class="No-Break" lang=""><strong class="bold" lang="">Manual enrolment</strong></span></li>
<li lang="en-GB"><span class="No-Break" lang=""><strong class="bold" lang="">Self enrolment</strong></span></li>
<li lang="en-GB"><span class="No-Break" lang=""><strong class="bold" lang="">Guest access</strong></span></li>
</ul>
<p lang="en-GB">We are going to cover these three internal enrolment types in <span class="No-Break" lang="">separate subsections.</span></p>
<h3 lang="en-GB">Manual enrolment</h3>
<p lang="en-GB">Manual enrolment is the default enrolment mechanism when Moodle is installed. The sitewide <a id="_idIndexMarker248"/>settings are configured at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Manual enrolments</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer090">
<img alt="Figure 4.29 – Manual enrolment options " height="521" src="image/Figure_4.29_B18779.jpg" width="1384"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.29 – Manual enrolment options</p>
<p lang="en-GB">Once the plugin has been set up, you will see a very similar-looking screen under <strong class="bold" lang="">Enrolment methods</strong> | <strong class="bold" lang="">Manual enrolments</strong> | <strong class="bold" lang="">Settings</strong> on the <strong class="bold" lang="">Participants</strong> tab inside <span class="No-Break" lang="">a course:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer091">
<img alt="Figure 4.30 – Manual enrolment options at the course level " height="535" src="image/Figure_4.30_B18779.jpg" width="752"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.30 – Manual enrolment options at the course level</p>
<p lang="en-GB">The actual enrolment of users takes place in <strong class="bold" lang="">Participants,</strong> as we have already covered in the previous chapter. What we haven’t covered yet is the suspension and expiry of enrolments. You<a id="_idIndexMarker249"/> can change these individually via the <strong class="bold" lang="">Edit</strong> symbol in the <strong class="bold" lang="">Status</strong> column of your enrolled <span class="No-Break" lang="">course users:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer092">
<img alt="Figure 4.31 – Suspension and expiry of enrolments " height="578" src="image/Figure_4.31_B18779.jpg" width="1295"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.31 – Suspension and expiry of enrolments</p>
<p lang="en-GB">To modify the enrolment data of multiple users, select them in the list of participants and choose <strong class="bold" lang="">Edit selected user enrolments</strong> from the correct section in the <strong class="bold" lang="">With selected users…</strong> dropdown. Equally, unenrol individual users via the standard <strong class="bold" lang="">Delete</strong> icon or in batch via the <strong class="bold" lang="">Delete selected user </strong><span class="No-Break" lang=""><strong class="bold" lang="">enrolments</strong></span><span class="No-Break" lang=""> option.</span></p>
<p lang="en-GB">A teacher can carry out all these steps, but you might decide that these tasks should be performed centrally for consistency and also to simplify their workflows. If this is the case, their role should be modified so that only administrators or dedicated users can deal <span class="No-Break" lang="">with enrolments.</span></p>
<h3 lang="en-GB">Self-enrolment</h3>
<p lang="en-GB">The<a id="_idIndexMarker250"/> concept of self-enrolment is relatively simple: users choose which courses they want to participate in. A course can contain a password, known as the enrolment key. Anyone who knows this key is allowed to add themselves to a course. An open door icon is shown beside courses that allow guest access without a password; otherwise, a closed door icon <span class="No-Break" lang="">is displayed.</span></p>
<p lang="en-GB">The <a id="_idIndexMarker251"/>enrolment key is set at the course level. The teacher must inform the students about the key and ideally limit the enrolment period to an appropriate time frame to <span class="No-Break" lang="">avoid misuse.</span></p>
<p lang="en-GB">Once the enrolment key has been set, learners must enter it when they try to access the course for the first time. Access will be granted if the key is entered correctly; otherwise, it will <span class="No-Break" lang="">be denied.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Self-enrolment requires manual enrolment to <span class="No-Break" lang="">be enabled.</span></p>
<p lang="en-GB">You find the sitewide settings for self-enrolments in <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Enrolments </strong>| <span class="No-Break" lang=""><strong class="bold" lang="">Self enrolment</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer093">
<img alt="Figure 4.32 – Self-enrolment options " height="768" src="image/Figure_4.32_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.32 – Self-enrolment options</p>
<p lang="en-GB">Once the plugin has been set up, you will be able to instantiate it at <strong class="bold" lang="">Enrolment methods</strong> | <strong class="bold" lang="">Self enrolment</strong> | <strong class="bold" lang="">Settings</strong> on the <strong class="bold" lang="">Participants</strong> tab inside <span class="No-Break" lang="">a course:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer094">
<img alt="Figure 4.33 – Self-enrolment options at the course level " height="1070" src="image/Figure_4.33_B18779.jpg" width="1383"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.33 – Self-enrolment options at the course level</p>
<p lang="en-GB">The settings <a id="_idIndexMarker252"/>are mostly identical to the sitewide settings described in the preceding table. The help icons next to each parameter display more details for <span class="No-Break" lang="">each setting.</span></p>
<p lang="en-GB">You can create multiple instances of the self-enrolment method, which is why you need to assign a distinguishing <strong class="bold" lang="">Custom instance name</strong>. This is useful if you need to give different user groups access to the same course – for instance, students of different cohorts or learners from <span class="No-Break" lang="">multiple customers.</span></p>
<h3 lang="en-GB">Guest access</h3>
<p lang="en-GB">Guest access<a id="_idIndexMarker253"/> can be seen as temporary enrolment. Whether authenticated on the system or not, users will be granted controlled (read-only) access to a course. Non-authenticated users will get there via the <strong class="bold" lang="">Login as a guest</strong> button on the login screen. Internally, they are being allocated a temporary user ID, which will be discarded afterward. The guest icon is shown beside courses that allow <span class="No-Break" lang="">guest access.</span></p>
<p lang="en-GB">The sitewide settings for guest access are found in <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> | <span class="No-Break" lang=""><strong class="bold" lang="">Guest access</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer095">
<img alt="Figure 4.34 – Guest access options " height="758" src="image/Figure_4.34_B18779.jpg" width="1395"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.34 – Guest access options</p>
<p lang="en-GB">You can specify a password in the course settings for guest access. If you wish to make this compulsory, select <strong class="bold" lang="">Require guest access password</strong>. For newly-created courses, a random password will be generated (unmask the password in the course settings to view it). Removing guest access passwords from courses is not possible, but they can <span class="No-Break" lang="">be modified.</span></p>
<p lang="en-GB">The <strong class="bold" lang="">Enrolment instance defaults</strong> settings are the same as the first two of the manual and <span class="No-Break" lang="">self-enrolment methods.</span></p>
<p lang="en-GB">You can <a id="_idIndexMarker254"/>allow or disallow guest access at <strong class="bold" lang="">Enrolment methods</strong> | <strong class="bold" lang="">Guest access</strong> | <strong class="bold" lang="">Settings</strong> on the <strong class="bold" lang="">Participants</strong> tab inside a course. Here, you can also specify the password <span class="No-Break" lang="">mentioned previously:</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">For guest access to work for users without a login, ensure the <strong class="bold" lang="">Guest login</strong> button is set to <strong class="bold" lang="">Show</strong> in <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Authentication</strong> | <strong class="bold" lang="">Manage authentication</strong>. Otherwise, guest access will only work for <span class="No-Break" lang="">authenticated users.</span></p>
<p lang="en-GB">There are two good Moodle Academy videos featuring guest access at <a href="http://docs.moodle.org/en/Guest_access">docs.moodle.org/en/Guest_access</a>. Additional information is also available on topics such as <span class="No-Break" lang="">auto-login guests.</span></p>
<p lang="en-GB">This concludes the subsection on internal enrolment methods. Next up is an interesting enrolment method for enrolling the same group of users in multiple courses: cohort enrolment <span class="No-Break" lang="">and synchronization.</span></p>
<h2 id="_idParaDest-87" lang="en-GB"><a id="_idTextAnchor087"/>Cohort enrolment and synchronization</h2>
<p lang="en-GB">Cohorts<a id="_idIndexMarker255"/> are sitewide or global groups. We will cover cohorts in detail in <a href="B18779_05.xhtml#_idTextAnchor092"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 5</em></span></a>, <em class="italic" lang="">Managing Users, Cohorts, and Authentication</em>, so for now, let’s simply assume that they are a collection <span class="No-Break" lang="">of users.</span></p>
<p lang="en-GB">Once cohorts<a id="_idIndexMarker256"/> have been created and members have been allocated, it is possible to enrol an entire cohort in a course or synchronize a cohort’s membership with a course. The two variants are shown in the <span class="No-Break" lang="">following diagram:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer096">
<img alt="Figure 4.35 – Cohort enrolment versus cohort synchronization " height="804" src="image/Figure_4.35_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.35 – Cohort enrolment versus cohort synchronization</p>
<p lang="en-GB">Let’s <a id="_idIndexMarker257"/>use an example to explain the figure, starting with <strong class="bold" lang="">enrolment</strong>: assume you have a class called 7c with 30 students, in a school. The same class must be enrolled in eight different courses, where each course represents a subject. We only have to create cohort 7c once and then we can enrol all cohort members in each course one <span class="No-Break" lang="">by one.</span></p>
<p lang="en-GB">Alternatively, we can activate<a id="_idIndexMarker258"/> cohort <strong class="bold" lang="">synchronization</strong> with the eight courses, and Moodle will take care of the rest. If new pupils join the class, we only have to add their account to the cohort and the enrolment will be done automatically. Similarly, the pupil will be unenrolled if a cohort member <span class="No-Break" lang="">is removed.</span></p>
<p lang="en-GB">So, when do you use one-off enrolment and when do you use permanent synchronization? If the cohort is likely to remain static and enrolment is a one-off, cohort enrolment is sufficient. If, however, the cohort is likely to have a high turnover and courses have to be kept in sync, you are better off using synchronization. Beware that the removal of a cohort membership not only triggers unenrolment from a course but also the deletion of certain learning <span class="No-Break" lang="">progress data.</span></p>
<p lang="en-GB">Cohort sync is also great for organizations where groups move together between classes, such as an elementary school. Instead of moving individual users from one year to the next, you <a id="_idIndexMarker259"/>will only be dealing with cohorts of users, which is less time-consuming and <span class="No-Break" lang="">more fault-tolerant.</span></p>
<p lang="en-GB">The <strong class="bold" lang="">Cohort sync</strong> plugin (<strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> | <strong class="bold" lang="">Cohort sync</strong>) only contains two parameters – the <strong class="bold" lang="">Default role</strong> value that is given to users when they are enrolled and what action to take when users are removed from an external <span class="No-Break" lang="">enrolment source:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer097">
<img alt="Figure 4.36 – Cohort synchronization options " height="620" src="image/Figure_4.36_B18779.jpg" width="1576"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.36 – Cohort synchronization options</p>
<p lang="en-GB">We have to create <a id="_idIndexMarker260"/>a cohort and assign some members to see cohort synchronization in action. Go to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Users</strong> | <strong class="bold" lang="">Accounts</strong> | <strong class="bold" lang="">Cohorts</strong> and add a cohort by clicking on the <strong class="bold" lang="">Add new cohort</strong> tab. Give the cohort <strong class="bold" lang="">Name</strong> (in our case, <strong class="bold" lang="">7c</strong>) and, from the <strong class="bold" lang="">Context</strong> drop-down menu, select the category in which all the courses belong to class <strong class="bold" lang="">7c</strong>. Select <strong class="bold" lang="">System</strong> if that doesn’t apply. <strong class="bold" lang="">Cohort ID</strong> and <strong class="bold" lang="">Description</strong> are optional fields; ensure that <strong class="bold" lang="">Visible</strong> is checked. Once saved, you must assign members to the cohort by selecting the <strong class="bold" lang="">Assign</strong> icon <span class="No-Break" lang="">beside it.</span></p>
<p lang="en-GB">Once this has been successful, we can enrol the cohort (that is, all cohort members) in our course. Inside the course, go to the <strong class="bold" lang="">Participants</strong> tab, click on the <strong class="bold" lang="">Enrol users</strong> button, and select <span class="No-Break" lang="">cohort </span><span class="No-Break" lang=""><strong class="bold" lang="">7c</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer098">
<img alt="Figure 4.37 – Cohort enrolment " height="539" src="image/Figure_4.37_B18779.jpg" width="542"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.37 – Cohort enrolment</p>
<p lang="en-GB">Once you <a id="_idIndexMarker261"/>select <strong class="bold" lang="">Enrol selected users and cohorts</strong>, all cohort members will be enrolled in the course, similar to manual enrolment. However, no further synchronization is carried out – it is effectively the same as manually enrolling all 30 users, but in a <span class="No-Break" lang="">single step.</span></p>
<p lang="en-GB">An alternative to this one-off exercise is a permanent arrangement where we set up an enrolment method instance via the familiar <strong class="bold" lang="">Enrolment methods</strong> link in the <strong class="bold" lang="">Participants</strong> tab and then select <strong class="bold" lang="">Cohort Sync</strong> from the <strong class="bold" lang="">Add </strong><span class="No-Break" lang=""><strong class="bold" lang="">method</strong></span><span class="No-Break" lang=""> dropdown:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer099">
<img alt="Figure 4.38 – Cohort synchronization " height="598" src="image/Figure_4.38_B18779.jpg" width="1296"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.38 – Cohort synchronization</p>
<p lang="en-GB">Once added, all users of the cohort will be enrolled. Moodle will automatically keep track of the cohort going forward—if users are added to the cohort, they will also be enrolled in<a id="_idIndexMarker262"/> the courses; if users are removed from the cohort, they will be unenrolled. As with self-enrolment, cohort synchronization allows multiple instances inside <span class="No-Break" lang="">a course.</span></p>
<p lang="en-GB">Cohort synchronization<a id="_idIndexMarker263"/> is a great way to organize your users if you have groups that must be enrolled in multiple courses. Another method that avoids manual enrolments is database-driven enrolment, which we will <span class="No-Break" lang="">cover next.</span></p>
<h2 id="_idParaDest-88" lang="en-GB"><a id="_idTextAnchor088"/>Database-driven enrolment</h2>
<p lang="en-GB">In<a id="_idIndexMarker264"/> larger organizations, storing certain<a id="_idIndexMarker265"/> user-related information in a separate database or directory is common. If this information contains course-related information, it should be utilized for enrolment. In doing so, you minimize the necessary effort when using <span class="No-Break" lang="">manual enrolment.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Unlike internal enrolment methods, database-driven enrolment cannot be configured at the course level. They are applied across the site once <span class="No-Break" lang="">set up.</span></p>
<p lang="en-GB">Four enrolment methods fall into the database-driven enrolment category, which we will cover in the following order: LDAP, external databases, flat files, and IMS <span class="No-Break" lang="">Enterprise files.</span></p>
<h3 lang="en-GB">LDAP</h3>
<p lang="en-GB"><strong class="bold" lang="">Lightweight Directory Access Protocol</strong> (<strong class="bold" lang="">LDAP</strong>) is an<a id="_idIndexMarker266"/> application standard for querying <a id="_idIndexMarker267"/>and modifying directory services. It is used by many organizations to store learner details and is, therefore, well-suited as an enrolment source <span class="No-Break" lang="">for Moodle.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">The PHP LDAP extension must be installed on the server for the enrolment <span class="No-Break" lang="">to work.</span></p>
<p lang="en-GB">If it is not<a id="_idIndexMarker268"/> installed, Moodle will display an error <a id="_idIndexMarker269"/>message. The module supports Microsoft’s implementation of LDAP, called <strong class="bold" lang="">Active Directory</strong>, and OpenLDAP, an open source implementation of the authentication mechanism. It is common for sites that use LDAP for enrolment to also use LDAP for authentication, which is discussed in detail in <a href="B18779_05.xhtml#_idTextAnchor092"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 5</em></span></a>, <em class="italic" lang="">Managing Users, Cohorts, </em><span class="No-Break" lang=""><em class="italic" lang="">and Authentication</em></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">The principle of the enrolment method is rather simple but effective. The information stored in the data source about students, teachers, and courses is mapped to the Moodle counterparts. Enrolments are updated when a user logs in. All we have to provide are <span class="No-Break" lang="">the mappings.</span></p>
<p lang="en-GB">Moodle makes several assumptions when working with <span class="No-Break" lang="">LDAP enrolment:</span></p>
<ul>
<li lang="en-GB">Your LDAP tree contains groups that map <span class="No-Break" lang="">to courses</span></li>
<li lang="en-GB">Each group has multiple membership entries to map <span class="No-Break" lang="">to students</span></li>
<li lang="en-GB">Users have a valid <strong class="bold" lang="">ID </strong><span class="No-Break" lang=""><strong class="bold" lang="">number</strong></span><span class="No-Break" lang=""> field</span></li>
</ul>
<p lang="en-GB">The LDAP settings are located at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> |<strong class="bold" lang=""> LDAP enrolments</strong>. They have been annotated with detailed explanations, hence we will not repeat them; instead, we will provide additional information where applicable. Contact your system administrator if you are unsure where to locate some of the <span class="No-Break" lang="">required information.</span></p>
<p lang="en-GB">There are seven sections of parameters that have to <span class="No-Break" lang="">be provided:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">LDAP server settings</strong> establish the connection to the directory. LDAP servers with TSL encryption are <span class="No-Break" lang="">also supported.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Bind settings</strong> specify details about the credentials to access the LDAP server – that is, the provided username <span class="No-Break" lang="">and password.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Role mappings</strong> specify how user-related information is stored in the LDAP server. The roles must be set, containing a context (usually the same as the one in the server settings) and the member attribute (user IDs). It is crucial to set <strong class="bold" lang="">Search subcontexts</strong> correctly. If it is set to <strong class="bold" lang="">No</strong>, subcontexts will not be searched, but the search is potentially faster, and vice versa. Also, ensure that the <strong class="bold" lang="">User type</strong> setting matches the type of server you use – for example, <strong class="bold" lang="">MS </strong><span class="No-Break" lang=""><strong class="bold" lang="">Active Directory</strong></span><span class="No-Break" lang="">.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Course enrolment settings</strong> specify how course and module information is stored on the LDAP server. It also provides options for different forms <span class="No-Break" lang="">of unenrolment.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Automatic course creation</strong> is a potentially time-saving feature. A course is created<a id="_idIndexMarker270"/> for each entry on the LDAP server in<a id="_idIndexMarker271"/> the category specified. To expedite the process and guarantee consistency among courses, you should create a course with the preferred settings and use it (its course ID) as a template for all the <span class="No-Break" lang="">newly-created courses.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Automatic course update settings</strong> let you specify which fields to update when the CLI script, <strong class="source-inline" lang="">enrol/ldap/cli/sync.php</strong>, <span class="No-Break" lang="">is run.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Nested groups settings</strong> let you configure support for groups of groups inside your <span class="No-Break" lang="">LDAP server:</span></li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer100">
<img alt="Figure 4.39 – LDAP enrolment options " height="525" src="image/Figure_4.39_B18779.jpg" width="1384"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.39 – LDAP enrolment options</p>
<p lang="en-GB">Working with LDAP enrolments often requires a degree of trial and error. Creating a number of sample <a id="_idIndexMarker272"/>courses and enrolments in a playpen is <a id="_idIndexMarker273"/>recommended before applying the mechanism to your <span class="No-Break" lang="">production server.</span></p>
<p lang="en-GB">If you need to access multiple LDAP systems with different settings, there are <span class="No-Break" lang="">two options:</span></p>
<ul>
<li lang="en-GB">You will need to duplicate the enrolment plugin at the system level and modify the source code accordingly. A programmer must carry out this task, as source code changes are required in the <span class="No-Break" lang="">copied module.</span></li>
<li lang="en-GB">You will need to upgrade to Moodle Workplace, which supports multi-tenancy authentication. Details on this powerful feature can be found <span class="No-Break" lang="">at </span><a href="http://docs.moodle.org/en/Multi-tenancy_authentication"><span class="No-Break" lang="">docs.moodle.org/en/Multi-tenancy_authentication</span></a><span class="No-Break" lang="">.</span></li>
</ul>
<h3 lang="en-GB">External databases</h3>
<p lang="en-GB">Many <a id="_idIndexMarker274"/>organizations use a management information system, either proprietary or developed in-house, that holds information about staff and learners and the courses in which they are enrolled. It makes perfect<a id="_idIndexMarker275"/> sense to utilize this data for enrolment to Moodle. As all the information systems use a database at their core, all we have to do is to get access to the <span class="No-Break" lang="">relevant data.</span></p>
<p lang="en-GB">The bad news is that there is a plethora of database systems out there that need to be supported, from the two big commercial players, Oracle and Microsoft SQL Server, to the popular open source systems Maria DB <a id="_idIndexMarker276"/>and Postgres. The good news is that a layer called <strong class="bold" lang="">ActiveX Data Objects</strong> (<strong class="bold" lang="">ADO</strong>) exists, which does all the hard work for us. We only have to talk to the ADO layer and its internals will deal with the rest, no matter to which database it <span class="No-Break" lang="">is talking.</span></p>
<p lang="en-GB">The database must contain information on the course ID and the user ID. These two fields are compared with their counterparts you choose in the local course and <span class="No-Break" lang="">user tables.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Getting your database administrator to set up a read-only view of the relevant data is highly recommended. That way, your enrolment mechanism is nicely decoupled from the <span class="No-Break" lang="">database itself.</span></p>
<p lang="en-GB">To<a id="_idIndexMarker277"/> configure database-driven enrolment, go<a id="_idIndexMarker278"/> to <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> |<strong class="bold" lang=""> External </strong><span class="No-Break" lang=""><strong class="bold" lang="">database connection</strong></span><span class="No-Break" lang="">:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer101">
<img alt="Figure 4.40 – External database enrolment options " height="406" src="image/Figure_4.40_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.40 – External database enrolment options</p>
<p lang="en-GB">The database connection settings have been annotated on the screen with good explanations, which we will not repeat here. Contact your database administrator if you are unsure where to locate some of the <span class="No-Break" lang="">required information.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">Some databases, such as Oracle, are case-sensitive; that is, field names must be provided with the correct casing for the database link to <span class="No-Break" lang="">work correctly.</span></p>
<p lang="en-GB">It is possible to test your external database settings via the respective link at <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> | <strong class="bold" lang="">Manage enrolment plugins</strong>. The thrown error messages will help you debug your settings until a valid connection <span class="No-Break" lang="">is established.</span></p>
<h3 lang="en-GB">Flat files</h3>
<p lang="en-GB">Moodle <a id="_idIndexMarker279"/>provides a flat file enrolment mechanism configured at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> |<strong class="bold" lang=""> Enrolments</strong> | <strong class="bold" lang="">Flat file (CSV)</strong>. The <a id="_idIndexMarker280"/>method will repeatedly (via the Moodle cron process) check for and process a specially-formatted CSV file in the location that you specify. The format of the file is<a id="_idIndexMarker281"/> <span class="No-Break" lang="">as follows:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer102">
<img alt="Figure 4.41 – CSV enrolment file format " height="216" src="image/Figure_4.41_B18779.jpg" width="1387"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.41 – CSV enrolment file format</p>
<p lang="en-GB">The following is a sample <span class="No-Break" lang="">file snippet:</span></p>
<pre class="source-code" lang="en-GB">add, teacher, 5, Psychology1</pre>
<pre class="source-code" lang="en-GB">add, student, 12, Psychology1</pre>
<pre class="source-code" lang="en-GB">del, student, 17, English2</pre>
<pre class="source-code" lang="en-GB">add, student, 29, English, 1207008000, 1227916800</pre>
<p lang="en-GB">The start and end times have to be provided together. It is recommended to use an online converter to generate the numbers <span class="No-Break" lang="">since epoch.</span></p>
<p lang="en-GB">In the text file settings at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins | Enrolments</strong> | <strong class="bold" lang="">Flat file (CSV)</strong>, you have to provide the absolute file location on the server. Moodle has to be able to read the file and delete it once it has been processed! You can choose to send a log file to the administrator and a notification to the user responsible for enrolments and students. <strong class="bold" lang="">External unenrol action</strong> specifies what happens when a user has been removed from the source file. Similarly, <strong class="bold" lang="">Enrolment expiration action</strong> specifies what happens to users once their enrolment has expired. The default roles in the <strong class="bold" lang="">Flat file role mapping</strong> section can be overridden with other values <span class="No-Break" lang="">if required:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer103">
<img alt="Figure 4.42 – CSV enrolment options " height="712" src="image/Figure_4.42_B18779.jpg" width="1386"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.42 – CSV enrolment options</p>
<h3 lang="en-GB">The IMS Enterprise file</h3>
<p lang="en-GB">The IMS Global Learning Consortium<a id="_idIndexMarker282"/> has specified <a id="_idIndexMarker283"/>an XML file format representing student and course information. Moodle can use any file that conforms to the format as its enrolment source. As with the flat file format, Moodle regularly checks for its presence; if found, it will process the file and delete it. You find details of its basic structure <span class="No-Break" lang="">at </span><a href="http://docs.moodle.org/en/IMS_Enterprise"><span class="No-Break" lang="">docs.moodle.org/en/IMS_Enterprise</span></a><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">The plugin can also create user accounts if they aren’t yet created or change user details if requested. Furthermore, new courses can also be created if they are not found <span class="No-Break" lang="">on Moodle.</span></p>
<p lang="en-GB">All other fields, including role mappings, are well-explained on screen and can be accessed at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> | <strong class="bold" lang="">IMS </strong><span class="No-Break" lang=""><strong class="bold" lang="">Enterprise file</strong></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">This concludes the section on database-driven enrolment. Next up is a unique form of enrolment via so-called <span class="No-Break" lang="">meta courses.</span></p>
<h2 id="_idParaDest-89" lang="en-GB"><a id="_idTextAnchor089"/>Meta courses – sharing enrolment across courses</h2>
<p lang="en-GB">Meta courses <a id="_idIndexMarker284"/>are courses that take their enrolment from <a id="_idIndexMarker285"/>other courses. They populate many courses from one enrolment or one course from many enrolments. There are two main scenarios when this <span class="No-Break" lang="">is useful:</span></p>
<ul>
<li lang="en-GB">Multiple courses want to share information or resources (<span class="No-Break" lang="">meta course)</span></li>
<li lang="en-GB">A course is part of a qualification where students have to be enrolled in a number of courses; each course is set up as a <span class="No-Break" lang="">meta course</span></li>
</ul>
<p lang="en-GB">Both scenarios are depicted in the <span class="No-Break" lang="">following diagram:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer104">
<img alt="Figure 4.43 – Meta course scenarios " height="517" src="image/Figure_4.43_B18779.jpg" width="1039"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.43 – Meta course scenarios</p>
<p lang="en-GB">Go to <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> | <strong class="bold" lang="">Course meta link</strong>. The list contains any roles that <a id="_idIndexMarker286"/>are not synchronized; that is, users with those roles in child courses will also be given access to their parent courses. <strong class="bold" lang="">Synchronise all enrolled users</strong> means that users will also be enrolled if they do not have a role in any parent courses. <strong class="bold" lang="">External unenrol action</strong> specifies what happens when a user has been removed from the external enrolment source – for instance, a CSV file or LDAP. The <strong class="bold" lang="">Sort course list</strong> parameter determines whether courses are being ordered as specified at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Courses</strong> | <strong class="bold" lang="">Manage courses and categories</strong> or by one of the selected <span class="No-Break" lang="">sort criteria:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer105">
<img alt="Figure 4.44 – Course meta link enrolment options " height="790" src="image/Figure_4.44_B18779.jpg" width="1389"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.44 – Course meta link enrolment options</p>
<p lang="en-GB">Teachers have the<a id="_idIndexMarker287"/> right to set up meta courses and manage their dependents via <strong class="bold" lang="">Course meta link</strong> under <strong class="bold" lang="">Enrolment method</strong> in the <strong class="bold" lang="">Users</strong> section of a course. While it is the role of the teacher to manage meta courses, experience has shown that the administrator is frequently asked to set these up on behalf <span class="No-Break" lang="">of others.</span></p>
<p class="callout-heading" lang="en-GB">Important note</p>
<p class="callout" lang="en-GB">A child course gives its enrolments to the parent course. Create a link from the parent course to the <span class="No-Break" lang="">child course.</span></p>
<p lang="en-GB">To set up the first scenario, as shown in the earlier diagram, where the meta course holds shared resources, you have to create all the four courses first and create a new course meta link instance from within the <strong class="bold" lang="">Computer Science Resources</strong> course (via <strong class="bold" lang="">Enrolment methods</strong> on the <strong class="bold" lang="">Participants</strong> tab). This instance has to link to all child courses – in our case, the three mentioned <span class="No-Break" lang="">programming courses:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer106">
<img alt="Figure 4.45 – Configuring child courses " height="409" src="image/Figure_4.45_B18779.jpg" width="1038"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.45 – Configuring child courses</p>
<p lang="en-GB">To model the second scenario, you will <a id="_idIndexMarker288"/>have to create all 13 courses (one course for <strong class="bold" lang="">MSc Software Engineering</strong> and a course for each unit) and add a course meta link method in each of the 12 parent courses to the <strong class="bold" lang="">MSc Software </strong><span class="No-Break" lang=""><strong class="bold" lang="">Engineering</strong></span><span class="No-Break" lang=""> course.</span></p>
<p lang="en-GB">Meta courses are a <a id="_idIndexMarker289"/>great way to synchronize users across courses. There are scenarios where you can achieve the same with cohorts and cohort synchronization. If this is the case, working with cohorts is usually the preferred option, as they are easier to manage, particularly on <span class="No-Break" lang="">larger sites.</span></p>
<p lang="en-GB">Another alternative to <a id="_idIndexMarker290"/>meta courses is <strong class="bold" lang="">Programs</strong> in Moodle Workplace, where courses can be bundled flexibly via sets, including support for hierarchical sequences of courses. You will find a good introduction<a id="_idIndexMarker291"/> to programs <span class="No-Break" lang="">at </span><a href="http://docs.moodle.org/en/Programs"><span class="No-Break" lang="">docs.moodle.org/en/Programs</span></a><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">So far, all enrolment methods have been driven by organizational parameters, such as course access, passwords, or time. The last type of enrolment we want to dedicate some time to <span class="No-Break" lang="">is payment.</span></p>
<h2 id="_idParaDest-90" lang="en-GB"><a id="_idTextAnchor090"/>Enrolment with payment</h2>
<p lang="en-GB">Moodle comes <a id="_idIndexMarker292"/>with a basic payment mechanism that allows you to charge users for courses via different payment systems. The concept behind Moodle<a id="_idIndexMarker293"/> payments is <span class="No-Break" lang="">as follows:</span></p>
<ul>
<li lang="en-GB">A <strong class="bold" lang="">payment gateway</strong> represents a payment service – for instance, PayPal, Stripe, <span class="No-Break" lang="">or Alipay</span></li>
<li lang="en-GB">A <strong class="bold" lang="">payment account</strong> supports one or many <span class="No-Break" lang="">payment systems</span></li>
<li lang="en-GB"><strong class="bold" lang="">Paid course enrolment</strong> is tied to a <span class="No-Break" lang="">payment account</span></li>
</ul>
<p lang="en-GB">The following <a id="_idIndexMarker294"/>table visualizes the three <span class="No-Break" lang="">mentioned mechanisms:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer107">
<img alt="Figure 4.46 – Moodle payments " height="587" src="image/Figure_4.46_B18779.jpg" width="1384"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.46 – Moodle payments</p>
<p lang="en-GB">To create your <a id="_idIndexMarker295"/>first payment account, navigate to <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">General</strong> | <strong class="bold" lang="">Payments</strong> |<strong class="bold" lang=""> Payment accounts</strong>, and press the <strong class="bold" lang="">Create payment account</strong> button. You must provide an <strong class="bold" lang="">Account name</strong> that will be used when the enrolment instance is set up later. Optionally, you can also provide an <strong class="bold" lang="">ID number</strong>, which is only necessary when the account is matched against an <span class="No-Break" lang="">external system.</span></p>
<p lang="en-GB">You can create multiple payment accounts if your organization requires separate payment gateways for different courses. On our system, we have also created a test account, which has <span class="No-Break" lang="">been disabled:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer108">
<img alt="Figure 4.47 – Payment accounts " height="373" src="image/Figure_4.47_B18779.jpg" width="1021"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.47 – Payment accounts</p>
<p lang="en-GB">Moodle <a id="_idIndexMarker296"/>ships with a single payment gateway, namely PayPal. Additional gateways can be installed via <a href="http://moodle.org/plugins/?q=type:paygw">moodle.org/plugins/?q=type:paygw</a>. We will deal with installing plugins in <a href="B18779_08.xhtml#_idTextAnchor168"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 8</em></span></a>, <em class="italic" lang="">Understanding </em><span class="No-Break" lang=""><em class="italic" lang="">Moodle Plugins</em></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">For each payment account, all payment gateways are shown, including ticks or crosses, to indicate whether a gateway has been configured or not. So, how do you configure a payment gateway? You simply click on the gateway’s name, which gets you to the configuration for this particular payment account. Here, we are only going to cover the PayPal gateway <a id="_idIndexMarker297"/>since it ships <span class="No-Break" lang="">with Moodle:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer109">
<img alt="Figure 4.48 – PayPal gateway configuration " height="572" src="image/Figure_4.48_B18779.jpg" width="660"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.48 – PayPal gateway configuration</p>
<p lang="en-GB"><strong class="bold" lang="">Brand name</strong> is optional and overrides the business name on the PayPal site. PayPal provides the <strong class="bold" lang="">Client ID</strong> and <strong class="bold" lang="">Secret</strong> information via <a href="http://developer.paypal.com/api/rest">developer.paypal.com/api/rest</a>. You will be shown the<a id="_idIndexMarker298"/> two values once you have logged in. Bear in mind that you require a PayPal business account to go live. Finally, you can change <strong class="bold" lang="">Environment</strong> from <strong class="bold" lang="">Live</strong> to <strong class="bold" lang="">Sandbox</strong> for <span class="No-Break" lang="">testing purposes.</span></p>
<p lang="en-GB">Before <a id="_idIndexMarker299"/>payment plugins can be used for enrolment, you must enable them in <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Enrolments</strong> | <strong class="bold" lang="">Manage enrolment plugins</strong>. Technically, this is all you have to do to set up payment accounts and gateways as <span class="No-Break" lang="">an administrator.</span></p>
<p lang="en-GB">For completeness, here is the final step <a id="_idIndexMarker300"/>to create a payment instance inside a course (as usual, via the <strong class="bold" lang="">Enrolment methods</strong> option <strong class="bold" lang="">Enrolment on payment</strong> <span class="No-Break" lang="">in </span><span class="No-Break" lang=""><strong class="bold" lang="">Participants</strong></span><span class="No-Break" lang="">):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer110">
<img alt="Figure 4.49 – Enrolment on payment configuration " height="860" src="image/Figure_4.49_B18779.jpg" width="1024"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.49 – Enrolment on payment configuration</p>
<p lang="en-GB">The only fields that deviate from the standard fields of other enrolment methods are <span class="No-Break" lang="">the following:</span></p>
<ul>
<li lang="en-GB"><strong class="bold" lang="">Payment account</strong>: Select one of the payment accounts you have <span class="No-Break" lang="">set up.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Enrolment fee</strong>: The amount you charge for <span class="No-Break" lang="">the course.</span></li>
<li lang="en-GB"><strong class="bold" lang="">Currency</strong>: The currency of your fee. You must create separate enrolment method instances for each currency to charge users in <span class="No-Break" lang="">different currencies.</span></li>
</ul>
<p lang="en-GB">Multiple<a id="_idIndexMarker301"/> instances<a id="_idIndexMarker302"/> can be created for the <strong class="bold" lang="">Enrolment on payment</strong> method. This setup is useful if you wish to charge different amounts in different currencies or roles or if you have a mixture of paying and <span class="No-Break" lang="">non-paying learners.</span></p>
<p lang="en-GB">Once a user wants to enrol in a pay-for course, the following dialogue will appear (our chosen payment account also includes the third-party payment <span class="No-Break" lang="">gateway, Stripe):</span></p>
<div>
<div class="IMG---Figure" id="_idContainer111">
<img alt="Figure 4.50 – User’s payment selection " height="767" src="image/Figure_4.50_B18779.jpg" width="698"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.50 – User’s payment selection</p>
<p lang="en-GB">Once the payment has been successful, the user will be enrolled in the course. You might have spotted the 2% surcharge displayed at the bottom. You can specify the surcharge for each payment gateway at <strong class="bold" lang="">Site administration</strong> | <strong class="bold" lang="">Plugins</strong> | <strong class="bold" lang="">Payment gateways</strong> | <strong class="bold" lang="">Manage payment gateways</strong> | <strong class="bold" lang="">Settings</strong>. On this screen, you can also see the currencies each payment <span class="No-Break" lang="">gateway supports.</span></p>
<p lang="en-GB"><strong class="bold" lang="">Enrolment by payment</strong> provides <a id="_idIndexMarker303"/>a flexible means <a id="_idIndexMarker304"/>to offer a mix of chargeable and non-chargeable courses. If you require a more advanced shopping cart solution to be integrated into Moodle, you might want to consider commercial services such as Course Merchant or Magento. These systems support more sophisticated workflows, such as bulk purchasing, payment on tax invoice, and <span class="No-Break" lang="">price bandings.</span></p>
<p lang="en-GB">This concludes the comprehensive section on enrolments, where we introduced enrolment principles and covered enrolment plugins. By now, you should be able to set up and configure the mix of enrolment mechanisms that is right for your organization and <span class="No-Break" lang="">Moodle system.</span></p>
<h1 id="_idParaDest-91" lang="en-GB"><a id="_idTextAnchor091"/>Summary</h1>
<p lang="en-GB">Phew! That was a lot to take in. The complexity of courses, their management, and various facets of enrolments demonstrate a typical Moodle conundrum: the features are very powerful and flexible, but this versatility comes at a price in the form of complexity. Moodle has done a great job in mastering this balancing act, but nonetheless, there is usually a steep learning curve to <span class="No-Break" lang="">be mastered.</span></p>
<p lang="en-GB">In this chapter, you learned everything about courses and categories. As we have discovered, courses are fundamental to Moodle, as they contain all the learning activities and content prepared by teachers and used by students. Even Moodle’s home page is a course, but we will deal with this later when we customize the look and feel of <span class="No-Break" lang="">your LMS.</span></p>
<p lang="en-GB">While it is possible to delegate many course-related tasks to non-administrators – we will deal with this in <a href="B18779_06.xhtml#_idTextAnchor116"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 6</em></span></a>, <em class="italic" lang="">Managing Permissions, Roles, and Capabilities</em> – you, as the administrator, are often required to set up the overall course and category structure. There are also plenty of course- and category-related settings that we deliberately did not deal with in this section but will cover throughout the book. Examples are various options in <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Appearance</strong> |<strong class="bold" lang=""> Navigation</strong> that drive what is shown in the navigation bar, and <strong class="bold" lang="">Site administration</strong> |<strong class="bold" lang=""> Appearance</strong> | <strong class="bold" lang="">Courses</strong> where there is information about how the course catalog is structured. Both topics will be discussed in <a href="B18779_07.xhtml#_idTextAnchor140"><span class="No-Break" lang=""><em class="italic" lang="">Chapter 7</em></span></a>, <em class="italic" lang="">Enhancing Moodle’s Look </em><span class="No-Break" lang=""><em class="italic" lang="">and Feel</em></span><span class="No-Break" lang="">.</span></p>
<p lang="en-GB">Closely related to courses is the enrolment of users; it is important to understand the difference between enrolment, which we covered in this chapter, and authentication, which we will discuss in detail in the next chapter dealing with <span class="No-Break" lang="">user management.</span></p>
</div>
</div></body></html>