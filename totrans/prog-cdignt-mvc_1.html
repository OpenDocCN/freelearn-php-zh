<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Getting Started"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Getting Started</h1></div></div></div><p>This chapter covers the basics of the CI development framework and its usage by reviewing some fundamental web application examples. We will start with a basic hello world example and move to an interactive contact-form integration with a database. We will construct the CI applications by following a step-by-step method. Throughout this chapter, we need to remember that the CI development framework is an MVC-based development architecture (for more information, refer to the Wikipedia definition at <a class="ulink" href="http://en.wikipedia.org/wiki/Model-view-controller">http://en.wikipedia.org/wiki/Model-view-controller</a>).</p><p>This chapter will primarily focus on the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The CI project directory tree framework</li><li class="listitem" style="list-style-type: disc">Configurations (routing and autoloading are covered in this chapter, while the other issues are covered in <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>)</li><li class="listitem" style="list-style-type: disc">Example 1: hello world</li><li class="listitem" style="list-style-type: disc">Example 2: passing parameters to a view</li><li class="listitem" style="list-style-type: disc">Example 3: the database query by a model rendering results to a view</li><li class="listitem" style="list-style-type: disc">Example 4: interactive contact forms</li></ul></div><p>By reviewing these examples, we will get the basics of using CI resources. We will begin by briefly reviewing the CI resources used. Then we will review a web application code that loads a static view page. Next we will use the model to retrieve data from a database and show it in a view. Finally, we'll add a view with a contact form to enter input and save it by calling a controller method into the database.</p><div class="section" title="Installing CodeIgniter"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>Installing CodeIgniter</h1></div></div></div><p>First of all, we need to<a id="id0" class="indexterm"/> have a <a id="id1" class="indexterm"/>hosted PHP server (Version 5.3 or later) and a MySQL (one of the latest versions) server, where we know the database credentials. Local database access from the PHP is recommended for simplicity.</p><p>Note that the server will operate in a <span class="strong"><strong>CGI</strong></span> (<span class="strong"><strong>Common Gateway Interface</strong></span>)<a id="id2" class="indexterm"/> fashion in order to let CI operate. We can have a local web development environment on our PC or a remote server hosted and dedicated.</p><p>Once we've set up a local<a id="id3" class="indexterm"/> web development environment, we'll need to download the latest version <a id="id4" class="indexterm"/>of CI, which is Version 2.1.2 at the time of writing this book. The link to download the latest version is <a class="ulink" href="http://codeigniter.com/downloads/">http://codeigniter.com/downloads/</a>. Now, if we look inside the CI folder, we should see the following directory tree:</p><div class="informalexample"><pre class="programlisting">codeigniter/
  index.php
  application/
  cache/
  config/
  controllers/
  core/
  errors/
  helpers/
  hooks/
  language/
  libraries/
  logs/
  models/
  third_party/
  views/
  system/
  core/
  database/
  fonts/
  helpers/
  language/
  libraries/</pre></div></div></div>
<div class="section" title="Folders overview"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Folders overview</h1></div></div></div><p>The root folder <a id="id5" class="indexterm"/>contains the <code class="literal">index.php</code> file, which handles all the URI requests. The <code class="literal">index.php</code> file <a id="id6" class="indexterm"/>will process them with the CI core, and apply our application controllers using the models, libraries, and helpers loaded by the controllers and rendered views, <code class="literal">license.txt</code>, which<a id="id7" class="indexterm"/> is the CI's license file. <code class="literal">.htaccess</code> is<a id="id8" class="indexterm"/> used for configuring the CI routing and removing <code class="literal">index.php</code> from the URL. JavaScript, CSS, and HTML is incorporated into the rendered PHP output and their usage is elaborated in <a class="link" href="ch07.html" title="Chapter 7. Views">Chapter 7</a>, <span class="emphasis"><em>Views</em></span>.</p><p>Let's review the folders and their content application.</p><p>The application directory folder is the root directory of our main activity project coding zone. This is the heart of the CI-developed application project.</p><div class="section" title="Mandatory components"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec07"/>Mandatory components</h2></div></div></div><p>Let's take a look at the mandatory components.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">application/config</code>: This <a id="id9" class="indexterm"/>folder contains all the CI application configuration files, which are covered in <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>.</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/controllers</code>: This <a id="id10" class="indexterm"/>folder contains all the application controllers in the CI application project. A controller, as mentioned in the <span class="emphasis"><em>Preface</em></span>, is a component in the MVC-design architecture that handles the request by the user and presents the data shown to the user. A controller in CI is a class extending a base class of the CI controller. The class methods can be executed or called with a proper URI. The naming conventions related to the controller definition and usage will be covered in <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>.</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/views</code>: This <a id="id11" class="indexterm"/>folder contains all the view files. A view is the HTML content executed by the user browser that presents and interacts with the user. A view can be a webpage or an RSS page.</li></ul></div><p>The following components are not mandatory but are highly recommended:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">application/models</code>: This <a id="id12" class="indexterm"/>folder contains all the project model files. A model is the component of the MVC design architecture, which handles the data stored in the database. A model in CI is a PHP class that is designed to work with the information in the database. <a class="link" href="ch06.html" title="Chapter 6. Models">Chapter 6</a>, <span class="emphasis"><em>Models</em></span>, will elaborate on the CI models concept, definition, and usage with several usage examples.</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/helpers</code>: This <a id="id13" class="indexterm"/>folder contains all the additional helper files to the CI helpers. They can be third-party or created by the developer. A helper file is a collection of independent procedural functions in a particular category. Each helper function performs one specific task, with no dependence on other functions. <a class="link" href="ch05.html" title="Chapter 5. Helpers">Chapter 5</a>, <span class="emphasis"><em>Helpers</em></span>, will elaborate on the CI helpers concept, definition, and usage with several usage examples.</li><li class="listitem" style="list-style-type: disc"><code class="literal">application/libraries</code>: This<a id="id14" class="indexterm"/> folder contains all the libraries of the CI application project created by the developer. A CI library is technically a PHP class. The scope of the library can be any project resource, such as helpers, models, controllers, and views. For example, a library can provide Facebook library API services to simplify the application code for Facebook integration. <a class="link" href="ch04.html" title="Chapter 4. Libraries">Chapter 4</a>, <span class="emphasis"><em>Libraries</em></span>, will elaborate on the CI libraries concept, definition, and usage with several usage examples.</li><li class="listitem" style="list-style-type: disc"><code class="literal">system</code>: This is the root of<a id="id15" class="indexterm"/> the CodeIgniter core directory. The system folder contains important system components in the subfolders, such as core, database, helpers (built-in system helpers), and libraries (built-in system libraries).<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>Do not edit any of these files! Upgrading is much easier if we don't.</p></div></div></li></ul></div></div></div>
<div class="section" title="Example 1 &#x2013; hello world"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Example 1 – hello world</h1></div></div></div><p>Initially, we will start with a <a id="id16" class="indexterm"/>simple example that displays <span class="strong"><strong>Hello World</strong></span> on the rendered web page. This is an example that doesn't use a database.</p><p>The URI will be <code class="literal">http://ourdomain.com/index.php/hello</code>.</p><p>We can eliminate the <code class="literal">index.php</code> file from the path to enable a shorter URI; that is, <code class="literal">http://ourdomain.com/index.php/hello</code>.</p><p>In order to enable these shorter URIs, we will make configuration changes as described in <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>, regarding the <code class="literal">config.php</code> index_page setting in <code class="literal">config.php</code>.</p><p>We will build the following two scripts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Controller class: <code class="literal">application/controllers/hello.php</code></li><li class="listitem" style="list-style-type: disc">View script: <code class="literal">application/views/helloview.php</code></li></ul></div><p>In this example, we use the default configuration. For more information about configurations, refer to <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>. The controller in this example passes the parameters that are displayed in the view.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>Passing the parameters from the controller to the view is optional.</p></div></div><div class="section" title="The controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>The controller file</h2></div></div></div><p>Here's the code sample of the <a id="id17" class="indexterm"/>controller. The controller is responsible for rendering the view with the parameters, such as mega title and message. For naming the controller classes, refer to <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>.</p><div class="informalexample"><pre class="programlisting">&lt;?php 
class Hello extends CI_Controller {
  * Index Page for this controller.
  * Maps to the following URLhttp://example.com/index.php/hello
  - or - http://example.com/index.php/hello/index- or -* since this controller is set as the default controller in config/routes.php, it's displayed at http://example.com/
  * So any other public methods not prefixed with an underscorewill map to /index.php/welcome/&lt;method_name&gt;
  @see http://codeigniter.com/user_guide/general/urls.html
  public function index(){	    
    // Note that $view_params is optional// we can use $this-&gt;load-&gt;view('helloview');as well.// if the view doesn't use php variables 
    // The $view_params is extracted in the view script to php// variables $key = $value
    // In this example three variables will be generated by CI in the // view page
    // helloview.php variable: $mega_title
    // value: 'Codeigniter - Hello World'		// variable: $title      value: 'Welcome to // Codegniter'// variable: $message    value: 'Hello World'
    $view_params = array(
    'mega_title' =&gt; 'Codeigniter - Hello World', 'title'      =&gt;  'Welcome to Codegniter','message'    =&gt;  'Hello World'                              );		
<span class="strong"><strong>			$this-&gt;load-&gt;view('helloview', $view_params);</strong></span>		}
	} // closing the class definition
/* End of file welcome.php *//* Location: ./application/controllers/welcome.php */</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip04"/>Tip</h3><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div></div><div class="section" title="The view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>The view file</h2></div></div></div><p>The following is the <a id="id18" class="indexterm"/>corresponding rendered view that uses the parameters provided by the controller to render the view to the web page and return it to the user:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;&lt;?php echo $mega_title ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="container"&gt;
  &lt;h1&gt;&lt;?php echo $title ?&gt;&lt;/h1&gt;
  &lt;div id="body"&gt;
  &lt;p&gt;&lt;?php echo $message ?&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Example 2 &#x2013; passing the complex parameters to a view"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Example 2 – passing the complex parameters to a view</h1></div></div></div><p>In this example, we will show<a id="id19" class="indexterm"/> you how to pass and use complex parameters<a id="id20" class="indexterm"/>, such as arrays and object arrays, from the CI controller to the rendered CI view to be used in the view. You can pass any number of arrays as parameters to a view; you can also pass objects, such as rows of a query result.</p><p>A standard GET parameters URI looks like this: <code class="literal">http://ourdomain.com/index.php/example2/more/?a=1&amp;b=2&amp;c=3</code>.</p><p>However, let's remember that in CI the URI is passed in this manner: <code class="literal">http://ourdomain.com/index.php/example2/more/1/2/3</code>. For more information, see <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configurations and Naming Conventions</em></span>.</p><p>Looking at the URI, we will build the controller <code class="literal">example2.php</code> with the function named <code class="literal">more</code> with the three parameters passed to it.</p><p>We will build the following two scripts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The controller class: <code class="literal">application/controllers/example2.php</code></li><li class="listitem" style="list-style-type: disc">The view script : <code class="literal">application/views/ example2more.php</code></li></ul></div><div class="section" title="The controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>The controller file</h2></div></div></div><p>The controller is <a id="id21" class="indexterm"/>responsible for rendering the view with parameters such as mega title and message.</p><p>The following is the code sample of the controller:</p><div class="informalexample"><pre class="programlisting">&lt;?php 
class Example2 extends CI_Controller {
  //This function gets parameters and passes them to the view//example2more
  //The example url//http://ourdomain.com/index.php/example2/more/1/2/3
  so $a = 1, $b = 2, $c = 3
  public function more($a, $b, $c)
  {
    // The parameters in $view_params are extracted in the view//example2more.php
    // In this example 2 variables will be generated by CI in the//view page example2more.php
    //variable: $mega_title, value: Codeigniter, Passing//url parameters to view
    variable: $rows, value: array('a' =&gt; $a, 'b' =&gt; $b, 'c' =&gt; $c);
    $rows = array('a' =&gt; $a, 'b' =&gt; $b, 'c' =&gt; $c);
    $view_params = array('mega_title' =&gt; 'Codeigniter -  Passing url parameters to view 'rows' =&gt; $rows);
<span class="strong"><strong>    $this-&gt;load-&gt;view('example2more', $view_params);</strong></span>
    }	}// closing the class definition/* End of file welcome.php</pre></div></div><div class="section" title="The view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>The view file</h2></div></div></div><p>The following is the <a id="id22" class="indexterm"/>corresponding rendered view:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;&lt;?php echo $mega_title ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table&gt;
&lt;tr&gt;
  &lt;td&gt;Key&lt;/td&gt;
  &lt;td&gt;Value&lt;/td&gt;
&lt;/tr&gt;
&lt;?php foreach ($rows as $key =&gt; $value): ?&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;?php echo $key ; ?&gt;&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $value ; ?&gt;&lt;/td&gt;
&lt;/tr&gt; 
&lt;?php endforeach; ?&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Example 3 &#x2013; the database query by a model rendering results to a view"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Example 3 – the database query by a model rendering results to a view</h1></div></div></div><p>In this example, we will <a id="id23" class="indexterm"/>show you how the CI controller uses the CI model to retrieve data from the database and render it to a CI view.</p><p>The URL will be <code class="literal">http://ourdomain.com/index.php/user</code>.</p><p>First, we will have to configure the database settings in the configuration file <code class="literal">application/config/database.php</code>.</p><p>We should keep the default database settings unchanged, and only change the following configuration parameters:</p><div class="informalexample"><pre class="programlisting">$db['default']['hostname'] = '127.0.0.1';
//In many cases when the hostname's value is 'localhost' theconnection to the database fails.
//Setting the hostname to 127.0.0.1 solves the problem.
$db['default']['username'] = 'dbUser;
$db['default']['password'] = 'dbPassword';
$db['default']['database'] = 'dbDataAbse';
$db['default']['port']     = 'dbPort';</pre></div><p>The model class will retrieve all the user details from the table <code class="literal">users</code>.</p><p>For more information on configurations, refer to <a class="link" href="ch02.html" title="Chapter 2. Configurations and Naming Conventions">Chapter 2</a>, <span class="emphasis"><em>Configuration and Naming Conventions</em></span>.</p><p>We will build the following three scripts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The controller class: <code class="literal">application/controllers/user.php</code></li><li class="listitem" style="list-style-type: disc">The model file: <code class="literal">application/model/usermodel.php</code></li><li class="listitem" style="list-style-type: disc">The view script: <code class="literal">application/views/userview.php</code></li></ul></div><div class="section" title="The controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>The controller file</h2></div></div></div><p>The controller retrieves the <code class="literal">users</code> list<a id="id24" class="indexterm"/> from the database via the model and renders the view with it.</p><p>The following is the code sample of the controller:</p><div class="informalexample"><pre class="programlisting">&lt;?php
class User extends CI_Controller {
  function users()
  {
    //Manually loading the database
<span class="strong"><strong>    $this-&gt;load-&gt;database();</strong></span>
    //Loading the model class
<span class="strong"><strong>    $this-&gt;load-&gt;model('Usermodel');</strong></span>
    $view_params['mega_title'] = 'Model Example';
    //Calling the model to retrieve the users from the database
    $view_params['users']= $this-&gt;Usermodel-&gt;get_users();
<span class="strong"><strong>    $this-&gt;load-&gt;view('userview', $view_params);</strong></span>
  }
}
/* End of file welcome.php */
/* Location: /application/controllers/welcome.php */</pre></div></div><div class="section" title="The model file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>The model file</h2></div></div></div><p>The following is the code sample of the<a id="id25" class="indexterm"/> model.</p><div class="informalexample"><pre class="programlisting">&lt;?php
class Usermodel extends CI_Model {
  function __construct()
  {
    // Call the Model constructor	parent::__construct();
  }
  //This method retrieves the users list and returns an array of //objects each containing user details
  function get_users()
  {
    //Calling CI's database object's method for generating SQL//queries.
    $query = $this-&gt;db-&gt;get('users');
    //returns an array of users objects
    return $query-&gt;result();
  }
}</pre></div><p>In this example, the CI object database's method is called for generating and executing the SQL query.</p><p>Please refer to the CI database's library at <a class="ulink" href="http://ellislab.com/codeigniter/user-guide/database/index.html">http://ellislab.com/codeigniter/user-guide/database/index.html</a>.</p><p>For more information about models, refer to <a class="link" href="ch06.html" title="Chapter 6. Models">Chapter 6</a>, <span class="emphasis"><em>Models</em></span>.</p></div><div class="section" title="The view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>The view file</h2></div></div></div><p>The view in this example shows the table <a id="id26" class="indexterm"/>content received from the controller containing the <code class="literal">users</code> list as defined in the database.</p><p>The following is the corresponding rendered view:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;&lt;?php echo $mega_title ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table&gt;
&lt;tr&gt;
  &lt;td&gt;ID&lt;/td&gt;
  &lt;td&gt;Name&lt;/td&gt;
  &lt;td&gt;Email&lt;/td&gt;
&lt;/tr&gt;
&lt;?php foreach ($users as $user): ?&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;?php echo $user-&gt;user_id ?&gt;&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $user-&gt;user_fname." ".$user-&gt;user_lname; ?&gt;&lt;/td&gt;
  &lt;td&gt;&lt;?php echo $user-&gt;user_email ; ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;?php endforeach; ?&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Example 4 &#x2013; interactive contact forms"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Example 4 – interactive contact forms</h1></div></div></div><p>This example shows how to<a id="id27" class="indexterm"/> write a contact form using the CI form helper and the <code class="literal">form_validation</code> library.</p><p>For more information about libraries, refer to <a class="link" href="ch04.html" title="Chapter 4. Libraries">Chapter 4</a>, <span class="emphasis"><em>Libraries</em></span>, and for information about helpers, refer to <a class="link" href="ch05.html" title="Chapter 5. Helpers">Chapter 5</a>, <span class="emphasis"><em>Helpers</em></span>.</p><p>The CI controller defines a form validation setup using the <code class="literal">form_validation</code> library and renders a form view that uses the <code class="literal">form_validation</code> library setup to apply a desired validation on the submitted data by the user. If it's a success, the CI controller will render a view page displaying a success message, otherwise it will render the view page with the form and the error messages will be displayed.</p><p>The URI for this example is <code class="literal">http://ourdomain.com/index.php/contact</code>.</p><p>In order to perform this example, we shall build the following three scripts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The contact form controller class: <code class="literal">application/controllers/contact.php</code></li><li class="listitem" style="list-style-type: disc">The view form script: <code class="literal">application/views/contactview.php</code></li><li class="listitem" style="list-style-type: disc">The view success page script: <code class="literal">application/views/contactsuccess.php</code></li></ul></div><div class="section" title="The controller file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>The controller file</h2></div></div></div><p>The controller<a id="id28" class="indexterm"/> creates a form for adding and editing a product.</p><p>For more information, refer to <a class="link" href="ch07.html" title="Chapter 7. Views">Chapter 7</a>, <span class="emphasis"><em>Views</em></span>.</p><p>The following is the code sample of the controller:</p><div class="informalexample"><pre class="programlisting">&lt;?php
class Contact extends CI_Controller {
  public function index()
  {
    //Loading the form helper
    $this-&gt;load-&gt;helper('form');
    //Loading the form_validation library
    $this-&gt;load-&gt;library('form_validation');
    $view_params['form']['attributes'] = array('id' =&gt;'myform');
    //contact name details
    $view_params['form']['contact_name']['label'] = array('text' =&gt; 'Your name:', 'for' =&gt; 'name');
    $view_params['form']['contact_name']['field']= array('name' =&gt; 'contact_name', 'id' =&gt; 'contact_name','value'=&gt;isset($_POST['contact_name']) ?
    $_POST['contact_name'] : '',
    'maxlength' =&gt; '100', 'size' =&gt; '30', 'class' =&gt; 'input');
    //contact name details
    $view_params['form']['contact_email']['label'] = array('text' =&gt; 'Your email:', 'for' =&gt; 'email');
    $view_params['form']['contact_email']['field'] = array('name' =&gt; 'contact_email', 'id' =&gt; 'contact_email','value'=&gt; isset($_POST['contact_email']) ?
    $_POST['contact_email'] : '',
    'maxlength'   =&gt; '100', 'size' =&gt; '30', 'class' =&gt; 'input');
    //contact message details
    $view_params['form']['contact_message']['label'] = array('text' =&gt; 'Your message:', 'for' =&gt; 'message');
    $view_params['form']['contact_message']['field'] = array('name' =&gt; 'contact_message', 'id' =&gt; 'contact_message','value' =&gt; isset($_POST['contact_message']) ?
    $_POST['contact_message'] : '',
    'rows' =&gt; '10',  'cols' =&gt; '100', 'class' =&gt; 'input');
    // Setting validation rules
    $config_rules = array(array('field' =&gt; 'contact_name','label' =&gt; 'Contact Name', 'rules' =&gt; 'trim|required'),
    array('field' =&gt; 'contact_email', 'label' =&gt; 'Contact Email','rules' =&gt; 'trim|required|valid_email'));
    $this-&gt;form_validation-&gt;set_rules($config_rules);
    $this-&gt;form_validation-&gt;set_rules('contact_message','Contact Message', 'trim|required');
    // Validating the form
    if ($this-&gt;form_validation-&gt;run() == FALSE)
    // failed 
    {
      for ($index = 0; $index &lt; count($a_fields) $index++);
      {
        $s_field = $a_fields[$index];
        if (form_error($s_field))
        {
          $view_params['form'][$s_field]['field']['class'] .= 'error';
          }
        }
      $this-&gt;load-&gt;view('contactview', $view_params);
      }
      else // Validation succeeded
      {
      $success_params = array('message'=&gt; 'Success');
      $this-&gt;load-&gt;view('contactsuccess', $success_params);
      }
    }
  }
/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */</pre></div></div><div class="section" title="The view file"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>The view file</h2></div></div></div><p>The view file <a id="id29" class="indexterm"/>displays the contact form for receiving data from the user.</p><p>The following is the corresponding rendered form view:</p><div class="informalexample"><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Form Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php if (validation_errors()) : ?&gt;
  &lt;?php echo validation_errors() ; ?&gt;
  &lt;?php endif; ?&gt;
&lt;?php echo form_open('contact', $form['attributes']) ; ?&gt;
&lt;table&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;?php echo form_label($form['contact_name']['label']['text'],
$form['contact_name']['label']['for']);?&gt; 
  &lt;/td&gt; 
  &lt;td&gt;&lt;?php echo form_input($form['contact_name']['field']); ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;?php echo form_label($form['contact_email']['label']['text'],
$form['contact_email']['label']['for']);?&gt;
  &lt;/td&gt; 
  &lt;td&gt;&lt;?php echo form_input($form['contact_email']['field']);?&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;?php echo
  form_label($form['contact_message']['label']['text'],
  $form['contact_message']['label']['for']); ?&gt;
  &lt;/td&gt; 
  &lt;td&gt;&lt;?php echo form_textarea($form['contact_message']['field']);?&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="3"&gt;&lt;?php echo form_submit('mysubmit', 'Send'); ?&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;?php echo form_close() ; ?&gt;
&lt;/body&gt;
&lt;/html&gt;
The following is the corresponding rendered success view:
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;Contact sent&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="container"&gt;
  &lt;div id="body"&gt;
    &lt;p&gt;&lt;?php echo $message ?&gt;&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;	
&lt;/body&gt;
&lt;/html&gt;</pre></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Summary</h1></div></div></div><p>In this chapter we have reviewed the CI directory tree, especially the application folder, which is the heart and soul of any CI project. In the next chapter, we will review the configurations, such as database and naming conventions that are essential for the CI project.</p></div></body></html>