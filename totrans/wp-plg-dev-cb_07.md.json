["```php\nglobal $user_levels;\n$user_levels = array( 'regular' => 'Regular', 'paid' => 'Paid' );\n```", "```php\nadd_action( 'user_new_form', 'ch2pit_show_user_profile' );\nadd_action( 'edit_user_profile', 'ch2pit_show_user_profile' );\n```", "```php\nfunction ch2pit_show_user_profile( $user ) {\n    global $user_levels;\n    if ( 'add-new-user' == $user ) {\n        $current_user_level = '';\n    } elseif ( !empty( $user ) && isset( $user->data->ID ) ) {\n        $user_id = $user->data->ID;\n        $current_user_level =\n            get_user_meta( $user_id, 'user_level', true );\n    } ?> \n\n    <h3>Site membership level</h3>\n    <table class=\"form-table\">\n        <tr>\n            <th>Level</th>\n            <td><select name=\"user_level\" id=\"user_level\">\n            <?php foreach( $user_levels as \n                           $user_level_index => $user_level ) { ?>\n            <option value=\"<?php echo $user_level_index; ?>\"\n            <?php selected( $current_user_level,\n                            $user_level_index ); ?>>\n            <?php echo $user_level; ?></option>\n            <?php } ?>\n            </select></td>\n        </tr>\n    </table> \n<?php }\n```", "```php\nget_user_meta( $user_id, $field_name, $single );\n```", "```php\nadd_action( 'user_register', 'ch2pit_save_user_data' );\nadd_action( 'profile_update', 'ch2pit_save_user_data' );\n```", "```php\nfunction ch2pit_save_user_data( $user_id ) {\n    global $user_levels;\n    if ( isset( $_POST['user_level'] ) &&\n         !empty( $_POST['user_level'] ) &&\n         array_key_exists( $_POST['user_level'], \n                           $user_levels ) ) {\n        update_user_meta( $user_id, 'user_level',\n                          $_POST['user_level'] );\n    } else {\n        update_user_meta( $user_id, 'user_level', 'regular' );\n    }\n}\n```", "```php\nupdate_user_meta( $user_id, $field_name, $single );\n```", "```php\nadd_filter( 'manage_users_columns', 'ch2pit_add_user_columns' );\n```", "```php\nfunction ch2pit_add_user_columns( $columns ) {\n    $new_columns = array_slice( $columns, 0, 2, true ) +\n                   array( 'level' => 'User Level' ) +\n                   array_slice( $columns, 2, NULL, true );\n    return $new_columns;\n}\n```", "```php\nadd_filter( 'manage_users_custom_column', \n            'ch2pit_display_user_columns_data', 10, 3 );\n```", "```php\nfunction ch2pit_display_user_columns_data( $val, $column_name,\n                                           $user_id ) {\n    global $user_levels;\n    if ( 'level' == $column_name ) {\n        $current_user_level = get_user_meta( $user_id, \n                                             'user_level', true );\n        if ( !empty( $current_user_level ) ) {\n            $val = $user_levels[$current_user_level];\n        }\n    }\n    return $val;\n}\n```", "```php\nadd_action( 'restrict_manage_users', 'ch2pit_add_user_filter' );\n```", "```php\nfunction ch2pit_add_user_filter() {\n    global $user_levels;\n    $filter_value = '';\n    if ( isset( $_GET['user_level'] ) ) {\n        $filter_value = $_GET['user_level'];\n    } ?>\n\n    <select name=\"user_level\" class=\"user_level\" \n            style=\"float:none;\">\n    <option value=\"\">No filter</option>\n    <?php foreach( $user_levels as\n                       $user_level_index => $user_level ) { ?>\n        <option value=\"<?php echo $user_level_index; ?>\" \n        <?php selected( $filter_value, $user_level_index ); ?>>\n        <?php echo $user_level; ?></option>\n    <?php } ?>\n    <input type=\"submit\" class=\"button\" value=\"Filter\">\n<?php }\n```", "```php\nadd_action( 'admin_footer', 'ch2pit_user_filter_js' );\n```", "```php\nfunction ch2pit_user_filter_js() {\n    global $current_screen;\n    if ( 'users' != $current_screen->id ) {\n        return;\n    } ?>\n\n    <script type=\"text/javascript\">\n        jQuery( document ).ready( function() {\n            jQuery( '.user_level' ).first().change( function() {\n                jQuery( '.user_level' ).\n                    last().val( jQuery( this ).val() );\n            });\n\n            jQuery( '.user_level' ).last().change( function() {\n                jQuery( '.user_level' ).\n                    first().val( jQuery( this ).val() );\n            });\n        });\n    </script>\n<?php }\n```", "```php\nadd_filter( 'pre_get_users', 'ch2pit_filter_users' );\n```", "```php\nfunction ch2pit_filter_users( $query ) {\n    global $pagenow;\n    global $user_levels;\n\n    if ( is_admin() && 'users.php' == $pagenow && \n         isset( $_GET['user_level'] ) ) {\n        $filter_value = $_GET['user_level'];\n        if ( !empty( $filter_value ) && \n             array_key_exists( $_GET['user_level'], \n                               $user_levels ) ) {\n            $query->set( 'meta_key', 'user_level' );\n            $query->set( 'meta_query', array(\n                         array( 'key' => 'user_level',\n                                'value' => $filter_value ) ) );\n        } \n    }\n}\n```", "```php\nadd_shortcode( 'paid', 'ch2pit_paid_shortcode' );\n```", "```php\nfunction ch2pit_paid_shortcode( $atts, $content = null ) {\n    if ( is_user_logged_in() ) {\n        $current_user = wp_get_current_user();\n        $current_user_level = get_user_meta( $current_user->ID, \n                                             'user_level', true );\n        if ( 'paid' == $current_user_level ||  \n             current_user_can( 'activate_plugins' ) ) {\n            return '<div class=\"paid\">' . $content . '</div>';\n        }\n    }\n    $output = '<div class=\"register\">';\n    $output .= 'You need to be a paid member to access ';\n    $output .= 'this content.</div>';\n    return $output; \n}\n```"]