["```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// say hello!\necho ‘<div align=\"center\">Hello, phpBB World!</div>’;\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\n// say hello!\necho ‘<div align=\"center\">Hello, phpBB World!</div>’;\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// the main script work starts here\n$sql = \"SELECT COUNT(*) FROM \" . SEARCH_WORD_TABLE;\n$result = $db->sql_query($sql);\nif ( !$result )\n{\nmessage_die(GENERAL_ERROR, ‘Cannot execute query’, ‘’, __LINE__, __FILE__, $sql);\n}\n$row = $db->sql_fetchrow();\n$word_count = $row[0];\necho ‘<div align=\"center\">Hey, did you know that ‘. $word_count .’ words were used in my board so far!?</div>’;\n// end of the script work\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\n$sql = \"SELECT COUNT(*) FROM \" . SEARCH_WORD_TABLE;\n\n```", "```php\n$result = $db->sql_query($sql);\n\n```", "```php\nif ( !$result )\n{\nmessage_die(GENERAL_ERROR, ‘Cannot execute query’, ‘’,\n__LINE__, __FILE__, $sql);\n}\n\n```", "```php\n$row = $db->sql_fetchrow();\n\n```", "```php\n$word_count = $row[0];\n\n```", "```php\necho ‘<div align=\"center\">Hey, did you know that ‘. $word_count .’ words were used in my board so far!?</div>’;\n\n```", "```php\n$word_count = $row[‘COUNT(*)’];\n\n```", "```php\n$word_count = $row[‘words’];\n\n```", "```php\n$sql = \"SELECT COUNT(*) AS words FROM \" . SEARCH_WORD_TABLE;\n\n```", "```php\nArray\n(\n[0] => 71\n[COUNT(*)] => 71\n)\n\n```", "```php\nArray\n(\n[0] => Array\n(\n[0] => 71\n[COUNT(*)] => 71\n)\n)\n\n```", "```php\n$word_count = $db->sql_fetchfield(‘COUNT(*)’);\n\n```", "```php\n$word_count = $db->sql_fetchfield($db->sql_fieldname(0));\n\n```", "```php\n$sql = \"HEY, GO AHEAD AND SELECT COUNT(*) FROM \" . SEARCH_WORD_TABLE;\n\n```", "```php\nif ( !$result )\n{\nmessage_die(GENERAL_ERROR, ‘Cannot execute query’, ‘’, __LINE__, __FILE__, $sql);\n}\n\n```", "```php\n// Debug Level\n//define(‘DEBUG’, 1); // Debugging on\ndefine(‘DEBUG’, 0); // Debugging off\n\n```", "```php\necho ‘<div align=\"center\">Hey, did you know that ‘. $word_count .’ words were used in my board so far!?</div>’;\n\n```", "```php\nmessage_die(GENERAL_MESSAGE,\n‘Hey, did you know that ‘. $word_count .’ words were used in my board so far!?’,\n‘Word count’);\n\n```", "```php\n$lang[‘Guest’] = ‘Guest’;\n$lang[‘Post_subject’] = ‘Post subject’;\n$lang[‘View_next_topic’] = ‘View next topic’;\n\n```", "```php\n$lang[‘Word_count_title’] = ‘Word count’;\n$lang[‘Word_count_message’] = ‘Hey, did you know that <strong>%d</strong> words were used in my board so far!?’;\n\n```", "```php\nmessage_die(GENERAL_MESSAGE,\nsprintf($lang[‘Word_count_message’], $word_count),\n$lang[‘Word_count_title’]);\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// the main script work starts here\n$sql = \"SELECT COUNT(*) FROM \" . SEARCH_WORD_TABLE;\n$result = $db->sql_query($sql);\nif ( !$result )\n{\nmessage_die(GENERAL_ERROR, ‘Cannot execute query’, ‘’, __LINE__, __FILE__, $sql);\n}\n$row = $db->sql_fetchrow();\n$word_count = $row[0];\nmessage_die(GENERAL_MESSAGE,\nsprintf($lang[‘Word_count_message’], $word_count),\n$lang[‘Word_count_title’]);\n// end of the script work\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\n<span class=\"nav\"><a href=\"{U_INDEX}\" class=\"nav\">{L_INDEX}</a></span>\n<div\nalign=\"center\"\nclass=\"gen\"\nstyle=\"border: solid 2px #006699; padding: 10px; margin-top: 5px;\"\n>\n{WORD_COUNT_MESSAGE}\n</div>\n\n```", "```php\n// assemble the message text\n$message_text = sprintf($lang[‘Word_count_message’], $word_count);\n// set template file\n$template->set_filenames(array(‘body’ => ‘wordcount.tpl’));\n// assign template variables\n$template->assign_vars(\narray(\n‘WORD_COUNT_MESSAGE’ => $message_text,\n)\n);\n// process, parse and display\n$template->pparse(‘body’);\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// the main script work starts here\n$sql = \"SELECT COUNT(*) FROM \" . SEARCH_WORD_TABLE;\n$result = $db->sql_query($sql);\nif ( !$result )\n{\nmessage_die(GENERAL_ERROR, ‘Cannot execute query’, ‘’, __LINE__, __FILE__, $sql);\n}\n$row = $db->sql_fetchrow();\n$word_count = $row[0];\n// assemble the message text\n$message_text = sprintf($lang[‘Word_count_message’], $word_count);\n// set template file\n$template->set_filenames(array(‘body’ => ‘wordcount.tpl’));\n// assign template variables\n$template->assign_vars(\narray(\n‘WORD_COUNT_MESSAGE’ => $message_text,\n)\n);\n// process, parse and display\n$template->pparse(‘body’);\n// end of the script work\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\n<!-- BEGIN number_loop -->\n{number_loop.NUMBER}\n<!-- END number_loop -->\n\n```", "```php\n<span class=\"nav\"><a href=\"{U_INDEX}\" class=\"nav\">{L_INDEX}</a></span>\n<div\nalign=\"center\"\nclass=\"gen\"\nstyle=\"border: solid 2px #006699; padding: 10px; margin-top: 5px;\"\n>\n<!-- BEGIN number_loop -->\n{NUMBER}{number_loop.NUMBER}\n<!-- END number_loop -->\n</div>\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// the main script work starts here\n// set template file\n$template->set_filenames(array(‘body’ => ‘example2.tpl’));\n// assign template variables in a loop\nfor ($i = 1; $i<=10; $i++)\n{\n$template->assign_block_vars(\"number_loop\",\narray(\n‘NUMBER’ => $i,\n)\n);\n}\n// assign a static variable\n$template->assign_vars(\narray(\n‘NUMBER’ => ‘#’,\n)\n);\n// process, parse and display\n$template->pparse(‘body’);\n// end of the script work\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\n<span class=\"nav\"><a href=\"{U_INDEX}\" class=\"nav\">{L_INDEX}</a> </span>\n<div\nalign=\"center\"\nclass=\"gen\"\nstyle=\"border: solid 2px #006699; padding: 10px; margin-top: 5px;\"\n>\n<!-- BEGIN number_loop -->\n<!-- BEGIN odd_switch -->\n{NUMBER}{number_loop.odd_switch.NUMBER}\n<!-- END odd_switch -->\n<!-- BEGIN even_switch -->\n<strong>{NUMBER}{number_loop.even_switch.NUMBER}</strong>\n<!-- END even_switch -->\n<!-- END number_loop -->\n</div>\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// the main script work starts here\n// set template file\n$template->set_filenames(array(‘body’ => ‘example3.tpl’));\n// assign template variables in a loop\nfor ($i = 0; $i <= 10; $i++)\n{\nif ( $i % 2 )\n{\n$template->assign_block_vars(\"number_loop.odd_switch\",\narray(\n‘NUMBER’ => $i,\n)\n);\n} else {\n$template->assign_block_vars(\"number_loop.even_switch\",\narray(\n‘NUMBER’ => $i,\n)\n);\n}\n}\n// assign a static variable\n$template->assign_vars(\narray(\n‘NUMBER’ => ‘#’,\n)\n);\n// process, parse and display\n$template->pparse(‘body’);\n// end of the script work\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// check auth\n$user_privileges = auth(AUTH_ALL, AUTH_LIST_ALL, $userdata);\n// display the return value\necho ‘<pre>’;\nprint_r($user_privileges);\necho ‘</pre>’;\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\n$user_privileges = auth(AUTH_ALL, 1, $userdata);\n\n```", "```php\nArray\n(\n[auth_view] => 1\n[auth_view_type] => anonymous users\n[auth_read] => 1\n[auth_read_type] => anonymous users\n[auth_post] => 0\n[auth_post_type] => registered users\n[auth_reply] => 0\n[auth_reply_type] => registered users\n[auth_edit] => 0\n[auth_edit_type] => registered users\n[auth_delete] => 0\n[auth_delete_type] => registered users\n[auth_sticky] => 0\n[auth_sticky_type] => moderators\n[auth_announce] => 0\n[auth_announce_type] => moderators\n[auth_vote] => 0\n[auth_vote_type] => registered users\n[auth_pollcreate] => 0\n[auth_pollcreate_type] => registered users\n[auth_mod] => 0\n)\n\n```", "```php\nArray\n(\n[auth_view] => 1\n[auth_view_type] => anonymous users\n[auth_read] => 1\n[auth_read_type] => anonymous users\n[auth_post] => 1\n[auth_post_type] => registered users\n[auth_reply] => 1\n[auth_reply_type] => registered users\n[auth_edit] => 1\n[auth_edit_type] => registered users\n[auth_delete] => 1\n[auth_delete_type] => registered users\n[auth_sticky] => 0\n[auth_sticky_type] => moderators\n[auth_announce] => 0\n[auth_announce_type] => moderators\n[auth_vote] => 1\n[auth_vote_type] => registered users\n[auth_pollcreate] => 1\n[auth_pollcreate_type] => registered users\n[auth_mod] => 0\n)\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// check auth\n$user_privileges = auth(AUTH_POLLCREATE, 1, $userdata);\n// display the result of the authentication\n$message = ‘’;\nif ( $user_privileges[‘auth_pollcreate’] == 1 )\n{\n$message = ‘Great news! You can create polls in forum id #1!’;\n} else {\n$message = ‘When you login, you\\’ll be able to create polls in forum id #1.’;\n}\nmessage_die(GENERAL_MESSAGE, $message, ‘Auth test’);\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\nget_db_stat($mode)\n\n```", "```php\n<?php\n// set IN_PHPBB constant and include the initialization script\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// include page header\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n// the main script work starts here\n$newest_user = get_db_stat(\"newestuser\");\nmessage_die(\nGENERAL_MESSAGE,\n‘My board has ‘\n. get_db_stat(\"usercount\") . ‘ users, ‘\n. get_db_stat(\"postcount\") . ‘ postings and ‘\n. get_db_stat(\"topiccount\") . ‘ topics. ‘\n. ‘Say \\’Hi\\’ to the newest member - ‘\n. $newest_user[‘username’] . ‘!’,\n‘Board stats - get_db_stats() demo’\n);\n// include page footer\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```", "```php\nget_userdata($user, $force_str = false)\n\n```", "```php\necho ‘<pre>’;\nprint_r(get_userdata(2));\necho ‘</pre>’;\n\n```", "```php\nArray\n(\n[0] => 2\n[user_id] => 2\n[1] => 1\n[user_active] => 1\n[2] => Administrator\n[username] => Administrator\n[3] => 2236c39cda27b2c5535ce82f3a1e28e0\n[user_password] => 2236c39cda27b2c5535ce82f3a1e28e0\n[4] => 1104479522\n[user_session_time] => 1104479522\n. . .\n)\n\n```", "```php\n// the main script work starts here\n$ip = $_SERVER[‘REMOTE_ADDR’];\n$encoded = encode_ip($ip);\n$decoded = decode_ip($encoded);\nmessage_die(\nGENERAL_MESSAGE,\n‘I know you, your IP address is ‘ . $ip\n. ‘. This is encoded as ‘ . $encoded\n. ‘ and decoded back as ‘ . $decoded,\n‘Encode/decode IP demo’\n);\n\n```", "```php\ncreate_date($format, $unix_timestamp, $timezone)\n\n```", "```php\ncreate_date($board_config[‘default_dateformat’], time(), $board_config[‘board_timezone’])\n\n```", "```php\nobtain_word_list(&$original_words, &$replacement_words)\n\n```", "```php\n// the text to be filtered\n$some_text = \"I may contain naughty words.\";\n// empty arrays\n$orig_word = $replacement_word = array();\n// get the word lists\nobtain_word_list($orig_word, $replacement_word);\n// apply filters if there are ones\nif ( !empty($orig_word) )\n{\n$some_text = preg_replace($orig_word, $replacement_word, $post_text);\n// now $some_text is filtered\n}\n\n```", "```php\nappend_sid($url, $non_html_amp = false)\n\n```", "```php\n$url = ‘viewtopic.php?t=12’;\n$url = append_sid($url);\n\n```", "```php\n$url = ‘viewtopic.php?p=21#21’;\n$url = append_sid($url);\n\n```", "```php\n$url = ‘viewtopic.php?p=21’;\n$url = append_sid($url) . ‘#21’;\n\n```", "```php\nmake_clickable($text)\n\n```", "```php\n$text = \"Visit Packt at www.packtpub.com today\";\n$text = make_clickable($text);\necho $text;\n\n```", "```php\nVisit Packt at <a href=\"http://www.packtpub.com\" target=\"_blank\">www.packtpub.com</a> today.\n\n```", "```php\n// start\n$post_text = $row[‘post_text’];\n// BB code\n$post_text = bbencode_second_pass($post_text, $row[‘bbcode_uid’]);\n// smilies\n$post_text = smilies_pass($post_text);\n// clickable links\n$post_text = make_clickable($post_text);\n// naughty words\n$orig_word = $replacement_word = array();\nobtain_word_list($orig_word, $replacement_word);\nif ( !empty($orig_word) )\n{\n$post_text = preg_replace($orig_word, $replacement_word, $post_text);\n}\n$post_text = nl2br($post_text);\n\n```", "```php\n<?php\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\ninclude($phpbb_root_path . ‘includes/bbcode.’.$phpEx);\n\n```", "```php\n<span class=\"nav\"><a href=\"{U_INDEX}\" class=\"nav\">{L_INDEX}</a></span>\n<table width=\"100%\" cellpadding=\"5\" cellspacing=\"1\" border=\"0\" class=\"forumline\">\n<tr>\n<th class=\"thCornerL\" height=\"25\" nowrap=\"nowrap\">&nbsp;{FORUM}&nbsp;</th>\n<th width=\"50\" class=\"thTop\" nowrap=\"nowrap\">&nbsp;{TOPIC}&nbsp;</th>\n<th class=\"thCornerR\" nowrap=\"nowrap\">&nbsp;{POSTER}&nbsp;</th>\n</tr>\n<!-- BEGIN row -->\n<tr>\n<td valign=\"top\" class=\"row1\">\n<span class=\"forumlink\">\n<a class=\"forumlink\" href=\"{row.U_FORUM}\">{row.FORUM_NAME}</a>\n</span>\n<!-- BEGIN is_mod_switch -->\n<span class=\"name\">\n<br />\n<a href=\"{row.is_mod_switch.U_FORUM_MODCP}\">{row.is_mod_switch.L_MOD}</a>\n</span>\n<!-- END is_mod_switch -->\n</td>\n<td valign=\"top\" class=\"row2\">\n<span class=\"topictitle\">\n{row.TOPIC_TYPE} <a class=\"topictitle\" href=\"{row.U_TOPIC}\">{row.TOPIC_TITLE}</a>\n</span>\n<br />\n<span class=\"gensmall\">{row.GOTO_PAGE}</span>\n</td>\n<td valign=\"top\" class=\"row1\">\n<span class=\"name\"><a href=\"{row.U_POSTER}\">{row.POSTER}</a> {row.IMG_LATEST_POST}\n<a href=\"#\" onclick=\"javascript: document.getElementById(‘{row.POST_ID}’).style.display = (document.getElementById(‘{row.POST_ID}’).style.display == ‘none’) ? ‘’ : ‘none’;\">\n{row.IMG_VIEW_POST}</a>\n</span>\n<br />\n<span class=\"postdetails\">{row.POST_DATE_TIME}</span>\n</td>\n</tr>\n<tr id=\"{row.POST_ID}\" style=\"display:none\">\n<td colspan=\"3\" class=\"row1\">\n<div class=\"postbody\" style=\"padding: 10px;\">\n{row.POST_TEXT}\n</div>\n</td>\n</tr>\n<!-- END row -->\n</table>\n\n```", "```php\n<!-- BEGIN is_mod_switch -->\n<span class=\"name\">\n<br />\n<a href=\"{row.is_mod_switch.U_FORUM_MODCP}\">{row.is_mod_switch .L_MOD}</a>\n</span>\n<!-- END is_mod_switch -->\n\n```", "```php\n<?php\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\ninclude($phpbb_root_path . ‘includes/bbcode.’.$phpEx);\n\n```", "```php\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n\n```", "```php\n// Start auth check\n$user_can_read = array();\n$user_can_read = auth(AUTH_READ, AUTH_LIST_ALL, $userdata);\n\n```", "```php\n$allowed_forum_ids = array();\nforeach ( $user_can_read AS $forum_id => $privileges )\n{\nif ( !empty($privileges[‘auth_read’]) )\n{\n$allowed_forum_ids[] = $forum_id;\n}\n}\n\n```", "```php\n    // start SQL string\n    $sql = ‘ SELECT t.topic_title, t.topic_id, t.topic_replies, t.topic_type, t.topic_vote, p.post_id, p.post_time, pt.post_text, pt.bbcode_uid, f.forum_name, f.forum_id, u.username, u.user_id ‘;\n    $sql .= ‘ FROM ‘ . POSTS_TABLE . ‘ AS p ‘;\n    $sql .= ‘ LEFT JOIN ‘ . TOPICS_TABLE . ‘ AS t ON p.topic_id = t.topic_id ‘;\n    $sql .= ‘ LEFT JOIN ‘ . FORUMS_TABLE . ‘ AS f ON t.forum_id = f.forum_id ‘;\n    $sql .= ‘ LEFT JOIN ‘ . POSTS_TEXT_TABLE . ‘ AS pt ON p.post_id = pt.post_id ‘;\n    $sql .= ‘ LEFT JOIN ‘ . USERS_TABLE . ‘ AS u ON p.poster_id = u.user_id ‘;\n    $sql .= ‘ WHERE ‘;\n    $sql .= ‘ f.forum_id IN (‘. implode(‘,’, $allowed_forum_ids) .’)’;\n    $sql .= ‘ ORDER BY p.post_time DESC ‘;\n    $sql .= ‘ LIMIT 0, 15’;\n    // end SQL string\n\n    ```", "```php\n// execute query\n$result = $db->sql_query($sql);\nif ( !$result )\n{\n// check for errors while executing the query\nmessage_die(GENERAL_ERROR, ‘Cannot obtain latest post listing’, ‘’,\n__LINE__, __FILE__, $sql);\n}\n\n```", "```php\n// censored list\n$orig_word = $replacement_word = array();\nobtain_word_list($orig_word, $replacement_word);\n\n```", "```php\n// The loop through the results\nwhile( $row = $db->sql_fetchrow($result) ) {\n\n```", "```php\n// check for topic type - announcement or sticky and/or poll\nswitch ( $row[‘topic_type’] )\n{\ncase POST_ANNOUNCE:\n$topic_type = $lang[‘Topic_Announcement’] . \" \";\nbreak;\ncase POST_STICKY:\n$topic_type = $lang[‘Topic_Sticky’] . \" \";\ndefault:\n$topic_type = ‘’;\n}\nif ( $row[‘topic_vote’] )\n{\n$topic_type .= $lang[‘Topic_Poll’];\n}\n// end topic type check\n\n```", "```php\n// parse BBcode, smilies, filters, make links clickable\n$post_text = $row[‘post_text’];\n$post_text = bbencode_second_pass($post_text, $row[‘bbcode_uid’]);\n$post_text = smilies_pass($post_text);\n$post_text = make_clickable($post_text);\nif ( count($orig_word) )\n{\n$post_text = preg_replace($orig_word, $replacement_word, $post_text);\n$topic_title = preg_replace($orig_word, $replacement_word, $row[‘topic_title’]);\n}\n$post_text = nl2br($post_text);\n\n```", "```php\n// assign row block variables\n$template->assign_block_vars(\"row\",\narray(\n‘U_FORUM’ => append_sid(‘viewforum.’.$phpEx . \"?f=\" .\n$row[‘forum_id’]),\n‘FORUM_NAME’ => $row[‘forum_name’],\n‘U_TOPIC’ => append_sid(‘viewtopic.’.$phpEx . \"?t=\" .\n$row[‘topic_id’]),\n‘TOPIC_TYPE’ => (empty($topic_type)) ? \"\" : \"<strong>\" .\n$topic_type . \"</strong>\",\n‘TOPIC_TITLE’ => $topic_title,\n‘GOTO_PAGE’ => $goto_page,\n‘POSTER’ => $row[‘username’],\n‘U_POSTER’ => append_sid(‘profile.’.$phpEx . \"?mode=viewprofile&amp;u=\" . $row[‘user_id’]),\n‘IMG_LATEST_POST’ => ‘<a href=\"’ . append_sid(\"viewtopic.$phpEx?p=\" . $row[‘post_id’]) . \"#\" . $row[‘post_id’] . ‘\"><img src=\"img/’ . $images[‘icon_latest_reply’] . ‘\" border=\"0\" /></a> ‘,\n‘IMG_VIEW_POST’ => ‘<img src=\"img/’ . $images[‘icon_minipost’] . ‘\" border=\"0\" />’,\n‘POST_DATE_TIME’ => create_date($board_config[‘default_dateformat’], $row[‘post_time’], $board_config[‘board_timezone’]),\n‘POST_TEXT’ => $post_text,\n‘POST_ID’ => $row[‘post_id’],\n)\n);\n\n```", "```php\n// process is_mod_switch block\nif ( !empty($user_can_read[$row[‘forum_id’]][‘auth_mod’]) )\n{\n$template->assign_block_vars(\"row.is_mod_switch\",\narray(\n‘U_FORUM_MODCP’ => ‘modcp.’.$phpEx . \"?f=\" . $row[‘forum_id’] . \"&amp;sid=\" . $userdata[‘session_id’],\n‘L_MOD’ => $lang[‘Mod_CP’],\n)\n);\n}\n\n```", "```php\n// header, body and footer\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n$template->set_filenames(array(\n‘body’ => ‘whatsup.tpl’)\n);\n$template->assign_vars(\narray(\n‘FORUM’ => $lang[‘Forum’],\n‘TOPIC’ => $lang[‘Topic’],\n‘POSTER’ => $lang[‘Author’],\n)\n);\n$template->pparse(‘body’);\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n\n```", "```php\n<?php\ndefine(‘IN_PHPBB’, true);\n$phpbb_root_path = ‘./’;\ninclude($phpbb_root_path . ‘extension.inc’);\ninclude($phpbb_root_path . ‘common.’.$phpEx);\ninclude($phpbb_root_path . ‘includes/bbcode.’.$phpEx);\n// Start session management\n$userdata = session_pagestart($user_ip, PAGE_INDEX);\ninit_userprefs($userdata);\n// Start auth check\n$user_can_read = array();\n$user_can_read = auth(AUTH_READ, AUTH_LIST_ALL, $userdata);\n$allowed_forum_ids = array();\nforeach ($user_can_read AS $forum_id => $privileges)\n{\nif ( !empty($privileges[‘auth_read’]) )\n{\n$allowed_forum_ids[] = $forum_id;\n}\n}\n// end auth check\n// start SQL string\n$sql = ‘ SELECT t.topic_title, t.topic_id, t.topic_replies, t.topic_type, t.topic_vote, p.post_id, p.post_time, pt.post_text, pt.bbcode_uid, f.forum_name, f.forum_id, u.username, u.user_id ‘;\n$sql .= ‘ FROM ‘ . POSTS_TABLE . ‘ AS p ‘;\n$sql .= ‘ LEFT JOIN ‘ . TOPICS_TABLE . ‘ AS t ON p.topic_id = t.topic_id ‘;\n$sql .= ‘ LEFT JOIN ‘ . FORUMS_TABLE . ‘ AS f ON t.forum_id = f.forum_id ‘;\n$sql .= ‘ LEFT JOIN ‘ . POSTS_TEXT_TABLE . ‘ AS pt ON p.post_id = pt.post_id ‘;\n$sql .= ‘ LEFT JOIN ‘ . USERS_TABLE . ‘ AS u ON p.poster_id = u.user_id ‘;\n$sql .= ‘ WHERE ‘;\n$sql .= ‘ f.forum_id IN (‘. implode(‘,’, $allowed_forum_ids) .’)’;\n$sql .= ‘ ORDER BY p.post_id DESC ‘;\n$sql .= ‘ LIMIT 0, 15’;\n// end SQL string\n// execute query\n$result = $db->sql_query($sql);\nif ( !$result )\n{\n// check for errors while executing the query\nmessage_die(GENERAL_ERROR, ‘Cannot obtain latest post listing’, ‘’, __LINE__, __FILE__, $sql);\n}\n// censored list\n$orig_word = $replacement_word = array();\nobtain_word_list($orig_word, $replacement_word);\n// The loop through the results\nwhile( $row = $db->sql_fetchrow($result) )\n{\n// goto page list\n$replies = $row[‘topic_replies’];\n$topic_id = $row[‘topic_id’];\n// reuse from the search page\nif ( ( $replies + 1 ) > $board_config[‘posts_per_page’] )\n{\n$total_pages = ceil( ( $replies + 1 ) / $board_config[‘posts_per_page’] );\n$goto_page = ‘ [ <img src=\"img/’ . $images[‘icon_gotopost’] . ‘\" alt=\"’ . $lang[‘Goto_page’] . ‘\" title=\"’ . $lang[‘Goto_page’] . ‘\" />’ . $lang[‘Goto_page’] . ‘: ‘;\n$times = 1;\nfor($j = 0; $j < $replies + 1; $j += $board_config[‘posts_per_page’])\n{\n$goto_page .= ‘<a href=\"’ . append_sid(\"viewtopic.$phpEx?\" . POST_TOPIC_URL . \"=\" . $topic_id . \"&amp;start=$j\") . ‘\">’ . $times . ‘</a>’;\nif ( $times == 1 && $total_pages > 4 )\n{\n$goto_page .= ‘ ... ‘;\n$times = $total_pages - 3;\n$j += ( $total_pages - 4 ) * $board_config[‘posts_per_page’];\n}\nelse if ( $times < $total_pages )\n{\n$goto_page .= ‘, ‘;\n}\n$times++;\n}\n$goto_page .= ‘ ] ‘;\n}\nelse\n{\n$goto_page = ‘’;\n}\n// goto page list ends\n// check for topic type - announcement or sticky and/or poll\nswitch ( $row[‘topic_type’] )\n{\ncase POST_ANNOUNCE:\n$topic_type = $lang[‘Topic_Announcement’] . \" \";\nbreak;\ncase POST_STICKY:\n$topic_type = $lang[‘Topic_Sticky’] . \" \";\ndefault:\n$topic_type = ‘’;\n}\nif ( $row[‘topic_vote’] )\n{\n$topic_type .= $lang[‘Topic_Poll’];\n}\n// end topic type check\n// parse BBcode, smilies, filters, make links clickable\n$post_text = $row[‘post_text’];\n$post_text = bbencode_second_pass($post_text, $row[‘bbcode_uid’]);\n$post_text = smilies_pass($post_text);\n$post_text = make_clickable($post_text);\nif ( count($orig_word) )\n{\n$post_text = preg_replace($orig_word, $replacement_word, $post_text);\n$topic_title = preg_replace($orig_word, $replacement_word, $row[‘topic_title’]);\n}\n$post_text = nl2br($post_text);\n// assign row block variables\n$template->assign_block_vars(\"row\",\narray(\n‘U_FORUM’ => append_sid(‘viewforum.’.$phpEx . \"?f=\" . $row[‘forum_id’]),\n‘FORUM_NAME’ => $row[‘forum_name’],\n‘U_TOPIC’ => append_sid(‘viewtopic.’.$phpEx . \"?t=\" . $row[‘topic_id’]),\n‘TOPIC_TYPE’ => (empty($topic_type)) ? \"\" : \"<strong>\" . $topic_type . \"</strong>\",\n‘TOPIC_TITLE’ => $topic_title,\n‘GOTO_PAGE’ => $goto_page,\n‘POSTER’ => $row[‘username’],\n‘U_POSTER’ => append_sid(‘profile.’.$phpEx . \"?mode=viewprofile&amp;u=\" . $row[‘user_id’]),\n‘IMG_LATEST_POST’ => ‘<a href=\"’ . append_sid(\"viewtopic.$phpEx?p=\" . $row[‘post_id’]) . \"#\" . $row[‘post_id’] . ‘\"><img src=\"img/’ . $images[‘icon_latest_reply’] . ‘\" border=\"0\" /></a> ‘,\n‘IMG_VIEW_POST’ => ‘<img src=\"img/’ . $images[‘icon_minipost’] . ‘\" border=\"0\" />’,\n‘POST_DATE_TIME’ => create_date($board_config[‘default_dateformat’], $row[‘post_time’], $board_config[‘board_timezone’]),\n‘POST_TEXT’ => $post_text,\n‘POST_ID’ => $row[‘post_id’],\n)\n);\n// process is_mod_switch block\nif ( !empty($user_can_read[$row[‘forum_id’]][‘auth_mod’]) )\n{\n$template->assign_block_vars(\"row.is_mod_switch\",\narray(\n‘U_FORUM_MODCP’ => ‘modcp.’.$phpEx . \"?f=\" . $row[‘forum_id’] . \"&amp;sid=\" . $userdata[‘session_id’],\n‘L_MOD’ => $lang[‘Mod_CP’],\n)\n);\n}\n}\n// header, body and footer\ninclude($phpbb_root_path . ‘includes/page_header.’.$phpEx);\n$template->set_filenames(array(\n‘body’ => ‘whatsup.tpl’)\n);\n$template->assign_vars(\narray(\n‘FORUM’ => $lang[‘Forum’],\n‘TOPIC’ => $lang[‘Topic’],\n‘POSTER’ => $lang[‘Author’],\n)\n);\n$template->pparse(‘body’);\ninclude($phpbb_root_path . ‘includes/page_tail.’.$phpEx);\n?>\n\n```"]